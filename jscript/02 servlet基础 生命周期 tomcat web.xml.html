<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修02 servlet基础 生命周期 tomcat web.xml' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>02 servlet基础 生命周期 tomcat web.xml</center></div><div class='banquan'>原文出处:本文由博客园博主___mouM提供。<br/>
原文连接:https://www.cnblogs.com/aknife/p/10840028.html</div><br>
    <div id="2334-1557300814990" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">新建web项目 </span></div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">&ndash; new Web Project</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">&ndash; 选择：javaee 5.0</div>
<div id="3462-1557300856481" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">建包 </span></div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">&ndash; com.gzsxt.wang</div>
<div id="9323-1557300870607" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">新建class:FirstServlet </span></div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">&ndash; 继承：HttpServlet（javax.servlet.http.HttpServlet）</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-weight: bold; background-color: #fcbbb9;">重写service方法(两个service方法中选择带 HttpServletRequest、HttpServletResponse参数 的) </span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="4076-1557300817310" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 32px; font-weight: bold;">&bull; 在web.xml中配置写好的servlet</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&ndash; 配置Servlet作用有两个：</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">1. 让服务器知道这个Servlet类的存在。</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">2. 让URL和Servlet匹配，从而请求服务器上的servlet</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">
<div class="cnblogs_code">
<pre><code><br />&lt;servlet&gt;
    &lt;servlet-name&gt;first&lt;/servlet-name&gt;  
    &lt;servlet-class&gt;com.gzsxt.wang.FirstServlet&lt;/servlet-class&gt;
 &lt;/servlet&gt;   
&lt;servlet-mapping&gt;  
    &lt;servlet-name&gt;first&lt;/servlet-name&gt; 
    &lt;url-pattern&gt;/111&lt;/url-pattern&gt; 
&lt;/servlet-mapping&gt; </pre>
</div>
<p>&nbsp;</p>
<div id="8294-1557301069799" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 32px; font-weight: bold;">安装和启动tomcat服务器</span></div>
<div id="4117-1557301072325" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 28px; font-weight: bold;">&bull; 将TOMCAT压缩包解压。</span></div>
<div id="9840-1557301092777" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">&bull; 设置环境变量：</span></div>
<div>
<ul style="margin: 0px;">
<li style="text-align: left; line-height: 1.75; font-size: 14px; list-style-position: inside; white-space: pre-wrap; word-break: break-word; list-style-type: disc; font-family: 'Microsoft YaHei', STXihei; color: #000000; font-weight: normal; font-style: normal; text-decoration: none;">&ndash; JAVA_HOME设置</li>
</ul>
</div>
<div id="2996-1557301099190" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">&bull; 进入TOMCAT子目录bin，点击：startup.bat，启动tomcat. </span></div>
<div id="1360-1557301100609" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">&bull; 访问：http://localhost:8080/ &ndash; 如果出现tomcat主页，则安装成功。 </span></div>
<div id="1340-1557301101760" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">&bull; 手动发布项目： </span></div>
<div>
<ul style="margin: 0px;">
<li style="text-align: left; line-height: 1.75; font-size: 14px; list-style-position: inside; white-space: pre-wrap; word-break: break-word; list-style-type: disc; font-family: 'Microsoft YaHei', STXihei; color: #000000; font-weight: normal; font-style: normal; text-decoration: none;">&ndash; 在tomcat子目录:webapps中新建一个文件夹：abc</li>
<li style="text-align: left; line-height: 1.75; font-size: 14px; list-style-position: inside; white-space: pre-wrap; word-break: break-word; list-style-type: disc; font-family: 'Microsoft YaHei', STXihei; color: #000000; font-weight: normal; font-style: normal; text-decoration: none;">&ndash; 将web项目的WebRoot目录中所有的内容copy到abc中.</li>
<li style="text-align: left; line-height: 1.75; font-size: 14px; list-style-position: inside; white-space: pre-wrap; word-break: break-word; list-style-type: disc; font-family: 'Microsoft YaHei', STXihei; color: #000000; font-weight: normal; font-style: normal; text-decoration: none;">&ndash; 重启tomcat</li>
</ul>
</div>
<div id="1119-1557301117207" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">&bull; 访问刚刚写好的Servlet： </span></div>
<div>
<ul style="margin: 0px;">
<li style="text-align: left; line-height: 1.75; font-size: 14px; list-style-position: inside; white-space: pre-wrap; word-break: break-word; list-style-type: disc; font-family: 'Microsoft YaHei', STXihei; color: #000000; font-weight: normal; font-style: normal; text-decoration: none;">&ndash; http://localhost:8080/abc/one</li>
<li style="text-align: left; line-height: 1.75; font-size: 14px; list-style-position: inside; white-space: pre-wrap; word-break: break-word; list-style-type: disc; font-family: 'Microsoft YaHei', STXihei; color: #000000; font-weight: normal; font-style: normal; text-decoration: none;">&ndash; http://127.0.0.1:8080/abc/one</li>
<li style="text-align: left; line-height: 1.75; font-size: 14px; list-style-position: inside; white-space: pre-wrap; word-break: break-word; list-style-type: disc; font-family: 'Microsoft YaHei', STXihei; color: #000000; font-weight: normal; font-style: normal; text-decoration: none;">&ndash; http://自己机器的ip:8080/abc/one</li>
</ul>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="5050-1557301072421" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 28px; font-weight: bold;"> servlet 生命周期</span></div>
<div id="6012-1557301072455" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;"> 1.载入并初始化</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">调用init()方法<span>，<span style="background-color: #fcbbb9;">只执行一次</span></span></div>
<div id="9566-1557400259502" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;"> 2.运行</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">当用户请求该servlet时，服务器创建一个新的线程，调用servlet的service方法--&gt;父类的service方法--&gt;<span style="font-weight: bold; background-color: #fcbbb9;">父类的doPost/父类doGet方法</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1)当执行父类的doGet/doPost时，会报405错误。解决办法：在子类中重写doGet/doPost</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2)尽量不要在servlet中使用成员变量</div>
<div id="8010-1557400259502" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;"> 3.销毁</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">在服务器关闭之前，调用destroy()方法，<span style="background-color: #fcbbb9;">只执行一次</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1)部署项目</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1)myeclipse会将java代码编译过后的class文件，放在WebRoot/WEB-INF/classes文件夹下</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2)只要将数据放在webapps的某个目录（项目名）下，就可以通过浏览器访问了！</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2)启动服务器</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1)运行bin/startup.bat</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">3)集成tomcat</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1)将tomcat配置在myeclipse中：window--&gt;prefrences--&gt;输入&ldquo;server&rdquo;，在列表找tomcat--&gt;将tomcat 8.x改为enabled --&gt; 配置Tomcat Home Directory，在window找到Tomcat安装路径即可 --&gt;ok</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2)将项目部署在tomcat中：右键tomcat 8.x --&gt;add Deployment--&gt;在project选择要部署的项目名--&gt;finish</div>
</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;"><img src="./images/02 servlet基础 生命周期 tomcat web.xml0.png" alt="" /></div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">3)启动：右键tomcat 8.x --&gt; run Server</div>
</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;"><img src="./images/02 servlet基础 生命周期 tomcat web.xml1.png" alt="" /></div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">
<div id="1315-1557301072785" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 28px; font-weight: bold;">1.&lt;welcome-file-list&gt; 欢迎页的列表</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&lt;welcome-file&gt; 欢迎页</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">表示，当用户访问了一个目录，而非一个html页面(或其他)时，会默认来welcome中寻找欢迎页来显示，如果没有该欢迎页时，会显示404页面或WebRoot目录的列表（取决于listings的值）</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2.&lt;load-on-startup&gt; servlet启动时加载</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">如果在&lt;servlet&gt;标签下配置了该标签，则表示servlet将会在服务器启动时，加载servlet，并调用servlet的init()方法</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">/*</span><span style="color: #008000;">
     * servlet 生命周期 1.载入并初始化 init()方法，只执行一次 2.运行 每当用户发出一次请求时，调用service()方法。
     * 1)当用户请求时
     * ，服务器会创建一个线程，来调用servlet的service--&gt;父类service--&gt;父类的doGet/doPost方法：报405错
     * 解决办法：重写doPost方法或doGet方法 
     * 2)servlet是单例（设计模式之单例模式）的,节约内存。不需要每次请求创建对象去处理。
     * 
     * 3.销毁 destroy()方法，只执行一次
     </span><span style="color: #008000;">*/</span>

    <span style="color: #0000ff;">int</span> number = 0<span style="color: #000000;">;

    @Override
    public </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> init() throws ServletException {
        System.out.println(</span>"servlet初始化！"<span style="color: #000000;">);

    }

    @Override
    protected </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        System.out.println(</span>"子类的doGet方法"<span style="color: #000000;">);
    }

    @Override
    protected </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        System.out.println(</span>"子类的doPost方法"<span style="color: #000000;">);
    }

    </span><span style="color: #008000;">/*</span><span style="color: #008000;">
     * @Override protected void service(HttpServletRequest req,
     * HttpServletResponse resp) throws ServletException, IOException {
     * System.out.println("servlet运行了！！！！"); number++;
     * System.out.println(number);
     * 
     * //super.service(req, resp); //调用父类的service方法 }
     </span><span style="color: #008000;">*/</span><span style="color: #000000;">

    @Override
    public </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> destroy() {
        System.out.println(</span>"servlet销毁"<span style="color: #000000;">);
    }</span></pre>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="background-color: #fcbbb9;">子类一旦重写父类的方法之后只会调用子类的方法 ,而不会调用父类的方法</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="9410-1557406481140" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">默认的欢迎文件列表</span></div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">apache-tom--&gt;conf--&gt;web.xml打开底部设置</div>
</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">
<div class="cnblogs_code">
<pre><code>&lt;welcome-file-list&gt;
        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
        &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;
        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;</pre>
</div>
<p>&nbsp;</p>
<div id="5584-1557406954263" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">在启动时加载</span></div>
</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">
<div class="cnblogs_code">
<pre><code>&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</pre>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">数字小的先被加载</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">为负数或者其他字符将不被加载,直到被调用时--懒汉式</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><a href="http://127.0.0.1:8080/first_web/aaa"><span style="color: #003884; text-decoration: underline;">http://127.0.0.1:8080/first_web/aaa</span></a></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">去除aaa</div>
</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">
<div class="cnblogs_code">
<pre><code> &lt;welcome-file-list&gt;
    &lt;welcome-file&gt;aaa&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;</pre>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">去除first_web</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">apache-tomcat --&gt;webapps--&gt;修改first_web文件名为ROOT</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">去除8080</div>
<div style="white-space: pre-wrap; text-align: left; text-indent: 28px; line-height: 1.75; font-size: 14px;">apache-tom--&gt;conf--&gt;server.xml</div>
<div style="white-space: pre-wrap; text-align: left; text-indent: 28px; line-height: 1.75; font-size: 14px;">
<div class="cnblogs_code">
<pre><code>&lt;Connector port="8080" protocol="HTTP/1.1"<span style="color: #000000;">
               connectionTimeout</span>="20000"<span style="color: #000000;">
               redirectPort</span>="8443" /&gt;</pre>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">修改port为80</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
</div>
</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-indent: 28px; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>