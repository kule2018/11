<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修04 存在中文乱码_请求转发.重定向_路径问题' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>04 存在中文乱码_请求转发.重定向_路径问题</center></div><div class='banquan'>原文出处:本文由博客园博主___mouM提供。<br/>
原文连接:https://www.cnblogs.com/aknife/p/10849730.html</div><br>
    <div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">一、客户端请求服务器的数据有乱码</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.get方式请求</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">①修改tomcat/conf/server.xml，在&lt;Connector&gt; 标签中添加属性useBodyEncodingForURI="true"</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">②在获取请求数据之前，设置 request.setCharacterEncoding("utf-8");</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2.post方式请求</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">在获取请求数据之前，设置 request.setCharacterEncoding("utf-8");</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">二、服务器返回给客户端的数据有乱码</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">
<div class="cnblogs_code">
<pre><code>    public <span style="color: #0000ff;">void</span><span style="color: #000000;"> doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
request.setCharacterEncoding(</span>"utf-8"<span style="color: #000000;">);
        response.setContentType(</span>"text/html;charset=utf-8"<span style="color: #000000;">);
}</span></pre>
</div>
<p>&nbsp;</p>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">
<h2 style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 18pt;">请求转发</span></h2>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getRequestDispathcer("path").forward(reqeust,response);</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">请求转发的特点：</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.地址栏没有发生变化</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2.用户只发起了一次请求</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">3.请求转发只能转发本服务器以内的资源</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">4.由于请求是同一个对象，所以可以利用该request做servlet之间数据的传输</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<h1 style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 18pt;">重定向</span></h1>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">response.sendRedirect("path")</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">重定向的特点：</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.地址栏会发生改变</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2.用户发起了两次请求</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">3.重定向可以访问服务器以外的资源</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">4.重定向由于请求多次的，所以HttpServletRequest不是同一个对象，故不能使用它传递数据</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;
<div class="cnblogs_code">
<pre><code>public <span style="color: #0000ff;">void</span><span style="color: #000000;"> doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        
        </span><span style="color: #008000;">//</span><span style="color: #008000;">接受用户的用户名和密码</span>
        String uname = request.getParameter("uname"<span style="color: #000000;">);
        String passwd </span>= request.getParameter("passwd"<span style="color: #000000;">);
        
        </span><span style="color: #008000;">//</span><span style="color: #008000;">验证用户名和密码</span>
        <span style="color: #0000ff;">if</span>(uname.equals("zhangsan") &amp;&amp; passwd.equals("1234"<span style="color: #000000;">)){
            </span><span style="color: #008000;">//</span><span style="color: #008000;">去主页操作</span>
            <span style="color: #008000;">//</span><span style="color: #008000;">请求转发</span>
            request.getRequestDispatcher("index.jsp"<span style="color: #000000;">).forward(request, response);
            
        }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
            </span><span style="color: #008000;">//</span><span style="color: #008000;">跳回登录页面，继续登录</span>
            <span style="color: #008000;">//</span><span style="color: #008000;">重定向</span>
            response.sendRedirect("login.html"<span style="color: #000000;">);
        }
  }</span></pre>
</div>
<p>&nbsp;</p>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">
<div class="cnblogs_code">
<pre><code>public <span style="color: #0000ff;">void</span><span style="color: #000000;"> doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
            request.setAttribute(</span>"aaa", "bbb"<span style="color: #000000;">);
            request.getRequestDispatcher(</span>"des"<span style="color: #000000;">).forward(request, response);
            
     
    }</span></pre>
</div>
<p>&nbsp;</p>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">
<div class="cnblogs_code">
<pre><code>public <span style="color: #0000ff;">void</span><span style="color: #000000;"> doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        
        request.setAttribute(</span>"aaa", "ccc"<span style="color: #000000;">);
        
        response.sendRedirect(</span>"dest"<span style="color: #000000;">);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">重定向的特点：</span>
        <span style="color: #008000;">//</span><span style="color: #008000;">1.地址栏会发生改变</span>
        <span style="color: #008000;">//</span><span style="color: #008000;">2.用户发起了两次请求</span>
        <span style="color: #008000;">//</span><span style="color: #008000;">3.重定向可以访问服务器以外的资源</span>
        <span style="color: #008000;">//</span><span style="color: #008000;">4.重定向由于请求多次的，所以HttpServletRequest不是同一个对象，故不能使用它传递数据</span>
    }</pre>
</div>
<p>&nbsp;</p>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">
<div id="5345-1557582775876" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 32px; font-weight: bold;">路径问题</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">一、分析</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.找出一个url中的项目名称</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">项目名称前面的&ldquo;/&rdquo;是服务器地址，例：http://127.0.0.1:8080/</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">项目名称后面的&ldquo;/&rdquo;是项目地址，例：http://127.0.0.1:8080/proejctname/</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">二、判断</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.判断一次请求行为是谁发出的</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">如果是浏览器行为，则表示项目名称前面的&ldquo;/&rdquo;，即服务器地址</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">如果是服务器内部行为，则表示项目名称后面的&ldquo;/&rdquo;，即项目地址</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.服务器内部行为：请求转发</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2.浏览器行为：重定向、页面中form提交、页面中a标签、js中通过location.href定位一个路径</div>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>