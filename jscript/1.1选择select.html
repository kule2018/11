<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修1.1选择select' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>1.1选择select</center></div><div class='banquan'>原文出处:本文由博客园博主xiaoruoji提供。<br/>
原文连接:https://www.cnblogs.com/selfdef/p/11946716.html</div><br>
    <h1 id="一核心core">一、核心（Core）</h1>
<h2 id="选择">1.1选择</h2>
<h3 id="d3.selectselector">1.1.1 d3.select(selector)</h3>
<p>​ 选择第一个与指定字符串selector匹配的元素，如果没有就返回空。</p>
<p>例如：</p>
<pre><code><code>&lt;table&gt;
            &lt;tr&gt;
                &lt;td&gt;苹果&lt;/td&gt; 
                &lt;td&gt;香蕉&lt;/td&gt;
                &lt;td&gt;西瓜&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;桃子&lt;/td&gt; 
                &lt;td id=&quot;test&quot;&gt;草莓&lt;/td&gt;
                &lt;td&gt;菠萝&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;

        &lt;table&gt;
            &lt;tr&gt;
                &lt;td&gt;可乐&lt;/td&gt;
                &lt;td&gt;牛奶&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;绿茶&lt;/td&gt;
                &lt;td class=&quot;test&quot;&gt;啤酒&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;</code></pre>
<p>下列选择器的结果：</p>
<pre class="js"><code>d3.select(&#39;td&#39;)     //选择第一个td标签
d3.select(&#39;#test&#39;)  //选择第一个ID名为&quot;test&quot;的元素
d3.select(&quot;.test&quot;)  //选择第一个类名为&quot;test&quot;的元素</code></pre>
<h3 id="d3.selectnode">1.1.2 d3.select(node)</h3>
<p>​ 选择指定的结点，通常用于在事件监听器中使用d3.select(this)选择当前节点。</p>
<p>例如，上面的表格，想要在单机body时设置选中元素的字体颜色变为绿色，可以这样</p>
<pre class="javascript"><code>d3.select(document.body).on(&#39;click&#39;,function(){
    console.log(d3.select(this));
    d3.select(this).style(&quot;color&quot;,&quot;green&quot;);
})</code></pre>
<h3 id="d3.selectallselector">1.1.3 d3.selectAll(selector)</h3>
<p>​ 选择所有与指定字符串相匹配的元素，结果为一个数组，没有匹配到元素的话，返回空。</p>
<p>例如：</p>
<pre class="js"><code>    d3.select(&#39;tr&#39;).selectAll(&#39;td&#39;).style(&#39;color&#39;,&#39;white&#39;).style(&#39;background-color&#39;,&#39;orange&#39;)</code></pre>
<h3 id="d3.selectallnodes">1.1.4 d3.selectAll(nodes)</h3>
<p>​ 选择指定的结点数组</p>
<p>例如：</p>
<pre class="js"><code>d3.selectAll(this.childNodes)   //在一个事件监听器中，选择当前元素的所有子元素
d3.selectAll(document.links)    //选择文档中所有的超链接</code></pre>
<h3 id="selection.attrnamevalue">1.1.5 selection.attr(name[value])</h3>
<p>​ 给选中的对象设置属性，value可以是常数，也可以是函数，函数的时候有两个参数（data,index),(数据，索引)可以根据函数返回值给每个元素设置参数。</p>
<p>例如：</p>
<pre class="js"><code>//创建矩形
            rects=svg.selectAll(&quot;rect&quot;)
                    .data(dataset)
                    .enter()
                    .append(&quot;rect&quot;)
                    .attr({ //一次设置多个属性值
                        &quot;x&quot;:(d,i)=&gt;{ return 20+i*160/dataset.length;},  //使用函数设置属性值
                        &quot;y&quot;:d=&gt;20,
                        &quot;width&quot;:20,
                        &quot;height&quot;:100
                    })
                    .attr(&quot;fill&quot;,&quot;steelblue&quot;);  //矩形颜色</code></pre>
<h3 id="selection.classednamevalue">1.1.6 selection.classed(name[value])</h3>
<p>​ 为选择的元素添加，移出或者切换CSS类；value可以是函数，函数时两个参数（data，index），index是当前data在selection中的索引，函数将返回bool值；value为true时，绑定css类，false时移出css类。</p>
<p>例如：将rects索引为奇数的矩形填充为紫色，偶数的填充为番茄红色。</p>
<pre class="js"><code>&lt;style type=&quot;text/css&quot;&gt;
            .even{
                fill:purple;            
            }
            .odd{
                fill:tomato;
            }
            .stroke{
                stroke:deepskyblue;
                stroke-width:5;
            }
            .opacity{
                opacity:0.5;
            }
&lt;/style&gt;

rects.classed({
    &quot;odd&quot;:function(d,i){ return i%2==0?true:false;},
    &quot;even&quot;:function(d,i){ return i%2==0?false:true;}
});</code></pre>
<p>​ 然后，给这些矩形绑定点击事件。在点击鼠标是判断这个矩形绑定的css类，根据这个判断结果给这个矩形添加stroke类，或者取消stroke类。</p>
<pre class="js"><code>rects.on(&#39;click&#39;,function(){
    let rect = d3.select(this);
    rect.classed(&#39;stroke opacity&#39;)?rect.classed(&#39;stroke opacity&#39;,false):rect.classed(&#39;stroke opacity&#39;,true);
})</code></pre>
<h3 id="selection.stylenamevaluepriority">1.1.7 selection.style(name[value[priority]])</h3>
<p>​ 返回选择集中第一个非空元素中名为name的样式值，或者设置样式，可以同时设置多个样式，也可以使用函数设置不同的样式。</p>
<p>例如：为矩形设置不同的style</p>
<pre class="js"><code>rects.style({
    &quot;stroke-width&quot;:5,
    &quot;stroke&quot;:(d,i)=&gt;{
        return `rgb(${10*d},${10*(25-d)},${d})`
    }
})</code></pre>
<h3 id="selection.propertynamevalue">1.1.8 selection.property(name,[value])</h3>
<p>​ 为html中一些特殊的内置属性设置值，如表单中的value属性，复选框的checked属性，用法与前面的相同。</p>
<p>例如：为input输入框设置默认值，为复选框设置默认值</p>
<pre class="js"><code>d3.select(&#39;#text-id&#39;).property(&#39;value&#39;, 123456);
d3.select(&quot;#check-box&quot;).property(&#39;checked&#39;,true);</code></pre>
<h3 id="selection.textvalue">1.1.9 selection.text([value])</h3>
<p>​ 返回第一个非空元素的文本，或者为所有元素设置文本。</p>
<h3 id="selection.htmlvalue">1.1.10 selection.html([value])</h3>
<p>​ 设置内部html内容为value，value可以是函数，用法同上，也可以为空，为空时，返回当前的html内容。</p>
<p>例如：在原来的基础上增加新的内容</p>
<pre class="js"><code>d3.select(&#39;body&#39;).html(function(d,i){
    let old = d3.select(&#39;this&#39;).html()
    return old+&quot;&lt;h1&gt;HI&lt;/h1&gt;&quot;;
})</code></pre>
<h3 id="selection.appendname">1.1.11 selection.append(name)</h3>
<p>​ 当前选择集的最后添加新的元素，返回的集合中包含新添加的元素。</p>
<p>例如：添加一个矩形</p>
<pre class="js"><code>let svg = d3.select(&#39;body&#39;).append(&#39;svg&#39;);
svg.append(&#39;rect&#39;)
    .attr({
    x:10,
    y:10,
    height:100,
    width:40,
    fill:&#39;orange&#39;
});</code></pre>
<h3 id="selection.insertnamebefore">1.1.12 selection.insert(name[before])</h3>
<p>​ 在before前面添加元素，如果没有before的话，用法和append相同</p>
<p>例如：在rect前面添加circle</p>
<pre class="js"><code>svg.insert(&#39;rect&#39;);
svg.insert(&#39;circle&#39;,&#39;rect&#39;);
svg.insert(&#39;circle&#39;,(d,i)=&gt;{&quot;rect&quot;})</code></pre>
<h3 id="selection.remove">1.1.13 selection.remove()</h3>
<p>​ 将选择的元素删除，并返回。</p>
<p>例如：将上面的circle删除</p>
<pre class="js"><code>let removed = svg.select(&#39;circle&#39;).remove();
console.log(removed);
</code></pre>
<h3 id="selection.datavalueskey">1.1.14 selection.data(values[key])</h3>
<p>​</p>
<h3 id="selection.datumvalue">1.1.15 selection.datum([value])</h3>
<p>​ 不绑定value，则返回第一个非空元素绑定的数据，绑定了value则将选中的元素值更改为value。</p>
<p>例如：</p>
<pre class="js"><code>d3.selectAll(&quot;text&quot;).datum(&quot;aaaa&quot;).text(d=&gt;d)   //将所有text修改为&quot;aaaa&quot;</code></pre>
<p>​ 还可以访问来自HTML5自定义数据属性，例如：</p>
<pre><code><code>&lt;div data-username=&quot;D3 user&quot;&gt;&lt;/div&gt;
&lt;div data-username=&quot;D3 fans&quot;&gt;&lt;/div&gt;</code></pre>
<pre class="js"><code>    d3.selectAll(&quot;div&quot;)
        .datum(function() { return this.dataset; }) //获取HTML5自定义数据属性
        .text(function(d){ return d.username;});    //使用获取的数据设置文本的值</code></pre>
<h3 id="selection.sortcomparator">1.1.16 selection.sort(comparator)</h3>
<p>​ 排序，</p>
<p>例如：</p>
<pre class="js"><code>svg.selectAll(&quot;text&quot;).sort((a,b)=&gt;a.value-b.value)  //根据计算结果的正负来排序，为正的话，a在前。</code></pre>
<h3 id="selection.ontypelistenercapture">1.1.17 selection.on(type[listener[capture]])</h3>
<p>​ 绑定或者移除事件监听器。type是事件名，listener是函数，有d，i两个参数。</p>
<p>例如：</p>
<pre class="js"><code>d3.select(&quot;button&quot;).on(&quot;click&quot;,function(){
    d3.select(&quot;svg&quot;).selectAll(&quot;text&quot;).text(function(d,i){
        return &quot;new :&quot;+d*3;
    })
})</code></pre>
<h3 id="d3.event">1.1.18 d3.event</h3>
<p>​ 全局对象，是一个DOM事件，实现了标准事件字段，比如：时间戳、键代码等。</p>
<p>例如：不过鼠标位置相对于父容器的偏移坐标。</p>
<pre class="js"><code>var pos = &quot;d3.event pos&quot;+d3.event.offsetX + &#39;,&#39; + d3.event.offsetY;</code></pre>
<h3 id="selection.transition">1.1.19 selection.transition()</h3>
<p>​ 为选择集开启一段过度动画。</p>
<p>例如：</p>
<pre class="js"><code>d3.select(&#39;svg&#39;).append(&#39;circle&#39;).attr({
    cx:100, cy:100, r:40,
    fill:&#39;orange&#39;
});

d3.selct(&#39;svg&#39;).select(&#39;circle&#39;).transition().attr(&quot;fill&quot;,&quot;blue&quot;);</code></pre>
<h3 id="selection.callfunctionargument">1.1.20 selection.call(function[argument])</h3>
<p>​ 调用指定的函数，使用这种方式调用函数，方便链式调用。</p>
<p>需要注意的是，function的第一个参数。</p>
<p>例如：</p>
<pre class="js"><code>function    fill(ele,fill){
    this.style(&quot;fill&quot;,fill);
}

rect.call(fill,&quot;orange&quot;);
circle.call(fill,&quot;tomato&quot;);</code></pre>
<h3 id="selection.empty">1.1.21 selection.empty()</h3>
<p>​ 当前选择为空的话，返回true。</p>
<h3 id="selection.node">1.1.22 selection.node()</h3>
<p>​ 返回当前选择的第一个非空的元素。如果为空，返回null。</p>
<h3 id="selection.size">1.1.23 selection.size()</h3>
<p>​ 返回在当前选择的总个数。</p>
<h2 id="过渡">1.2 过渡</h2>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>