<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修13 个 NPM 快速开发技巧' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>13 个 NPM 快速开发技巧</center></div><div class='banquan'>原文出处:本文由博客园博主Fundebug提供。<br/>
原文连接:https://www.cnblogs.com/fundebug/p/13-npm-skills.html</div><br>
    <p><strong>摘要：</strong> 玩转npm。</p>
<ul>
<li>作者：前端小智</li>
<li>原文：<a href="https://segmentfault.com/a/1190000019607202">13 个 npm 快速开发技巧</a></li>
</ul>
<p><strong><a href="https://www.fundebug.com/">Fundebug</a>经授权转载，版权归原作者所有。</strong></p>
<p><strong>为了保证的可读性，本文采用意译而非直译。</strong></p>
<p>每天，数以百万计的开发人员使用 <code>npm</code> 或 <code>yarn</code> 来构建项目。运行<code>npm init</code>或<code>npx create- response -app</code>等命令几乎构建JS项目的首选方式，无论是为客户端或服务器端，还是桌面应用程序。</p>
<p>但是<code>npm</code>不仅仅是初始化项目或安装包。在本文中，我们将会介绍 <code>npm</code> 的13个技巧来最大限度地利用<code>npm</code>:从简单的快捷方式到自定义脚本。</p>
<p>由于我们中的许多人每天都使用<code>npm</code>，从长远来看，即使节省少量的时间也会产生显著的影响。这些技巧是针对初学者和中级开发人员的，但是即使您是一位经验丰富的开发人员，我希望你仍然能够找到一到两个你以前没有遇到过的特性。</p>
<h3 id="主要内容">主要内容</h3>
<ol>
<li>学习基本快捷方式</li>
<li>设置默认npm init属性</li>
<li>让脚本跨平台兼容</li>
<li>并行运行脚本</li>
<li>在不同的目录中运行脚本</li>
<li>延迟运行脚本直到端口准备就绪</li>
<li>列出并选择可用脚本</li>
<li>运行前后脚本</li>
<li>控制应用程序版本</li>
<li>从命令行编辑package.json</li>
<li>自动设置和打开你的github库</li>
<li>自定义<code>npm init</code>脚本</li>
<li>使用自定义npm init脚本将你的第一个 Commit 提交到 GitHub</li>
</ol>
<h3 id="学习基本快捷方式">1. 学习基本快捷方式</h3>
<p>我们从最基本的开始,学习最常见的npm快捷方式从长远来将会节省很多时间。</p>
<ul>
<li>安装  —  常规：<code>npm install</code>，简写：<code>npm i</code>。</li>
<li>测试  —  常规：<code>npm test</code>，简写：<code>npm t</code>。</li>
<li>帮助  —  常规：<code>npm --help</code>，简写：<code>npm -h</code>。</li>
<li>全局标志 —  常规：<code>--global</code>，简写：<code>-g</code>。</li>
<li>保存为开发依赖 - 常规： <code>- save-dev</code>，简写：<code>-D</code>。</li>
<li>npm init 默认值 - 常规：<code>npm init --yes</code> 或 <code>npm init --force</code>，简写：<code>npm init -y</code> 或 <code>npm init -f</code></li>
</ul>
<p>我们知道使用<code>-save</code>或<code>-S</code>来保存包，但现在这是个已经是默认值。要安装一个包而不保存它，可以使用 <code>——no-save</code>标志。</p>
<h4 id="不太常见的快捷键">不太常见的快捷键</h4>
<p>还有一些不常见的快捷方式，如下：</p>
<ul>
<li>安装包信息将加入到<code>optionalDependencies</code>（可选阶段的依赖）- 常规：<code>--save-optional</code>， 简写：<code>-O</code>。</li>
<li>精确安装指定模块版本 - 常规：<code>--save-optional</code>， 简写：<code>-O</code>。</li>
</ul>
<p>如果需要在本地保存一个npm包，或者通过单个文件下载选择一组可用的包，可以使用<code>--save-bundle</code>或<code>-B</code>将它们捆绑在一起，并使用<code>npm pack</code>获得捆绑包。</p>
<h4 id="根的快捷方式">根的快捷方式</h4>
<p><code>.</code> 符号通常用于表示应用程序的根目录，npm术语中的应用程序入口点，即<code>package.json</code>中指定为“<code>main</code>”的值</p>
<pre><code><code>{
  &quot;main&quot;: &quot;index.js&quot;
}</code></pre>
<p>这个快捷方式也可以用于像<code>npx create-react-app .</code> 这样的命令。因此，可以运行<code>npx create-react-app .</code>，而不是使用 <code>npx create-react-app my-app</code> 创建一个新的<code>my-app</code>目录。</p>
<h3 id="设置默认npm-init属性">2. 设置默认npm init属性</h3>
<p>当运行<code>npm init</code>开始一个新项目时，你可能会发现自己一次又一次地输入配置细节。假如，你可能是项目的主要负责人。有时为了节省时间，可以为这些字段设置默认值，如下所示：</p>
<pre class="bash"><code>npm config set init.author.name &quot;Joe Bloggs&quot;
npm config set init.author.email &quot;JoebLoggs@gmail.com&quot;
npm config set init.author.url &quot;Joebloggs.com&quot;
npm config set init.license &quot;MIT&quot;</code></pre>
<p>要检查是否正确添加了这些属性，在终端输入 <code>npm config edit</code>查看配置文件信息。当然也j可以通过直接在打开的配置文件编辑信息。 如果要编辑全局<code>npm</code>设置，使用<code>npm config edit -g</code>。</p>
<p>要重新初始化默认设置，可以使用以下脚本。第一行用空字符串替换配置文件，第二行用默认设置重新填充配置文件。</p>
<pre class="bash"><code>echo &quot;&quot; &gt; $(npm config get userconfig)
npm config edit</code></pre>
<p>上面的脚本将重置用户默认值，下面的脚本将重置全局默认值</p>
<pre class="bash"><code>echo &quot;&quot; &gt; $(npm config get globalconfig)
npm config --global edit</code></pre>
<h3 id="让脚本跨平台兼容">3. 让脚本跨平台兼容</h3>
<p>任何在命令行上运行的代码都有兼容性问题的风险，特别是在Windows和基于unix的系统(包括Mac和Linux)之间。如果你只处理特定的项目，那么这不是问题，但是在许多情况下，跨平台兼容性很有必要的:任何开放源码或协作项目，以及示例和教程项目，都应该能够工作，而不管操作系统是什么。</p>
<p>谢天谢地，解决方案很简单。有几个选项可供选择，但效果最好的是<code>cross-env</code>。使用<code>npm i -D cross-env</code>将其作为开发依赖项安装。然后在任何环境变量之前包括关键字<code>cross-env</code>，就像这样：</p>
<pre><code><code>{
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack --config build/wepack.config.js&quot;
  }
}</code></pre>
<p><a href="https://www.npmjs.com/package/cross-env">cross-env是</a> 实现跨平台兼容性的最无缝的方法，但还有其他两个流行的工具，它们可以帮助实现跨平台兼容性：</p>
<ul>
<li><a href="https://www.npmjs.com/package/rimraf">rimraf</a> 可以安装在全球运行跨平台脚本</li>
<li><a href="https://www.npmjs.com/package/shelljs">ShellJS</a> 是Unix shell命令在Node.js API上的可移植实现。</li>
</ul>
<h3 id="并行运行脚本">4. 并行运行脚本</h3>
<p>可以使用<code>&amp;&amp;</code>来依次运行两个或多个进程。但是并行运行脚本呢?为此，我们可以从各种npm包中进行选择。<a href="https://www.npmjs.com/package/concurrently">concurrent</a> 和 <a href="https://www.npmjs.com/package/concurrently">npm-run-all</a> 是最流行的解决方案。</p>
<p>首先通过 npm i -D concurrently 安装开发依赖。然后按照以下格式将其添加到脚本中：</p>
<pre><code><code>{
  &quot;start&quot;: &quot;concurrently \&quot;command1 arg\&quot; \&quot;command2 arg\&quot;&quot;
}</code></pre>
<h3 id="在不同的目录中运行脚本">5. 在不同的目录中运行脚本</h3>
<p>有时，在不同的文件夹中拥有一个包含多个<code>package.json</code>文件的应用程序。 从根目录访问这些脚本会很方便，而不是每次要运行脚本时导航到不同的文件夹，有两种方法可以执行此操作。</p>
<p>第一种是手动 cd 并运行对应的命令：</p>
<pre class="bash"><code>cd folder &amp;&amp; npm start &amp;&amp; cd ..</code></pre>
<p>但还有一个更优雅的解决方案，即使用<code>--prefix</code>标志指定路径:</p>
<pre class="bash"><code>npm start --prefix path/to/your/folder</code></pre>
<p>下面是一个工作应用程序中此解决方案的示例，我们希望在前端(在客户机目录中)和后端(在服务器目录中)运行 <code>npm start</code>。</p>
<pre><code><code>&quot;start&quot;: &quot;concurrently \&quot;(npm start --prefix client)\&quot; \&quot;(npm start --prefix server)\&quot;&quot;,
</code></pre>
<h3 id="延迟运行脚本直到端口准备就绪">6. 延迟运行脚本直到端口准备就绪</h3>
<p>通常，在开发全堆栈应用程序期间，咱们可能希望同时启动服务器和客户端。<code>wait-on</code> 节点模块提供了一种方便的方法来确保进程只在某些进程就绪时发生:在我们的例子中，我们有一个特定的端口。</p>
<p>例如，这是我在使用React前端的Electron项目中使用的<code>dev</code>脚本。 同时使用，脚本并行加载表示层和Electron窗口。 但是，使用<code>wait-on</code>，只有在 <code>http://localhost:3000</code> 启动好，才会打开Electron窗口。</p>
<pre><code><code>&quot;dev&quot;: &quot;concurrently \&quot;cross-env BROWSER=none npm run start\&quot; \&quot;wait-on http://localhost:3000 &amp;&amp; electron .\&quot;&quot;,
</code></pre>
<p>此外，React默认情况下会打开一个浏览器窗口，但对于 Electron 开发来说，这是不必要的。咱们可以通过传递环境变量<code>BROWSER=none</code>来禁用此行为。</p>
<h3 id="列出并选择可用脚本">7. 列出并选择可用脚本</h3>
<p>列出<code>package.json</code>文件中可用的脚本很简单：只需转到项目的根目录并在终端中输入<code>npm run</code>。</p>
<p>但是有一种更方便的方法可以获得脚本列表，可以立即运行该列表:为此，全局安装 NTL (npm任务列表)模块:</p>
<pre class="bash"><code>npm i -g ntl
</code></pre>
<p>然后在项目文件夹中运行<code>ntl</code>命令，可以获得一个可用脚本列表，并可以选择其中一个运行。</p>
<p><img src="./images/13 个 NPM 快速开发技巧0.png" /></p>
<p><strong>代码部署后可能存在的BUG没法实时知道，事后为了解决这些BUG，花了大量的时间进行log 调试，这边顺便给大家推荐一个好用的BUG监控工具 <a href="https://www.fundebug.com/?utm_source=xiaozhi">Fundebug</a>。</strong></p>
<h3 id="运行前后脚本">8. 运行前后脚本</h3>
<p>你可能熟悉<code>prebuild</code>和<code>postbuild</code>这样的脚本，它们允许你定义在构建脚本之前或之后运行的代码。但事实上，<code>pre</code>和<code>post</code>可以在任何脚本之前添加，包括自定义脚本。</p>
<p>这不仅使你的代码更干净，而且还允许你单独运行<code>pre</code>和<code>post</code>脚本。</p>
<h3 id="控制应用程序版本">9. 控制应用程序版本</h3>
<p>与手动更改应用程序的版本相比，npm 提供了一些有用的快捷方式来完成这一点。 要增加版本，请在运行 <code>npm version加上</code>major<code>，</code>minor<code>或</code>patch`：</p>
<pre class="bash"><code>// 1.0.0
npm version patch
// 1.0.1
npm version minor
// 1.1.0
npm version major
// 2.0.0
</code></pre>
<p>根据更新应用程序的频率，可以通过在每次部署时增加版本号来节省时间，使用以下脚本:</p>
<pre><code><code>{
  &quot;predeploy&quot;: &quot;npm version patch&quot;
}
</code></pre>
<h3 id="从命令行编辑-package.json">10. 从命令行编辑 package.json</h3>
<p><code>package.json</code>是一个常规的<code>json</code>文件，因此可以使用工具库<a href="http://trentm.com/json/">json</a>从命令行进行编辑。 这在修改<code>package.json</code>提供另外一种新的方式，允许w你q创建超出默认值的快捷方式。 全局安装：</p>
<pre class="bash"><code>npm install -g json
</code></pre>
<p>然后，可以使用它来使用<code>-I</code>进行就地编辑。 例如，要添加值为“bar”的新脚本“foo”，这样写：</p>
<pre class="bash"><code>json -I -f package.json -e &#39;this.scripts.foo=&quot;bar&quot;&#39;
</code></pre>
<h3 id="自动设置和打开你的github库">11. 自动设置和打开你的github库</h3>
<p>如果<code>package.json</code>文件中有“repository”，则可以通过输入 <code>npm repo</code>在默认浏览器中打开它。</p>
<p>如果你的项目已经连接到远程存储库，并且已经在命令行上安装了<code>git</code>，那您可以使用这个命令找到你的连接存储库</p>
<pre class="bash"><code>git config --get remote.origin.url
</code></pre>
<p>更好的是，如果你按照上面的提示并安装了<code>json</code>模块，可以使用下面的脚本自动将正确的存储库添加到 <code>package.json</code></p>
<pre class="bash"><code>json -I -f package.json -e &quot;this.repository=\&quot;$(git config --get remote.origin.url)\&quot;&quot;
</code></pre>
<h3 id="自定义npm-init脚本">12. 自定义<code>npm init</code>脚本</h3>
<p>让我们更进一步，使用我们自己的<code>npm init</code>脚本，它接受GitHub存储库URL并自动推送我们的第一个提交。在本技巧中，我们将讨论如何创建自定义<code>npm init</code>脚本。在下一个(也是最后一个)技巧中，我们将合并git。</p>
<p>可以通过重定向到主目录中的<code>.npm-init.js</code>文件来编辑<code>npm init</code>脚本。（在Windows上，通常是 <code>c/Users/&lt;用户名&gt;</code>，在 Mac 上，它是<code>/Users/&lt;用户名&gt;</code>）。</p>
<p>让我们首先在我们的主目录中创建一个<code>.nmm-init.js</code>文件。为了确保<code>npm init</code>被指向正确的文件，可以运行:</p>
<pre class="bash"><code>npm config set init-module ~\.npm-init.js
</code></pre>
<p>在集成<code>git</code>之前，这里有一个简单的<code>.npm-init.js</code>文件，它模拟了默认<code>npm init</code>的问题</p>
<pre><code><code>module.exports = {
  name: prompt(&#39;package name&#39;, basename || package.name),
  version: prompt(&#39;version&#39;, &#39;0.0.0&#39;),
  decription: prompt(&#39;description&#39;, &#39;&#39;),  
  main: prompt(&#39;entry point&#39;, &#39;index.js&#39;),
  repository: prompt(&#39;git repository&#39;, &#39;&#39;),
  keywords: prompt(function (s) { return s.split(/\s+/) }),
  author: prompt(&#39;author&#39;, &#39;Joe Bloggs &lt;joe.bloggs@gmail.com&gt; (joebloggs.com)&#39;),
  license: prompt(&#39;license&#39;, &#39;ISC&#39;)
}
</code></pre>
<p>每个问题都遵循<code>nameInPackage</code>模式:<code>prompt('nameInPrompt','defaultValue')</code>。要在缺省情况下设置值而不带问题，只需删除<code>prompt</code>方法。</p>
<p>如果要返回默认设置，只需删除<code>.npm-init.js</code>。</p>
<h3 id="使用自定义npm-init脚本将你的第一个-commit-提交到-github">13. 使用自定义npm init脚本将你的第一个 Commit 提交到 GitHub</h3>
<p>为了将git命令合并到<code>.npm-init.js</code>文件中，需要一种方法来控制命令行。为此，我们可以使用<code>child_process</code> 模块。在文件的顶部引入它，因为我们只需要<code>execSync</code>函数，所以可以使用析构赋值语法自己获取它：</p>
<pre class="javascript"><code>const { execSync } = require(&#39;child_process&#39;);
</code></pre>
<p>我还创建了一个helper函数，它将函数的结果打印到控制台：</p>
<pre class="javascript"><code>function run(func) {
  console.log(execSync(func).toString())
}
</code></pre>
<p>最后，我们将提示输入GitHub存储库URL，如果提供，我们将生<code>README.md</code>文件，并启动我们的第一次提交。</p>
<pre class="javascript"><code>repository: prompt(&#39;github repository url&#39;, &#39;&#39;, function (url) {
  if (url) {
    run(&#39;touch README.md&#39;);
    run(&#39;git init&#39;);
    run(&#39;git add README.md&#39;);
    run(&#39;git commit -m &quot;first commit&quot;&#39;);
    run(`git remote add origin ${url}`);
    run(&#39;git push -u origin master&#39;);
  }
  return url;
})
</code></pre>
<p>总的来说，<code>.npm-init.js</code>文件大概如下：</p>
<pre class="javascript"><code>const { execSync } = require(&#39;child_process&#39;);

function run(func) {
  console.log(execSync(func).toString())
}

module.exports = {
  name: prompt(&#39;package name&#39;, basename || package.name),
  version: prompt(&#39;version&#39;, &#39;0.0.0&#39;),
  decription: prompt(&#39;description&#39;, &#39;&#39;),
  main: prompt(&#39;entry point&#39;, &#39;index.js&#39;),
  keywords: prompt(function (s) { return s.split(/\s+/) }),
  author: prompt(&#39;author&#39;, &#39;Joe Bloggs &lt;joe.bloggs@gmail.com&gt; (joebloggs.com)&#39;),
  license: prompt(&#39;license&#39;, &#39;ISC&#39;),
  repository: prompt(&#39;github repository url&#39;, &#39;&#39;, function (url) {
    if (url) {
      run(&#39;touch README.md&#39;);
      run(&#39;git init&#39;);
      run(&#39;git add README.md&#39;);
      run(&#39;git commit -m &quot;first commit&quot;&#39;);
      run(`git remote add origin ${url}`);
      run(&#39;git push -u origin master&#39;);
    }
    return url;
  }),
}
</code></pre>
<p>package.json文件：</p>
<pre><code><code>{
  &quot;name&quot;: &quot;Custom npm init&quot;,
  &quot;version&quot;: &quot;0.0.0&quot;,
  &quot;decription&quot;: &quot;A test project, to demonstrate a custom npm init script.&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;Joe Bloggs &lt;joe.bloggs@gmail.com&gt; (joebloggs.com)&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;repository&quot;: {
    &quot;type&quot;: &quot;git&quot;,
    &quot;url&quot;: &quot;git+https://github.com/JoeBloggs/custom.git&quot;
  },
  &quot;bugs&quot;: {
    &quot;url&quot;: &quot;https://github.com/JoeBloggs/custom/issues&quot;
  },
  &quot;homepage&quot;: &quot;https://github.com/JoeBloggs/custom#readme&quot;
}
</code></pre>
<p>你也可以通过合并GitHub API进一步实现这一点，这样就不需要创建一个新的存储库，这部分留给你们自己完成。</p>
<p>总的来说，希望这篇文章能够让你了解npm可以实现的目标，并展示了一些提高工作效率的方法 - 无论是你知道常见的快捷方式，还是通过充分利用脚本 <code>package.json</code>，或编写自定义版本的<code>npm init</code>。</p>
<p>**代码部署后可能存在的BUG没法实时知道，事后为了解决这些BUG，花了大量的时间进行log 调试，这边顺便给大家推荐一个好用的BUG监控工具 <a href="https://www.fundebug.com/?utm_source=xiaozhi">Fundebug</a>。</p>
<h3 id="关于fundebug">关于Fundebug</h3>
<p><a href="https://www.fundebug.com/">Fundebug</a>专注于JavaScript、微信小程序、微信小游戏、支付宝小程序、React Native、Node.js和Java线上应用实时BUG监控。 自从2016年双十一正式上线，Fundebug累计处理了10亿+错误事件，付费客户有阳光保险、核桃编程、荔枝FM、掌门1对1、微脉、青团社等众多品牌企业。欢迎大家<a href="https://www.fundebug.com/team/create">免费试用</a>！</p>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>