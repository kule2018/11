<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修8.Javascript-map、reduce、filter 等高阶函数' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>8.Javascript-map、reduce、filter 等高阶函数</center></div><div class='banquan'>原文出处:本文由博客园博主小乐9924提供。<br/>
原文连接:https://www.cnblogs.com/xiaole9924/p/11842408.html</div><br>
    <h2>高阶函数</h2>
<p>高阶函数是对其他函数进行操作的函数，可以将它们作为参数或通过返回它们。简单来说，高阶函数是一个函数，它接收函数作为参数或将函数作为输出返回。</p>
<p>例如<span style="color: #ffff99; background-color: #ff99cc;"><code>Array.prototype.map</code></span>，<span style="background-color: #ff99cc; color: #ffff99;"><code>Array.prototype.filter</code></span>并且<span style="background-color: #ff99cc; color: #ffff99;"><code>Array.prototype.reduce</code></span>是一些高阶功能，内置的语言。</p>
<h3>1. <span style="background-color: #ff99cc; color: #fbe803;">Array.prototype.map</span></h3>
<p>该<code>map()</code>方法通过调用作为输入数组中每个元素的参数提供的回调函数来创建一个新数组。该<code>map()</code>方法将从回调函数中获取每个返回值，并使用这些值创建一个新数组。</p>
<p>传递给回调函数<code>map()</code>方法接受3个参数：element，index，和array。</p>
<p>假设我们有一个数组，我们想要创建一个新数组，其中包含第一个数组的每个值的两倍。让我们看看如何使用和不使用高阶函数来解决问题。</p>
<p><strong>不用高阶函数</strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span> const arr1 = [1,2,3<span style="color: #000000;">]; 
</span><span style="color: #008080;">2</span> const arr2 =<span style="color: #000000;"> [];
</span><span style="color: #008080;">3</span> <span style="color: #0000ff;">for</span>（let i = 0; i &lt;arr1.length; i ++<span style="color: #000000;">）{ 
</span><span style="color: #008080;">4</span>  arr2.push（arr1 [i] * 2<span style="color: #000000;">）; 
</span><span style="color: #008080;">5</span> <span style="color: #000000;">}
</span><span style="color: #008080;">6</span> <span style="color: #008000;">//</span><span style="color: #008000;">打印[2,4,6] </span>
<span style="color: #008080;">7</span> console.log（arr2）;</pre>
</div>
<p><strong>使用高阶函数</strong></p>
<p><strong>&nbsp;<span class="cnblogs_code"><span style="color: #008080;">1</span> const arr1 = [1, 2, 3<span style="color: #000000;">]; </span><span style="color: #008080;">2</span> const arr2 = arr1.map(item =&gt; item * 2); <span style="color: #008000;">//</span><span style="color: #008000;">使用es6的箭头函数&nbsp; 打印[2,4,6]&nbsp; &nbsp; &nbsp;</span></span></strong></p>
<p><strong>&nbsp;<strong>创建自定义高阶函数&nbsp;&nbsp;</strong></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #008000;">//</span><span style="color: #008000;">假设我们有一个字符串数组，我们希望将此数组转换为整数数组，其中每个元素表示原始数组中字符串的长度。</span>
<span style="color: #008080;"> 2</span> const strArray = ['JavaScript', 'Python', 'PHP', 'Java', 'C'<span style="color: #000000;">];
</span><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> mapForEach(arr, fn) {
</span><span style="color: #008080;"> 4</span>  const newArray =<span style="color: #000000;"> [];
</span><span style="color: #008080;"> 5</span>  <span style="color: #0000ff;">for</span>(let i = 0; i &lt; arr.length; i++<span style="color: #000000;">) {
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;"> newArray.push(
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">  fn(arr[i])
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;"> );
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;"> }
</span><span style="color: #008080;">10</span>  <span style="color: #0000ff;">return</span><span style="color: #000000;"> newArray;
</span><span style="color: #008080;">11</span> <span style="color: #000000;">}
</span><span style="color: #008080;">12</span> const lenArray = mapForEach(strArray, <span style="color: #0000ff;">function</span><span style="color: #000000;">(item) {
</span><span style="color: #008080;">13</span>  <span style="color: #0000ff;">return</span><span style="color: #000000;"> item.length;
</span><span style="color: #008080;">14</span> <span style="color: #000000;">});
</span><span style="color: #008080;">15</span> <span style="color: #008000;">//</span><span style="color: #008000;"> prints [ 10, 6, 3, 4, 1 ]</span>
<span style="color: #008080;">16</span> console.log(lenArray);</pre>
</div>
<p>&nbsp;</p>
<h3>2.&nbsp;<span style="background-color: #ff99cc; color: #fbe803;">Array.prototype.filter</span></h3>
<p>filter() 方法创建一个新的数组，新数组中的元素是通过检查指定数组中符合条件的所有元素。</p>
<p><strong>注意：</strong>&nbsp;filter() 不会对空数组进行检测。</p>
<p><strong>注意：</strong>&nbsp;filter() 不会改变原始数组。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;">返回数组 ages 中所有元素都大于 18 的元素:</span>
<span style="color: #0000ff;">var</span> ages = [32, 33, 16, 40<span style="color: #000000;">];
</span><span style="color: #0000ff;">var</span> result = ages.filter( item =&gt; { <span style="color: #0000ff;">return</span> item &gt;= 18<span style="color: #000000;">})
</span><span style="color: #008000;">//</span><span style="color: #008000;"> 输出结果 32,33,40</span></pre>
</div>
<h3>&nbsp;</h3>
<h3>3.&nbsp;<span style="background-color: #ff99cc; color: #fbe803;">Array.prototype.reduce</span></h3>
<p>reduce() 方法接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。</p>
<p>reduce() 可以作为一个高阶函数，用于函数的 compose。</p>
<p><strong>注意:</strong>&nbsp;reduce() 对于空数组是不会执行回调函数的。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">语法： arr.reduce(callback,[initialValue]) 

total ：必需。初始值, 或者计算结束后的返回值。
currentValue：必需。当前元素
currentIndex：可选。当前元素的索引
arr：可选。当前元素所属的数组对象。
initialValue：可选。传递给函数的初始值 （作为第一次调用 callback 的第一个参数。）


</span><span style="color: #008000;">//</span><span style="color: #008000;"> 计算数组元素相加后的总和：</span>
<span style="color: #0000ff;">var</span> arr = [1, 2, 3, 4<span style="color: #000000;">];
</span><span style="color: #0000ff;">var</span> sum = arr.reduce(<span style="color: #0000ff;">function</span><span style="color: #000000;">(prev, cur, index, arr) {
    console.log(prev, cur, index);
    </span><span style="color: #0000ff;">return</span> prev +<span style="color: #000000;"> cur;
})
console.log(arr, sum);

打印结果：
</span>1 2 1
3 3 2
6 4 3<span style="color: #000000;">
[</span>1, 2, 3, 4] 10
<span style="color: #008000;">//</span><span style="color: #008000;">这里可以看出，上面的例子index是从1开始的，第一次的prev的值是数组的第一个值。数组长度是4，但是reduce函数循环3次。</span></pre>
</div>
<h4>reduce的简单用法</h4>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;"> 1.简单的就是我们常用的数组求和，求乘积了。</span>
<span style="color: #0000ff;">var</span>  arr = [1, 2, 3, 4<span style="color: #000000;">];
</span><span style="color: #0000ff;">var</span> sum = arr.reduce((x,y)=&gt;x+<span style="color: #000000;">y)
</span><span style="color: #0000ff;">var</span> mul = arr.reduce((x,y)=&gt;x*<span style="color: #000000;">y)
console.log( sum ); </span><span style="color: #008000;">//</span><span style="color: #008000;">求和，10</span>
console.log( mul ); <span style="color: #008000;">//</span><span style="color: #008000;">求乘积，24</span>


<span style="color: #008000;">//</span><span style="color: #008000;"> 2.计算数组中每个元素出现的次数</span>
let names = ['Alice', 'Bob', 'Tiff', 'Bruce', 'Alice'<span style="color: #000000;">];

let nameNum </span>= names.reduce((pre,cur)=&gt;<span style="color: #000000;">{
  </span><span style="color: #0000ff;">if</span>(cur <span style="color: #0000ff;">in</span><span style="color: #000000;"> pre){
    pre[cur]</span>++<span style="color: #000000;">
  }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
    pre[cur] </span>= 1<span style="color: #000000;"> 
  }
  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> pre
},{})
console.log(nameNum); </span><span style="color: #008000;">//</span><span style="color: #008000;">{Alice: 2, Bob: 1, Tiff: 1, Bruce: 1}</span><span style="color: #008000;">
//</span><span style="color: #008000;"> 注意这里设置了 初始值 {} 来存储 pre[cur] key 值；与pre对比含有就自增</span>

<span style="color: #008000;">//</span><span style="color: #008000;"> 3.数组去重</span>
let arr = [1,2,3,4,4,1<span style="color: #000000;">]
let newArr </span>= arr.reduce((pre,cur)=&gt;<span style="color: #000000;">{
    </span><span style="color: #0000ff;">if</span>(!<span style="color: #000000;">pre.includes(cur)){
      </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> pre.concat(cur)
    }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
      </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> pre
    }
},[])
console.log(newArr);</span><span style="color: #008000;">//</span><span style="color: #008000;"> [1, 2, 3, 4]</span>

<span style="color: #008000;">//</span><span style="color: #008000;"> 4.将二维数组转化为一维</span>
let arr = [[0, 1], [2, 3], [4, 5<span style="color: #000000;">]]
let newArr </span>= arr.reduce((pre,cur)=&gt;<span style="color: #000000;">{
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> pre.concat(cur)
},[])
console.log(newArr); </span><span style="color: #008000;">//</span><span style="color: #008000;"> [0, 1, 2, 3, 4, 5]</span>

<span style="color: #008000;">//</span><span style="color: #008000;"> 5.对象里的属性求和</span>
<span style="color: #0000ff;">var</span> result =<span style="color: #000000;"> [
    {
        subject: </span>'math'<span style="color: #000000;">,
        score: </span>10<span style="color: #000000;">
    },
    {
        subject: </span>'chinese'<span style="color: #000000;">,
        score: </span>20<span style="color: #000000;">
    },
    {
        subject: </span>'english'<span style="color: #000000;">,
        score: </span>30<span style="color: #000000;">
    }
];

</span><span style="color: #0000ff;">var</span> sum = result.reduce(<span style="color: #0000ff;">function</span><span style="color: #000000;">(prev, cur) {
    </span><span style="color: #0000ff;">return</span> cur.score +<span style="color: #000000;"> prev;
}, </span>0<span style="color: #000000;">);
console.log(sum) </span><span style="color: #008000;">//</span><span style="color: #008000;">60</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>