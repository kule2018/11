<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修D3.js 线段生成器  (V3版本)' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>D3.js 线段生成器  (V3版本)</center></div><div class='banquan'>原文出处:本文由博客园博主溢杨年华提供。<br/>
原文连接:https://www.cnblogs.com/littleSpill/p/10850364.html</div><br>
    <div><strong><span style="font-size: 14pt;">线段生成器</span></strong></div>
<p>&nbsp;</p>
<div><span style="font-size: 18px;">与线段生成器相关的方法:</span></div>
<p>&nbsp;</p>
<div><span style="font-size: 18px; color: #ff0000;">d3.svg.line()</span></div>
<div><span style="font-size: 18px;"> //创建一个线段生成器。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">line(data)</span></div>
<div><span style="font-size: 18px;"> //使用线段生成器绘制data数据。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">line.x([x]) </span></div>
<div><span style="font-size: 18px;"> //设置或获取线段x坐标的访问器，即使用什么数据作为线段的x坐标。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">line.y([y])</span></div>
<div><span style="font-size: 18px;"> //同上。设置或获取y坐标的访问器。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">line.interpolate([interpolate])</span></div>
<div><span style="font-size: 18px;"> //设置或获取线段的插值模式，共有13种。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">line.tension([tension])</span></div>
<div><span style="font-size: 18px;"> //设置或获取张力系数，当插值模式为cardinal、cardinal-open、cardinal-closed的时候有效。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">line.defined([defined]) </span></div>
<div><span style="font-size: 18px;"> //设置或获取一个访问器，用于确认线段是否存在，只有判定为存在的数据才会被绘制。</span></div>
<div>&nbsp;</div>
<div>
<div>
<div><span style="font-size: 18px;"><strong>line.x</strong>和<strong>line.y</strong>可制定规则:如何从数据中获取x和y坐标。这种方法称为<strong>访问器</strong>。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><strong>line.x</strong>和<strong>line.y</strong>的默认为:</span></div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;">1</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> x(d){
</span><span style="color: #008080;">2</span> <span style="color: #0000ff;">return</span> d[0]　　　　　　 <span style="color: #008000;">//</span><span style="color: #008000;">第一个值是x坐标</span>
<span style="color: #008080;">3</span> <span style="color: #000000;">}
</span><span style="color: #008080;">4</span> 
<span style="color: #008080;">5</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> y(d){
</span><span style="color: #008080;">6</span> <span style="color: #0000ff;">return</span> d[1] 　　　　　　<span style="color: #008000;">//</span><span style="color: #008000;">第二个值是y坐标</span>
<span style="color: #008080;">7</span> }</span></pre>
</div>
<p>&nbsp;</p>
</div>
<div>
<div><span style="font-size: 18px;">在SVG区域里，线段元素是:&nbsp;</span></div>
</div>
</div>
</div>
<div>&nbsp;
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;">1</span> &lt;line x1="20" y1="20" x2="300" y2="100" /&gt;</span></pre>
</div>
<p>&nbsp;</p>
<div><span style="font-size: 18px;">添加元素时，可以使用<strong>append()</strong>，再设置属性，如:&nbsp;</span></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;">1</span>  svg.append("line"<span style="color: #000000;">)
</span><span style="color: #008080;">2</span>             .attr("x1",20<span style="color: #000000;">)
</span><span style="color: #008080;">3</span>             .attr("y1",20<span style="color: #000000;">)
</span><span style="color: #008080;">4</span>             .attr("x2",300<span style="color: #000000;">)
</span><span style="color: #008080;">5</span>             .attr("y2",100)</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">还有一种添加直线的方法:使用路径元素&lt;path&gt;。路径元素也是可以绘制直线的，例如，相同的直线可用:</span></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;">1</span> &lt;path d="M20,20L300,100" /&gt;</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">换成D3添加元素的方式，代码:</span></div>
</div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;">1</span> svg.append("path"<span style="color: #000000;">)
</span><span style="color: #008080;">2</span>             .attr("d","M20,20L300,100")</span></pre>
</div>
<p>&nbsp;</p>
<div>
<div><span style="font-size: 18px;">这样做虽然是成功绘制了该路径，但有一个问题:类似M20,20L300,100的字符串，是怎么得到的呢？此处只有两个点，可以手动输入。如果有成百上千各店，全部手动输入，不太方便也不太现实。因此D3中引入了<strong>路径生成器(Path Generator)</strong>的概念，能够自动根据数据生成路径。用于生成线段的程序，叫做<strong>线段生成器(Line Generator)</strong></span></div>
</div>
</div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">线段生成器由<strong>d3.svg.line()</strong>创建，先看一个简单的例子:</span></div>
</div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> <span style="color: #008000;">//</span><span style="color: #008000;">创建一个svg画图区域</span>
<span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 3</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .attr("width",600<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("height",400<span style="color: #000000;">)
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span>         <span style="color: #008000;">//</span><span style="color: #008000;">线段的点数据，每一项是一个点的x和y坐标</span>
<span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">var</span> lines = [[80,80],[200,100],[200,200],[100,200<span style="color: #000000;">]]
</span><span style="color: #008080;"> 9</span>         <span style="color: #008000;">//</span><span style="color: #008000;">创建一个线段生成器</span>
<span style="color: #008080;">10</span>         <span style="color: #0000ff;">var</span> linePath =<span style="color: #000000;"> d3.svg.line()
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span>         <span style="color: #008000;">//</span><span style="color: #008000;">添加路径</span>
<span style="color: #008080;">13</span>         svg.append("path"<span style="color: #000000;">)
</span><span style="color: #008080;">14</span>             .attr("d",linePath(lines))      <span style="color: #008000;">//</span><span style="color: #008000;">使用了线段生成器</span>
<span style="color: #008080;">15</span>             .attr("stroke","black")         <span style="color: #008000;">//</span><span style="color: #008000;">线的颜色</span>
<span style="color: #008080;">16</span>             .attr("stroke-width","3px")     <span style="color: #008000;">//</span><span style="color: #008000;">线的宽度</span>
<span style="color: #008080;">17</span>             .attr("fill","none")            <span style="color: #008000;">//</span><span style="color: #008000;">填充颜色为none</span></span></pre>
</div>
<p>&nbsp;</p>
</div>
<div>
<div><span style="font-size: 18px;">线段的数据有四个点，保存在变量lines里。线段生成器保存在变量linePath里，如此linePath可当做函数使用:linePath(lines)根据数据lines生成路径。结果是一段折现。效果图:&nbsp;</span></div>
</div>
<div>&nbsp;</div>
<div><img src="./images/D3.js 线段生成器  (V3版本)0.png" alt="" /></div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">根据上面的例子，我们对x和y访问器做一些修改:</span></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span>  <span style="color: #008000;">//</span><span style="color: #008000;">创建一个svg画图区域</span>
<span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 3</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .attr("width",600<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("height",400<span style="color: #000000;">)
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span>         
<span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">var</span> lines = [80,120,160,200,240,280<span style="color: #000000;">]
</span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">var</span> linePath =<span style="color: #000000;"> d3.svg.line()
</span><span style="color: #008080;">10</span>                         .x(<span style="color: #0000ff;">function</span>(d){<span style="color: #0000ff;">return</span><span style="color: #000000;"> d})
</span><span style="color: #008080;">11</span>                         .y(<span style="color: #0000ff;">function</span><span style="color: #000000;">(d,i){
</span><span style="color: #008080;">12</span>                             <span style="color: #0000ff;">return</span> i%2 == 0? 40 : 120
<span style="color: #008080;">13</span> <span style="color: #000000;">                        })
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span>         <span style="color: #008000;">//</span><span style="color: #008000;">添加路径</span>
<span style="color: #008080;">16</span>         svg.append("path"<span style="color: #000000;">)
</span><span style="color: #008080;">17</span>             .attr("d",linePath(lines))      <span style="color: #008000;">//</span><span style="color: #008000;">使用了线段生成器</span>
<span style="color: #008080;">18</span>             .attr("stroke","black")         <span style="color: #008000;">//</span><span style="color: #008000;">线的颜色</span>
<span style="color: #008080;">19</span>             .attr("stroke-width","3px")     <span style="color: #008000;">//</span><span style="color: #008000;">线的宽度</span>
<span style="color: #008080;">20</span>             .attr("fill","none")            <span style="color: #008000;">//</span><span style="color: #008000;">填充颜色为none</span></span></pre>
</div>
<p>&nbsp;</p>
</div>
</div>
<div>&nbsp;</div>
<div>
<div>
<div><span style="font-size: 18px;">如此，调用<strong>linePath(lines)</strong>所得的路径中，各顶点为:(80,40)、(120,120)、(160,40)、(200,120)、(240,40)、(280,120)。以第一个点为例讲一下：</span></div>
<div><span style="font-size: 18px;">x = 80 (d等80)</span></div>
<div><span style="font-size: 18px;">y = 0 % 2 == 0 ? 40 : 120 (i等于0,最终表达式的值为40)</span></div>
<div><span style="font-size: 18px;">以此类推，可计算得到各坐标点。结果如图:&nbsp;</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js 线段生成器  (V3版本)1.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">线段生成器是有<strong>插值模式</strong>的，根据模式的不同，线段的形式(路径)会发生很大的变化。更有13中模式，如<strong>linear</strong>、<strong>linear-closed</strong>、<strong>step</strong>、<strong>basis</strong>、<strong>bundle</strong>、<strong>cardinal</strong>、<strong>cardinal-open</strong>、<strong>cardinal-closed</strong>、<strong>monotone</strong>等。设置方法如下:</span></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;">1</span> <span style="color: #0000ff;">var</span> linePath =<span style="color: #000000;"> d3.svg.line()
</span><span style="color: #008080;">2</span>                 .interpolate("linear-closed")</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div>
</div>
</div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">插值模式，指的是对于线段两个端点之间的值如何计算。默认的插值模式是<strong>linear</strong>，即线性的。<strong>interpolate</strong>的参数，除预定义的13种模式之外，还可以是一个自己定义的函数。接下来看看线性插值模式(linear)的实现方法:</span></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;">1</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> interpolateLinear(points){
</span><span style="color: #008080;">2</span>     <span style="color: #0000ff;">return</span> points.join("L"<span style="color: #000000;">)
</span><span style="color: #008080;">3</span> }</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">意思是:对于所有的顶点，在顶点数值之间插入一个<strong>L</strong>作为分隔。其他所有的模式都是使用类似的手法实现的。如下图展示了不同插值模式下线段的形态，虽然有些已经不是"线段"了，但都是根据线段的顶点生成的。当插值模式为<strong>cardinal</strong>、<strong>cardinal-open</strong>、<strong>cardinal-closed</strong>的时候，可是使用<strong>tension()</strong>设置<strong>张力系数</strong>。代码:</span></div>
<div>&nbsp;</div>
<div>
<div><strong><span style="font-size: 14pt;">step插值模式 :</span></strong></div>
</div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span>  <span style="color: #008000;">//</span><span style="color: #008000;">创建一个svg画图区域</span>
<span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 3</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .attr("width",600<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("height",400<span style="color: #000000;">)
</span><span style="color: #008080;"> 6</span>        
<span style="color: #008080;"> 7</span> 
<span style="color: #008080;"> 8</span>         <span style="color: #008000;">//</span><span style="color: #008000;">step插值模式</span>
<span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">var</span> lines = [80,120,160,200,240,280<span style="color: #000000;">]
</span><span style="color: #008080;">10</span>         <span style="color: #0000ff;">var</span> linePath =<span style="color: #000000;"> d3.svg.line()
</span><span style="color: #008080;">11</span>                         .interpolate("step"<span style="color: #000000;">)
</span><span style="color: #008080;">12</span>                         .x(<span style="color: #0000ff;">function</span>(d){<span style="color: #0000ff;">return</span><span style="color: #000000;"> d})
</span><span style="color: #008080;">13</span>                         .y(<span style="color: #0000ff;">function</span><span style="color: #000000;">(d,i){
</span><span style="color: #008080;">14</span>                             <span style="color: #0000ff;">return</span> i%2 == 0? 40 : 120
<span style="color: #008080;">15</span> <span style="color: #000000;">                        })
</span><span style="color: #008080;">16</span> 
<span style="color: #008080;">17</span> 
<span style="color: #008080;">18</span>         <span style="color: #008000;">//</span><span style="color: #008000;">添加路径</span>
<span style="color: #008080;">19</span>         svg.append("path"<span style="color: #000000;">)
</span><span style="color: #008080;">20</span>             .attr("d",linePath(lines))      <span style="color: #008000;">//</span><span style="color: #008000;">使用了线段生成器</span>
<span style="color: #008080;">21</span>             .attr("stroke","black")         <span style="color: #008000;">//</span><span style="color: #008000;">线的颜色</span>
<span style="color: #008080;">22</span>             .attr("stroke-width","3px")     <span style="color: #008000;">//</span><span style="color: #008000;">线的宽度</span>
<span style="color: #008080;">23</span>             .attr("fill","none")            <span style="color: #008000;">//</span><span style="color: #008000;">填充颜色为none</span></span></pre>
</div>
<p>&nbsp;</p>
</div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;">效果图:</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js 线段生成器  (V3版本)2.png" alt="" /></span></div>
<div>&nbsp;</div>
<div><strong><span style="font-size: 14pt;">basis插值模式 :<br /></span></strong></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> <span style="color: #008000;">//</span><span style="color: #008000;">创建一个svg画图区域</span>
<span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 3</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .attr("width",600<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("height",400<span style="color: #000000;">)
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span> 
<span style="color: #008080;"> 8</span>         <span style="color: #008000;">//</span><span style="color: #008000;">basis插值模式</span>
<span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">var</span> lines = [80,120,160,200,240,280<span style="color: #000000;">]
</span><span style="color: #008080;">10</span>         <span style="color: #0000ff;">var</span> linePath =<span style="color: #000000;"> d3.svg.line()
</span><span style="color: #008080;">11</span>                         .interpolate("basis"<span style="color: #000000;">)
</span><span style="color: #008080;">12</span>                         .x(<span style="color: #0000ff;">function</span>(d){<span style="color: #0000ff;">return</span><span style="color: #000000;"> d})
</span><span style="color: #008080;">13</span>                         .y(<span style="color: #0000ff;">function</span><span style="color: #000000;">(d,i){
</span><span style="color: #008080;">14</span>                             <span style="color: #0000ff;">return</span> i%2 == 0? 40 : 120
<span style="color: #008080;">15</span> <span style="color: #000000;">                        })
</span><span style="color: #008080;">16</span> 
<span style="color: #008080;">17</span>         <span style="color: #008000;">//</span><span style="color: #008000;">添加路径</span>
<span style="color: #008080;">18</span>         svg.append("path"<span style="color: #000000;">)
</span><span style="color: #008080;">19</span>             .attr("d",linePath(lines))      <span style="color: #008000;">//</span><span style="color: #008000;">使用了线段生成器</span>
<span style="color: #008080;">20</span>             .attr("stroke","black")         <span style="color: #008000;">//</span><span style="color: #008000;">线的颜色</span>
<span style="color: #008080;">21</span>             .attr("stroke-width","3px")     <span style="color: #008000;">//</span><span style="color: #008000;">线的宽度</span>
<span style="color: #008080;">22</span>             .attr("fill","none")            <span style="color: #008000;">//</span><span style="color: #008000;">填充颜色为none</span></span></pre>
</div>
<p>&nbsp;</p>
</div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;">效果图:</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js 线段生成器  (V3版本)3.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>
<div><strong><span style="font-size: 14pt;">cardinal插值模式 :</span></strong></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span>  <span style="color: #008000;">//</span><span style="color: #008000;">创建一个svg画图区域</span>
<span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 3</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .attr("width",600<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("height",400<span style="color: #000000;">)
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span>          <span style="color: #008000;">//</span><span style="color: #008000;">cardinal插值模式</span>
<span style="color: #008080;"> 8</span>          <span style="color: #0000ff;">var</span> lines = [80,120,160,200,240,280<span style="color: #000000;">]
</span><span style="color: #008080;"> 9</span>          <span style="color: #0000ff;">var</span> linePath =<span style="color: #000000;"> d3.svg.line()
</span><span style="color: #008080;">10</span>                          .interpolate("cardinal"<span style="color: #000000;">)
</span><span style="color: #008080;">11</span>                          .x(<span style="color: #0000ff;">function</span>(d){<span style="color: #0000ff;">return</span><span style="color: #000000;"> d})
</span><span style="color: #008080;">12</span>                          .y(<span style="color: #0000ff;">function</span><span style="color: #000000;">(d,i){
</span><span style="color: #008080;">13</span>                              <span style="color: #0000ff;">return</span> i%2 == 0? 40 : 120
<span style="color: #008080;">14</span> <span style="color: #000000;">                         })
</span><span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span> 
<span style="color: #008080;">17</span>         <span style="color: #008000;">//</span><span style="color: #008000;">添加路径</span>
<span style="color: #008080;">18</span>         svg.append("path"<span style="color: #000000;">)
</span><span style="color: #008080;">19</span>             .attr("d",linePath(lines))      <span style="color: #008000;">//</span><span style="color: #008000;">使用了线段生成器</span>
<span style="color: #008080;">20</span>             .attr("stroke","black")         <span style="color: #008000;">//</span><span style="color: #008000;">线的颜色</span>
<span style="color: #008080;">21</span>             .attr("stroke-width","3px")     <span style="color: #008000;">//</span><span style="color: #008000;">线的宽度</span>
<span style="color: #008080;">22</span>             .attr("fill","none")            <span style="color: #008000;">//</span><span style="color: #008000;">填充颜色为none</span></span></pre>
</div>
<p>&nbsp;</p>
</div>
</div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;">效果图 :</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js 线段生成器  (V3版本)4.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">如果选择性的使用顶点数据，可用<strong>defined()</strong>。举个例子:&nbsp;</span></div>
<div>&nbsp;</div>
<div>&nbsp;
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span>   <span style="color: #008000;">//</span><span style="color: #008000;">创建一个svg画图区域</span>
<span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 3</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .attr("width",600<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("height",400<span style="color: #000000;">)
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span>         <span style="color: #008000;">//</span><span style="color: #008000;">选择性的使用顶点数据</span>
<span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">var</span> lines = [80,120,160,200,240,280<span style="color: #000000;">]
</span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">var</span> linePath =<span style="color: #000000;"> d3.svg.line()
</span><span style="color: #008080;">10</span>                         .x(<span style="color: #0000ff;">function</span>(d){<span style="color: #0000ff;">return</span><span style="color: #000000;"> d})
</span><span style="color: #008080;">11</span>                         .y(<span style="color: #0000ff;">function</span><span style="color: #000000;">(d,i){
</span><span style="color: #008080;">12</span>                             <span style="color: #0000ff;">return</span> i%2 == 0 ? 40 : 120
<span style="color: #008080;">13</span> <span style="color: #000000;">                        })
</span><span style="color: #008080;">14</span>                         .defined(<span style="color: #0000ff;">function</span><span style="color: #000000;">(d){
</span><span style="color: #008080;">15</span>                             <span style="color: #0000ff;">return</span> d &lt; 200
<span style="color: #008080;">16</span> <span style="color: #000000;">                        })
</span><span style="color: #008080;">17</span> 
<span style="color: #008080;">18</span>         <span style="color: #008000;">//</span><span style="color: #008000;">添加路径</span>
<span style="color: #008080;">19</span>         svg.append("path"<span style="color: #000000;">)
</span><span style="color: #008080;">20</span>             .attr("d",linePath(lines))      <span style="color: #008000;">//</span><span style="color: #008000;">使用了线段生成器</span>
<span style="color: #008080;">21</span>             .attr("stroke","black")         <span style="color: #008000;">//</span><span style="color: #008000;">线的颜色</span>
<span style="color: #008080;">22</span>             .attr("stroke-width","3px")     <span style="color: #008000;">//</span><span style="color: #008000;">线的宽度</span>
<span style="color: #008080;">23</span>             .attr("fill","none")            <span style="color: #008000;">//</span><span style="color: #008000;">填充颜色为none</span></span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">效果图 :</span></p>
</div>
</div>
</div>
<div>&nbsp;</div>
<div><img src="./images/D3.js 线段生成器  (V3版本)5.png" alt="" /></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>