<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修D3.js坐标轴的绘制方法、添加坐标轴的刻度和各比例尺的坐标轴(V3版本)' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>D3.js坐标轴的绘制方法、添加坐标轴的刻度和各比例尺的坐标轴(V3版本)</center></div><div class='banquan'>原文出处:本文由博客园博主溢杨年华提供。<br/>
原文连接:https://www.cnblogs.com/littleSpill/p/10830001.html</div><br>
    <div><strong><span style="font-size: 14pt;">坐标轴(Axis)</span></strong></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;">坐标轴(Axis)在很多图表中都可见到，例如柱形图、折线图、散点图等。坐标轴由一组线段和文字组成，坐标轴上的点由一个坐标值确定。但是，如果使用SVG的直线和文字一笔一画的绘制坐标轴，工作量将会极其的大。D3提供了坐标轴的制作方法，需要之前所给大家讲的比例尺一起使用。开发者仅仅需要几行代码，就能够生成各式各样的坐标轴。</span></div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">与坐标轴相关的方法有:</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">d3.svg.axis() : </span></div>
<div><span style="font-size: 18px;">创建一个默认的新坐标轴。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">axis(selection) : </span></div>
<div><span style="font-size: 18px;">将此坐标轴应用到指定的选择集上，该选择集需要包含有&lt;svg&gt;或&lt;g&gt;元素。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">axis.scale([scale]) : </span></div>
<div><span style="font-size: 18px;">设定或获取坐标轴的比例尺。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">axis.orient([orientation]) : </span></div>
<div><span style="font-size: 18px;">设定或获取坐标轴的方向，有四个值:top、bottom、left、right。top表示水平坐标轴的刻度在直线下方。bottom表示水平坐标轴的刻度在直线上方。left表示垂直坐标轴的刻度在直线右方。right表示垂直坐标轴的刻度在直线左方。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">axis.ticks([argument...]) : </span></div>
<div><span style="font-size: 18px;">设定或获取坐标轴的分隔数，默认为10.例如设定为5，则坐标轴上的刻度数量为6，分段数为5.这个函数会调用比例尺的ticks()</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">axis.tickValues([values]) : </span></div>
<div><span style="font-size: 18px;">设定或获取坐标轴的指定刻度。例如，参数为[1,2,3,6,7,8]，则在这几个值上会有刻度。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">axis.tickSize([inner,outer]):</span></div>
<div><span style="font-size: 18px;"> 设定或获取坐标轴的内外刻度的长度。默认都为6</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">axis.innerTickSize([size]) : </span></div>
<div><span style="font-size: 18px;">设定或获取坐标轴的内刻度的长度。内刻度指不是两端的刻度。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">axis.outerTickSize([size]) : </span></div>
<div><span style="font-size: 18px;">设定或获取坐标轴的外刻度的长度。外刻度指两端的刻度。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px; color: #ff0000;">asix.tickFormat([format]) : </span></div>
<div><span style="font-size: 18px;">设定或获取刻度的格式。</span></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
</div>
<div>
<div><strong><span style="font-size: 14pt;">坐标轴的绘制方法:</span></strong></div>
<div><span style="font-size: 18px;">在之前给大家介绍过，在SVG中有&lt;path&gt;、&lt;line&gt;、&lt;text&gt;元素，D3所绘制的坐标轴就是由这三中元素组成的。其中，坐标轴的<strong>主直线</strong>是由<strong>&lt;path&gt;</strong>绘制的。<strong>刻度</strong>是由<strong>&lt;line&gt;</strong>绘制的。<strong>刻度文字</strong>是由<strong>&lt;text&gt;</strong>所绘制的。举个例子:</span></div>
</div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span>  　　　　<span style="color: #0000ff;">var</span> width = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> height = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 3</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("width"<span style="color: #000000;">,width)
</span><span style="color: #008080;"> 6</span>                     .attr("height"<span style="color: #000000;">,height)
</span><span style="color: #008080;"> 7</span> 
<span style="color: #008080;"> 8</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 用于坐标轴的线性比例尺</span>
<span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">var</span> xScale =<span style="color: #000000;"> d3.scale.linear()
</span><span style="color: #008080;">10</span>                             .domain([0,10<span style="color: #000000;">])
</span><span style="color: #008080;">11</span>                             .range([0,300<span style="color: #000000;">])
</span><span style="color: #008080;">12</span> 
<span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 定义坐标轴</span>
<span style="color: #008080;">15</span>         <span style="color: #0000ff;">var</span> axisBottom =<span style="color: #000000;"> d3.svg.axis()
</span><span style="color: #008080;">16</span>                              .scale(xScale)      <span style="color: #008000;">//</span><span style="color: #008000;">使用上面定义的比例尺</span>
<span style="color: #008080;">17</span>                              .orient("bottom")   <span style="color: #008000;">//</span><span style="color: #008000;">刻度方向向下</span>
<span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在svg中添加一个包含坐标轴各元素的g元素</span>
<span style="color: #008080;">21</span>         <span style="color: #0000ff;">var</span> gAxis = svg.append("g"<span style="color: #000000;">)
</span><span style="color: #008080;">22</span>                     .attr("transform","translate(80,80)")    <span style="color: #008000;">//</span><span style="color: #008000;">平移到(80,80)</span>
<span style="color: #008080;">23</span>                     .attr("class","axis")　　　　　　　　　　　　<span style="color: #008080;">24</span> 
<span style="color: #008080;">25</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在gAxis中绘制坐标轴</span>
<span style="color: #008080;">26</span>         axisBottom(gAxis)</span></pre>
</div>
<p>&nbsp;</p>
</div>
<div>
<div><span style="font-size: 18px;">坐标轴的所有图形元素需放入&lt;svg&gt;或&lt;g&gt;里，建议新建一个g元素来控制，而不要直接放在&lt;svg&gt;里，因为&lt;svg&gt;中通常还包含有其他的图形元素。上面代码中，先在&lt;body&gt;中添加了&lt;svg&gt;，然后再在&lt;svg&gt;中添加了&lt;g&gt;，坐标轴就绘制在这个&lt;g&gt;中。绘制之后body中的元素结构如图所示:&nbsp;</span></div>
</div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js坐标轴的绘制方法、添加坐标轴的刻度和各比例尺的坐标轴(V3版本)0.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">class为tick的&lt;g&gt;元素就是刻度，每一个刻度里都包含有&lt;line&gt;和&lt;text&gt;。坐标轴的主直线是最下方的&lt;path&gt;,其class是demain。</span></div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">xScale是一个线性比例尺，其定义域为[0,10]，这是坐标轴刻度值的范围。值域为[0,300]，这是坐标轴实际的像素长度。定义坐标轴时。使用scale(sScale)指定比例尺。代码的最后一行，axis(gAxis)表示的是在gAxis选择集中绘制坐标轴，gAxis是在&lt;svg&gt;中新添加的分组元素。结果如图:</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js坐标轴的绘制方法、添加坐标轴的刻度和各比例尺的坐标轴(V3版本)1.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">看到图后是不是觉得这坐标轴太丑了 ~ ~ 而且刻度直线都没有显示出来。这是因为还没有为坐标轴定制样式，首先定义class类名，上面代码第23行处。然后写css代码:</span></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> <span style="color: #800000;">   .axis path</span>{
<span style="color: #008080;"> 2</span> <span style="color: #ff0000;">        fill</span>:<span style="color: #0000ff;">none</span>;
<span style="color: #008080;"> 3</span> <span style="color: #ff0000;">        stroke </span>:<span style="color: #0000ff;"> black</span>;
<span style="color: #008080;"> 4</span> <span style="color: #ff0000;">        shape-rendering</span>:<span style="color: #0000ff;">crispEdges</span>;
<span style="color: #008080;"> 5</span>     }
<span style="color: #008080;"> 6</span> <span style="color: #800000;">    .axis line</span>{
<span style="color: #008080;"> 7</span> <span style="color: #ff0000;">        fill</span>:<span style="color: #0000ff;">none</span>;
<span style="color: #008080;"> 8</span> <span style="color: #ff0000;">        stroke </span>:<span style="color: #0000ff;"> black</span>;
<span style="color: #008080;"> 9</span> <span style="color: #ff0000;">        shape-rendering</span>:<span style="color: #0000ff;">crispEdges</span>;
<span style="color: #008080;">10</span>     }
<span style="color: #008080;">11</span> <span style="color: #800000;">    .axis text</span>{
<span style="color: #008080;">12</span> <span style="color: #ff0000;">        font-family</span>:<span style="color: #0000ff;"> sans-serif</span>;
<span style="color: #008080;">13</span> <span style="color: #ff0000;">        font-size</span>:<span style="color: #0000ff;"> 11px</span>;
<span style="color: #008080;">14</span>     }</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div>
</div>
</div>
<div>
<div><span style="font-size: 18px;">现在再看一下效果图:&nbsp;</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js坐标轴的绘制方法、添加坐标轴的刻度和各比例尺的坐标轴(V3版本)2.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">现在比之前要美观多了。上面使用了<strong>axis(gAxis)</strong>的方式来指定绘制的位置。除此之外，还有一种常用的方式。就是之前讲过的<strong>call()</strong>。<strong>gAxis.call(axis)</strong>。这种方式的调用以后会很常用的。</span></div>
</div>
</div>
<div>&nbsp;</div>
<div>
<div><strong><span style="font-size: 14pt;">坐标轴 刻度</span></strong></div>
<div><span style="font-size: 18px;">说到坐标轴的属性，基本上是在说刻度，例如刻度的方向、间隔、长度、文字格式等。上次给大家讲的坐标轴，设置了刻度的方向<strong>orientation("bottom")</strong>，因此刻度在直线的下方。如果要设置在什么值上标出刻度，使用<strong>ticks()</strong>和<strong>tickValues()</strong>。举个例子:</span></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> 　　　　 <span style="color: #0000ff;">var</span> width = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> height = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 3</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("width"<span style="color: #000000;">,width)
</span><span style="color: #008080;"> 6</span>                     .attr("height"<span style="color: #000000;">,height)
</span><span style="color: #008080;"> 7</span>         <span style="color: #008000;">//</span><span style="color: #008000;">用于坐标轴的线性比例尺</span>
<span style="color: #008080;"> 8</span> 
<span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">var</span> xScale =<span style="color: #000000;"> d3.scale.linear()
</span><span style="color: #008080;">10</span>                             .domain([0,10<span style="color: #000000;">])
</span><span style="color: #008080;">11</span>                             .range([0,300<span style="color: #000000;">])
</span><span style="color: #008080;">12</span> 
<span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span>         <span style="color: #008000;">//</span><span style="color: #008000;">定义坐标轴</span>
<span style="color: #008080;">15</span>         <span style="color: #0000ff;">var</span> axisLeft =<span style="color: #000000;"> d3.svg.axis()
</span><span style="color: #008080;">16</span> <span style="color: #000000;">                            .scale(xScale)
</span><span style="color: #008080;">17</span>                             .orient("left")  <span style="color: #008000;">//</span><span style="color: #008000;">刻度方向向左</span>
<span style="color: #008080;">18</span>                             .ticks(5<span style="color: #000000;">)
</span><span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span> 
<span style="color: #008080;">21</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在svg中添加一个包含坐标轴各元素的g元素</span>
<span style="color: #008080;">22</span>         <span style="color: #0000ff;">var</span> gAxis = svg.append("g"<span style="color: #000000;">)
</span><span style="color: #008080;">23</span>                     .attr("transform","translate(80,80)")    <span style="color: #008000;">//</span><span style="color: #008000;">平移到(80,80)</span>
<span style="color: #008080;">24</span>                     .attr("class","axis"<span style="color: #000000;">)
</span><span style="color: #008080;">25</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在gAxis中绘制坐标轴</span>
<span style="color: #008080;">26</span>         axisLeft(gAxis)</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div>
<div><span style="font-size: 18px;">效果图:</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js坐标轴的绘制方法、添加坐标轴的刻度和各比例尺的坐标轴(V3版本)3.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;">再举个例子:</span></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> 　　　　 <span style="color: #0000ff;">var</span> width = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> height = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 3</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("width"<span style="color: #000000;">,width)
</span><span style="color: #008080;"> 6</span>                     .attr("height"<span style="color: #000000;">,height)
</span><span style="color: #008080;"> 7</span>         <span style="color: #008000;">//</span><span style="color: #008000;">用于坐标轴的线性比例尺</span>
<span style="color: #008080;"> 8</span> 
<span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">var</span> xScale =<span style="color: #000000;"> d3.scale.linear()
</span><span style="color: #008080;">10</span>                             .domain([0,10<span style="color: #000000;">])
</span><span style="color: #008080;">11</span>                             .range([0,300<span style="color: #000000;">])
</span><span style="color: #008080;">12</span> 
<span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span>         <span style="color: #008000;">//</span><span style="color: #008000;">定义坐标轴</span>
<span style="color: #008080;">15</span>         <span style="color: #0000ff;">var</span> axisRight =<span style="color: #000000;"> d3.svg.axis()
</span><span style="color: #008080;">16</span> <span style="color: #000000;">                            .scale(xScale)       
</span><span style="color: #008080;">17</span>                             .orient("right")    <span style="color: #008000;">//</span><span style="color: #008000;">刻度方向向右</span>
<span style="color: #008080;">18</span>                             .tickValues([3,4,5,6,7<span style="color: #000000;">])            
</span><span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span> 
<span style="color: #008080;">21</span> 
<span style="color: #008080;">22</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在svg中添加一个包含坐标轴各元素的g元素</span>
<span style="color: #008080;">23</span>         <span style="color: #0000ff;">var</span> gAxis = svg.append("g"<span style="color: #000000;">)
</span><span style="color: #008080;">24</span>                     .attr("transform","translate(80,80)")    <span style="color: #008000;">//</span><span style="color: #008000;">平移到(80,80)</span>
<span style="color: #008080;">25</span>                     .attr("class","axis"<span style="color: #000000;">)
</span><span style="color: #008080;">26</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在gAxis中绘制坐标轴</span>
<span style="color: #008080;">27</span>         axisRight(gAxis)</span></pre>
</div>
<p>&nbsp;</p>
</div>
<div><span style="font-size: 18px;">效果图:</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js坐标轴的绘制方法、添加坐标轴的刻度和各比例尺的坐标轴(V3版本)4.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">比例尺scale的定义域为[0,10]。上面两个例子定义了两个坐标轴，刻度分别位于左边和右边，刻度值分别用<strong>ticks()</strong>和<strong>tickValues()</strong>来指定。注意刻度的区别。</span></div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">上面绘制的坐标轴，刻度的直线都是相同长度的:有时候也需要不同的长度的,最常见的是首位两个刻度的长度比内部要长。此时需要用到<strong>tickSize()</strong>，举个例子:</span></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span>  　　　　<span style="color: #0000ff;">var</span> width = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> height = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 3</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("width"<span style="color: #000000;">,width)
</span><span style="color: #008080;"> 6</span>                     .attr("height"<span style="color: #000000;">,height)
</span><span style="color: #008080;"> 7</span>         <span style="color: #008000;">//</span><span style="color: #008000;">用于坐标轴的线性比例尺</span>
<span style="color: #008080;"> 8</span> 
<span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">var</span> xScale =<span style="color: #000000;"> d3.scale.linear()
</span><span style="color: #008080;">10</span>                             .domain([0,10<span style="color: #000000;">])
</span><span style="color: #008080;">11</span>                             .range([0,300<span style="color: #000000;">])
</span><span style="color: #008080;">12</span> 
<span style="color: #008080;">13</span>         <span style="color: #008000;">//</span><span style="color: #008000;">定义坐标轴</span>
<span style="color: #008080;">14</span>         <span style="color: #0000ff;">var</span> axiosTop =<span style="color: #000000;"> d3.svg.axis()
</span><span style="color: #008080;">15</span> <span style="color: #000000;">                        .scale(xScale)
</span><span style="color: #008080;">16</span>                         .orient("top")  <span style="color: #008000;">//</span><span style="color: #008000;">刻度方向向上</span>
<span style="color: #008080;">17</span>                         .ticks(5<span style="color: #000000;">)
</span><span style="color: #008080;">18</span>                         .tickSize(2,4<span style="color: #000000;">)
</span><span style="color: #008080;">19　　　　　　　　　　　　　　　</span></span><span style="font-size: 18px;">.tickFormat(d3.format("$0.1f"))</span></pre>
<pre><code><span style="font-size: 18px;"><span style="color: #008080;">20</span> 
<span style="color: #008080;">21</span> 
<span style="color: #008080;">22</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在svg中添加一个包含坐标轴各元素的g元素</span>
<span style="color: #008080;">23</span>         <span style="color: #0000ff;">var</span> gAxis = svg.append("g"<span style="color: #000000;">)
</span><span style="color: #008080;">24</span>                     .attr("transform","translate(80,80)")    <span style="color: #008000;">//</span><span style="color: #008000;">平移到(80,80)</span>
<span style="color: #008080;">25</span>                     .attr("class","axis"<span style="color: #000000;">)
</span><span style="color: #008080;">26</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在gAxis中绘制坐标轴</span>
<span style="color: #008080;">27</span> <span style="color: #000000;">        axiosTop(gAxis)
</span><span style="color: #008080;">28</span>        </span> </pre>
</div>
<p>&nbsp;</p>
</div>
</div>
</div>
<div>
<div><span style="font-size: 18px;"><strong>tickSize()</strong>的第一个参数是内部刻度的直线长度，第二个参数是首尾两个刻度的直线长度。也可以用<strong>innerTickSize()</strong>和<strong>outerTickSize()</strong>分别进行设置。如图，两端的刻度线比内部的要长。</span></div>
</div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js坐标轴的绘制方法、添加坐标轴的刻度和各比例尺的坐标轴(V3版本)5.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><span style="font-size: 18px;">刻度文字的格式通过<strong>tickFormat()</strong>设置，此外还需要用到<strong>d3.format()</strong>，它返回的对象作为<strong>tickFormat()</strong>的参数。在<strong>d3.format()</strong>的参数里，可指定刻度文字的格式。例如在上面代码第19行处添加</span></span><strong><span style="font-size: 18px;">.tickFormat(d3.format("$0.1f")) ,</span></strong><span style="font-size: 18px;">然后看一下效果图:</span><strong><span style="font-size: 18px;"><br /></span></strong></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js坐标轴的绘制方法、添加坐标轴的刻度和各比例尺的坐标轴(V3版本)6.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">文字格式的规则遵循迷你语言的格式规范。</span></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 14pt;"><strong>各比例尺的坐标轴</strong></span></div>
<div><span style="font-size: 18px;">坐标轴必须要设置一个比例尺，根据比例尺的不同可以得到不同的坐标轴。使用的最多的是<strong>线性比例尺</strong>。下面来看看随着比例尺的不同，坐标轴的刻度是怎样变化的。</span></div>



</div>



</div>
<div>&nbsp;</div>
<div><strong><span style="font-size: 18px;">一 、 线性比例尺的坐标轴:</span></strong></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;">代码 :&nbsp;</span></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span>  　　　　<span style="color: #0000ff;">var</span> width = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> height = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 3</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("width"<span style="color: #000000;">,width)
</span><span style="color: #008080;"> 6</span>                     .attr("height"<span style="color: #000000;">,height)
</span><span style="color: #008080;"> 7</span> 
<span style="color: #008080;"> 8</span>         <span style="color: #008000;">//</span><span style="color: #008000;">用于坐标轴的比例尺</span>
<span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 线性比例尺</span>
<span style="color: #008080;">11</span>         <span style="color: #0000ff;">var</span> xScaleLine =<span style="color: #000000;"> d3.scale.linear()
</span><span style="color: #008080;">12</span>                         .domain([0,1<span style="color: #000000;">])
</span><span style="color: #008080;">13</span>                         .range([0,500<span style="color: #000000;">])
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span>         <span style="color: #008000;">//</span><span style="color: #008000;">定义坐标轴</span>
<span style="color: #008080;">16</span> 
<span style="color: #008080;">17</span>         <span style="color: #0000ff;">var</span> axisBottomLine =<span style="color: #000000;"> d3.svg.axis()
</span><span style="color: #008080;">18</span>                              .scale(xScaleLine)      <span style="color: #008000;">//</span><span style="color: #008000;">使用上面定义的比例尺</span>
<span style="color: #008080;">19</span>                              .orient("bottom")       <span style="color: #008000;">//</span><span style="color: #008000;">刻度方向向下</span>
<span style="color: #008080;">20</span> 
<span style="color: #008080;">21</span> 
<span style="color: #008080;">22</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在svg中添加一个包含坐标轴各元素的g元素</span>
<span style="color: #008080;">23</span>         <span style="color: #0000ff;">var</span> gAxis = svg.append("g"<span style="color: #000000;">)
</span><span style="color: #008080;">24</span>                     .attr("transform","translate(80,80)")    <span style="color: #008000;">//</span><span style="color: #008000;">平移到(80,80)</span>
<span style="color: #008080;">25</span>                     .attr("class","axis"<span style="color: #000000;">)
</span><span style="color: #008080;">26</span> 
<span style="color: #008080;">27</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在gAxis中绘制坐标轴</span>
<span style="color: #008080;">28</span>         axisBottomLine(gAxis)</span></pre>
</div>
<p>&nbsp;</p>
</div>
<div><span style="font-size: 18px;">效果图:</span></div>
<div>&nbsp;</div>
<div><strong><span style="font-size: 18px;"><img src="./images/D3.js坐标轴的绘制方法、添加坐标轴的刻度和各比例尺的坐标轴(V3版本)7.png" alt="" /></span></strong></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div><strong><span style="font-size: 18px;">二 、 指数比例尺的坐标轴:</span></strong></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;">代码:</span></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> 　　　　 <span style="color: #0000ff;">var</span> width = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> height = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 3</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("width"<span style="color: #000000;">,width)
</span><span style="color: #008080;"> 6</span>                     .attr("height"<span style="color: #000000;">,height)
</span><span style="color: #008080;"> 7</span> 
<span style="color: #008080;"> 8</span>         <span style="color: #008000;">//</span><span style="color: #008000;">用于坐标轴的比例尺</span>
<span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 指数比例尺</span>
<span style="color: #008080;">11</span>         <span style="color: #0000ff;">var</span> xScalePow =<span style="color: #000000;"> d3.scale.pow()
</span><span style="color: #008080;">12</span>                         .exponent(2<span style="color: #000000;">)
</span><span style="color: #008080;">13</span>                         .domain([0,1<span style="color: #000000;">])
</span><span style="color: #008080;">14</span>                         .range([0,500<span style="color: #000000;">])
</span><span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span> 
<span style="color: #008080;">17</span>         <span style="color: #008000;">//</span><span style="color: #008000;">定义坐标轴</span>
<span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span>         <span style="color: #0000ff;">var</span> axisBottompPow =<span style="color: #000000;"> d3.svg.axis()
</span><span style="color: #008080;">20</span>                              .scale(xScalePow)      <span style="color: #008000;">//</span><span style="color: #008000;">使用上面定义的比例尺</span>
<span style="color: #008080;">21</span>                              .orient("bottom")      <span style="color: #008000;">//</span><span style="color: #008000;">刻度方向向下</span>
<span style="color: #008080;">22</span> 
<span style="color: #008080;">23</span> 
<span style="color: #008080;">24</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在svg中添加一个包含坐标轴各元素的g元素</span>
<span style="color: #008080;">25</span>         <span style="color: #0000ff;">var</span> gAxis = svg.append("g"<span style="color: #000000;">)
</span><span style="color: #008080;">26</span>                     .attr("transform","translate(80,80)")    <span style="color: #008000;">//</span><span style="color: #008000;">平移到(80,80)</span>
<span style="color: #008080;">27</span>                     .attr("class","axis"<span style="color: #000000;">)
</span><span style="color: #008080;">28</span> 
<span style="color: #008080;">29</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在gAxis中绘制坐标轴</span>
<span style="color: #008080;">30</span>         axisBottompPow(gAxis)</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">效果图:</span></p>
<p><img src="./images/D3.js坐标轴的绘制方法、添加坐标轴的刻度和各比例尺的坐标轴(V3版本)8.png" alt="" /></p>
<p>&nbsp;</p>
<p><strong><span style="font-size: 18px;">三 、 对数比例尺的坐标轴:</span></strong></p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">代码 :</span></p>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span>  　　　　<span style="color: #0000ff;">var</span> width = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> height = 600<span style="color: #000000;">;
</span><span style="color: #008080;"> 3</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 4</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 5</span>                     .attr("width"<span style="color: #000000;">,width)
</span><span style="color: #008080;"> 6</span>                     .attr("height"<span style="color: #000000;">,height)
</span><span style="color: #008080;"> 7</span> 
<span style="color: #008080;"> 8</span>         <span style="color: #008000;">//</span><span style="color: #008000;">用于坐标轴的比例尺</span>
<span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span>         <span style="color: #0000ff;">var</span> xScaleLog =<span style="color: #000000;"> d3.scale.log()
</span><span style="color: #008080;">11</span>                             .domain([0.01,1<span style="color: #000000;">])
</span><span style="color: #008080;">12</span>                             .range([0,500<span style="color: #000000;">])
</span><span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span>         <span style="color: #008000;">//</span><span style="color: #008000;">定义坐标轴</span>
<span style="color: #008080;">16</span>         <span style="color: #0000ff;">var</span> axisBottomLog =<span style="color: #000000;"> d3.svg.axis()
</span><span style="color: #008080;">17</span>                              .scale(xScaleLog)      <span style="color: #008000;">//</span><span style="color: #008000;">使用上面定义的比例尺</span>
<span style="color: #008080;">18</span>                              .orient("bottom")      <span style="color: #008000;">//</span><span style="color: #008000;">刻度方向向下</span>
<span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在svg中添加一个包含坐标轴各元素的g元素</span>
<span style="color: #008080;">21</span>         <span style="color: #0000ff;">var</span> gAxis = svg.append("g"<span style="color: #000000;">)
</span><span style="color: #008080;">22</span>                     .attr("transform","translate(80,80)")    <span style="color: #008000;">//</span><span style="color: #008000;">平移到(80,80)</span>
<span style="color: #008080;">23</span>                     .attr("class","axis"<span style="color: #000000;">)
</span><span style="color: #008080;">24</span> 
<span style="color: #008080;">25</span>         <span style="color: #008000;">//</span><span style="color: #008000;">在gAxis中绘制坐标轴</span>
<span style="color: #008080;">26</span>         axisBottomLog(gAxis)</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">效果图:</span></p>
<p><img src="./images/D3.js坐标轴的绘制方法、添加坐标轴的刻度和各比例尺的坐标轴(V3版本)9.png" alt="" /></p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">其他比例尺下的坐标轴大家可以自己去试一下。</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">下一章给大家做一个带比例尺、坐标轴的柱形图。</span></p>
<p>&nbsp;</p>
</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>