<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修JS--插件： 树Tree 开发与实现' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>JS--插件： 树Tree 开发与实现</center></div><div class='banquan'>原文出处:本文由博客园博主SDP软件快速开发平台提供。<br/>
原文连接:https://www.cnblogs.com/szzzzn/p/11155913.html</div><br>
    <p>&nbsp;&nbsp; 日常在Web项目开发时，经常会碰到树形架构数据的显示，从数据库中获取数据，并且显示成树形。为了方便，我们可以写一个javascript的一个跨浏览器树控件，后续可以重复使用。本节分享一个自己开发的JS tree插件，对有需要的朋友可以直接下载使用。</p>
<p>&nbsp;&nbsp; Tree插件 需要实现</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; （1）、自动将数据组织成上下级关系，这样我们在前端手工添加数据或者从数据库中获取到的数据不需要我们来组织上下级关系</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; （2）、支持自定 加载目录树&nbsp; 支持XML、JSON 格式的数据加载</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; （3）、实现树节点的选择（单选、复选[级联选择]）功能</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; （4）、支持大数据的一次性加载</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 。。。。。。</p>
<p>&nbsp;&nbsp; 下面开始分享自己写的一个Tree 插件：&nbsp; 此插件基于Jquery&nbsp; 需要引用</p>
<p>&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; 第一：插件中每个树节点Node的参数JSON对象如下所示</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodeItem: function () {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodecode: "",&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; 节点编码<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodetext: "",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; 节点文本 [节点显示文本]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodetitle: "",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; 节点标题 [用于鼠标移过时显示的节点文本]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; supnodecode: "",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; 上级节点编码 [定义此节点所属的上级节点编码，通过此编码来组成上下级关系]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodeurl: "",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; 节点URL 表示当前节点自定的链接URL地址 <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; iconexpand: "",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; 节点展开图标 [目录树节点自定展开状态下显示的图标，如果为空，则采用默认的图标]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; iconcollapse: ""&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; 节点收缩图标 [目录树节点自定收缩状态下显示的图标，如果为空，则采用默认的图标]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; 第二：加载目录树的三种方法</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1、loadJson(Json)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JSON 对象目录树节点数组(一次性完成)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JSON 格式 是一个Array 数组&nbsp; 每项为一个 nodeItem 对象的参数<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp; nodecode: "", nodetext: "", nodetitle: "",supnodecode: "",nodeurl: "",iconexpand: "" ,iconcollapse: "" },<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {},...<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ]</p>
<p><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2、loadXml(xml)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XML字符串格式的节点数据(一次性完成)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; 说明：采用XML字符串格式&nbsp; 注意节点 tagName：nodecode nodetext 等 不允许变更 因为程序内部是直接采用这个名字来获取的&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;root&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;item&gt;&nbsp;&nbsp; //&nbsp; 每一个节点 内包含多个数据值&nbsp; &nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;nodecode&gt;&lt;![CDATA[节点编码值]]&gt;&lt;/nodecode&gt;&nbsp;&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;nodetext&gt;&lt;![CDATA[节点名称文本 ]]&gt;&lt;/nodetext&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;nodetitle&gt;&lt;![CDATA[节点鼠标移入显示提示文本]]&gt;&lt;/nodetitle&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;supnodecode&gt;&lt;![CDATA[节点所属上级即父节点编码]]&gt;&lt;/supnodecode&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;nodeurl&gt;&lt;![CDATA[节点关联链接地址]]&gt;&lt;/nodeurl&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;iconexpand&gt;&lt;![CDATA[节点展开时显示图标路径]]&gt;&lt;/iconexpand&gt;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &lt;iconcollapse&gt;&lt;![CDATA[节点收缩时显示图标路径]]&gt;&lt;/iconcollapse&gt;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/item&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ... ...<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/root&gt;</p>
<p><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3、通过插件对象 的方法&nbsp;&nbsp; addNodeItem(nodeItem)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 通过手工一条一条的添加节点项目(需要两步完成) 全部添加完成后<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 通过插件对象 makeTree()&nbsp;&nbsp;&nbsp; 再手工调用此方法，则可以创建树</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 第三：目录树内部重组上下级关系的事件方法&nbsp; 通过此方法，可以解决我们前端不再需要按照上下级关系来区分。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('485ece1a-1129-4883-9414-41177ce0d78f')"><img id="code_img_closed_485ece1a-1129-4883-9414-41177ce0d78f" class="code_img_closed" src="./images/JS--插件： 树Tree 开发与实现0.png" alt="" /><img id="code_img_opened_485ece1a-1129-4883-9414-41177ce0d78f" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('485ece1a-1129-4883-9414-41177ce0d78f',event)" src="./images/JS--插件： 树Tree 开发与实现1.png" alt="" />
<div id="cnblogs_code_open_485ece1a-1129-4883-9414-41177ce0d78f" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;">  1</span>   _createTree: <span style="color: #0000ff;">function</span> () {    <span style="color: #008000;">//</span><span style="color: #008000;"> 创建树HTML对象</span>
<span style="color: #008080;">  2</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> 初始化变量参数</span>
<span style="color: #008080;">  3</span>                     <span style="color: #0000ff;">this</span>._sdpTree.empty();       <span style="color: #008000;">//</span><span style="color: #008000;"> 清空目录树内的所有内容</span>
<span style="color: #008080;">  4</span>                     <span style="color: #0000ff;">this</span>._fnObject.focusNodeCode = ""<span style="color: #000000;">;
</span><span style="color: #008080;">  5</span>                     <span style="color: #0000ff;">this</span>._myNodes =<span style="color: #000000;"> [];
</span><span style="color: #008080;">  6</span>                     <span style="color: #0000ff;">this</span>._hsNodes = <span style="color: #0000ff;">new</span><span style="color: #000000;"> $.Hashtable();
</span><span style="color: #008080;">  7</span>                     <span style="color: #0000ff;">this</span>._dtNodes =<span style="color: #000000;"> [];
</span><span style="color: #008080;">  8</span>                     <span style="color: #0000ff;">var</span> _tmNodes = [], F = <span style="color: #0000ff;">this</span>._fnObject, P = <span style="color: #0000ff;">this</span>._fnObject.options, _this = <span style="color: #0000ff;">this</span><span style="color: #000000;">;
</span><span style="color: #008080;">  9</span> 
<span style="color: #008080;"> 10</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> 重组目录节点（依次将所有的节点组成自己的树） 一次循环完成 提高效率</span>
<span style="color: #008080;"> 11</span>                     <span style="color: #0000ff;">function</span><span style="color: #000000;"> Renew_GroupNodes(currNodes) {
</span><span style="color: #008080;"> 12</span>                         <span style="color: #008000;">//</span><span style="color: #008000;"> 重绘节点上下级关系</span>
<span style="color: #008080;"> 13</span>                         <span style="color: #0000ff;">function</span><span style="color: #000000;"> Renew_Tree(reNode) {
</span><span style="color: #008080;"> 14</span>                             <span style="color: #0000ff;">if</span><span style="color: #000000;"> (_tmNodes[reNode.nodecode]) {
</span><span style="color: #008080;"> 15</span>                                 <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> n = 0; n &lt; _tmNodes[reNode.nodecode].length; n++<span style="color: #000000;">) {
</span><span style="color: #008080;"> 16</span>                                     reNode._childs[n] =<span style="color: #000000;"> _tmNodes[reNode.nodecode][n];
</span><span style="color: #008080;"> 17</span>                                     reNode._childs[n]._parent =<span style="color: #000000;"> reNode;
</span><span style="color: #008080;"> 18</span>                                     reNode._childs[n]._firstFlag = (n == 0) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 19</span>                                     reNode._childs[n]._lastFlag = (n == (_tmNodes[reNode.nodecode].length - 1)) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 20</span>                                     reNode._childs[n]._haveChild = (_tmNodes[_tmNodes[reNode.nodecode][n].nodecode]) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 21</span>                                     reNode._childs[n]._nodeLevel = reNode._nodeLevel + 1<span style="color: #000000;">;
</span><span style="color: #008080;"> 22</span>                                     Renew_Tree(_tmNodes[reNode.nodecode][n]);  <span style="color: #008000;">//</span><span style="color: #008000;"> 迭代循环</span>
<span style="color: #008080;"> 23</span> <span style="color: #000000;">                                }
</span><span style="color: #008080;"> 24</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;"> 25</span> <span style="color: #000000;">                        };
</span><span style="color: #008080;"> 26</span> 
<span style="color: #008080;"> 27</span>                         <span style="color: #0000ff;">var</span> m = 0<span style="color: #000000;">;
</span><span style="color: #008080;"> 28</span>                         _tmNodes[P.rootcode] = [];   <span style="color: #008000;">//</span><span style="color: #008000;"> 根节点</span>
<span style="color: #008080;"> 29</span>                         <span style="color: #0000ff;">for</span> (m = 0; m &lt; currNodes.length; m++<span style="color: #000000;">) {
</span><span style="color: #008080;"> 30</span>                             <span style="color: #0000ff;">var</span> _nd =<span style="color: #000000;"> currNodes[m];
</span><span style="color: #008080;"> 31</span>                             _tmNodes[_nd.supnodecode] = _tmNodes[_nd.supnodecode] ||<span style="color: #000000;"> [];
</span><span style="color: #008080;"> 32</span> <span style="color: #000000;">                            _tmNodes[_nd.supnodecode].push(_nd);
</span><span style="color: #008080;"> 33</span> <span style="color: #000000;">                            _this._hsNodes.add(_nd.nodecode, _nd);
</span><span style="color: #008080;"> 34</span> <span style="color: #000000;">                        };
</span><span style="color: #008080;"> 35</span>                         <span style="color: #0000ff;">var</span> _rtNodes =<span style="color: #000000;"> _tmNodes[P.rootcode];
</span><span style="color: #008080;"> 36</span> 
<span style="color: #008080;"> 37</span>                         <span style="color: #0000ff;">for</span> (m = 0; m &lt; _rtNodes.length; m++<span style="color: #000000;">) {
</span><span style="color: #008080;"> 38</span>                             _this._dtNodes[m] =<span style="color: #000000;"> _rtNodes[m];
</span><span style="color: #008080;"> 39</span>                             _this._dtNodes[m]._parent = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 40</span>                             _this._dtNodes[m]._firstFlag = (m == 0) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span>;  <span style="color: #008000;">//</span><span style="color: #008000;"> 设置参数</span>
<span style="color: #008080;"> 41</span>                             _this._dtNodes[m]._lastFlag = (m == (_rtNodes.length - 1)) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 42</span>                             _this._dtNodes[m]._haveChild = (_tmNodes[_rtNodes[m].nodecode]) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 43</span>                             _this._dtNodes[m]._nodeLevel = 1<span style="color: #000000;">;
</span><span style="color: #008080;"> 44</span>                             Renew_Tree(_rtNodes[m]);                               <span style="color: #008000;">//</span><span style="color: #008000;"> 迭代循环</span>
<span style="color: #008080;"> 45</span> <span style="color: #000000;">                        };
</span><span style="color: #008080;"> 46</span> 
<span style="color: #008080;"> 47</span>                         _rtNodes = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 48</span>                         _tmNodes = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 49</span> <span style="color: #000000;">                    };
</span><span style="color: #008080;"> 50</span> 
<span style="color: #008080;"> 51</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> 执行节点重组</span>
<span style="color: #008080;"> 52</span> <span style="color: #000000;">                    Renew_GroupNodes(F.curNodes);
</span><span style="color: #008080;"> 53</span>                     F.curNodes = [];  <span style="color: #008000;">//</span><span style="color: #008000;"> 清空临时节点数组变量，便于后续重新加载使用</span>
<span style="color: #008080;"> 54</span> 
<span style="color: #008080;"> 55</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> 定义前缀字符</span>
<span style="color: #008080;"> 56</span>                     <span style="color: #0000ff;">var</span> full_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_full";     <span style="color: #008000;">//</span><span style="color: #008000;"> 完整的一个节点DIV（包含：连线、+号图片、节点图片、选择框、节点文本）</span>
<span style="color: #008080;"> 57</span>                     <span style="color: #0000ff;">var</span> node_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_span";     <span style="color: #008000;">//</span><span style="color: #008000;"> 节点SPAN</span>
<span style="color: #008080;"> 58</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> var plus_Prefix = this._myFnId + "_sdptree_node_plus";     // + 号图片</span>
<span style="color: #008080;"> 59</span>                     <span style="color: #0000ff;">var</span> nimg_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_icon";     <span style="color: #008000;">//</span><span style="color: #008000;"> 节点图片</span>
<span style="color: #008080;"> 60</span>                     <span style="color: #0000ff;">var</span> chkr_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_chk";      <span style="color: #008000;">//</span><span style="color: #008000;"> 选择图片</span>
<span style="color: #008080;"> 61</span>                     <span style="color: #0000ff;">var</span> text_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_text";     <span style="color: #008000;">//</span><span style="color: #008000;"> 节点文本</span>
<span style="color: #008080;"> 62</span>                     <span style="color: #0000ff;">var</span> clip_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_clip";     <span style="color: #008000;">//</span><span style="color: #008000;"> 子节点DIV</span>
<span style="color: #008080;"> 63</span> 
<span style="color: #008080;"> 64</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> 注意点：前台传入的所有自定义的图标，全部已经是指定的完整路径了，所以这里就不需要转换</span>
<span style="color: #008080;"> 65</span>                     <span style="color: #0000ff;">var</span> _rootCode =<span style="color: #000000;"> P.rootcode;
</span><span style="color: #008080;"> 66</span>                     <span style="color: #0000ff;">if</span> (P.showroot) {           <span style="color: #008000;">//</span><span style="color: #008000;"> 判定是否显示根节点</span>
<span style="color: #008080;"> 67</span>                         <span style="color: #0000ff;">var</span> tmRhtml =<span style="color: #000000;"> [];
</span><span style="color: #008080;"> 68</span>                         tmRhtml.push('&lt;div id="' + full_Prefix + '_' + _rootCode + '" stype="full" &gt;'<span style="color: #000000;">);
</span><span style="color: #008080;"> 69</span>                         tmRhtml.push('&lt;span id="' + node_Prefix + '_' + _rootCode + '" class="node_default" stype="node" &gt;'<span style="color: #000000;">);
</span><span style="color: #008080;"> 70</span>                         <span style="color: #0000ff;">if</span><span style="color: #000000;"> (P.showicon) {
</span><span style="color: #008080;"> 71</span>                             tmRhtml.push('&lt;span id="' + nimg_Prefix + '_' + _rootCode + '" stype="icon" '<span style="color: #000000;">);
</span><span style="color: #008080;"> 72</span>                             <span style="color: #0000ff;">if</span> (P.rooticon) {   <span style="color: #008000;">//</span><span style="color: #008000;"> 是否客户自定义的图片</span>
<span style="color: #008080;"> 73</span>                                 tmRhtml.push('class="custom_img" style="background-image: url(' + (P.rooticon) + ');"'<span style="color: #000000;">);
</span><span style="color: #008080;"> 74</span>                             } <span style="color: #0000ff;">else</span> {                                <span style="color: #008000;">//</span><span style="color: #008000;"> 启用默认的样式图片</span>
<span style="color: #008080;"> 75</span>                                 tmRhtml.push('class="root_img"'<span style="color: #000000;">);
</span><span style="color: #008080;"> 76</span> <span style="color: #000000;">                            };
</span><span style="color: #008080;"> 77</span>                             tmRhtml.push(' &gt;&lt;/span&gt;'<span style="color: #000000;">);
</span><span style="color: #008080;"> 78</span> <span style="color: #000000;">                        };
</span><span style="color: #008080;"> 79</span>                         <span style="color: #0000ff;">if</span> (P.selecttype == "checkbox") {     <span style="color: #008000;">//</span><span style="color: #008000;"> 是否开启选择按钮</span>
<span style="color: #008080;"> 80</span>                             tmRhtml.push('&lt;span id="' + chkr_Prefix + '_' + _rootCode + '" stype="check" class="checkbox"&gt;&lt;/span&gt;'<span style="color: #000000;">);
</span><span style="color: #008080;"> 81</span>                         } <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (P.selecttype == "radio"<span style="color: #000000;">) {
</span><span style="color: #008080;"> 82</span>                             tmRhtml.push('&lt;span id="' + chkr_Prefix + '_' + _rootCode + '" stype="check" class="radiobtn"&gt;&lt;/span&gt;'<span style="color: #000000;">);
</span><span style="color: #008080;"> 83</span> <span style="color: #000000;">                        };
</span><span style="color: #008080;"> 84</span>                         tmRhtml.push('&lt;span id="' + text_Prefix + '_' + _rootCode + '"  class="root_title" stype="text"&gt;' + P.roottext + '&lt;/span&gt;'<span style="color: #000000;">);
</span><span style="color: #008080;"> 85</span>                         tmRhtml.push('&lt;/span&gt;'<span style="color: #000000;">);
</span><span style="color: #008080;"> 86</span>                         tmRhtml.push('&lt;/div&gt;'<span style="color: #000000;">);
</span><span style="color: #008080;"> 87</span>                         <span style="color: #0000ff;">this</span>._sdpTree.append($(tmRhtml.join(""<span style="color: #000000;">)));
</span><span style="color: #008080;"> 88</span>                         tmRhtml = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 89</span> <span style="color: #000000;">                    };
</span><span style="color: #008080;"> 90</span>                     <span style="color: #0000ff;">var</span> $clipDom = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 91</span>                     <span style="color: #0000ff;">if</span> (P.showroot) $clipDom = $('&lt;div id="' + clip_Prefix + '_' + _rootCode + '" class="clipdiv" stype="clip" style="display: block" &gt;&lt;/div&gt;'<span style="color: #000000;">);
</span><span style="color: #008080;"> 92</span>                     <span style="color: #0000ff;">var</span> _recHTML = <span style="color: #0000ff;">this</span>._createNodes(<span style="color: #0000ff;">this</span><span style="color: #000000;">._dtNodes);
</span><span style="color: #008080;"> 93</span>                     <span style="color: #0000ff;">if</span><span style="color: #000000;"> (_recHTML) {
</span><span style="color: #008080;"> 94</span>                         <span style="color: #0000ff;">if</span> ($clipDom) { $clipDom.append($(_recHTML)); <span style="color: #0000ff;">this</span>._sdpTree.append($clipDom); } <span style="color: #0000ff;">else</span> { <span style="color: #0000ff;">this</span><span style="color: #000000;">._sdpTree.append($(_recHTML)); };
</span><span style="color: #008080;"> 95</span>                     } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
</span><span style="color: #008080;"> 96</span>                         <span style="color: #0000ff;">if</span> ($clipDom) { <span style="color: #0000ff;">this</span><span style="color: #000000;">._sdpTree.append($clipDom); };
</span><span style="color: #008080;"> 97</span> <span style="color: #000000;">                    };
</span><span style="color: #008080;"> 98</span>                     _recHTML = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 99</span> 
<span style="color: #008080;">100</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> 绑定事件</span>
<span style="color: #008080;">101</span>                     <span style="color: #0000ff;">this</span><span style="color: #000000;">._bindEvent();
</span><span style="color: #008080;">102</span>                     <span style="color: #0000ff;">if</span><span style="color: #000000;"> (P.openall) { F.expandAll(); };
</span><span style="color: #008080;">103</span>                 },</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; 第四：以上只是简单的介绍了一下Tree的主要加载和重组方法。下面我们将完整的JS插件代码贴出来，代码中有详细的注释</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 插件功能：复选、单选、展开、折叠、显示/隐藏节点连线 、支持插入节点、删除节点、节点小图标自定义、设置节点选中、获取目录树选择节点（支持XML，JSON等）</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 右击菜单（暂时不支持，因为需要用到弹出层，这里就屏蔽删除了此功能）&nbsp; 支持节点单击、双击、节点选择改变事件等等</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('40c9fd5b-0d17-4156-84d9-4400cf85c0f4')"><img id="code_img_closed_40c9fd5b-0d17-4156-84d9-4400cf85c0f4" class="code_img_closed" src="./images/JS--插件： 树Tree 开发与实现0.png" alt="" /><img id="code_img_opened_40c9fd5b-0d17-4156-84d9-4400cf85c0f4" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('40c9fd5b-0d17-4156-84d9-4400cf85c0f4',event)" src="./images/JS--插件： 树Tree 开发与实现1.png" alt="" />
<div id="cnblogs_code_open_40c9fd5b-0d17-4156-84d9-4400cf85c0f4" class="cnblogs_code_hide">
<pre><code>(<span style="color: #0000ff;">function</span><span style="color: #000000;"> ($) {
    $.fn.webTree </span>= <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> {
            sdptype: </span>"tree",           <span style="color: #008000;">//</span><span style="color: #008000;"> 树形目录</span>
            myObject: <span style="color: #0000ff;">null</span>,            <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 树Jquery对象 $("#treeID")</span>
            myContainer: <span style="color: #0000ff;">null</span>,         <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 包围树节点的容器Jquery对象[为了保证滚动条和位置的协调，特加入一个容器]</span>
            myFnId: "",                <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 内部使用ID[目录树控件可以不定义ID，此属性就是为无ID的情况下也能适用]</span>
            sdpTree: <span style="color: #0000ff;">null</span>,             <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 插件自动生成树节点的包围容器,与myContainer 容器非同一个容器，是在myContainer的内部</span>
            focusNodeCode: <span style="color: #0000ff;">null</span>,       <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 树当前获取到焦点的节点编码</span>
            defaults: {                <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 树默认相关参数</span>
                sdpfixed: <span style="color: #0000ff;">false</span>,       <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 是否设计器设计的固定目录树</span>
                showroot: <span style="color: #0000ff;">true</span>,        <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 是否显示根目录</span>
                showline: <span style="color: #0000ff;">true</span>,        <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 是否显示连接竖线</span>
                showicon: <span style="color: #0000ff;">true</span>,        <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 是否显示节点图片</span>
                selecttype: "",        <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 树节点选择类型 "":表示无选择按钮; checkbox:表示启用复选按钮; radio:表示启用单选按钮</span>
                cascade: <span style="color: #0000ff;">false</span>,        <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 开启复选按钮时，是否启用级联选择(自动勾选下级及所属上级)</span>
                popmenu: <span style="color: #0000ff;">false</span>,        <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 是否启用右击弹出菜单</span>
                openall: <span style="color: #0000ff;">false</span>,        <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 是否展开所有节点;false: 展开第一级</span>
                rooticon: "",          <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 根目录节点自定义显示图标文件完整路径名称 [平台设计的则放在对应的图片目录中]</span>
                middefticon: "",       <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 中间节点收缩自定显示图标文件完整路径名称</span>
                midexpdicon: "",       <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 中间节点展开自定显示图标文件完整路径名称</span>
                endnodeicon: "",       <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 末级节点显示自定显示图标文件完整路径名称</span>
                customload: "",        <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 树自定加载事件（事件名称字符串或事件方法）[主要目的：为了让右击刷新按钮能找到重新加载数据的源头方法]</span>
                nodeclick: "",         <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 树目录节点单击事件（事件名称字符串或事件方法）</span>
                nodedblclick: "",      <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 树目录节点双击事件（事件名称字符串或事件方法）</span>
                checkedchange: "",     <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 树目录节点选择改变事件（事件名称字符串或事件方法）[只有开启了选择，才有效]</span>
                rootcode: "-1",        <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 根节点Code ID（目的是为支持从中间节点进行加载目录树的功能）默认为-1</span>
                roottext: "树形目录",  <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 根目录节点名称</span>
                rooturl: ""            <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 根目录超连接URL地址</span>
<span style="color: #000000;">            },
            options: {},               </span><span style="color: #008000;">//</span><span style="color: #008000;"> Tree 控件最终参数</span>
            curNodes: [],              <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 临时树节点数组(添加节点时临时储存)</span>

            <span style="color: #008000;">//</span><span style="color: #008000;"> @ method: init() 插件实例初始化</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 执行插件实例的初始化</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [object] element 控件对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            init: <span style="color: #0000ff;">function</span> (element) {        <span style="color: #008000;">//</span><span style="color: #008000;"> 树初始化</span>
                <span style="color: #0000ff;">this</span>.myObject =<span style="color: #000000;"> $(element);
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.myObject.length == 0) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">this</span>.myContainer = <span style="color: #0000ff;">this</span>.myObject.children('div[sdptype="treebase"]'<span style="color: #000000;">);
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.myContainer.length == 0) { <span style="color: #008000;">//</span><span style="color: #008000;"> 重新创建</span>
                    <span style="color: #0000ff;">this</span>.myObject.empty().append('&lt;div sdptype="treebase" class="sdp-tree-base" &gt;&lt;/div&gt;'<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">this</span>.myContainer = <span style="color: #0000ff;">this</span>.myObject.children('div[sdptype="treebase"]'<span style="color: #000000;">);
                };
                </span><span style="color: #0000ff;">this</span>.myFnId = <span style="color: #0000ff;">this</span>.myObject.attr("id") || $.newGuid();               <span style="color: #008000;">//</span><span style="color: #008000;"> Tree 内部使用ID 用于创建NODE各个节点</span>
                <span style="color: #0000ff;">this</span>.myContainer.empty().append('&lt;div class="sdp-tree-in"&gt;&lt;/div&gt;');  <span style="color: #008000;">//</span><span style="color: #008000;"> 添加一个正式的目录树容器</span>
                <span style="color: #0000ff;">this</span>.sdpTree = <span style="color: #0000ff;">this</span>.myContainer.find("div.sdp-tree-in");             <span style="color: #008000;">//</span><span style="color: #008000;"> 获取sdpTree容器Jquery对象</span>

                <span style="color: #008000;">//</span><span style="color: #008000;"> 设置内部参数</span>
                <span style="color: #0000ff;">this</span>._methods._fnObject = <span style="color: #0000ff;">this</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">this</span>._methods._myObject = <span style="color: #0000ff;">this</span><span style="color: #000000;">.myObject;
                </span><span style="color: #0000ff;">this</span>._methods._myContainer = <span style="color: #0000ff;">this</span><span style="color: #000000;">.myContainer;
                </span><span style="color: #0000ff;">this</span>._methods._myFnId = <span style="color: #0000ff;">this</span><span style="color: #000000;">.myFnId;
                </span><span style="color: #0000ff;">this</span>._methods._sdpTree = <span style="color: #0000ff;">this</span><span style="color: #000000;">.sdpTree;

                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 加载绑定参数</span>
                <span style="color: #0000ff;">this</span><span style="color: #000000;">._loadParam();
                </span><span style="color: #0000ff;">this</span><span style="color: #000000;">._bindEvent();
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: setOptions() 自定设置控件Options属性值</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 自定设置控件Options属性值</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [object] options 树形配置参数 Json格式</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            setOptions: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (options) {
                </span><span style="color: #0000ff;">if</span> (!options) { options =<span style="color: #000000;"> {}; };
                </span><span style="color: #0000ff;">this</span>.options = $.extend({}, <span style="color: #0000ff;">this</span>.options, options);  <span style="color: #008000;">//</span><span style="color: #008000;"> 合并目录树相关参数</span>
<span style="color: #000000;">            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: nodeItem() 创建一个空节点参数对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 通过此方法创建一个空节点参数对象，用于前台初始化增加节点或执行插入节点使用,通过扩展方法来组合参数</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: [array]节点{  // 节点参数</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                       nodecode: "",         // string  节点编码 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                       nodetext: "",         // string  节点名称文本 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                       nodetitle: "",        // string  节点鼠标移入显示提示文本</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                       supnodecode: "",      // string  节点所属上级即父节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                       nodeurl: "",          // string  节点关联链接地址</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                       iconexpand: "",       // string  节点展开时显示图标完整路径</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                       iconcollapse: ""      // string  节点收缩时显示图标完整路径</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                     }</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            nodeItem: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> {
                    nodecode: </span>""<span style="color: #000000;">,
                    nodetext: </span>""<span style="color: #000000;">,
                    nodetitle: </span>""<span style="color: #000000;">,
                    supnodecode: </span>""<span style="color: #000000;">,
                    nodeurl: </span>""<span style="color: #000000;">,
                    iconexpand: </span>"",     <span style="color: #008000;">//</span><span style="color: #008000;"> 节点展开时显示图标完整路径</span>
                    iconcollapse: ""    <span style="color: #008000;">//</span><span style="color: #008000;"> 节点收缩时显示图标完整路径</span>
<span style="color: #000000;">                };
            },


            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 创建树形目录</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> 由开发人员通过以下3种方式创建树数据</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> 1、loadJson(Json)             JSON 对象目录树节点数组(一次性完成)</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> 2、loadXml(xml)               XML字符串格式的节点数据(一次性完成)</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> 3、addNodeItem(nodeItem)      通过手工一条一条的添加节点项目(需要两步完成)</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> 3、makeTree()                 再手工调用此方法，则可以创建树</span>

            <span style="color: #008000;">//</span><span style="color: #008000;"> @ method: addNodeItem() 添加目录树节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 通过此方法向目录树添加节点数据</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [array] nodeItem{} 格式参数数组</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            addNodeItem: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeItem) {
                </span><span style="color: #0000ff;">var</span> _curNodeItem = $.extend({}, <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">this</span>.nodeItem(), nodeItem);   <span style="color: #008000;">//</span><span style="color: #008000;"> 合并参数</span>
                <span style="color: #0000ff;">if</span> ($.isNull(_curNodeItem.nodecode)) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">if</span> ($.isNull(_curNodeItem.supnodecode)) { _curNodeItem.supnodecode = <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode; };
                </span><span style="color: #0000ff;">this</span>.curNodes[<span style="color: #0000ff;">this</span>.curNodes.length] = {                           <span style="color: #008000;">//</span><span style="color: #008000;"> 在临时树节点数组中添加待加入的节点信息</span>
<span style="color: #000000;">                    nodecode: _curNodeItem.nodecode,
                    nodetext: _curNodeItem.nodetext </span>|| ""<span style="color: #000000;">,
                    nodetitle: _curNodeItem.nodetitle </span>|| ""<span style="color: #000000;">,
                    supnodecode: _curNodeItem.supnodecode,
                    nodeurl: _curNodeItem.nodeurl </span>|| ""<span style="color: #000000;">,
                    iconexpand: _curNodeItem.iconexpand </span>|| ""<span style="color: #000000;">,
                    iconcollapse: _curNodeItem.iconcollapse </span>|| ""<span style="color: #000000;">,
                    _parent: </span><span style="color: #0000ff;">null</span>,            <span style="color: #008000;">//</span><span style="color: #008000;"> 所属的父节点 </span>
                    _firstFlag: <span style="color: #0000ff;">false</span>,        <span style="color: #008000;">//</span><span style="color: #008000;"> 本级中的首位 标志</span>
                    _lastFlag: <span style="color: #0000ff;">false</span>,         <span style="color: #008000;">//</span><span style="color: #008000;"> 本级中的末位 标志</span>
                    _nodeLevel: 0,            <span style="color: #008000;">//</span><span style="color: #008000;"> 当前节点级别 默认0</span>
                    _haveChild: <span style="color: #0000ff;">false</span>,        <span style="color: #008000;">//</span><span style="color: #008000;"> 是否包含下级</span>
                    _childs: []               <span style="color: #008000;">//</span><span style="color: #008000;"> 子节点的数组</span>
<span style="color: #000000;">                };
                _curNodeItem </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: loadXml() 加载XML格式的节点数据</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 直接加载解析XML格式的节点数据</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [object] xml XML格式的节点字符串或XmlDocument对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            loadXml: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (xml) {
                </span><span style="color: #0000ff;">if</span> ($.isNull(<span style="color: #0000ff;">this</span>.options.rootcode)) { <span style="color: #0000ff;">this</span>.options.rootcode = "-1"; }; <span style="color: #008000;">//</span><span style="color: #008000;"> 设置根节点编码</span>
                <span style="color: #0000ff;">this</span>.curNodes = [];                                                     <span style="color: #008000;">//</span><span style="color: #008000;"> 清空变量数据</span>
                <span style="color: #0000ff;">if</span><span style="color: #000000;"> (xml) {
                    </span><span style="color: #0000ff;">var</span> currXmlDoc = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                    </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">typeof</span> (xml) == "object"<span style="color: #000000;">) {
                        currXmlDoc </span>=<span style="color: #000000;"> xml;
                    } </span><span style="color: #0000ff;">else</span> {                          <span style="color: #008000;">//</span><span style="color: #008000;">   string</span>
                        currXmlDoc =<span style="color: #000000;"> $.loadXmlString(String(xml));
                    };
                    </span><span style="color: #0000ff;">if</span> (currXmlDoc) {               <span style="color: #008000;">//</span><span style="color: #008000;"> 再次判定  开始解析</span>
                        <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> nn = 0; nn &lt; currXmlDoc.documentElement.childNodes.length; nn++<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">var</span> _curNode =<span style="color: #000000;"> currXmlDoc.documentElement.childNodes[nn];
                            </span><span style="color: #0000ff;">var</span> _curAddItem = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.nodeItem();
                            </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> jj = 0; jj &lt; _curNode.childNodes.length; jj++<span style="color: #000000;">) {
                                </span><span style="color: #0000ff;">var</span> _subItem =<span style="color: #000000;"> _curNode.childNodes[jj];
                                </span><span style="color: #0000ff;">switch</span><span style="color: #000000;"> (_subItem.tagName.toLowerCase()) {
                                    </span><span style="color: #0000ff;">case</span> "nodecode"<span style="color: #000000;">:
                                        _curAddItem.nodecode </span>=<span style="color: #000000;"> $(_subItem).text();
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">case</span> "nodetext"<span style="color: #000000;">:
                                        _curAddItem.nodetext </span>=<span style="color: #000000;"> $(_subItem).text();
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">case</span> "nodetitle"<span style="color: #000000;">:
                                        _curAddItem.nodetitle </span>=<span style="color: #000000;"> $(_subItem).text();
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">case</span> "supnodecode"<span style="color: #000000;">:
                                        _curAddItem.supnodecode </span>=<span style="color: #000000;"> $(_subItem).text();
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">case</span> "nodeurl"<span style="color: #000000;">:
                                        _curAddItem.nodeurl </span>=<span style="color: #000000;"> $(_subItem).text();
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">case</span> "iconexpand"<span style="color: #000000;">:
                                        _curAddItem.iconexpand </span>=<span style="color: #000000;"> $(_subItem).text();
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">case</span> "iconcollapse"<span style="color: #000000;">:
                                        _curAddItem.iconcollapse </span>=<span style="color: #000000;"> $(_subItem).text();
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                };
                            };

                            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.addNodeItem(_curAddItem);
                        }
                    }
                };

                </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.makeTree();

                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 说明：采用XML字符串格式</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> &lt;root&gt;</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">    &lt;item&gt;   // 每一个节点 内包含多个数据值   </span>
                <span style="color: #008000;">//</span><span style="color: #008000;">        &lt;nodecode&gt;&lt;![CDATA[节点编码值]]&gt;&lt;/nodecode&gt;";          注意节点 tagName：nodecode nodetext 等 不允许变更 因为程序内部是直接采用这个名字来获取的         </span>
                <span style="color: #008000;">//</span><span style="color: #008000;">        &lt;nodetext&gt;&lt;![CDATA[节点名称文本 ]]&gt;&lt;/nodetext&gt;";  </span>
                <span style="color: #008000;">//</span><span style="color: #008000;">        &lt;nodetitle&gt;&lt;![CDATA[节点鼠标移入显示提示文本]]&gt;&lt;/nodetitle&gt;";  </span>
                <span style="color: #008000;">//</span><span style="color: #008000;">        &lt;supnodecode&gt;&lt;![CDATA[节点所属上级即父节点编码]]&gt;&lt;/supnodecode&gt;";  </span>
                <span style="color: #008000;">//</span><span style="color: #008000;">        &lt;nodeurl&gt;&lt;![CDATA[节点关联链接地址]]&gt;&lt;/nodeurl&gt;"; </span>
                <span style="color: #008000;">//</span><span style="color: #008000;">        &lt;iconexpand&gt;&lt;![CDATA[节点展开时显示图标路径]]&gt;&lt;/iconexpand&gt;";  </span>
                <span style="color: #008000;">//</span><span style="color: #008000;">        &lt;iconcollapse&gt;&lt;![CDATA[节点收缩时显示图标路径]]&gt;&lt;/iconcollapse&gt;";  </span>
                <span style="color: #008000;">//</span><span style="color: #008000;">    &lt;/item&gt;</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">&lt;/root&gt;</span>
<span style="color: #000000;">            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: loadJson() 加载JSON格式的节点数据</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 直接加载解析JSON格式的节点数据</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [array] json JSON数据对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            loadJson: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (json) {
                </span><span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">this</span>.options.rootcode) { <span style="color: #0000ff;">this</span>.options.rootcode = "-1"; };            <span style="color: #008000;">//</span><span style="color: #008000;"> 设置根节点编码</span>
                <span style="color: #0000ff;">this</span>.curNodes = [];                                                       <span style="color: #008000;">//</span><span style="color: #008000;"> 清空变量数据</span>
                <span style="color: #0000ff;">if</span><span style="color: #000000;"> (json) {
                    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> jj = 0; jj &lt; json.length; jj++<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">var</span> jsonItem =<span style="color: #000000;"> json[jj];
                        </span><span style="color: #0000ff;">if</span> (!jsonItem.nodecode) { <span style="color: #0000ff;">continue</span>; };   <span style="color: #008000;">//</span><span style="color: #008000;"> 节点编码不允许为空</span>

                        <span style="color: #0000ff;">var</span> addsItem = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.nodeItem();
                        addsItem.nodecode </span>=<span style="color: #000000;"> jsonItem.nodecode;
                        addsItem.nodetext </span>= jsonItem.nodetext || ""<span style="color: #000000;">;
                        addsItem.nodetitle </span>= jsonItem.nodetitle || ""<span style="color: #000000;">;
                        addsItem.supnodecode </span>= jsonItem.supnodecode || ""<span style="color: #000000;">;
                        addsItem.nodeurl </span>= jsonItem.nodeurl || ""<span style="color: #000000;">;
                        addsItem.iconexpand </span>= jsonItem.iconexpand || ""<span style="color: #000000;">;
                        addsItem.iconcollapse </span>= jsonItem.iconcollapse || ""<span style="color: #000000;">;

                        </span><span style="color: #0000ff;">this</span>.addNodeItem(addsItem);   <span style="color: #008000;">//</span><span style="color: #008000;"> 添加节点 </span>
<span style="color: #000000;">                    };
                };
                </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.makeTree();

                </span><span style="color: #008000;">//</span><span style="color: #008000;"> JSON 格式 是一个Array 数组 每项为一个 nodeItem 对象的参数</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> [{ nodecode: "", nodetext: "", nodetitle: "",supnodecode: "",nodeurl: "",iconexpand: "",iconcollapse: ""},</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">   {},...</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> ]</span>
<span style="color: #000000;">            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: loadNodeItems() 加载NodeItem Array节点数组数据</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 直接加载NodeItem Array节点数组数据</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [array] itemArray NodeItem Array节点数组数据</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            loadNodeItems: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (itemArray) {
                </span><span style="color: #0000ff;">if</span> (!itemArray) { itemArray =<span style="color: #000000;"> []; };
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> jj = 0; jj &lt; itemArray.length; jj++<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">var</span> ndItem =<span style="color: #000000;"> itemArray[jj];
                    </span><span style="color: #0000ff;">if</span> (!ndItem.nodecode) { <span style="color: #0000ff;">continue</span>; };   <span style="color: #008000;">//</span><span style="color: #008000;"> 节点编码不允许为空</span>
                    <span style="color: #0000ff;">this</span>.addNodeItem(ndItem);              <span style="color: #008000;">//</span><span style="color: #008000;"> 添加节点 </span>
<span style="color: #000000;">                };
                </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.makeTree();
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: makeTree() 创建生成树</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 创建生成树对象的所有节点并显示出来</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @         此方法执行之前需要先获取或手工添加完成所有树节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @         前台JS 必须通过 addNodeItem(nodeItem) 方法添加节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部内部调用方法</span>
            makeTree: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.sdpTree.empty();
                </span><span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._createTree();
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: appendNode() 插入节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 通过此方法向目录树插入新的节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [array] nodeItem {} 格式参数数组</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            appendNode: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeItem) {
                </span><span style="color: #0000ff;">var</span> _this = <span style="color: #0000ff;">this</span>, P = <span style="color: #0000ff;">this</span><span style="color: #000000;">.options;
                </span><span style="color: #0000ff;">var</span> curNewNode = $.extend({}, <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">this</span>.nodeItem(), nodeItem);          <span style="color: #008000;">//</span><span style="color: #008000;"> 合并节点输入参数</span>
                <span style="color: #0000ff;">if</span> ($.isNull(curNewNode.nodecode)) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">if</span> ($.isNull(curNewNode.supnodecode)) { curNewNode.supnodecode =<span style="color: #000000;"> P.rootcode; };
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>._methods._hsNodes[curNewNode.nodecode]) { <span style="color: #0000ff;">return</span>; };          <span style="color: #008000;">//</span><span style="color: #008000;"> 节点编码已经存在,不执行添加</span>
                <span style="color: #0000ff;">if</span> (P.rootcode != curNewNode.supnodecode &amp;&amp; !<span style="color: #0000ff;">this</span>._methods._hsNodes[curNewNode.supnodecode]) { <span style="color: #0000ff;">return</span>; };  <span style="color: #008000;">//</span><span style="color: #008000;"> 父节点不为根节点时，父节点数据不存在，则不执行</span>
                <span style="color: #0000ff;">var</span> newNode =<span style="color: #000000;"> {
                    nodecode: curNewNode.nodecode,
                    nodetext: curNewNode.nodetext </span>|| ""<span style="color: #000000;">,
                    nodetitle: curNewNode.nodetitle </span>|| ""<span style="color: #000000;">,
                    supnodecode: curNewNode.supnodecode,
                    nodeurl: curNewNode.nodeurl </span>|| ""<span style="color: #000000;">,
                    iconexpand: curNewNode.iconexpand </span>|| ""<span style="color: #000000;">,
                    iconcollapse: curNewNode.iconcollapse </span>|| ""<span style="color: #000000;">,
                    _parent: </span><span style="color: #0000ff;">null</span>,            <span style="color: #008000;">//</span><span style="color: #008000;"> 所属的父节点 </span>
                    _firstFlag: <span style="color: #0000ff;">false</span>,        <span style="color: #008000;">//</span><span style="color: #008000;"> 本级中的首位 标志</span>
                    _lastFlag: <span style="color: #0000ff;">false</span>,         <span style="color: #008000;">//</span><span style="color: #008000;"> 本级中的末位 标志</span>
                    _nodeLevel: 0,            <span style="color: #008000;">//</span><span style="color: #008000;"> 当前节点级别 默认0</span>
                    _haveChild: <span style="color: #0000ff;">false</span>,        <span style="color: #008000;">//</span><span style="color: #008000;"> 是否包含下级</span>
                    _childs: []               <span style="color: #008000;">//</span><span style="color: #008000;"> 子节点的数组</span>
<span style="color: #000000;">                };
                curNewNode </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">if</span> (P.rootcode ==<span style="color: #000000;"> newNode.supnodecode) {
                    newNode._parent </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                    newNode._nodeLevel </span>= 1<span style="color: #000000;">;
                    </span><span style="color: #0000ff;">var</span> len = <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._dtNodes.length;
                    </span><span style="color: #0000ff;">if</span> (len &gt; 0<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">this</span>._methods._dtNodes[len - 1]._lastFlag = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                        newNode._lastFlag </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                    } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        newNode._firstFlag </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                        newNode._lastFlag </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                    };
                    </span><span style="color: #0000ff;">this</span>._methods._dtNodes.push(newNode);   <span style="color: #008000;">//</span><span style="color: #008000;"> 添加到第一级中</span>
                } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    </span><span style="color: #0000ff;">var</span> curParent = <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[newNode.supnodecode];
                    newNode._parent </span>=<span style="color: #000000;"> curParent;
                    newNode._nodeLevel </span>= curParent._nodeLevel + 1<span style="color: #000000;">;
                    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (curParent._haveChild) {
                        curParent._childs[curParent._childs.length </span>- 1]._lastFlag = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                        newNode._lastFlag </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                    } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        curParent._haveChild </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                        newNode._firstFlag </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                        newNode._lastFlag </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                    };
                    curParent._childs.push(newNode);  </span><span style="color: #008000;">//</span><span style="color: #008000;"> 添加到父节点的子节点数组中</span>
<span style="color: #000000;">                };
                </span><span style="color: #0000ff;">this</span>._methods._hsNodes.add(newNode.nodecode, newNode);  <span style="color: #008000;">//</span><span style="color: #008000;"> 加入HASH</span>

                <span style="color: #008000;">//</span><span style="color: #008000;"> 创建节点</span>
                <span style="color: #0000ff;">var</span> curNodes =<span style="color: #000000;"> []; curNodes.push(newNode);
                </span><span style="color: #0000ff;">var</span> $appNode = $(<span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._createNodes(curNodes));
                </span><span style="color: #0000ff;">if</span> (newNode.nodecode ==<span style="color: #000000;"> P.rootcode) {
                    </span><span style="color: #0000ff;">if</span> (P.showroot) { <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_clip_" + P.rootcode).append($appNode); } <span style="color: #0000ff;">else</span> { <span style="color: #0000ff;">this</span><span style="color: #000000;">.sdpTree.append($appNode); };
                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    </span><span style="color: #0000ff;">var</span> $parent_clip = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_clip_" +<span style="color: #000000;"> newNode.supnodecode);
                    </span><span style="color: #0000ff;">if</span> ($parent_clip.length &gt; 0<span style="color: #000000;">) {
                        $parent_clip.append($appNode);
                    }
                    </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        $now_clip </span>= $('&lt;div id="' + <span style="color: #0000ff;">this</span>.myFnId + '_sdptree_node_clip_' + newNode.supnodecode + '" class="clipdiv" stype="clip" style="display: block" &gt;&lt;/div&gt;'<span style="color: #000000;">);
                        $now_clip.append($appNode);
                        </span><span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_full_" +<span style="color: #000000;"> newNode.supnodecode).after($now_clip);
                    };
                };

                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 更新节点样式</span>
                <span style="color: #0000ff;">if</span> (newNode.supnodecode == P.rootcode) {   <span style="color: #008000;">//</span><span style="color: #008000;"> 上级为根节点的时候，直接更新前一个节点    </span>
                    <span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>._methods._dtNodes.length &gt; 1<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">var</span> _prevCode = <span style="color: #0000ff;">this</span>._methods._dtNodes[<span style="color: #0000ff;">this</span>._methods._dtNodes.length - 2<span style="color: #000000;">].nodecode;
                        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._updateNode(_prevCode);
                    };
                } </span><span style="color: #0000ff;">else</span> {                                             <span style="color: #008000;">//</span><span style="color: #008000;"> 上级不为根节点时候，直接更新此上级节点</span>
                    <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._updateNode(newNode.supnodecode);
                };

                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 绑定节点Hover事件</span>
                $appNode.find("span[stype='node']").hover(<span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                    </span><span style="color: #0000ff;">var</span> tmTitle = _this._methods._hsNodes[$(<span style="color: #0000ff;">this</span>).attr("id").replace(_this.myFnId + "_sdptree_node_span_", ""<span style="color: #000000;">)].nodetitle;
                    </span><span style="color: #0000ff;">if</span> (!tmTitle) { tmTitle = $.text(<span style="color: #0000ff;">this</span><span style="color: #000000;">); };
                    $(</span><span style="color: #0000ff;">this</span>).addClass("node_hover").attr("title"<span style="color: #000000;">, tmTitle);
                }, </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                    $(</span><span style="color: #0000ff;">this</span>).removeClass("node_hover").attr("title", ""<span style="color: #000000;">);
                });
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: deleteNode()  删除树节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 删除指定节点编码的树节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [string] nodeCode 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            deleteNode: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">if</span> ($.isNull(nodeCode)) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">if</span> (nodeCode == <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode) {
                    </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.clearAll();
                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    </span><span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">this</span>._methods._hsNodes[nodeCode]) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                    </span><span style="color: #0000ff;">var</span> removeNode = <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[nodeCode];
                    </span><span style="color: #0000ff;">var</span> prevNodeCode = <span style="color: #0000ff;">this</span><span style="color: #000000;">.getPrevNodeCode(nodeCode);
                    </span><span style="color: #0000ff;">var</span> tm2 = 0<span style="color: #000000;">;

                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 首先删除HASH表中的所有子节点 先不删除本身节点</span>
                    <span style="color: #0000ff;">if</span><span style="color: #000000;"> (removeNode._haveChild) {
                        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm1 = 0; tm1 &lt; removeNode._childs.length; tm1++<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._removeHashNodes(removeNode._childs[tm1].nodecode);
                        };
                    };

                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 移除dtNodes数组中的节点项</span>
                    <span style="color: #0000ff;">if</span><span style="color: #000000;"> (removeNode._parent) {
                        </span><span style="color: #0000ff;">for</span> (tm2 = 0; tm2 &lt; removeNode._parent._childs.length; tm2++<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">if</span> (removeNode._parent._childs[tm2].nodecode ==<span style="color: #000000;"> nodeCode) {
                                removeNode._parent._childs.splice(tm2</span>--, 1<span style="color: #000000;">);
                                </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                            };
                        };
                    } </span><span style="color: #0000ff;">else</span> {   <span style="color: #008000;">//</span><span style="color: #008000;"> 根目录下的第一级</span>
                        <span style="color: #0000ff;">for</span> (tm2 = 0; tm2 &lt; <span style="color: #0000ff;">this</span>._methods._dtNodes.length; tm2++<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>._methods._dtNodes[tm2].nodecode ==<span style="color: #000000;"> nodeCode) {
                                </span><span style="color: #0000ff;">this</span>._methods._dtNodes.splice(tm2--, 1<span style="color: #000000;">);
                                </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                            };
                        };
                    };

                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 移除DOM Node对象</span>
                    <span style="color: #0000ff;">var</span> rmNodeFullDom = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_full_" +<span style="color: #000000;"> nodeCode);
                    </span><span style="color: #0000ff;">var</span> rmNodeClipDom = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_clip_" +<span style="color: #000000;"> nodeCode);
                    </span><span style="color: #0000ff;">if</span> (rmNodeFullDom.length &gt; 0<span style="color: #000000;">) { rmNodeFullDom.remove(); };
                    </span><span style="color: #0000ff;">if</span> (rmNodeClipDom.length &gt; 0<span style="color: #000000;">) { rmNodeClipDom.remove(); };

                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 更新Node父节点的数据</span>
                    <span style="color: #0000ff;">var</span> parentND =<span style="color: #000000;"> removeNode._parent;
                    </span><span style="color: #0000ff;">if</span> (!<span style="color: #000000;">parentND) {
                        </span><span style="color: #0000ff;">for</span> (tm2 = 0; tm2 &lt; <span style="color: #0000ff;">this</span>._methods._dtNodes.length; tm2++<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">this</span>._methods._dtNodes[tm2]._firstFlag = (tm2 == 0) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                            </span><span style="color: #0000ff;">this</span>._methods._dtNodes[tm2]._lastFlag = (tm2 == (<span style="color: #0000ff;">this</span>._methods._dtNodes.length - 1)) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                        };
                    } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        </span><span style="color: #0000ff;">if</span> (parentND._childs.length &gt; 0<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">for</span> (tm2 = 0; tm2 &lt; parentND._childs.length; tm2++<span style="color: #000000;">) {
                                parentND._childs[tm2]._firstFlag </span>= (tm2 == 0) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                                parentND._childs[tm2]._lastFlag </span>= (tm2 == (parentND._childs.length - 1)) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                            };
                        } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                            parentND._haveChild </span>= <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                        };
                    };

                    </span><span style="color: #0000ff;">this</span>._methods._hsNodes.remove(removeNode.nodecode);  <span style="color: #008000;">//</span><span style="color: #008000;"> 从Hash表删除自己</span>

                    <span style="color: #008000;">//</span><span style="color: #008000;"> 更新节点样式</span>
                    <span style="color: #0000ff;">if</span><span style="color: #000000;"> (parentND) {
                        </span><span style="color: #0000ff;">this</span>._methods._updateNode(parentND.nodecode);    <span style="color: #008000;">//</span><span style="color: #008000;"> 更新父级节点显示样式</span>
                    } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        </span><span style="color: #0000ff;">this</span>._methods._updateNode(prevNodeCode);         <span style="color: #008000;">//</span><span style="color: #008000;"> 更新前一级节点显示样式</span>
<span style="color: #000000;">                    };
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: clearAll()  清空树节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 清空树所有节点包括参数</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: public 外部调用方法</span>
            clearAll: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">this</span>.focusNodeCode = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">this</span>.curNodes =<span style="color: #000000;"> [];
                </span><span style="color: #0000ff;">this</span>._methods._myNodes =<span style="color: #000000;"> [];
                </span><span style="color: #0000ff;">this</span>._methods._dtNodes = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">this</span>._methods._hsNodes = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.sdpTree.empty();
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getNode() 获取节点对象DIV</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点 NodeCode 来获取 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [string] nodeCode 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: [object] 返回节点DOM元素对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getNode: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">var</span> retNode = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_full_" +<span style="color: #000000;"> nodeCode);
                </span><span style="color: #0000ff;">return</span> ((retNode.length &gt; 0) ? retNode[0] : <span style="color: #0000ff;">null</span><span style="color: #000000;">);
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getNodeParams() 获取节点的所有参数</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点 NodeCode 来获取 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [string] nodeCode 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: [object] 返回节点参数对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getNodeParams: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">var</span> retNodeItem = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">if</span> (nodeCode == <span style="color: #0000ff;">null</span>) { <span style="color: #0000ff;">return</span><span style="color: #000000;"> retNodeItem; };
                </span><span style="color: #0000ff;">if</span> (nodeCode == <span style="color: #0000ff;">this</span>.options.rootcode) {               <span style="color: #008000;">//</span><span style="color: #008000;"> 树根节点</span>
                    retNodeItem = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.nodeItem();
                    retNodeItem.nodecode </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode;
                    retNodeItem.nodetext </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.roottext;
                    retNodeItem.nodeurl </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rooturl;
                    retNodeItem.iconcollapse </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rooticon;
                } </span><span style="color: #0000ff;">else</span> {                                               <span style="color: #008000;">//</span><span style="color: #008000;"> 普通节点</span>
                    retNodeItem = <span style="color: #0000ff;">this</span>._methods._hsNodes[nodeCode];    <span style="color: #008000;">//</span><span style="color: #008000;"> 从数组中获取此节点的所有值</span>
<span style="color: #000000;">                };
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> retNodeItem;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getNodeCode() 获取节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点对象(通过getNode() 方法获取的节点对象) 来获取此对象的节点ID</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: node  object 节点DOM对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: string  返回节点对象的ID</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getNodeCode: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (node) {
                </span><span style="color: #0000ff;">var</span> retNodeCode = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (node) {
                    </span><span style="color: #0000ff;">var</span> tmID = $(node).attr("id"<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmID) {
                        retNodeCode </span>= tmID.replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_full_", ""<span style="color: #000000;">);
                    };
                };
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> retNodeCode;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getPrevNodeCode() 获取指定节点的前一个节点的节点编码NodeCode</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据指定的节点NodeCode来获取其前一个节点NodeCode 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode  string 指定的节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: string  返回指定的节点NodeCode的前一个节点编码NodeCode</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getPrevNodeCode: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">var</span> _prevCode = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">var</span> _curtNode = <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[nodeCode];
                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (_curtNode) {
                    </span><span style="color: #0000ff;">if</span> (_curtNode._firstFlag) { <span style="color: #0000ff;">return</span><span style="color: #000000;"> _prevCode; };
                    </span><span style="color: #0000ff;">if</span> (_curtNode.supnodecode == <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode) {
                        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm0 = 0; tm0 &lt; <span style="color: #0000ff;">this</span>._methods._dtNodes.length; tm0++<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>._methods._dtNodes[tm0].nodecode ==<span style="color: #000000;"> nodeCode) {
                                _prevCode </span>= <span style="color: #0000ff;">this</span>._methods._dtNodes[tm0 - 1<span style="color: #000000;">].nodecode;
                                </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                            };
                        };
                    } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        </span><span style="color: #0000ff;">var</span> _parentND =<span style="color: #000000;"> _curtNode._parent;
                        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm1 = 0; tm1 &lt; _parentND._childs.length; tm1++<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">if</span> (_parentND._childs[tm1].nodecode ==<span style="color: #000000;"> nodeCode) {
                                _prevCode </span>= _parentND._childs[tm1 - 1<span style="color: #000000;">].nodecode;
                                </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                            };
                        };
                    };
                };
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> _prevCode;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getNextNodeCode() 获取指定节点的下一个节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据指定的节点编码来获取其后一个节点编码NodeCode</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode  string 指定的节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: object  返回指定的节点的后一个节点编码字符串</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getNextNodeCode: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">var</span> _nextCode = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">var</span> _curtNode = <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[nodeCode];
                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (_curtNode) {
                    </span><span style="color: #0000ff;">if</span> (_curtNode._lastFlag) { <span style="color: #0000ff;">return</span><span style="color: #000000;"> _nextCode; };
                    </span><span style="color: #0000ff;">if</span> (_curtNode.supnodecode == <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode) {
                        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm0 = 0; tm0 &lt; <span style="color: #0000ff;">this</span>._methods._dtNodes.length; tm0++<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>._methods._dtNodes[tm0].nodecode ==<span style="color: #000000;"> nodeCode) {
                                _nextCode </span>= <span style="color: #0000ff;">this</span>._methods._dtNodes[tm0 + 1<span style="color: #000000;">].nodecode;
                                </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                            };
                        };
                    } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        </span><span style="color: #0000ff;">var</span> _parentND =<span style="color: #000000;"> _curtNode._parent;
                        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm1 = 0; tm1 &lt; _parentND._childs.length; tm1++<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">if</span> (_parentND._childs[tm1].nodecode ==<span style="color: #000000;"> nodeCode) {
                                _nextCode </span>= _parentND._childs[tm1 + 1<span style="color: #000000;">].nodecode;
                                </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                            };
                        };
                    };
                };
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> _nextCode;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getParentNodeCode() 获取指定节点的父级节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点编码来获取其父级节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode  string 指定的节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: string  返回指定的节点编码的父级节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getParentNodeCode: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">var</span> _parentNodeCode = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[nodeCode]) {
                    _parentNodeCode </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[nodeCode].supnodecode;
                };
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> _parentNodeCode;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getFocusNodeCode() 获取目录树当前获取到焦点的节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 获取当前目录中，获取到焦点的即选中的节点编码 NodeCode</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: string  返回节点编码字符串</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getFocusNodeCode: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.focusNodeCode;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getNodeLevel() 获取节点级别层次</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点编码来获取 此节点的层次级别</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode  string 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: number 节点层次级别,无效返回-1</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getNodeLevel: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">if</span> (nodeCode == <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode) {
                    </span><span style="color: #0000ff;">return</span> 0<span style="color: #000000;">;
                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[nodeCode]) {
                        </span><span style="color: #0000ff;">return</span> (<span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[nodeCode])._nodeLevel;
                    } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        </span><span style="color: #0000ff;">return</span> -1<span style="color: #000000;">;
                    };
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getNodeText() 获取节点文本值</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点编码来获取节点文本值</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode  string 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: string 节点文本值</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getNodeText: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">var</span> tm_Node = <span style="color: #0000ff;">this</span><span style="color: #000000;">.getNode(nodeCode);
                </span><span style="color: #0000ff;">if</span> (tm_Node) { <span style="color: #0000ff;">return</span><span style="color: #000000;"> $(tm_Node).text(); };
                </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">null</span><span style="color: #000000;">;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getNodeVal() 获取节点所有值</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict：根据节点编码 获取节点的所有值</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode  string 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: Array {} 节点数据数组对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype:  外部调用方法</span>
            getNodeVal: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">var</span> curNodeItem = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.nodeItem();
                </span><span style="color: #0000ff;">if</span> (nodeCode == <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode) {
                    curNodeItem.nodecode </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode;
                    curNodeItem.nodetext </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.roottext;
                    curNodeItem.nodetitle </span>= ""<span style="color: #000000;">;
                    curNodeItem.supnodecode </span>= ""<span style="color: #000000;">;
                    curNodeItem.nodeurl </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rooturl;
                    curNodeItem.iconexpand </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rooticon;
                    curNodeItem.iconcollapse </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rooticon;
                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    </span><span style="color: #0000ff;">var</span> tm_Node = <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[nodeCode];
                    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tm_Node) {
                        curNodeItem.nodecode </span>=<span style="color: #000000;"> tm_Node.nodecode;
                        curNodeItem.nodetext </span>=<span style="color: #000000;"> tm_Node.nodecode;
                        curNodeItem.nodetitle </span>=<span style="color: #000000;"> tm_Node.nodecode;
                        curNodeItem.supnodecode </span>=<span style="color: #000000;"> tm_Node.nodecode;
                        curNodeItem.nodeurl </span>=<span style="color: #000000;"> tm_Node.nodeurl;
                        curNodeItem.iconexpand </span>=<span style="color: #000000;"> tm_Node.iconexpand;
                        curNodeItem.iconcollapse </span>=<span style="color: #000000;"> tm_Node.iconcollapse;
                    };
                };
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> curNodeItem;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: hideNode() 隐藏指定节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点编码 执行隐藏指定树节点对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode  string 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            hideNode: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.options.rootcode == nodeCode) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">var</span> tm_MyNode = <span style="color: #0000ff;">this</span><span style="color: #000000;">.getNode(nodeCode);
                </span><span style="color: #0000ff;">if</span> (!tm_MyNode) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">var</span> tm_SubNode = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_clip_" +<span style="color: #000000;"> nodeCode);
                $(tm_MyNode).hide();
                </span><span style="color: #0000ff;">if</span> (tm_SubNode.length &gt; 0<span style="color: #000000;">) { $(tm_SubNode).hide(); };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: showNode() 显示指定节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点编码 执行显示指定树节点对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode  string 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            showNode: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.options.rootcode == nodeCode) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">var</span> tm_MyNode = <span style="color: #0000ff;">this</span><span style="color: #000000;">.getNode(nodeCode);
                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tm_MyNode) {
                    $(tm_MyNode).show();
                    </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.collapseNode(nodeCode);
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: setShowTreeLine() 设置树节点连线显示与否</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 设置显示、隐藏节点连线 [此功能只有当树期初设置为显示树节点连线的时候才起作用]</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: boolValue  boolean  说明：true 表示显示连接线  false 表示不显示</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            setShowTreeLine: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (boolValue) {
                </span><span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">this</span>.options.showline) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">var</span> plusList = <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='plus']"<span style="color: #000000;">);
                </span><span style="color: #0000ff;">var</span> lineList = <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='line']"<span style="color: #000000;">);
                </span><span style="color: #0000ff;">var</span> tm0 = 0<span style="color: #000000;">;
                </span><span style="color: #0000ff;">if</span> ((boolValue) &amp;&amp; boolValue == <span style="color: #0000ff;">true</span><span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">for</span> (tm0 = 0; tm0 &lt; plusList.length; tm0++<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">if</span> ($(plusList[tm0]).prop("open"<span style="color: #000000;">)) {
                            </span><span style="color: #0000ff;">if</span> ($(plusList[tm0]).hasClass("node_expd_0n"<span style="color: #000000;">)) {
                                </span><span style="color: #0000ff;">switch</span> ($(plusList[tm0]).attr("collclass"<span style="color: #000000;">)) {
                                    </span><span style="color: #0000ff;">case</span> "node_plug_1l"<span style="color: #000000;">:
                                        $(plusList[tm0]).removeClass(</span>"node_plug_0n"<span style="color: #000000;">);
                                        $(plusList[tm0]).removeClass(</span>"node_expd_0n"<span style="color: #000000;">);
                                        $(plusList[tm0]).addClass(</span>"node_plug_1l"<span style="color: #000000;">);
                                        $(plusList[tm0]).addClass(</span>"node_expd_1l"<span style="color: #000000;">);
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">case</span> "node_plug_2b"<span style="color: #000000;">:
                                        $(plusList[tm0]).removeClass(</span>"node_plug_0n"<span style="color: #000000;">);
                                        $(plusList[tm0]).removeClass(</span>"node_expd_0n"<span style="color: #000000;">);
                                        $(plusList[tm0]).addClass(</span>"node_plug_2b"<span style="color: #000000;">);
                                        $(plusList[tm0]).addClass(</span>"node_expd_2b"<span style="color: #000000;">);
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">case</span> "node_plug_2t"<span style="color: #000000;">:
                                        $(plusList[tm0]).removeClass(</span>"node_plug_0n"<span style="color: #000000;">);
                                        $(plusList[tm0]).removeClass(</span>"node_expd_0n"<span style="color: #000000;">);
                                        $(plusList[tm0]).addClass(</span>"node_plug_2t"<span style="color: #000000;">);
                                        $(plusList[tm0]).addClass(</span>"node_expd_2t"<span style="color: #000000;">);
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">case</span> "node_plug_3a"<span style="color: #000000;">:
                                        $(plusList[tm0]).removeClass(</span>"node_plug_0n"<span style="color: #000000;">);
                                        $(plusList[tm0]).removeClass(</span>"node_expd_0n"<span style="color: #000000;">);
                                        $(plusList[tm0]).addClass(</span>"node_plug_3a"<span style="color: #000000;">);
                                        $(plusList[tm0]).addClass(</span>"node_expd_3a"<span style="color: #000000;">);
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                }
                            }
                        } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                            </span><span style="color: #0000ff;">if</span> ($(plusList[tm0]).hasClass("node_plug_0n"<span style="color: #000000;">)) {
                                $(plusList[tm0]).removeClass(</span>"node_plug_0n"<span style="color: #000000;">);
                                $(plusList[tm0]).addClass($(plusList[tm0]).attr(</span>"collclass"<span style="color: #000000;">));
                            }
                        }
                    };
                    </span><span style="color: #0000ff;">for</span> (tm0 = 0; tm0 &lt; lineList.length; tm0++<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">if</span> (($(lineList[tm0]).hasClass("node_line_10")) &amp;&amp; ($(lineList[tm0]).hasClass("nullimg"))) { $(lineList[tm0]).removeClass("nullimg"<span style="color: #000000;">); };
                        </span><span style="color: #0000ff;">if</span> (($(lineList[tm0]).hasClass("node_line_11")) &amp;&amp; ($(lineList[tm0]).hasClass("nullimg"))) { $(lineList[tm0]).removeClass("nullimg"<span style="color: #000000;">); };
                        </span><span style="color: #0000ff;">if</span> (($(lineList[tm0]).hasClass("node_line_20")) &amp;&amp; ($(lineList[tm0]).hasClass("nullimg"))) { $(lineList[tm0]).removeClass("nullimg"<span style="color: #000000;">); };
                        </span><span style="color: #0000ff;">if</span> (($(lineList[tm0]).hasClass("node_line_21")) &amp;&amp; ($(lineList[tm0]).hasClass("nullimg"))) { $(lineList[tm0]).removeClass("nullimg"<span style="color: #000000;">); };
                        </span><span style="color: #0000ff;">if</span> (($(lineList[tm0]).hasClass("node_line_3n")) &amp;&amp; ($(lineList[tm0]).hasClass("nullimg"))) { $(lineList[tm0]).removeClass("nullimg"<span style="color: #000000;">); };
                    };
                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    </span><span style="color: #0000ff;">for</span> (tm0 = 0; tm0 &lt; plusList.length; tm0++<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">var</span> $plusObj =<span style="color: #000000;"> $(plusList[tm0]);
                        </span><span style="color: #0000ff;">if</span> ($plusObj.prop("open"<span style="color: #000000;">)) {
                            </span><span style="color: #0000ff;">if</span> ($plusObj.hasClass("node_expd_1l"<span style="color: #000000;">)) {
                                $plusObj.removeClass(</span>"node_plug_1l").removeClass("node_expd_1l").addClass("node_plug_0n").addClass("node_expd_0n").attr("collclass", "node_plug_1l"<span style="color: #000000;">);
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusObj.hasClass("node_expd_2b"<span style="color: #000000;">)) {
                                $plusObj.removeClass(</span>"node_plug_2b").removeClass("node_expd_2b").addClass("node_plug_0n").addClass("node_expd_0n").attr("collclass", "node_plug_2b"<span style="color: #000000;">);
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusObj.hasClass("node_expd_2t"<span style="color: #000000;">)) {
                                $plusObj.removeClass(</span>"node_plug_2t").removeClass("node_expd_2t").addClass("node_plug_0n").addClass("node_expd_0n").attr("collclass", "node_plug_2t"<span style="color: #000000;">);
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusObj.hasClass("node_expd_3a"<span style="color: #000000;">)) {
                                $plusObj.removeClass(</span>"node_plug_3a").removeClass("node_expd_3a").addClass("node_plug_0n").addClass("node_expd_0n").attr("collclass", "node_plug_3a"<span style="color: #000000;">);
                            };
                        } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                            </span><span style="color: #0000ff;">if</span> ($plusObj.hasClass("node_plug_1l"<span style="color: #000000;">)) {
                                $plusObj.removeClass(</span>"node_plug_1l").addClass("node_plug_0n").attr("collclass", "node_plug_1l"<span style="color: #000000;">);
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusObj.hasClass("node_plug_2b"<span style="color: #000000;">)) {
                                $plusObj.removeClass(</span>"node_plug_2b").addClass("node_plug_0n").attr("collclass", "node_plug_2b"<span style="color: #000000;">);
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusObj.hasClass("node_plug_2t"<span style="color: #000000;">)) {
                                $plusObj.removeClass(</span>"node_plug_2t").addClass("node_plug_0n").attr("collclass", "node_plug_2t"<span style="color: #000000;">);
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusObj.hasClass("node_plug_3a"<span style="color: #000000;">)) {
                                $plusObj.removeClass(</span>"node_plug_3a").addClass("node_plug_0n").attr("collclass", "node_plug_3a"<span style="color: #000000;">);
                            };
                        };
                    };
                    </span><span style="color: #0000ff;">for</span> (tm0 = 0; tm0 &lt; lineList.length; tm0++<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">var</span> $lineObj =<span style="color: #000000;"> $(lineList[tm0]);
                        </span><span style="color: #0000ff;">if</span> (($lineObj.hasClass("node_line_10")) &amp;&amp; (!$lineObj.hasClass("nullimg"))) { $lineObj.addClass("nullimg"<span style="color: #000000;">); };
                        </span><span style="color: #0000ff;">if</span> (($lineObj.hasClass("node_line_11")) &amp;&amp; (!$lineObj.hasClass("nullimg"))) { $lineObj.addClass("nullimg"<span style="color: #000000;">); };
                        </span><span style="color: #0000ff;">if</span> (($lineObj.hasClass("node_line_20")) &amp;&amp; (!$lineObj.hasClass("nullimg"))) { $lineObj.addClass("nullimg"<span style="color: #000000;">); };
                        </span><span style="color: #0000ff;">if</span> (($lineObj.hasClass("node_line_21")) &amp;&amp; (!$lineObj.hasClass("nullimg"))) { $lineObj.addClass("nullimg"<span style="color: #000000;">); };
                        </span><span style="color: #0000ff;">if</span> (($lineObj.hasClass("node_line_3n")) &amp;&amp; (!$lineObj.hasClass("nullimg"))) { $lineObj.addClass("nullimg"<span style="color: #000000;">); };
                    };
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: setShowNodeIcon() 设置树节点ICON小图标显示与否</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict：设置树节点是否显示ICON小图标</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: boolValue  boolean  说明：true 表示显示  false 表示不显示</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            setShowNodeIcon: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (boolValue) {
                </span><span style="color: #0000ff;">var</span> tmDisplay = ((boolValue) &amp;&amp; boolValue == <span style="color: #0000ff;">true</span>) ? "inline-block" : "none"<span style="color: #000000;">;
                </span><span style="color: #0000ff;">var</span> tmIcons = <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='icon']"<span style="color: #000000;">);
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm0 = 0; tm0 &lt; tmIcons.length; tm0++) { $(tmIcons[tm0]).css("display"<span style="color: #000000;">, tmDisplay); };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: setShowSelectBox() 设置树节点选择按钮显示与否</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict：设置树节点是否显示选择按钮(复选框或单选框)</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [string]  checkType  显示按钮类型：空、radio、checkbox</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            setShowSelectBox: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (checkType) {
                </span><span style="color: #0000ff;">if</span> (!checkType) { checkType = ""<span style="color: #000000;">; };
                </span><span style="color: #0000ff;">if</span> (checkType == "checkbox"<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">this</span>.options.selecttype = "checkbox"<span style="color: #000000;">;
                } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (checkType == "radio"<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">this</span>.options.selecttype = "radio"<span style="color: #000000;">;
                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    </span><span style="color: #0000ff;">this</span>.options.selecttype = ""<span style="color: #000000;">;
                };

                </span><span style="color: #0000ff;">var</span> tmCheckNodes = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span><span style="color: #000000;">.options.selecttype) {
                    tmCheckNodes </span>= <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='check']"<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">if</span> (tmCheckNodes.length &gt; 0<span style="color: #000000;">) { tmCheckNodes.remove(); };
                    tmCheckNodes </span>= <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='node']"<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm0 = 0; tm0 &lt; tmCheckNodes.length; tm0++<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">var</span> tm_TitleNode = $(tmCheckNodes[tm0]).find("span[stype='text']"<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">var</span> tm_NodeID = tm_TitleNode.attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_text_", ""<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.options.selecttype == "checkbox"<span style="color: #000000;">) {
                            $(tm_TitleNode).before(</span>'&lt;span class="checkbox" stype="check" id="' + <span style="color: #0000ff;">this</span>.myFnId + '_sdptree_node_chk_' + tm_NodeID + '" &gt;&lt;/span&gt;'<span style="color: #000000;">);
                        } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                            $(tm_TitleNode).before(</span>'&lt;span class="radiobtn" stype="check" id="' + <span style="color: #0000ff;">this</span>.myFnId + '_sdptree_node_chk_' + tm_NodeID + '" &gt;&lt;/span&gt;'<span style="color: #000000;">);
                        };
                    };

                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    tmCheckNodes </span>= <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='check']"<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">if</span> (tmCheckNodes.length &gt; 0<span style="color: #000000;">) { tmCheckNodes.remove(); };
                }
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: checkedAll() 全部选中</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 当树开始复选时，实现选中全部树节点 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            checkedAll: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">var</span> _chkIcon = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_chk_" + <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode);
                </span><span style="color: #0000ff;">if</span> ((_chkIcon) &amp;&amp; _chkIcon.length &gt; 0<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">this</span>._methods._checkedNodes(_chkIcon, <span style="color: #0000ff;">true</span>, <span style="color: #0000ff;">true</span><span style="color: #000000;">);
                }
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: unCheckAll() 取消选择</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 当树开始复选时，实现取消全部全部树节点的选中 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            uncheckAll: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">var</span> _chkIcon = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_chk_" + <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode);
                </span><span style="color: #0000ff;">if</span> ((_chkIcon) &amp;&amp; _chkIcon.length &gt; 0<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">this</span>._methods._checkedNodes(_chkIcon, <span style="color: #0000ff;">false</span>, <span style="color: #0000ff;">true</span><span style="color: #000000;">);
                }
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: setOneNodeChecked() 设置节点选中与否 注意：此方法只设置此单个的节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点编码来设置节点选择与否 只设置一个节点，下级不进行设置</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [string] nodeCode  节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [bool]   boolChecked 是否选中 说明：true 表示显示  false 表示不显示</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            setOneNodeChecked: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode, boolChecked) {
                </span><span style="color: #0000ff;">var</span> boolVal = (boolChecked) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">var</span> chkImg = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_chk_" +<span style="color: #000000;"> nodeCode);
                </span><span style="color: #0000ff;">if</span> ((chkImg) &amp;&amp; chkImg.length &gt; 0<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">if</span> (boolVal == chkImg.prop("checked")) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                    </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.options.selecttype == "radio"<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (boolVal) {
                            </span><span style="color: #0000ff;">var</span> rdoAllIcon = <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='check']"<span style="color: #000000;">);
                            </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> _tt = 0; _tt &lt; rdoAllIcon.length; _tt++<span style="color: #000000;">) {
                                </span><span style="color: #0000ff;">var</span> _curRadio =<span style="color: #000000;"> $(rdoAllIcon[_tt]);
                                </span><span style="color: #0000ff;">if</span> (_curRadio.prop("checked"<span style="color: #000000;">)) {
                                    _curRadio.prop(</span>"checked", <span style="color: #0000ff;">false</span>).removeClass("radiobtn").removeClass("radiobtn_check").addClass("radiobtn"<span style="color: #000000;">);
                                };
                            };
                            chkImg.prop(</span>"checked", <span style="color: #0000ff;">true</span>).removeClass("radiobtn").removeClass("radiobtn_check").addClass("radiobtn_check"<span style="color: #000000;">);
                        } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                            chkImg.prop(</span>"checked", <span style="color: #0000ff;">false</span>).removeClass("radiobtn").removeClass("radiobtn_check").addClass("radiobtn"<span style="color: #000000;">);
                        }
                    } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.options.selecttype == "checkbox"<span style="color: #000000;">) {
                        chkImg.removeClass(</span>"checkbox").removeClass("checkbox_check").addClass(((boolVal) ? "checkbox_check" : "checkbox")).prop("checked"<span style="color: #000000;">, boolVal);
                    };
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: setNodeChecked() 设置节点选中与否 注意：此方法会自动设置下级（根据级联选择的原则）</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点编码来设置节点选择与否 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [string] nodeCode  节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [bool]   boolValue 是否选中 说明：true 表示显示  false 表示不显示</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            setNodeChecked: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode, boolValue) {
                </span><span style="color: #0000ff;">var</span> boolVal = (boolValue) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">var</span> chkImg = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_chk_" +<span style="color: #000000;"> nodeCode);
                </span><span style="color: #0000ff;">if</span> ((chkImg) &amp;&amp; chkImg.length &gt; 0<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.options.selecttype == "radio"<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">if</span> (boolVal == chkImg.prop("checked")) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (boolVal) {
                            </span><span style="color: #0000ff;">var</span> rdoAllIcon = <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='check']"<span style="color: #000000;">);
                            </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> _tt = 0; _tt &lt; rdoAllIcon.length; _tt++<span style="color: #000000;">) {
                                </span><span style="color: #0000ff;">var</span> _curRadio =<span style="color: #000000;"> $(rdoAllIcon[_tt]);
                                </span><span style="color: #0000ff;">if</span> (_curRadio.prop("checked"<span style="color: #000000;">)) {
                                    _curRadio.prop(</span>"checked", <span style="color: #0000ff;">false</span>).removeClass("radiobtn").removeClass("radiobtn_check").addClass("radiobtn"<span style="color: #000000;">);
                                };
                            };
                            chkImg.prop(</span>"checked", <span style="color: #0000ff;">true</span>).removeClass("radiobtn").removeClass("radiobtn_check").addClass("radiobtn_check"<span style="color: #000000;">);
                        } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                            chkImg.prop(</span>"checked", <span style="color: #0000ff;">false</span>).removeClass("radiobtn").removeClass("radiobtn_check").addClass("radiobtn"<span style="color: #000000;">);
                        }
                    } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.options.selecttype == "checkbox"<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._checkedNodes(chkImg, boolVal);
                    };
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: setNodeText() 设置节点文本值</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict：设置树节点内容文本标题</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode     string  节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeText   string  节点文本标题字符</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            setNodeText: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode, nodeText) {
                </span><span style="color: #0000ff;">var</span> txtNode = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_text_" +<span style="color: #000000;"> nodeCode);
                </span><span style="color: #0000ff;">if</span> (txtNode.length &gt; 0<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">if</span> ($.isNull(nodeText)) { nodeText = ""<span style="color: #000000;">; };
                    txtNode.text(nodeText);
                    </span><span style="color: #0000ff;">if</span> (nodeCode == <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode) {
                        </span><span style="color: #0000ff;">this</span>.options.roottext =<span style="color: #000000;"> nodeText;
                    } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        </span><span style="color: #0000ff;">this</span>._methods._hsNodes[nodeCode].nodetext =<span style="color: #000000;"> nodeText;
                    };
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getNodeChecked() 获取节点是否选中</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict：获取节点是否选中</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [string] nodeCode   节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: [bool]   isChecked  返回是否选中(布尔：true/false)</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getNodeChecked: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">var</span> isChecked = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">var</span> chkImg = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_chk_" +<span style="color: #000000;"> nodeCode);
                </span><span style="color: #0000ff;">if</span> ((chkImg) &amp;&amp; chkImg.length &gt; 0<span style="color: #000000;">) {
                    isChecked </span>= chkImg.prop("checked"<span style="color: #000000;">);
                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    </span><span style="color: #0000ff;">var</span> tgNd = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_span_" +<span style="color: #000000;"> tgNodeCode);
                    </span><span style="color: #0000ff;">if</span> ((tgNd) &amp;&amp; tgNd.length &gt; 0<span style="color: #000000;">) {
                        isChecked </span>= tgNd.hasClass("node_select"<span style="color: #000000;">);
                    }
                };
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> isChecked;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getCheckedNodes_Array() 获取选中节点的数组 to Array()</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict：获取树所有选中的节点 返回 Array 数组 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: Array 数组  每项根式 item [</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                                     (1、nodecode 节点编码),  </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                                     (2、nodename 节点文本),</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                                     (3、nodesupcode 上级编码)</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                                     (4、nodelevel 节点级别)</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                                   ]</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getCheckedNodes_Array: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">var</span> chkNodeList = <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='check']"<span style="color: #000000;">);
                </span><span style="color: #0000ff;">var</span> retArray = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Array();
                </span><span style="color: #0000ff;">var</span> retCode = "", retText = "", retSupCode = "", retLevel = -1; curIcon = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm1 = 0; tm1 &lt; chkNodeList.length; tm1++<span style="color: #000000;">) {
                    curIcon </span>=<span style="color: #000000;"> $(chkNodeList[tm1]);
                    </span><span style="color: #0000ff;">if</span> (!curIcon.prop("checked")) { <span style="color: #0000ff;">continue</span><span style="color: #000000;">; };
                    retCode </span>= curIcon.attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_chk_", ""<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.options.rootcode == retCode) { <span style="color: #0000ff;">continue</span><span style="color: #000000;">; };
                    retText </span>=<span style="color: #000000;"> curIcon.parent().text();
                    retSupCode </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[retCode].supnodecode;
                    retLevel </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[retCode]._nodeLevel;
                    retArray[retArray.length] </span>=<span style="color: #000000;"> [retCode, retText, retSupCode, retLevel];
                };
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> retArray;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getCheckedNodes_String() 获取选中节点的字符串</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict：获取树所有选中的节点 返回 string 字符串(拼接字符串) </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return：String 中的每项之间用小写的分号隔开</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @         每项顺序：nodecode(节点编码),nodename(节点文本),nodesupcode(上级编码),nodelevel(节点级别);</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getCheckedNodes_String: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">var</span> chkNodeList = <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='check']"<span style="color: #000000;">);
                </span><span style="color: #0000ff;">var</span> retString = [], curIcon = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">var</span> retCode = "", retText = "", retSupCode = "", retLevel = "-1"<span style="color: #000000;">;
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm1 = 0; tm1 &lt; chkNodeList.length; tm1++<span style="color: #000000;">) {
                    curIcon </span>=<span style="color: #000000;"> $(chkNodeList[tm1]);
                    </span><span style="color: #0000ff;">if</span> (!curIcon.prop("checked")) { <span style="color: #0000ff;">continue</span><span style="color: #000000;">; };
                    retCode </span>= curIcon.attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_chk_", ""<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.options.rootcode == retCode) { <span style="color: #0000ff;">continue</span><span style="color: #000000;">; };
                    retText </span>=<span style="color: #000000;"> curIcon.parent().text();
                    retSupCode </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[retCode].supnodecode;
                    retLevel </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[retCode]._nodeLevel;
                    retString.push(retCode </span>+ "," + retText + "," + retSupCode + "," + retLevel + ";"<span style="color: #000000;">);
                };
                </span><span style="color: #0000ff;">return</span> retString.join(""<span style="color: #000000;">);
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getCheckedNodes_JsonObj() 获取选中节点的JSON数组</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict：获取树所有选中的节点   返回 Json 对象数组 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: JSON 对象数组</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @         每项 item{ </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                     nodecode: "节点编码",</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                     nodename: "节点文本", </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                     supnodecode: "上级编码",</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                     nodelevel：节点级别</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                   }</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getCheckedNodes_JsonObj: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">var</span> chkNodeList = <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='check']"<span style="color: #000000;">);
                </span><span style="color: #0000ff;">var</span> retJson = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Array();
                </span><span style="color: #0000ff;">var</span> retCode = "", retText = "", retSupCode = "", retLevel = 0, curIcon = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm1 = 0; tm1 &lt; chkNodeList.length; tm1++<span style="color: #000000;">) {
                    curIcon </span>=<span style="color: #000000;"> $(chkNodeList[tm1]);
                    </span><span style="color: #0000ff;">if</span> (!curIcon.prop("checked")) { <span style="color: #0000ff;">continue</span><span style="color: #000000;">; };
                    retCode </span>= curIcon.attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_chk_", ""<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.options.rootcode == retCode) { <span style="color: #0000ff;">continue</span><span style="color: #000000;">; };
                    retText </span>=<span style="color: #000000;"> curIcon.parent().text();
                    retSupCode </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[retCode].supnodecode;
                    retLevel </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[retCode]._nodeLevel;
                    </span><span style="color: #0000ff;">var</span> newItem =<span style="color: #000000;"> {
                        nodecode: retCode,
                        nodetext: retText,
                        supnodecode: retSupCode,
                        nodelevel: retLevel
                    };
                    retJson.push(newItem);
                };
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> retJson;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getCheckedNodes_XmlStr() 获取树所有选中的节点XML字符串</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict：获取树所有选中的节点生成固定格式的XML字符串 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: XML字符串</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @         每项 &lt;row&gt;</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                   &lt;nodecode&gt;&lt;![CDATA[节点编码]]&gt;&lt;/nodecode&gt;</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                   &lt;nodetext&gt;&lt;![CDATA[节点文本]]&gt;&lt;/nodetext&gt;</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                   &lt;supnodecode&gt;&lt;![CDATA[上级编码]]&gt;&lt;/supnodecode&gt;</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @                   &lt;nodelevel&gt;&lt;![CDATA[节点级别]]&gt;&lt;/nodelevel&gt;</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @               &lt;/row&gt;</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype:  外部调用方法</span>
            getCheckedNodes_XmlStr: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">var</span> chkNodeList = <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='check']"<span style="color: #000000;">);
                </span><span style="color: #0000ff;">var</span> retXml = ["&lt;root&gt;"<span style="color: #000000;">];
                </span><span style="color: #0000ff;">var</span> retCode = "", retText = "", retSupCode = "", retLevel = 0, curIcon = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm1 = 0; tm1 &lt; chkNodeList.length; tm1++<span style="color: #000000;">) {
                    curIcon </span>=<span style="color: #000000;"> $(chkNodeList[tm1]);
                    </span><span style="color: #0000ff;">if</span> (!curIcon.prop("checked")) { <span style="color: #0000ff;">continue</span><span style="color: #000000;">; };
                    retCode </span>= curIcon.attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_chk_", ""<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.options.rootcode == retCode) { <span style="color: #0000ff;">continue</span><span style="color: #000000;">; };
                    retText </span>=<span style="color: #000000;"> curIcon.parent().text();
                    retSupCode </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[retCode].supnodecode;
                    retLevel </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[retCode]._nodeLevel;
                    retXml.push(</span>"&lt;row&gt;&lt;nodecode&gt;&lt;![CDATA[" + retCode + "]]&gt;&lt;/nodecode&gt;&lt;nodetext&gt;&lt;![CDATA[" + retText + "]]&gt;&lt;/nodetext&gt;&lt;supnodecode&gt;&lt;![CDATA[" + retSupCode + "]]&gt;&lt;/supnodecode&gt;&lt;nodelevel&gt;&lt;![CDATA[" + retLevel + "]]&gt;&lt;/nodelevel&gt;&lt;/row&gt;"<span style="color: #000000;">);
                };
                retXml.push(</span>"&lt;/root&gt;"<span style="color: #000000;">);
                </span><span style="color: #0000ff;">return</span> retXml.join(""<span style="color: #000000;">);
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getCheckedNodes_Hash() 获取树所有选中的节点HASH数组</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict：获取树所有选中的节点 返回Hash 数组 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: Hash 中的每项：Hash.add(key=nodeID,value=nodeText);</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @         item[key:nodeID] = value:nodeText</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @         根据key: hash[key] 获取返回值：value</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getCheckedNodes_Hash: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">var</span> chkNodeList = <span style="color: #0000ff;">this</span>.sdpTree.find("span[stype='check']"<span style="color: #000000;">);
                </span><span style="color: #0000ff;">var</span> retHash =<span style="color: #000000;"> $.Hashtable();
                </span><span style="color: #0000ff;">var</span> retCode = "", retText = "", curIcon = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm1 = 0; tm1 &lt; chkNodeList.length; tm1++<span style="color: #000000;">) {
                    curIcon </span>=<span style="color: #000000;"> $(chkNodeList[tm1]);
                    </span><span style="color: #0000ff;">if</span> (!curIcon.prop("checked")) { <span style="color: #0000ff;">continue</span><span style="color: #000000;">; };
                    retCode </span>= curIcon.attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_chk_", ""<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.options.rootcode == retCode) { <span style="color: #0000ff;">continue</span><span style="color: #000000;">; };
                    retText </span>=<span style="color: #000000;"> curIcon.parent().text();
                    retHash.add(retCode, retText);
                };
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> retHash;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getAllNodes_Hash() 获取树所有节点HASH数组</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict：获取树所有节点HASH数组 返回Hash 数组 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: Hash 中的每项：Hash.add(key=nodeID,value=nodeText);</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @         item[key:nodeID] = value:nodeText</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @         根据key: hash[key] 获取返回值：value</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype:  外部调用方法</span>
            getAllNodes_Hash: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getAllNodes_Array() 获取树所有节点Array数组[分级的]</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict：获取树所有节点 返回 Array 数组  </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype:  外部调用方法</span>
            getAllNodes_Array: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._dtNodes;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: expandNode() 展开所有节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 展开目录树的所有节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            expandAll: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm0 = 0; tm0 &lt; <span style="color: #0000ff;">this</span>._methods._dtNodes.length; tm0++<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">var</span> tm_ExpNode = <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._dtNodes[tm0];
                    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tm_ExpNode._haveChild) {
                        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.expandNode(tm_ExpNode.nodecode);
                        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.expandAllChilds(tm_ExpNode.nodecode);
                    };
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: expandAllChilds() 展开指定节点的所有子节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 展开目录树的中执行节点下的所有子节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode  string 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            expandAllChilds: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">var</span> tsNode = <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[nodeCode];
                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tsNode._haveChild) {
                    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm2 = 0; tm2 &lt; tsNode._childs.length; tm2++<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">var</span> subNode =<span style="color: #000000;"> tsNode._childs[tm2];
                        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (subNode._haveChild) {
                            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.expandNode(subNode.nodecode);
                            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.expandAllChilds(subNode.nodecode);
                        };
                    };
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: expandNode() 展开指定的节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点编码 执行展开此节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode  string 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            expandNode: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">var</span> $plusImg = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_plus_" +<span style="color: #000000;"> nodeCode);
                </span><span style="color: #0000ff;">var</span> $clipDiv = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_clip_" +<span style="color: #000000;"> nodeCode);
                </span><span style="color: #0000ff;">var</span> $nodeIcn = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_icon_" +<span style="color: #000000;"> nodeCode);
                </span><span style="color: #0000ff;">if</span> ($plusImg.length &gt; 0<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_plug_0n"<span style="color: #000000;">)) {
                        </span><span style="color: #0000ff;">if</span> (!$plusImg.hasClass("node_expd_0n")) { $plusImg.addClass("node_expd_0n").prop("open", <span style="color: #0000ff;">true</span><span style="color: #000000;">); };
                    } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_plug_1l"<span style="color: #000000;">)) {
                        </span><span style="color: #0000ff;">if</span> (!$plusImg.hasClass("node_expd_1l")) { $plusImg.addClass("node_expd_1l").prop("open", <span style="color: #0000ff;">true</span><span style="color: #000000;">); };
                    } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_plug_2b"<span style="color: #000000;">)) {
                        </span><span style="color: #0000ff;">if</span> (!$plusImg.hasClass("node_expd_2b")) { $plusImg.addClass("node_expd_2b").prop("open", <span style="color: #0000ff;">true</span><span style="color: #000000;">); };
                    } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_plug_2t"<span style="color: #000000;">)) {
                        </span><span style="color: #0000ff;">if</span> (!$plusImg.hasClass("node_expd_2t")) { $plusImg.addClass("node_expd_2t").prop("open", <span style="color: #0000ff;">true</span><span style="color: #000000;">); };
                    } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_plug_3a"<span style="color: #000000;">)) {
                        </span><span style="color: #0000ff;">if</span> (!$plusImg.hasClass("node_expd_3a")) { $plusImg.addClass("node_expd_3a").prop("open", <span style="color: #0000ff;">true</span><span style="color: #000000;">); };
                    };
                };

                </span><span style="color: #0000ff;">if</span> ($clipDiv.length &gt; 0) { $clipDiv.css("display", "block"<span style="color: #000000;">); };
                </span><span style="color: #0000ff;">if</span> ($nodeIcn.length &gt; 0<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">if</span> ($nodeIcn.hasClass("custom_img"<span style="color: #000000;">)) {
                        </span><span style="color: #0000ff;">var</span> icnBgImg = ($nodeIcn.attr("expdimg")) ? $nodeIcn.attr("expdimg") : $nodeIcn.attr("collimg"<span style="color: #000000;">);
                        $nodeIcn.css(</span>"background-image", "url(" + icnBgImg + ")"<span style="color: #000000;">);
                    } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        </span><span style="color: #0000ff;">if</span> (($nodeIcn.hasClass("folder_collapse")) &amp;&amp; (!$nodeIcn.hasClass("folder_expand"))) { $nodeIcn.addClass("folder_expand"<span style="color: #000000;">); };
                    }
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: collapseAll() 收缩所有节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 收缩目录树的所有节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            collapseAll: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm0 = 0; tm0 &lt; <span style="color: #0000ff;">this</span>._methods._dtNodes.length; tm0++<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">var</span> tm_CollNode = <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._dtNodes[tm0];
                    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tm_CollNode._haveChild) {
                        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.collapseNode(tm_CollNode.nodecode);
                        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.collapseAllChilds(tm_CollNode.nodecode);
                    };
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: collapseAllChilds() 收缩指定节点的所有子节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 收缩目录树的中执行节点下的所有子节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode  string 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            collapseAllChilds: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">var</span> tsNode = <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[nodeCode];
                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tsNode._haveChild) {
                    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm2 = 0; tm2 &lt; tsNode._childs.length; tm2++<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">var</span> subNode =<span style="color: #000000;"> tsNode._childs[tm2];
                        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (subNode._haveChild) {
                            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.collapseNode(subNode.nodecode);
                            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.collapseAllChilds(subNode.nodecode);
                        };
                    };
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: collapseNode() 收缩指定的节点</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点编码收缩此节点 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: nodeCode  string 节点编码</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            collapseNode: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                </span><span style="color: #0000ff;">var</span> $plusImg = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_plus_" +<span style="color: #000000;"> nodeCode);
                </span><span style="color: #0000ff;">var</span> $clipDiv = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_clip_" +<span style="color: #000000;"> nodeCode);
                </span><span style="color: #0000ff;">var</span> $nodeIcn = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_icon_" +<span style="color: #000000;"> nodeCode);
                </span><span style="color: #0000ff;">if</span> ($plusImg.length &gt; 0<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_plug_0n"<span style="color: #000000;">)) {
                        </span><span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_expd_0n")) { $plusImg.removeClass("node_expd_0n").prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                    } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_plug_1l"<span style="color: #000000;">)) {
                        </span><span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_expd_1l")) { $plusImg.removeClass("node_expd_1l").prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                    } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_plug_2b"<span style="color: #000000;">)) {
                        </span><span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_expd_2b")) { $plusImg.removeClass("node_expd_2b").prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                    } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_plug_2t"<span style="color: #000000;">)) {
                        </span><span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_expd_2t")) { $plusImg.removeClass("node_expd_2t").prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                    } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_plug_3a"<span style="color: #000000;">)) {
                        </span><span style="color: #0000ff;">if</span> ($plusImg.hasClass("node_expd_3a")) { $plusImg.removeClass("node_expd_3a").prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                    };
                };
                </span><span style="color: #0000ff;">if</span> ($clipDiv.length &gt; 0) { $clipDiv.css("display", "none"<span style="color: #000000;">); };
                </span><span style="color: #0000ff;">if</span> ($nodeIcn.length &gt; 0<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">if</span> ($nodeIcn.hasClass("custom_img"<span style="color: #000000;">)) {
                        </span><span style="color: #0000ff;">var</span> icnBgImg = ($nodeIcn.attr("collimg")) ? $nodeIcn.attr("collimg") : $nodeIcn.attr("expdimg"<span style="color: #000000;">);
                        $nodeIcn.css(</span>"background-image", "url(" + icnBgImg + ")"<span style="color: #000000;">);
                    } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        </span><span style="color: #0000ff;">if</span> (($nodeIcn.hasClass("folder_collapse")) &amp;&amp; ($nodeIcn.hasClass("folder_expand"<span style="color: #000000;">))) {
                            $nodeIcn.removeClass(</span>"folder_expand"<span style="color: #000000;">);
                        }
                    }
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: expandLevel() 展开目录树中某层次所有节点 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点层次级别</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: levelNum  [number]  节点层次级别[注意级别是从1开始,根目录属于0级]</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            expandLevel: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (levelNum) {
                levelNum </span>= parseInt(levelNum, 10<span style="color: #000000;">);
                </span><span style="color: #0000ff;">if</span> (isNaN(levelNum)) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">var</span> _treeNodesHash = <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes;
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> ll = 1; ll &lt;= levelNum; ll++<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> ndCode <span style="color: #0000ff;">in</span><span style="color: #000000;"> _treeNodesHash) {
                        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (_treeNodesHash.hasOwnProperty(ndCode)) {
                            </span><span style="color: #0000ff;">var</span> ndItem =<span style="color: #000000;"> _treeNodesHash[ndCode];
                            </span><span style="color: #0000ff;">if</span> (ndItem._nodeLevel ==<span style="color: #000000;"> ll) {
                                </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.expandNode(ndItem.nodecode);
                            }
                        }
                    };
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: collapseLevel() 收缩目录树中某层次所有节点 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 根据节点层次级别</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: levelNum  [number]  节点层次级别[注意级别是从1开始，根目录属于0级]</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            collapseLevel: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (levelNum) {
                levelNum </span>= parseInt(levelNum, 10<span style="color: #000000;">);
                </span><span style="color: #0000ff;">if</span> (isNaN(levelNum)) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };

                </span><span style="color: #0000ff;">var</span> _treeNodesHash = <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes;
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> ndCode <span style="color: #0000ff;">in</span><span style="color: #000000;"> _treeNodesHash) {
                    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (_treeNodesHash.hasOwnProperty(ndCode)) {
                        </span><span style="color: #0000ff;">var</span> ndItem =<span style="color: #000000;"> _treeNodesHash[ndCode];
                        </span><span style="color: #0000ff;">if</span> (ndItem._nodeLevel ==<span style="color: #000000;"> levelNum) {
                            </span><span style="color: #0000ff;">this</span>.collapseNode(ndItem.nodecode); <span style="color: #008000;">//</span><span style="color: #008000;"> 收缩指定的节点</span>
<span style="color: #000000;">                        }
                    }
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getObject() 获取控件JQUERY 对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 获取插件所对应的DOM 控件 JQUERY 对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: [object]  返回控件JQUERY 对象 空为null</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getObject: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.myObject;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getID() 获取控件ID</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 获取此插件对应的控件ID属性值</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: [string] 控件ID</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getID: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">var</span> _thisID = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.myObject != <span style="color: #0000ff;">null</span>) { _thisID = <span style="color: #0000ff;">this</span>.myObject.attr("id"<span style="color: #000000;">); };
                </span><span style="color: #0000ff;">if</span> ($.isNull(_thisID) == <span style="color: #0000ff;">true</span>) { _thisID = <span style="color: #0000ff;">null</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> _thisID;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getSdpID() 获取控件内嵌 ID</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 获取此插件对应的控件SDP ID属性值</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getSdpID: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">var</span> _thisSdpID = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.myObject != <span style="color: #0000ff;">null</span>) { _thisSdpID = <span style="color: #0000ff;">this</span>.myObject.attr("sdpid"<span style="color: #000000;">); };
                </span><span style="color: #0000ff;">if</span> ($.isNull(_thisSdpID) == <span style="color: #0000ff;">true</span>) { _thisSdpID = <span style="color: #0000ff;">null</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> _thisSdpID;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: onLocked() 锁定控件</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 执行控件的锁定</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            onLocked: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.myObject == <span style="color: #0000ff;">null</span>) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.getLocked() == <span style="color: #0000ff;">false</span><span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">this</span>.myObject.attr("sdplocked", "yes"<span style="color: #000000;">);
                }
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: onUnLock() 解锁控件</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 执行控件的锁定</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            onUnLock: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.myObject == <span style="color: #0000ff;">null</span>) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.getLocked() == <span style="color: #0000ff;">true</span><span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">this</span>.myObject.attr("sdplocked", "no"<span style="color: #000000;">);
                }
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getLocked() 获取控件是否锁定</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 获取控件的锁定状态</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: [bool] 控件锁定状态 true false</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getLocked: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span><span style="color: #000000;">.myObject) {
                    </span><span style="color: #0000ff;">return</span> (<span style="color: #0000ff;">this</span>.myObject.attr("sdplocked") == "yes"<span style="color: #000000;">);
                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                }
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: getVisible() 获取控件是否可见</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 获取控件的可见状态（显示/隐藏）</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ return: [bool] 控件锁定状态 true: 表示显示（可见）; false：表示隐藏（不可见）</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            getVisible: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.myObject != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span>.myObject.is(":hidden"<span style="color: #000000;">);
                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                }
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: onRefresh() 树刷新</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 目录树刷新[当前树是通过自动加载的时,即从SQL中获取有效]</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 外部调用方法</span>
            onRefresh: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">var</span> P = <span style="color: #0000ff;">this</span><span style="color: #000000;">.options;
                </span><span style="color: #0000ff;">this</span>.focusNodeCode = ""<span style="color: #000000;">;
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: _loadParam() 加载控件Option参数</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 加载控件在设计器中Option参数</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 内部调用方法</span>
            _loadParam: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">this</span>.options = $.extend({}, <span style="color: #0000ff;">this</span>.defaults);  <span style="color: #008000;">//</span><span style="color: #008000;"> 合并参数</span>
<span style="color: #000000;">            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: _bindEvent() 事件绑定</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 执行控件 样式、事件等绑定</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 内部调用方法</span>
            _bindEvent: <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                </span><span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">this</span>.myContainer) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">var</span> _this = <span style="color: #0000ff;">this</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">this</span>.myContainer.click(<span style="color: #0000ff;">function</span><span style="color: #000000;"> (event) {
                    _this._onClickHandle(event);
                }).dblclick(</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (event) {
                    _this._onDblClickHandle(event);
                }).contextmenu(</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (event) {
                    </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                });
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: _onClickHandle() 节点单击事件处理</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 对目录树节点的单击事件处理</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [object] event 当前目标对象(DOM)</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 内部调用方法</span>
            _onClickHandle: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (event) {
                </span><span style="color: #0000ff;">var</span> e = window.event ||<span style="color: #000000;"> event;
                e </span>= e.srcElement ||<span style="color: #000000;"> e.target;
                </span><span style="color: #0000ff;">if</span> (e.tagName.toLowerCase() != "span") { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">var</span> tgObj =<span style="color: #000000;"> $(e);
                </span><span style="color: #0000ff;">var</span> tgNodeCode = <span style="color: #0000ff;">null</span>, tgNd = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">switch</span> (tgObj.attr("stype"<span style="color: #000000;">)) {
                    </span><span style="color: #0000ff;">case</span> "text"<span style="color: #000000;">:
                        tgNodeCode </span>= tgObj.attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_text_", ""<span style="color: #000000;">);
                        tgNd </span>= <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_span_" +<span style="color: #000000;"> tgNodeCode);
                        </span><span style="color: #0000ff;">if</span> (!tgNd.hasClass("node_select"<span style="color: #000000;">)) {
                            tgNd.addClass(</span>"node_select"<span style="color: #000000;">);
                            </span><span style="color: #0000ff;">var</span> forFocus = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_span_" + <span style="color: #0000ff;">this</span><span style="color: #000000;">.focusNodeCode);
                            </span><span style="color: #0000ff;">if</span> (forFocus.length &gt; 0) { forFocus.removeClass("node_select"<span style="color: #000000;">); };
                            </span><span style="color: #0000ff;">this</span>.focusNodeCode =<span style="color: #000000;"> tgNodeCode;
                        };
                        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">._onNodeClick(tgNd);
                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                    </span><span style="color: #0000ff;">case</span> "plus"<span style="color: #000000;">:
                        tgNodeCode </span>= tgObj.attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_plus_", ""<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">typeof</span> (tgObj.prop("open")) == "undefined"<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">if</span> (tgObj.hasClass("node_plug_0n"<span style="color: #000000;">)) {
                                </span><span style="color: #0000ff;">if</span> (tgObj.hasClass("node_expd_0n")) { tgObj.prop("open", <span style="color: #0000ff;">true</span>); } <span style="color: #0000ff;">else</span> { tgObj.prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (tgObj.hasClass("node_plug_1l"<span style="color: #000000;">)) {
                                </span><span style="color: #0000ff;">if</span> (tgObj.hasClass("node_expd_1l")) { tgObj.prop("open", <span style="color: #0000ff;">true</span>); } <span style="color: #0000ff;">else</span> { tgObj.prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (tgObj.hasClass("node_plug_2b"<span style="color: #000000;">)) {
                                </span><span style="color: #0000ff;">if</span> (tgObj.hasClass("node_expd_2b")) { tgObj.prop("open", <span style="color: #0000ff;">true</span>); } <span style="color: #0000ff;">else</span> { tgObj.prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (tgObj.hasClass("node_plug_2t"<span style="color: #000000;">)) {
                                </span><span style="color: #0000ff;">if</span> (tgObj.hasClass("node_expd_2t")) { tgObj.prop("open", <span style="color: #0000ff;">true</span>); } <span style="color: #0000ff;">else</span> { tgObj.prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (tgObj.hasClass("node_plug_3a"<span style="color: #000000;">)) {
                                </span><span style="color: #0000ff;">if</span> (tgObj.hasClass("node_expd_3a")) { tgObj.prop("open", <span style="color: #0000ff;">true</span>); } <span style="color: #0000ff;">else</span> { tgObj.prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                            };
                        };
                        </span><span style="color: #0000ff;">if</span> (tgObj.prop("open")) { <span style="color: #0000ff;">this</span>.collapseNode(tgNodeCode); } <span style="color: #0000ff;">else</span> { <span style="color: #0000ff;">this</span><span style="color: #000000;">.expandNode(tgNodeCode); };
                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                    </span><span style="color: #0000ff;">case</span> "check"<span style="color: #000000;">:
                        </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.getLocked() == <span style="color: #0000ff;">true</span>) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                        tgNodeCode </span>= tgObj.attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_chk_", ""<span style="color: #000000;">);
                        tgNd </span>= <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_span_" +<span style="color: #000000;"> tgNodeCode);
                        </span><span style="color: #0000ff;">var</span> _oldCheckState = tgObj.prop("checked") || <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                        </span><span style="color: #0000ff;">this</span>.setNodeChecked(tgNodeCode, !tgObj.prop("checked"<span style="color: #000000;">));
                        </span><span style="color: #0000ff;">var</span> _newCheckState = tgObj.prop("checked") || <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                        </span><span style="color: #0000ff;">if</span> (_oldCheckState != _newCheckState) { <span style="color: #0000ff;">this</span><span style="color: #000000;">._onNodeCheckedChange(tgNd); };
                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: _onDblClickHandle() 节点双击事件处理</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 对目录树节点的双击事件处理</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [object] event 当前目标对象(DOM)</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 内部调用方法</span>
            _onDblClickHandle: <span style="color: #0000ff;">function</span> (event) { <span style="color: #008000;">//</span><span style="color: #008000;"> 节点双击事件</span>
                <span style="color: #0000ff;">var</span> e = event ||<span style="color: #000000;"> window.event;
                e </span>= e.srcElement ||<span style="color: #000000;"> e.target;
                </span><span style="color: #0000ff;">if</span> (e.tagName.toLowerCase() != "span") { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">var</span> dblOBJ =<span style="color: #000000;"> $(e);
                </span><span style="color: #0000ff;">if</span> (dblOBJ.attr("stype") == "text"<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">var</span> dblNodeCode = dblOBJ.attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_text_", ""<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">var</span> plusOBJ = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_plus_" +<span style="color: #000000;"> dblNodeCode);
                    </span><span style="color: #0000ff;">var</span> tgNd = <span style="color: #0000ff;">this</span>.sdpTree.find("#" + <span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_span_" +<span style="color: #000000;"> dblNodeCode);
                    </span><span style="color: #0000ff;">if</span> (plusOBJ.length &gt; 0<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">typeof</span> (plusOBJ.prop("open")) == "undefined"<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">if</span> (plusOBJ.hasClass("node_plug_0n"<span style="color: #000000;">)) {
                                </span><span style="color: #0000ff;">if</span> (plusOBJ.hasClass("node_expd_0n")) { plusOBJ.prop("open", <span style="color: #0000ff;">true</span>); } <span style="color: #0000ff;">else</span> { plusOBJ.prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (plusOBJ.hasClass("node_plug_1l"<span style="color: #000000;">)) {
                                </span><span style="color: #0000ff;">if</span> (plusOBJ.hasClass("node_expd_1l")) { plusOBJ.prop("open", <span style="color: #0000ff;">true</span>); } <span style="color: #0000ff;">else</span> { plusOBJ.prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (plusOBJ.hasClass("node_plug_2b"<span style="color: #000000;">)) {
                                </span><span style="color: #0000ff;">if</span> (plusOBJ.hasClass("node_expd_2b")) { plusOBJ.prop("open", <span style="color: #0000ff;">true</span>); } <span style="color: #0000ff;">else</span> { plusOBJ.prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (plusOBJ.hasClass("node_plug_2t"<span style="color: #000000;">)) {
                                </span><span style="color: #0000ff;">if</span> (plusOBJ.hasClass("node_expd_2t")) { plusOBJ.prop("open", <span style="color: #0000ff;">true</span>); } <span style="color: #0000ff;">else</span> { plusOBJ.prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (plusOBJ.hasClass("node_plug_3a"<span style="color: #000000;">)) {
                                </span><span style="color: #0000ff;">if</span> (plusOBJ.hasClass("node_expd_3a")) { plusOBJ.prop("open", <span style="color: #0000ff;">true</span>); } <span style="color: #0000ff;">else</span> { plusOBJ.prop("open", <span style="color: #0000ff;">false</span><span style="color: #000000;">); };
                            };
                        };
                        </span><span style="color: #0000ff;">if</span> (plusOBJ.prop("open"<span style="color: #000000;">)) {
                            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.collapseNode(dblNodeCode);
                        }
                        </span><span style="color: #0000ff;">else</span> { <span style="color: #0000ff;">this</span><span style="color: #000000;">.expandNode(dblNodeCode); };
                    };
                    </span><span style="color: #0000ff;">this</span><span style="color: #000000;">._onNodeDblClick(tgNd);
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: _onNodeClick() 执行节点自定单击事件</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 执行节点自定单击事件</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [object] node 树节点DOM对象 </span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 内部调用方法</span>
            _onNodeClick: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (node) {
                </span><span style="color: #0000ff;">if</span> (!node) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">var</span> nodeClickEvent = <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.nodeclick;
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">typeof</span> (nodeClickEvent) != 'function') { nodeClickEvent =<span style="color: #000000;"> $.strToFunction(nodeClickEvent); };
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">typeof</span> (nodeClickEvent) == 'function'<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
                        </span><span style="color: #0000ff;">var</span> ndCode = $(node).attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_span_", ""<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">var</span> ndItem = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.nodeItem();
                        </span><span style="color: #0000ff;">if</span> (ndCode == <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode) {
                            ndItem.nodecode </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode;
                            ndItem.nodetext </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.roottext;
                            ndItem.nodeurl </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rooturl;
                            ndItem.iconcollapse </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rooticon;
                        } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                            ndItem </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[ndCode];
                        };

                        </span><span style="color: #0000ff;">var</span> eParams =<span style="color: #000000;"> {
                            treePlug: </span><span style="color: #0000ff;">this</span><span style="color: #000000;">,
                            nodeObject: $(node)[</span>0<span style="color: #000000;">],
                            nodeParams: ndItem
                        };
                        nodeClickEvent.call(</span><span style="color: #0000ff;">null</span><span style="color: #000000;">, eParams);
                    } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (error) {
                        alert(</span>"控件单击事件执行错误！" +<span style="color: #000000;"> error);
                    }
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: _onNodeDblClick() 执行节点自定双击事件</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 执行节点自定双击事件</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [object] node 树节点DOM对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 内部调用方法</span>
            _onNodeDblClick: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (node) {
                </span><span style="color: #0000ff;">if</span> (!node) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">var</span> nodeDblClickEvent = <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.nodedblclick;
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">typeof</span> (nodeDblClickEvent) != 'function') { nodeDblClickEvent =<span style="color: #000000;"> $.strToFunction(nodeDblClickEvent); };
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">typeof</span> (nodeDblClickEvent) == 'function'<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
                        </span><span style="color: #0000ff;">var</span> ndCode = $(node).attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_span_", ""<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">var</span> ndItem = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.nodeItem();
                        </span><span style="color: #0000ff;">if</span> (ndCode == <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode) {
                            ndItem.nodecode </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode;
                            ndItem.nodetext </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.roottext;
                            ndItem.nodeurl </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rooturl;
                            ndItem.iconcollapse </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rooticon;
                        } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                            ndItem </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[ndCode];
                        };
                        </span><span style="color: #0000ff;">var</span> eParams =<span style="color: #000000;"> {
                            treePlug: </span><span style="color: #0000ff;">this</span><span style="color: #000000;">,
                            nodeObject: $(node)[</span>0<span style="color: #000000;">],
                            nodeParams: ndItem
                        };
                        nodeDblClickEvent.call(</span><span style="color: #0000ff;">null</span><span style="color: #000000;">, eParams);
                    } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (error) {
                        alert(</span>"控件双击事件执行错误！" +<span style="color: #000000;"> error);
                    }
                };
            },

            </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ method: _onNodeCheckedChange() 执行节点自定选择（选中状态）改变事件</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ depict: 执行节点自定选择（选中状态）改变事件</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [object] node 树节点DOM对象</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> @ pbtype: 内部调用方法</span>
            _onNodeCheckedChange: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (node) {
                </span><span style="color: #0000ff;">if</span> (!node) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                </span><span style="color: #0000ff;">var</span> nodeCheckedChange = <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.checkedchange;
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">typeof</span> (nodeCheckedChange) != 'function') { nodeCheckedChange =<span style="color: #000000;"> $.strToFunction(nodeCheckedChange); };
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">typeof</span> (nodeCheckedChange) == 'function'<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
                        </span><span style="color: #0000ff;">var</span> ndCode = $(node).attr("id").replace(<span style="color: #0000ff;">this</span>.myFnId + "_sdptree_node_span_", ""<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">var</span> ndItem = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.nodeItem();
                        </span><span style="color: #0000ff;">if</span> (ndCode == <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode) {
                            ndItem.nodecode </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rootcode;
                            ndItem.nodetext </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.roottext;
                            ndItem.nodeurl </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rooturl;
                            ndItem.iconcollapse </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.options.rooticon;
                        } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                            ndItem </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._methods._hsNodes[ndCode];
                        };
                        </span><span style="color: #0000ff;">var</span> eParams =<span style="color: #000000;"> {
                            treePlug: </span><span style="color: #0000ff;">this</span><span style="color: #000000;">,
                            nodeObject: $(node)[</span>0<span style="color: #000000;">],
                            nodeParams: ndItem
                        };
                        nodeCheckedChange.call(</span><span style="color: #0000ff;">null</span><span style="color: #000000;">, eParams);
                    } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (error) {
                        alert(</span>"控件双击事件执行错误！" +<span style="color: #000000;"> error);
                    }
                };
            },

            _methods: {
                _fnObject: </span><span style="color: #0000ff;">null</span><span style="color: #000000;">,
                _myObject: </span><span style="color: #0000ff;">null</span><span style="color: #000000;">,
                _myContainer: </span><span style="color: #0000ff;">null</span><span style="color: #000000;">,
                _myFnId: </span>""<span style="color: #000000;">,
                _sdpTree: </span><span style="color: #0000ff;">null</span><span style="color: #000000;">,
                _myNodes: [],
                _hsNodes: </span><span style="color: #0000ff;">null</span><span style="color: #000000;">,
                _dtNodes: </span><span style="color: #0000ff;">null</span><span style="color: #000000;">,
                _createTree: </span><span style="color: #0000ff;">function</span> () {    <span style="color: #008000;">//</span><span style="color: #008000;"> 创建树HTML对象</span>
                    <span style="color: #008000;">//</span><span style="color: #008000;"> 初始化变量参数</span>
                    <span style="color: #0000ff;">this</span>._sdpTree.empty();       <span style="color: #008000;">//</span><span style="color: #008000;"> 清空目录树内的所有内容</span>
                    <span style="color: #0000ff;">this</span>._fnObject.focusNodeCode = ""<span style="color: #000000;">;
                    </span><span style="color: #0000ff;">this</span>._myNodes =<span style="color: #000000;"> [];
                    </span><span style="color: #0000ff;">this</span>._hsNodes = <span style="color: #0000ff;">new</span><span style="color: #000000;"> $.Hashtable();
                    </span><span style="color: #0000ff;">this</span>._dtNodes =<span style="color: #000000;"> [];
                    </span><span style="color: #0000ff;">var</span> _tmNodes = [], F = <span style="color: #0000ff;">this</span>._fnObject, P = <span style="color: #0000ff;">this</span>._fnObject.options, _this = <span style="color: #0000ff;">this</span><span style="color: #000000;">;

                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 重组目录节点（依次将所有的节点组成自己的树） 一次循环完成 提高效率</span>
                    <span style="color: #0000ff;">function</span><span style="color: #000000;"> Renew_GroupNodes(currNodes) {
                        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 重绘节点上下级关系</span>
                        <span style="color: #0000ff;">function</span><span style="color: #000000;"> Renew_Tree(reNode) {
                            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (_tmNodes[reNode.nodecode]) {
                                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> n = 0; n &lt; _tmNodes[reNode.nodecode].length; n++<span style="color: #000000;">) {
                                    reNode._childs[n] </span>=<span style="color: #000000;"> _tmNodes[reNode.nodecode][n];
                                    reNode._childs[n]._parent </span>=<span style="color: #000000;"> reNode;
                                    reNode._childs[n]._firstFlag </span>= (n == 0) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                                    reNode._childs[n]._lastFlag </span>= (n == (_tmNodes[reNode.nodecode].length - 1)) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                                    reNode._childs[n]._haveChild </span>= (_tmNodes[_tmNodes[reNode.nodecode][n].nodecode]) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                                    reNode._childs[n]._nodeLevel </span>= reNode._nodeLevel + 1<span style="color: #000000;">;
                                    Renew_Tree(_tmNodes[reNode.nodecode][n]);  </span><span style="color: #008000;">//</span><span style="color: #008000;"> 迭代循环</span>
<span style="color: #000000;">                                }
                            }
                        };

                        </span><span style="color: #0000ff;">var</span> m = 0<span style="color: #000000;">;
                        _tmNodes[P.rootcode] </span>= [];   <span style="color: #008000;">//</span><span style="color: #008000;"> 根节点</span>
                        <span style="color: #0000ff;">for</span> (m = 0; m &lt; currNodes.length; m++<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">var</span> _nd =<span style="color: #000000;"> currNodes[m];
                            _tmNodes[_nd.supnodecode] </span>= _tmNodes[_nd.supnodecode] ||<span style="color: #000000;"> [];
                            _tmNodes[_nd.supnodecode].push(_nd);
                            _this._hsNodes.add(_nd.nodecode, _nd);
                        };
                        </span><span style="color: #0000ff;">var</span> _rtNodes =<span style="color: #000000;"> _tmNodes[P.rootcode];

                        </span><span style="color: #0000ff;">for</span> (m = 0; m &lt; _rtNodes.length; m++<span style="color: #000000;">) {
                            _this._dtNodes[m] </span>=<span style="color: #000000;"> _rtNodes[m];
                            _this._dtNodes[m]._parent </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                            _this._dtNodes[m]._firstFlag </span>= (m == 0) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span>;  <span style="color: #008000;">//</span><span style="color: #008000;"> 设置参数</span>
                            _this._dtNodes[m]._lastFlag = (m == (_rtNodes.length - 1)) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                            _this._dtNodes[m]._haveChild </span>= (_tmNodes[_rtNodes[m].nodecode]) ? <span style="color: #0000ff;">true</span> : <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                            _this._dtNodes[m]._nodeLevel </span>= 1<span style="color: #000000;">;
                            Renew_Tree(_rtNodes[m]);                               </span><span style="color: #008000;">//</span><span style="color: #008000;"> 迭代循环</span>
<span style="color: #000000;">                        };

                        _rtNodes </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                        _tmNodes </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                    };

                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 执行节点重组</span>
<span style="color: #000000;">                    Renew_GroupNodes(F.curNodes);
                    F.curNodes </span>= [];  <span style="color: #008000;">//</span><span style="color: #008000;"> 清空临时节点数组变量，便于后续重新加载使用</span>

                    <span style="color: #008000;">//</span><span style="color: #008000;"> 定义前缀字符</span>
                    <span style="color: #0000ff;">var</span> full_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_full";     <span style="color: #008000;">//</span><span style="color: #008000;"> 完整的一个节点DIV（包含：连线、+号图片、节点图片、选择框、节点文本）</span>
                    <span style="color: #0000ff;">var</span> node_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_span";     <span style="color: #008000;">//</span><span style="color: #008000;"> 节点SPAN</span>
                    <span style="color: #008000;">//</span><span style="color: #008000;"> var plus_Prefix = this._myFnId + "_sdptree_node_plus";     // + 号图片</span>
                    <span style="color: #0000ff;">var</span> nimg_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_icon";     <span style="color: #008000;">//</span><span style="color: #008000;"> 节点图片</span>
                    <span style="color: #0000ff;">var</span> chkr_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_chk";      <span style="color: #008000;">//</span><span style="color: #008000;"> 选择图片</span>
                    <span style="color: #0000ff;">var</span> text_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_text";     <span style="color: #008000;">//</span><span style="color: #008000;"> 节点文本</span>
                    <span style="color: #0000ff;">var</span> clip_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_clip";     <span style="color: #008000;">//</span><span style="color: #008000;"> 子节点DIV</span>

                    <span style="color: #008000;">//</span><span style="color: #008000;"> 注意点：前台传入的所有自定义的图标，全部已经是指定的完整路径了，所以这里就不需要转换</span>
                    <span style="color: #0000ff;">var</span> _rootCode =<span style="color: #000000;"> P.rootcode;
                    </span><span style="color: #0000ff;">if</span> (P.showroot) {           <span style="color: #008000;">//</span><span style="color: #008000;"> 判定是否显示根节点</span>
                        <span style="color: #0000ff;">var</span> tmRhtml =<span style="color: #000000;"> [];
                        tmRhtml.push(</span>'&lt;div id="' + full_Prefix + '_' + _rootCode + '" stype="full" &gt;'<span style="color: #000000;">);
                        tmRhtml.push(</span>'&lt;span id="' + node_Prefix + '_' + _rootCode + '" class="node_default" stype="node" &gt;'<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (P.showicon) {
                            tmRhtml.push(</span>'&lt;span id="' + nimg_Prefix + '_' + _rootCode + '" stype="icon" '<span style="color: #000000;">);
                            </span><span style="color: #0000ff;">if</span> (P.rooticon) {   <span style="color: #008000;">//</span><span style="color: #008000;"> 是否客户自定义的图片</span>
                                tmRhtml.push('class="custom_img" style="background-image: url(' + (P.rooticon) + ');"'<span style="color: #000000;">);
                            } </span><span style="color: #0000ff;">else</span> {                                <span style="color: #008000;">//</span><span style="color: #008000;"> 启用默认的样式图片</span>
                                tmRhtml.push('class="root_img"'<span style="color: #000000;">);
                            };
                            tmRhtml.push(</span>' &gt;&lt;/span&gt;'<span style="color: #000000;">);
                        };
                        </span><span style="color: #0000ff;">if</span> (P.selecttype == "checkbox") {     <span style="color: #008000;">//</span><span style="color: #008000;"> 是否开启选择按钮</span>
                            tmRhtml.push('&lt;span id="' + chkr_Prefix + '_' + _rootCode + '" stype="check" class="checkbox"&gt;&lt;/span&gt;'<span style="color: #000000;">);
                        } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (P.selecttype == "radio"<span style="color: #000000;">) {
                            tmRhtml.push(</span>'&lt;span id="' + chkr_Prefix + '_' + _rootCode + '" stype="check" class="radiobtn"&gt;&lt;/span&gt;'<span style="color: #000000;">);
                        };
                        tmRhtml.push(</span>'&lt;span id="' + text_Prefix + '_' + _rootCode + '"  class="root_title" stype="text"&gt;' + P.roottext + '&lt;/span&gt;'<span style="color: #000000;">);
                        tmRhtml.push(</span>'&lt;/span&gt;'<span style="color: #000000;">);
                        tmRhtml.push(</span>'&lt;/div&gt;'<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">this</span>._sdpTree.append($(tmRhtml.join(""<span style="color: #000000;">)));
                        tmRhtml </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                    };
                    </span><span style="color: #0000ff;">var</span> $clipDom = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                    </span><span style="color: #0000ff;">if</span> (P.showroot) $clipDom = $('&lt;div id="' + clip_Prefix + '_' + _rootCode + '" class="clipdiv" stype="clip" style="display: block" &gt;&lt;/div&gt;'<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">var</span> _recHTML = <span style="color: #0000ff;">this</span>._createNodes(<span style="color: #0000ff;">this</span><span style="color: #000000;">._dtNodes);
                    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (_recHTML) {
                        </span><span style="color: #0000ff;">if</span> ($clipDom) { $clipDom.append($(_recHTML)); <span style="color: #0000ff;">this</span>._sdpTree.append($clipDom); } <span style="color: #0000ff;">else</span> { <span style="color: #0000ff;">this</span><span style="color: #000000;">._sdpTree.append($(_recHTML)); };
                    } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        </span><span style="color: #0000ff;">if</span> ($clipDom) { <span style="color: #0000ff;">this</span><span style="color: #000000;">._sdpTree.append($clipDom); };
                    };
                    _recHTML </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;

                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 绑定事件</span>
                    <span style="color: #0000ff;">this</span><span style="color: #000000;">._bindEvent();
                    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (P.openall) { F.expandAll(); };
                },
                _createNodes: </span><span style="color: #0000ff;">function</span> (crNodes) { <span style="color: #008000;">//</span><span style="color: #008000;"> 创建节点HTML</span>
                    <span style="color: #0000ff;">var</span> full_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_full";     <span style="color: #008000;">//</span><span style="color: #008000;"> 完整的一个节点DIV（包含：连线、+号图片、节点图片、选择框、节点文本）</span>
                    <span style="color: #0000ff;">var</span> node_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_span";     <span style="color: #008000;">//</span><span style="color: #008000;"> 节点SPAN</span>
                    <span style="color: #0000ff;">var</span> plus_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_plus";     <span style="color: #008000;">//</span><span style="color: #008000;"> + 号图片</span>
                    <span style="color: #0000ff;">var</span> nimg_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_icon";     <span style="color: #008000;">//</span><span style="color: #008000;"> 节点图片</span>
                    <span style="color: #0000ff;">var</span> chkr_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_chk";      <span style="color: #008000;">//</span><span style="color: #008000;"> 选择图片</span>
                    <span style="color: #0000ff;">var</span> text_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_text";     <span style="color: #008000;">//</span><span style="color: #008000;"> 节点文本</span>
                    <span style="color: #0000ff;">var</span> clip_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_clip";     <span style="color: #008000;">//</span><span style="color: #008000;"> 子节点DIV</span>
                    <span style="color: #0000ff;">var</span> P = <span style="color: #0000ff;">this</span>._fnObject.options;                            <span style="color: #008000;">//</span><span style="color: #008000;"> 参数变量</span>

                    <span style="color: #0000ff;">var</span> tmHTML =<span style="color: #000000;"> [];
                    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> m = 0; m &lt; crNodes.length; m++<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">var</span> crNode =<span style="color: #000000;"> crNodes[m];
                        tmHTML.push(</span>'&lt;div id="' + full_Prefix + '_' + crNode.nodecode + '" stype="full" &gt;'<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">var</span> tmIndent =<span style="color: #000000;"> [];
                        </span><span style="color: #0000ff;">var</span> tmParent =<span style="color: #000000;"> crNode._parent;
                        </span><span style="color: #0000ff;">var</span> lv =<span style="color: #000000;"> crNode._nodeLevel;
                        </span><span style="color: #0000ff;">while</span> (lv &gt; 1) { tmIndent[tmIndent.length] = tmParent; tmParent = tmParent._parent; lv--<span style="color: #000000;">; };
                        </span><span style="color: #0000ff;">for</span> (lv = tmIndent.length - 1; lv &gt;= 0; lv--<span style="color: #000000;">) {
                            tmHTML.push(</span>'&lt;span class="' + ((<span style="color: #0000ff;">this</span>._fnObject.options.showline == <span style="color: #0000ff;">true</span>) ? ((tmIndent[lv]._lastFlag == <span style="color: #0000ff;">false</span>) ? "node_line_10" : "nullimg") : "nullimg") + '" stype="line" &gt;&lt;/span&gt;'<span style="color: #000000;">);
                        };
                        tmIndent </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                        tmParent </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                        </span><span style="color: #0000ff;">var</span> tmNdCode =<span style="color: #000000;"> crNode.nodecode;
                        </span><span style="color: #0000ff;">if</span> (P.showline == <span style="color: #0000ff;">true</span>) {          <span style="color: #008000;">//</span><span style="color: #008000;"> 2、节点自身图标 + - </span>
                            <span style="color: #0000ff;">if</span><span style="color: #000000;"> (crNode._haveChild) {
                                </span><span style="color: #0000ff;">if</span> (crNode._nodeLevel == 1 &amp;&amp; P.showroot == <span style="color: #0000ff;">false</span> &amp;&amp; crNode._firstFlag == <span style="color: #0000ff;">true</span><span style="color: #000000;">) {
                                    tmHTML.push(</span>'&lt;span id="' + plus_Prefix + '_' + tmNdCode + '"  stype="plus" class="' + ((crNode._lastFlag) ? "node_plug_1l" : "node_plug_2b") + '"&gt;&lt;/span&gt;'<span style="color: #000000;">);
                                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                                    tmHTML.push(</span>'&lt;span id="' + plus_Prefix + '_' + tmNdCode + '"  stype="plus" class="' + ((crNode._lastFlag) ? "node_plug_2t" : "node_plug_3a") + '"&gt;&lt;/span&gt;'<span style="color: #000000;">);
                                };
                            } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                                </span><span style="color: #0000ff;">if</span> (crNode._nodeLevel == 1 &amp;&amp; P.showroot == <span style="color: #0000ff;">false</span> &amp;&amp; crNode._firstFlag == <span style="color: #0000ff;">true</span><span style="color: #000000;">) {
                                    tmHTML.push(</span>'&lt;span class="' + ((crNode._lastFlag) ? "node_line_11" : "node_line_20") + '" stype="line" &gt;&lt;/span&gt;'<span style="color: #000000;">);
                                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                                    tmHTML.push(</span>'&lt;span class="' + ((crNode._lastFlag) ? "node_line_21" : "node_line_3n") + '" stype="line" &gt;&lt;/span&gt;'<span style="color: #000000;">);
                                };
                            };

                        } </span><span style="color: #0000ff;">else</span> {   <span style="color: #008000;">//</span><span style="color: #008000;"> 不显示线</span>
                            <span style="color: #0000ff;">var</span> tmPlusStr = "stype=\"plus\" id=" + plus_Prefix + "_" +<span style="color: #000000;"> tmNdCode;
                            </span><span style="color: #0000ff;">var</span> tmLineStr = "stype=\"line\""<span style="color: #000000;">;
                            tmHTML.push(</span>'&lt;span class="' + ((crNode._haveChild == <span style="color: #0000ff;">true</span>) ? "node_plug_0n" : "nullimg") + '" ' + ((crNode._haveChild == <span style="color: #0000ff;">true</span>) ? tmPlusStr : tmLineStr) + ' &gt;&lt;/span&gt;'<span style="color: #000000;">);
                        };
                        tmHTML.push(</span>'&lt;span id="' + node_Prefix + '_' + tmNdCode + '" class="node_default" stype="node" &gt;');  <span style="color: #008000;">//</span><span style="color: #008000;"> 3、添加节点相关</span>

                        <span style="color: #008000;">//</span><span style="color: #008000;"> 节点小图标</span>
                        <span style="color: #0000ff;">if</span><span style="color: #000000;"> (P.showicon) {

                            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 节点图标  根据每个节点自身是否定义 如果没有定义，再从OPTIONS 参数中查询</span>
                            <span style="color: #0000ff;">var</span> cur_CollapseIcon = ""; <span style="color: #008000;">//</span><span style="color: #008000;">                    iconexpand: "",  iconcollapse: ""</span>
                            <span style="color: #0000ff;">var</span> cur_ExpandIcon = ""<span style="color: #000000;">;
                            </span><span style="color: #0000ff;">if</span> ($.isNull(crNode.iconcollapse) == <span style="color: #0000ff;">false</span>) {  <span style="color: #008000;">//</span><span style="color: #008000;"> 判定节点收缩时显示的图标</span>
                                cur_CollapseIcon = crNode.iconcollapse;    <span style="color: #008000;">//</span><span style="color: #008000;"> 默认显示图标[收缩]</span>
                                cur_ExpandIcon = crNode.iconexpand;        <span style="color: #008000;">//</span><span style="color: #008000;"> 展开显示图标[展开]</span>
                            } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                                </span><span style="color: #0000ff;">if</span> (crNode._haveChild == <span style="color: #0000ff;">true</span>)             <span style="color: #008000;">//</span><span style="color: #008000;"> 判定是否有子节点</span>
<span style="color: #000000;">                                {
                                    </span><span style="color: #0000ff;">if</span> ($.isNull(P.middefticon) == <span style="color: #0000ff;">false</span><span style="color: #000000;">) {
                                        cur_CollapseIcon </span>= P.middefticon;   <span style="color: #008000;">//</span><span style="color: #008000;"> 中间节点收缩[整体自定]</span>
                                        cur_ExpandIcon = P.midexpdicon;     <span style="color: #008000;">//</span><span style="color: #008000;"> 中间节点展开[整体自定]</span>
<span style="color: #000000;">                                    }
                                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                                    </span><span style="color: #0000ff;">if</span> ($.isNull(P.endnodeicon) == <span style="color: #0000ff;">false</span><span style="color: #000000;">) {
                                        cur_CollapseIcon </span>= P.endnodeicon;   <span style="color: #008000;">//</span><span style="color: #008000;"> 末级节点[整体自定]</span>
                                        cur_ExpandIcon = ""<span style="color: #000000;">;
                                    }
                                }
                            };

                            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 节点图片  </span>
                            <span style="color: #0000ff;">if</span> ($.isNull(cur_CollapseIcon) == <span style="color: #0000ff;">false</span><span style="color: #000000;">) {
                                tmHTML.push(</span>'&lt;span class="custom_img" id="' + nimg_Prefix + '_' + tmNdCode + '" stype="icon" collimg="' + cur_CollapseIcon + '" expdimg="' + cur_ExpandIcon + '" style="background-image: url(' + cur_CollapseIcon + ');"&gt;&lt;/span&gt;'<span style="color: #000000;">);
                            } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                                tmHTML.push(</span>'&lt;span class="' + ((crNode._haveChild == <span style="color: #0000ff;">true</span>) ? "folder_collapse" : "folder_last") + '" id="' + nimg_Prefix + '_' + tmNdCode + '" stype="icon"&gt;&lt;/span&gt;'<span style="color: #000000;">);
                            };
                        };
                        </span><span style="color: #0000ff;">if</span> (P.selecttype == "checkbox") {   <span style="color: #008000;">//</span><span style="color: #008000;"> 允许添加选择按钮</span>
                            tmHTML.push('&lt;span id="' + chkr_Prefix + '_' + tmNdCode + '" stype="check" class="checkbox" &gt;&lt;/span&gt;'<span style="color: #000000;">);
                        } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (P.selecttype == "radio"<span style="color: #000000;">) {
                            tmHTML.push(</span>'&lt;span id="' + chkr_Prefix + '_' + tmNdCode + '" stype="check" class="radiobtn" &gt;&lt;/span&gt;'<span style="color: #000000;">);
                        };
                        tmHTML.push(</span>'&lt;span id="' + text_Prefix + '_' + tmNdCode + '" class="node_title" stype="text"&gt;' + crNode.nodetext + '&lt;/span&gt;');      <span style="color: #008000;">//</span><span style="color: #008000;">  节点名称</span>
                        tmHTML.push('&lt;/span&gt;'<span style="color: #000000;">);
                        tmHTML.push(</span>'&lt;/div&gt;'<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">if</span> (crNode._childs.length &gt; 0<span style="color: #000000;">) {
                            tmHTML.push(</span>'&lt;div id="' + clip_Prefix + '_' + tmNdCode + '" class="clipdiv" stype="clip"  style="display:none;" &gt;');  <span style="color: #008000;">//</span><span style="color: #008000;"> 第一级以下全部隐藏</span>
                            tmHTML.push(<span style="color: #0000ff;">this</span><span style="color: #000000;">._createNodes(crNode._childs));
                            tmHTML.push(</span>'&lt;/div&gt;'<span style="color: #000000;">);
                        };
                    };
                    </span><span style="color: #0000ff;">return</span> tmHTML.join(""<span style="color: #000000;">);
                },
                _updateNode: </span><span style="color: #0000ff;">function</span> (nodeCode) {            <span style="color: #008000;">//</span><span style="color: #008000;">  更新节点显示样式</span>
                    <span style="color: #0000ff;">var</span> tmNowNode = <span style="color: #0000ff;">this</span>._hsNodes[nodeCode];  <span style="color: #008000;">//</span><span style="color: #008000;">  当前节点的Node数据</span>
                    <span style="color: #0000ff;">if</span> (!tmNowNode) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };

                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 1、首先更新自己</span>
                    <span style="color: #0000ff;">var</span> nowFullNode = $(<span style="color: #0000ff;">this</span>._fnObject.getNode(nodeCode));                                       <span style="color: #008000;">//</span><span style="color: #008000;"> 完整的节点对象</span>
                    <span style="color: #0000ff;">var</span> nowSpanNode = nowFullNode.find("#" + <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_span_" + nodeCode);   <span style="color: #008000;">//</span><span style="color: #008000;"> 节点NODESPAN</span>
                    <span style="color: #0000ff;">var</span> nowPlusSpan = nowSpanNode.prev();                                                        <span style="color: #008000;">//</span><span style="color: #008000;"> 节点Plus + - 图标</span>
                    <span style="color: #0000ff;">var</span> nowIconSpan = nowFullNode.find("#" + <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_icon_" + nodeCode);   <span style="color: #008000;">//</span><span style="color: #008000;"> 节点ICON 图标</span>

                    <span style="color: #0000ff;">var</span> tmIndent = <span style="color: #0000ff;">null</span>, tmParent = <span style="color: #0000ff;">null</span>, lv = <span style="color: #0000ff;">null</span>, lineClass = "", tmI = 0<span style="color: #000000;">;
                    </span><span style="color: #0000ff;">if</span> (!tmNowNode._haveChild) {  <span style="color: #008000;">//</span><span style="color: #008000;"> 无子节点</span>
                        <span style="color: #008000;">//</span><span style="color: #008000;"> （1）、更新Plus</span>
                        nowPlusSpan.removeAttr("id").removeAttr("open").attr("stype", "line"<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>._fnObject.options.showline == <span style="color: #0000ff;">true</span>) {  <span style="color: #008000;">//</span><span style="color: #008000;"> 显示连接线</span>
                            <span style="color: #0000ff;">var</span> lineClassName = ""<span style="color: #000000;">;
                            </span><span style="color: #0000ff;">if</span> (tmNowNode._nodeLevel == 1 &amp;&amp; <span style="color: #0000ff;">this</span>._fnObject.options.showroot == <span style="color: #0000ff;">false</span> &amp;&amp; tmNowNode._firstFlag == <span style="color: #0000ff;">true</span><span style="color: #000000;">) {
                                lineClassName </span>= (tmNowNode._lastFlag) ? "node_line_11" : "node_line_20"<span style="color: #000000;">;
                            } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                                lineClassName </span>= (tmNowNode._lastFlag) ? "node_line_21" : "node_line_3n"<span style="color: #000000;">;
                            };
                            nowPlusSpan.attr(</span>"class", lineClassName); <span style="color: #008000;">//</span><span style="color: #008000;"> 更新样式ClassName</span>
                        } <span style="color: #0000ff;">else</span> {  <span style="color: #008000;">//</span><span style="color: #008000;"> 不显示连接线</span>
                            nowPlusSpan.attr("class", "nullimg"<span style="color: #000000;">);
                        };
                        </span><span style="color: #008000;">//</span><span style="color: #008000;"> （2）、更新Icon</span>
                        <span style="color: #0000ff;">if</span> (nowIconSpan.length &gt; 0<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">if</span> (!nowIconSpan.hasClass("custom_img")) { nowIconSpan.attr("class", "folder_last"<span style="color: #000000;">); };
                        };

                        </span><span style="color: #008000;">//</span><span style="color: #008000;"> （3）、更新Line</span>
                        tmIndent =<span style="color: #000000;"> [];
                        tmParent </span>=<span style="color: #000000;"> tmNowNode._parent;
                        lv </span>=<span style="color: #000000;"> tmNowNode._nodeLevel;
                        </span><span style="color: #0000ff;">while</span> (lv &gt; 1) { tmIndent[tmIndent.length] = tmParent; tmParent = tmParent._parent; lv--<span style="color: #000000;">; };
                        lineClass </span>= "", tmI = 0<span style="color: #000000;">;
                        </span><span style="color: #0000ff;">for</span> (lv = tmIndent.length - 1; lv &gt;= 0; lv--<span style="color: #000000;">) {
                            lineClass </span>= ((<span style="color: #0000ff;">this</span>._fnObject.options.showline == <span style="color: #0000ff;">true</span>) ? ((tmIndent[lv]._lastFlag == <span style="color: #0000ff;">false</span>) ? "node_line_10" : "nullimg") : "nullimg"<span style="color: #000000;">);
                            $(nowFullNode[</span>0].childNodes[tmI]).attr("class"<span style="color: #000000;">, lineClass);
                            tmI</span>++<span style="color: #000000;">;
                        };

                        tmIndent </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                        tmParent </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                        lineClass </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                    } </span><span style="color: #0000ff;">else</span> {    <span style="color: #008000;">//</span><span style="color: #008000;"> 有子节点</span>
                        <span style="color: #008000;">//</span><span style="color: #008000;"> （1）、更新Plus</span>
                        <span style="color: #0000ff;">var</span> nowClipDiv = <span style="color: #0000ff;">this</span>._sdpTree.find("#" + <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_clip_" +<span style="color: #000000;"> nodeCode);
                        </span><span style="color: #0000ff;">var</span> isOpen = (nowClipDiv.css("display") == "none") ? <span style="color: #0000ff;">false</span> : <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                        nowPlusSpan.attr(</span>"id", <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_plus_" + nodeCode).attr("stype", "plus"<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">if</span> (isOpen) { nowPlusSpan.attr("open", <span style="color: #0000ff;">true</span>); } <span style="color: #0000ff;">else</span> { nowPlusSpan.attr("open", <span style="color: #0000ff;">false</span>); };  <span style="color: #008000;">//</span><span style="color: #008000;"> 设置展开状态</span>
                        <span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>._fnObject.options.showline == <span style="color: #0000ff;">true</span>) {  <span style="color: #008000;">//</span><span style="color: #008000;"> 显示连接线</span>
                            <span style="color: #0000ff;">var</span> plusClassName = ""<span style="color: #000000;">;
                            </span><span style="color: #0000ff;">if</span> (tmNowNode._nodeLevel == 1 &amp;&amp; <span style="color: #0000ff;">this</span>._fnObject.options.showroot == <span style="color: #0000ff;">false</span> &amp;&amp; tmNowNode._firstFlag == <span style="color: #0000ff;">true</span><span style="color: #000000;">) {
                                plusClassName </span>= (tmNowNode._lastFlag) ? "node_plug_1l" : "node_plug_2b"<span style="color: #000000;">;
                            } </span><span style="color: #0000ff;">else</span> { plusClassName = (tmNowNode._lastFlag) ? "node_plug_2t" : "node_plug_3a"<span style="color: #000000;">; };
                            nowPlusSpan.attr(</span>"class", plusClassName);               <span style="color: #008000;">//</span><span style="color: #008000;"> 设置Plus 收缩样式</span>
                            <span style="color: #0000ff;">if</span><span style="color: #000000;"> (isOpen) {
                                </span><span style="color: #0000ff;">switch</span><span style="color: #000000;"> (plusClassName) {
                                    </span><span style="color: #0000ff;">case</span> "node_plug_1l"<span style="color: #000000;">:
                                        nowPlusSpan.addClass(</span>"node_expd_1l"<span style="color: #000000;">);
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">case</span> "node_plug_2b"<span style="color: #000000;">:
                                        nowPlusSpan.addClass(</span>"node_expd_2b"<span style="color: #000000;">);
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">case</span> "node_plug_2t"<span style="color: #000000;">:
                                        nowPlusSpan.addClass(</span>"node_expd_2t"<span style="color: #000000;">);
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">case</span> "node_plug_3a"<span style="color: #000000;">:
                                        nowPlusSpan.addClass(</span>"node_expd_3a"<span style="color: #000000;">);
                                        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                };
                            };
                        } </span><span style="color: #0000ff;">else</span> {  <span style="color: #008000;">//</span><span style="color: #008000;"> 不显示连接线</span>
                            nowPlusSpan.attr("class", "node_plug_0n");              <span style="color: #008000;">//</span><span style="color: #008000;"> 设置Plus 收缩样式</span>
                            <span style="color: #0000ff;">if</span> (isOpen) nowPlusSpan.addClass("node_expd_0n");       <span style="color: #008000;">//</span><span style="color: #008000;"> 添加Plus 展开样式</span>
<span style="color: #000000;">                        };

                        </span><span style="color: #008000;">//</span><span style="color: #008000;"> （2）、更新Icon</span>
                        <span style="color: #0000ff;">if</span> (nowIconSpan.length &gt; 0<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">if</span> (!nowIconSpan.hasClass("custom_img"<span style="color: #000000;">)) {
                                nowIconSpan.attr(</span>"class", "folder_collapse");            <span style="color: #008000;">//</span><span style="color: #008000;"> 设置Icon 收缩样式 </span>
                                <span style="color: #0000ff;">if</span> (isOpen) {                                            <span style="color: #008000;">//</span><span style="color: #008000;"> 添加Icon 展开样式</span>
                                    nowIconSpan.addClass("folder_expand"<span style="color: #000000;">);
                                };
                            };
                        };

                        </span><span style="color: #008000;">//</span><span style="color: #008000;"> （3）、更新Line</span>
                        tmIndent =<span style="color: #000000;"> [];
                        tmParent </span>=<span style="color: #000000;"> tmNowNode._parent;
                        lv </span>=<span style="color: #000000;"> tmNowNode._nodeLevel;
                        </span><span style="color: #0000ff;">while</span> (lv &gt; 1) { tmIndent[tmIndent.length] = tmParent; tmParent = tmParent._parent; lv--<span style="color: #000000;">; };
                        lineClass </span>= "", tmI = 0<span style="color: #000000;">;
                        </span><span style="color: #0000ff;">for</span> (lv = tmIndent.length - 1; lv &gt;= 0; lv--<span style="color: #000000;">) {
                            lineClass </span>= ((<span style="color: #0000ff;">this</span>._fnObject.options.showline == <span style="color: #0000ff;">true</span>) ? ((tmIndent[lv]._lastFlag == <span style="color: #0000ff;">false</span>) ? "node_line_10" : "nullimg") : "nullimg"<span style="color: #000000;">);
                            $(nowFullNode[</span>0].childNodes[tmI]).attr("class"<span style="color: #000000;">, lineClass);
                            tmI</span>++<span style="color: #000000;">;
                        };

                        tmIndent </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                        tmParent </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                        lineClass </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                    };

                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 2、其次更新下级</span>
                    <span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmNowNode._haveChild) {
                        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm2 = 0; tm2 &lt; tmNowNode._childs.length; tm2++<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">var</span> tmSubNodeCode =<span style="color: #000000;"> tmNowNode._childs[tm2].nodecode;
                            </span><span style="color: #0000ff;">this</span>._updateNode(tmSubNodeCode); <span style="color: #008000;">//</span><span style="color: #008000;"> 迭代循环更新子节点</span>
<span style="color: #000000;">                        };
                    };
                },

                </span><span style="color: #008000;">//</span><span style="color: #008000;"> @ params: [bool]   isOpAll   是否全部 说明：前面调用时候，根据情况 是否执行全部节点的标志(一般使用于全部选中、取消选择使用)</span>
                _checkedNodes: <span style="color: #0000ff;">function</span> (node, bool, isOpAll) {        <span style="color: #008000;">//</span><span style="color: #008000;"> 设置多节点选中状态</span>
                    <span style="color: #0000ff;">this</span>._checkedNode(node, bool);                     <span style="color: #008000;">//</span><span style="color: #008000;"> 设置当前节点</span>
                    <span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>._fnObject.options.cascade || isOpAll) {   <span style="color: #008000;">//</span><span style="color: #008000;"> 级联选择节点 或 前台必须要全部节点</span>
                        <span style="color: #0000ff;">var</span> tm_Prefix = <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_chk_"<span style="color: #000000;">;
                        </span><span style="color: #0000ff;">var</span> tm_NodeCode = node.attr("id").replace(tm_Prefix, ""<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">var</span> tm_Flag = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                        </span><span style="color: #0000ff;">if</span> ((bool) &amp;&amp; (tm_NodeCode != <span style="color: #0000ff;">this</span><span style="color: #000000;">._fnObject.options.rootcode)) {
                            </span><span style="color: #0000ff;">var</span> tm_pNodeCode = <span style="color: #0000ff;">this</span>._hsNodes[tm_NodeCode].supnodecode;      <span style="color: #008000;">//</span><span style="color: #008000;"> 设置上级勾选</span>
                            <span style="color: #0000ff;">while</span><span style="color: #000000;"> (tm_Flag) {
                                </span><span style="color: #0000ff;">var</span> pNode = <span style="color: #0000ff;">this</span>._sdpTree.find("#" + tm_Prefix +<span style="color: #000000;"> tm_pNodeCode);
                                </span><span style="color: #0000ff;">if</span> (tm_pNodeCode == <span style="color: #0000ff;">this</span><span style="color: #000000;">._fnObject.options.rootcode) {
                                    </span><span style="color: #0000ff;">if</span> (!pNode.prop("checked")) { <span style="color: #0000ff;">this</span>._checkedNode(pNode, <span style="color: #0000ff;">true</span><span style="color: #000000;">); };
                                    tm_Flag </span>= <span style="color: #0000ff;">false</span><span style="color: #000000;">;
                                    </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                                    </span><span style="color: #0000ff;">if</span> (!pNode.prop("checked")) { <span style="color: #0000ff;">this</span>._checkedNode(pNode, <span style="color: #0000ff;">true</span><span style="color: #000000;">); };
                                    tm_pNodeCode </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">._hsNodes[tm_pNodeCode].supnodecode;
                                };
                            };
                        };

                        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 设置下级勾选</span>
                        <span style="color: #0000ff;">var</span> subNodes = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                        </span><span style="color: #0000ff;">if</span> (tm_NodeCode == <span style="color: #0000ff;">this</span>._fnObject.options.rootcode) { subNodes = <span style="color: #0000ff;">this</span>._dtNodes; } <span style="color: #0000ff;">else</span> { subNodes = <span style="color: #0000ff;">this</span><span style="color: #000000;">._hsNodes[tm_NodeCode]._childs; };
                        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">._checkedSubNodes(subNodes, bool);
                        subNodes </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                    };
                },
                _checkedNode: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (node, bool) {
                    node.removeClass(</span>"checkbox").removeClass("checkbox_check").addClass(((bool) ? "checkbox_check" : "checkbox")).prop("checked"<span style="color: #000000;">, bool);
                },
                _checkedSubNodes: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodes, bool) {
                    </span><span style="color: #0000ff;">if</span> (!nodes) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm1 = 0; tm1 &lt; nodes.length; tm1++<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">var</span> tm_Node = <span style="color: #0000ff;">this</span>._sdpTree.find("#" + <span style="color: #0000ff;">this</span>._myFnId + "_sdptree_node_chk_" +<span style="color: #000000;"> nodes[tm1].nodecode);
                        </span><span style="color: #0000ff;">if</span> (tm_Node.length &gt; 0<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">._checkedNode(tm_Node, bool);
                            </span><span style="color: #0000ff;">if</span> (nodes[tm1]._childs) { <span style="color: #0000ff;">this</span><span style="color: #000000;">._checkedSubNodes(nodes[tm1]._childs, bool); };
                        };
                    };
                },
                _removeHashNodes: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (nodeCode) {
                    </span><span style="color: #0000ff;">var</span> rmNode = <span style="color: #0000ff;">this</span><span style="color: #000000;">._hsNodes[nodeCode];
                    </span><span style="color: #0000ff;">if</span> (!rmNode) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (rmNode._haveChild) {
                        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> tm2 = 0; tm2 &lt; rmNode._childs.length; tm2++<span style="color: #000000;">) {
                            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">._removeHashNodes(rmNode._childs[tm2].nodecode);
                        };
                    };

                    </span><span style="color: #0000ff;">this</span><span style="color: #000000;">._hsNodes.remove(nodeCode);
                },
                _bindEvent: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                    </span><span style="color: #0000ff;">var</span> this_myNodes = <span style="color: #0000ff;">this</span>._sdpTree.find("span[stype='node']"<span style="color: #000000;">);
                    </span><span style="color: #0000ff;">var</span> this_treeID = <span style="color: #0000ff;">this</span><span style="color: #000000;">._myFnId;
                    </span><span style="color: #0000ff;">var</span> this_rootNode = <span style="color: #0000ff;">this</span>._sdpTree.find("#" + this_treeID + "_sdptree_node_span_" + <span style="color: #0000ff;">this</span><span style="color: #000000;">._fnObject.options.rootcode);
                    </span><span style="color: #0000ff;">var</span> _this = <span style="color: #0000ff;">this</span><span style="color: #000000;">;

                    </span><span style="color: #0000ff;">if</span> (this_rootNode.length &gt; 0<span style="color: #000000;">) {
                        this_rootNode.hover(</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                            $(</span><span style="color: #0000ff;">this</span>).addClass("node_hover").attr("title", $.text(<span style="color: #0000ff;">this</span><span style="color: #000000;">));
                        }, </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                            $(</span><span style="color: #0000ff;">this</span>).removeClass("node_hover").attr("title", ""<span style="color: #000000;">);
                        });
                    };
                    </span><span style="color: #0000ff;">if</span> (this_myNodes.length == 0) { <span style="color: #0000ff;">return</span><span style="color: #000000;">; };
                    this_myNodes.hover(</span><span style="color: #0000ff;">function</span> () {   <span style="color: #008000;">//</span><span style="color: #008000;"> 性能比较 此方法直接绑定hover 比 $().each() 方法耗时少很多</span>
                        <span style="color: #0000ff;">var</span> tmThisNode = _this._hsNodes[$(<span style="color: #0000ff;">this</span>).attr("id").replace(this_treeID + "_sdptree_node_span_", ""<span style="color: #000000;">)];
                        </span><span style="color: #0000ff;">var</span> tmTitle = ""<span style="color: #000000;">;
                        </span><span style="color: #0000ff;">if</span> (tmThisNode) { tmTitle =<span style="color: #000000;"> tmThisNode.nodetitle; };
                        </span><span style="color: #0000ff;">if</span> (!tmTitle) { tmTitle = $.text(<span style="color: #0000ff;">this</span><span style="color: #000000;">); };
                        $(</span><span style="color: #0000ff;">this</span>).addClass("node_hover").attr("title"<span style="color: #000000;">, tmTitle);
                    }, </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                        $(</span><span style="color: #0000ff;">this</span>).removeClass("node_hover").attr("title", ""<span style="color: #000000;">);
                    });
                }
            }
        };
    };
})(jQuery);</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 第五：网页端页面代码也贴出来</p>
<p>&nbsp;</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('f605a6d2-7a79-4920-a28b-40421d532eb7')"><img id="code_img_closed_f605a6d2-7a79-4920-a28b-40421d532eb7" class="code_img_closed" src="./images/JS--插件： 树Tree 开发与实现0.png" alt="" /><img id="code_img_opened_f605a6d2-7a79-4920-a28b-40421d532eb7" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('f605a6d2-7a79-4920-a28b-40421d532eb7',event)" src="./images/JS--插件： 树Tree 开发与实现1.png" alt="" />
<div id="cnblogs_code_open_f605a6d2-7a79-4920-a28b-40421d532eb7" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">&lt;!</span><span style="color: #ff00ff;">DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://www.w3.org/1999/xhtml"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>树 Tree <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">meta </span><span style="color: #ff0000;">http-equiv</span><span style="color: #0000ff;">="Content-Type"</span><span style="color: #ff0000;"> content</span><span style="color: #0000ff;">="text/html; charset=UTF-8"</span> <span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">meta </span><span style="color: #ff0000;">http-equiv</span><span style="color: #0000ff;">="X-UA-Compatible"</span><span style="color: #ff0000;"> content</span><span style="color: #0000ff;">="IE=edge"</span> <span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">link </span><span style="color: #ff0000;">href</span><span style="color: #0000ff;">="css/tree.css"</span><span style="color: #ff0000;"> rel</span><span style="color: #0000ff;">="stylesheet"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/css"</span> <span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/min-jquery-1.9.1.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/basic.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/tree_plug.js"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;</span>

        <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> nodesJson </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> {};
        </span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> nodesXml </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">""</span><span style="background-color: #f5f5f5; color: #000000;">;

        </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;"> 定义一个Tree插件实例对象变量</span>
        <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> treePlug </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">null</span><span style="background-color: #f5f5f5; color: #000000;">;

        </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;"> 加载 Tree</span>
        <span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> onLoadTree() {

            </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;"> 创建一个Tree插件实例</span>
<span style="background-color: #f5f5f5; color: #000000;">            treePlug </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> $.fn.webTree();

            </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;"> 初始化插件对象内部参数</span>
<span style="background-color: #f5f5f5; color: #000000;">            treePlug.init($(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">div.sdp-tree</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">));

            </span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> ndItem </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">null</span><span style="background-color: #f5f5f5; color: #000000;">;
            </span><span style="background-color: #f5f5f5; color: #0000ff;">for</span><span style="background-color: #f5f5f5; color: #000000;"> (</span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> i </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">10</span><span style="background-color: #f5f5f5; color: #000000;">; i </span><span style="background-color: #f5f5f5; color: #000000;">&lt;</span> <span style="background-color: #f5f5f5; color: #000000;">20</span><span style="background-color: #f5f5f5; color: #000000;">; i</span><span style="background-color: #f5f5f5; color: #000000;">++</span><span style="background-color: #f5f5f5; color: #000000;">) {

                </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;"> 第一级节点</span>
<span style="background-color: #f5f5f5; color: #000000;">                ndItem </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> {
                    nodecode: String(i),
                    nodetext: </span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">第一节点</span><span style="background-color: #f5f5f5; color: #000000;">"</span> <span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;"> i,
                    nodetitle: </span><span style="background-color: #f5f5f5; color: #000000;">""</span><span style="background-color: #f5f5f5; color: #000000;">,
                    supnodecode: </span><span style="background-color: #f5f5f5; color: #000000;">""</span><span style="background-color: #f5f5f5; color: #000000;">

                };
                treePlug.addNodeItem(ndItem);

                </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;"> 第二级节点</span>
                <span style="background-color: #f5f5f5; color: #0000ff;">for</span><span style="background-color: #f5f5f5; color: #000000;"> (</span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> j </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">10</span><span style="background-color: #f5f5f5; color: #000000;">; j </span><span style="background-color: #f5f5f5; color: #000000;">&lt;</span> <span style="background-color: #f5f5f5; color: #000000;">20</span><span style="background-color: #f5f5f5; color: #000000;">; j</span><span style="background-color: #f5f5f5; color: #000000;">++</span><span style="background-color: #f5f5f5; color: #000000;">) {
                    ndItem </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> {
                        nodecode: String(i) </span><span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;"> String(j),
                        nodetext: </span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">第二节点</span><span style="background-color: #f5f5f5; color: #000000;">"</span> <span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;"> String(i) </span><span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;"> String(j),
                        nodetitle: </span><span style="background-color: #f5f5f5; color: #000000;">""</span><span style="background-color: #f5f5f5; color: #000000;">,
                        supnodecode: String(i)
                    };
                    treePlug.addNodeItem(ndItem);

                    </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;"> 第三级节点</span>
                    <span style="background-color: #f5f5f5; color: #0000ff;">for</span><span style="background-color: #f5f5f5; color: #000000;"> (</span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> k </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">10</span><span style="background-color: #f5f5f5; color: #000000;">; k </span><span style="background-color: #f5f5f5; color: #000000;">&lt;</span> <span style="background-color: #f5f5f5; color: #000000;">20</span><span style="background-color: #f5f5f5; color: #000000;">; k</span><span style="background-color: #f5f5f5; color: #000000;">++</span><span style="background-color: #f5f5f5; color: #000000;">) {
                        </span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> tmCode </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> String(i) </span><span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;"> String(j) </span><span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;"> String(k);
                        ndItem </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> {
                            nodecode: tmCode,
                            nodetext: </span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">第二节点</span><span style="background-color: #f5f5f5; color: #000000;">"</span> <span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;"> tmCode,
                            nodetitle: </span><span style="background-color: #f5f5f5; color: #000000;">""</span><span style="background-color: #f5f5f5; color: #000000;">,
                            supnodecode: String(i) </span><span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;"> String(j)
                        };
                        treePlug.addNodeItem(ndItem);
                    }
                }

            };

            treePlug.makeTree();

        }

   
    </span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">style</span><span style="color: #0000ff;">="position: absolute; display: block; top: 10px; left: 50px;"</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">onclick</span><span style="color: #0000ff;">="onLoadTree()"</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
            加载目录树</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="sdp-tree"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="demo_tree"</span><span style="color: #ff0000;"> style</span><span style="color: #0000ff;">="position: absolute; display: block; left: 50px;
        top: 50px; height: 500px; width: 400px;"</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 第六：最终显示效果</p>
<p><img src="./images/JS--插件： 树Tree 开发与实现6.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; 第七：补充将Js补充上来&nbsp;&nbsp; basic.js</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('0892c208-37cd-4727-8239-da88aea6a1e1')"><img id="code_img_closed_0892c208-37cd-4727-8239-da88aea6a1e1" class="code_img_closed" src="./images/JS--插件： 树Tree 开发与实现0.png" alt="" /><img id="code_img_opened_0892c208-37cd-4727-8239-da88aea6a1e1" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('0892c208-37cd-4727-8239-da88aea6a1e1',event)" src="./images/JS--插件： 树Tree 开发与实现1.png" alt="" />
<div id="cnblogs_code_open_0892c208-37cd-4727-8239-da88aea6a1e1" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">(function ($) {
    $.extend({
        replaceAll: function (str, s1, s2) {
            if (str) {
                return str.replace(new RegExp(s1, "gm"), s2)
            } else {
                return str
            }
        },
        Hashtable: function () {
            Hash = function () { };
            Hash.prototype = {
                constructor: Hash,
                add: function (oKey, oVal) {
                    if (!this.hasOwnProperty(oKey)) {
                        this[oKey] = oVal
                    }
                },
                count: function () {
                    var _count = 0;
                    for (var iCount in this) {
                        if (this.hasOwnProperty(iCount)) {
                            _count++
                        }
                    };
                    return _count
                },
                remove: function (oKey) {
                    if (this.hasOwnProperty(oKey)) {
                        delete this[oKey]
                    }
                },
                update: function (oKey, oVal) {
                    this[oKey] = oVal
                },
                has: function (oKey) {
                    var type = typeof oKey;
                    if (type === 'string' || type === 'number') {
                        return this.hasOwnProperty(oKey)
                    } else if (type === 'function' &amp;&amp; this.some(oKey)) {
                        return true
                    };
                    return false
                },
                clear: function () {
                    for (var oKey in this) {
                        if (this.hasOwnProperty(oKey)) {
                            delete this[oKey]
                        }
                    }
                },
                isempty: function () {
                    for (var oKey in this) {
                        if (this.hasOwnProperty(oKey)) {
                            return false
                        }
                    };
                    return true
                },
                each: function (fn) {
                    for (var oKey in this) {
                        if (this.hasOwnProperty(oKey)) {
                            fn.call(this, this[oKey], oKey, this)
                        }
                    }
                },
                map: function (fn) {
                    var hash = new Hash;
                    for (var oKey in this) {
                        if (this.hasOwnProperty(oKey)) {
                            hash.add(oKey, fn.call(this, this[oKey], oKey, this))
                        }
                    };
                    return hash
                },
                join: function (split) {
                    split = split !== undefined ? split : ',';
                    var rst = [];
                    this.each(function (oVal) {
                        rst.push(oVal)
                    });
                    return rst.join(split)
                },
                every: function (fn) {
                    for (var oKey in this) {
                        if (this.hasOwnProperty(oKey)) {
                            if (!fn.call(this, this[oKey], oKey, this)) {
                                return false
                            }
                        }
                    };
                    return true
                },
                some: function (fn) {
                    for (var oKey in this) {
                        if (this.hasOwnProperty(oKey)) {
                            if (fn.call(this, this[oKey], oKey, this)) {
                                return true
                            }
                        }
                    };
                    return false
                },
                find: function (oKey) {
                    var type = typeof oKey;
                    if (type === 'string' || type === 'number' &amp;&amp; this.has(oKey)) {
                        return this[oKey]
                    } else if (type === 'function') {
                        for (var _oKey in this) {
                            if (this.hasOwnProperty(_oKey) &amp;&amp; oKey.call(this, this[_oKey], _oKey, this)) {
                                return this[_oKey]
                            }
                        }
                    };
                    return null
                }
            };
            return new Hash()
        },
        isNull: function (objVal) {
            if (typeof (objVal) == "undefined" || objVal == null) {
                return true
            };
            if (typeof (objVal) == "number" || typeof (objVal) == "boolean") {
                return false
            };
            if (objVal == "") {
                return true
            };
            try {
                if (objVal.length == 0) {
                    return true
                };
                var strComp = $.replaceAll(String(objVal), " ", "");
                if (strComp == "" || strComp == "</span><span style="color: #ff0000;">&amp;nbsp;</span><span style="color: #000000;">" || strComp.length == 0) {
                    return true
                } else {
                    return false
                }
            } catch (error) {
                return false
            }
        },
        isNumber: function (obj) {
            return (!isNaN(obj) &amp;&amp; typeof (obj) == "number")
        },
        newGuid: function () {
            function S4() {
                return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1)
            };
            return (S4() + S4() + "-" + S4() + "-" + S4() + "-" + S4() + "-" + S4() + S4() + S4()).toUpperCase()
        },
        loadXmlFile: function (xmlFilePath) {
            var retXmlDoc = null;
            if (xmlFilePath) {
                $.ajax({
                    type: 'GET',
                    async: false,
                    url: xmlFilePath,
                    dataType: 'xml',
                    success: function (xmlData) {
                        retXmlDoc = xmlData
                    }
                })
            };
            return retXmlDoc
        },
        loadXmlString: function (xmlStr) {
            var retXmlDoc = null;
            if (xmlStr) {
                try {
                    retXmlDoc = $.parseXML(xmlStr)
                } catch (g) {
                    retXmlDoc = null
                }
            };
            return retXmlDoc
        },
        stopBubble: function (event) {
            event = event || window.event;
            $.preventDefault(event);
            $.stopPropagation(event);
            return false
        },
        preventDefault: function (event) {
            event = event || window.event;
            if (event.preventDefault) {
                event.preventDefault()
            };
            event.returnValue = false
        },
        stopPropagation: function (event) {
            event = event || window.event;
            if (event.stopPropagation) {
                event.stopPropagation()
            };
            event.cancelBubble = true
        },
        runStrEvent: function (strEvent, e) {
            var retEventValue = null;
            if (!strEvent) {
                return retEventValue
            };
            var _runEvent = $.strToFunction(strEvent);
            if (typeof (_runEvent) == 'function') {
                try {
                    retEventValue = _runEvent.call(null, e)
                } catch (err) {
                    retEventValue = err
                }
            } else {
                alert("错误：事件方法有误！" + strEvent);
                retEventValue = "ERROR:事件方法有误！"
            };
            if (typeof (retEventValue) == 'undefined') {
                retEventValue = null
            };
            return retEventValue
        },
        strToFunction: function (strEvent) {
            if (typeof (strEvent) == "function") {
                return strEvent
            } else if (!strEvent || typeof (strEvent) != "string") {
                return null
            } else {
                try {
                    strEvent = $.trim(String(strEvent));
                    if (strEvent.indexOf('(') &gt; 0) {
                        strEvent = strEvent.substring(0, strEvent.indexOf('('))
                    };
                    return (new Function("return " + strEvent))()
                } catch (error) {
                    return null
                }
            }
        },
        getJSON_FromFile: function (filePath) {
            var jsonObj = null;
            if (filePath) {
                $.ajaxSettings.async = false;
                $.getJSON(filePath,
                function (retData) {
                    jsonObj = retData
                });
                $.ajaxSettings.async = true
            };
            return jsonObj
        },
        getJSON_FromStr: function (jsonStr) {
            var jsonObj = null;
            if (jsonStr) {
                try {
                    jsonObj = $.parseJSON(jsonStr)
                } catch (error) {
                    jsonObj = null
                }
            };
            return jsonObj
        }

    });
})(jQuery);</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; 第八：因为无法上传附件，所以只能提供外部链接地址：&nbsp; <a title="下载地址" href="http://www.sdpsoft.com/demofiles/Tree_Demo.rar" target="_blank">Tree_Demo.rar</a></p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>