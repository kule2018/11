<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修JS中3种风格的For循环有什么异同？' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>JS中3种风格的For循环有什么异同？</center></div><div class='banquan'>原文出处:本文由博客园博主葡萄城技术团队提供。<br/>
原文连接:https://www.cnblogs.com/powertoolsteam/p/3type-forloop.html</div><br>
    <blockquote>
<p>转载请注明出处：<a href="https://www.grapecity.com.cn/">葡萄城官网</a>，葡萄城为开发者提供专业的开发工具、解决方案和服务，赋能开发者。<br />原文出处：https://blog.bitsrc.io/3-flavors-of-the-for-loop-in-javascript-and-when-to-use-them-f0fb5501bdf3</p>


</blockquote>
<p>&nbsp;</p>
<p>在学习任何开发语言时候，for循环是必不可少的一种语法，可能所有开发人员都会使用它。它非常经典，以至于每个开发语言都至少包括一种关于循环的语法版本。不过，在JavaScript种包含了三种不同的循环语法（如果再讲究一点，也可以算作是四种）。</p>
<p>它们的使用方式并不完全相同，举例如下：</p>
<p>l&nbsp; 经典的For循环语法</p>
<p>l&nbsp; For&hellip;.of 及 For&hellip;in</p>
<p>l&nbsp; 炫技一点的版本：.forEach</p>
<p>接下来，我想介绍下这三种语法使用时有什么异同，以及在什么时间怎样使用它们才能收获最棒的结果。好的，让我们开始吧。</p>
<h1>经典的For循环</h1>
<p>这个语法我们应该都已经非常清楚了，在for循环中，你可以在其中定义内部计数器，设置相应中断条件和灵活的步进策略（通常可以是递增也可以是递减）。</p>
<p>语法为：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">for</span><span style="color: #000000;">([计数器定义];[中断条件];[步进策略]){
   </span><span style="color: #008000;">//</span><span style="color: #008000;">... </span>
<span style="color: #000000;">    TODO
}</span></pre>
</div>
<p align="left">&nbsp;</p>
<p align="left">我敢肯定即便不用我的介绍，之前你也一定写过类似的语句，例如：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">for</span>(let counter = 0; counter &lt; 10; counter++<span style="color: #000000;">) {
console.log(counter)
}</span></pre>
</div>
<p>&nbsp;</p>
<p>让我们在Chrome里运行一下，得到的结果也符合预期，但for循环就仅仅如此了吗？</p>
<p><img src="./images/JS中3种风格的For循环有什么异同？0.png" alt="" /></p>
<p>&nbsp;</p>
<p>你可以认为for循环为三个表达式</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">for</span><span style="color: #000000;">(
[在循环开始时只执行一次的表达式];
[其中每一个逻辑判断都需吻合的表达式];
[循环每一步都被执行的表达式]
)</span></pre>
</div>
<p>&nbsp;</p>
<p>这样表述的意义在于，你可以使用多个计数器执行for循环，或在不影响计数器的情况下在步进表达式中执行每次需要执行的代码，举个例子：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">for</span>(let a = 0, b = 0; a &lt; 10 &amp;&amp; b &lt; 100; a++, b+=10<span style="color: #000000;">) {
   console.log(a, b)
}</span></pre>
</div>
<p><img src="./images/JS中3种风格的For循环有什么异同？1.png" alt="" /></p>
<p>&nbsp;</p>
<p>我们可以再进一步，让其变的更符合实际应用场景：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">for</span>(let a = 0, b = 0; a &lt; 10 &amp;&amp; b &lt; 100; console.log("你的计数器现在是：", ++a, b+=2)){}</pre>
</div>
<p><img src="./images/JS中3种风格的For循环有什么异同？2.png" alt="" /></p>
<p>&nbsp;</p>
<p>另外，你甚至可以把中间表达式替换为函数调用，只要你记住，该函数的返回值需要是一个布尔型或可以被转成布尔值的一个值即可，例如：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">function</span><span style="color: #000000;"> isItDone(a) {
 console.log(</span>"函数被调用！"<span style="color: #000000;">)
 </span><span style="color: #0000ff;">return</span> a &lt; 10<span style="color: #000000;">
}

</span><span style="color: #0000ff;">for</span>(let a = 0; isItDone(a); a++<span style="color: #000000;">) {
 console.log(a)
}</span></pre>
</div>
<p><img src="./images/JS中3种风格的For循环有什么异同？3.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>那么，在经典的for循环中如何处理异步代码呢？如何保证不掉进异步陷阱里呢？</p>
<p>我为大家介绍一位新朋友：async / await，这将让我们在处理异步代码时变得更容易、可控，例如：</p>
<div class="cnblogs_code">
<pre><code>const fs = require("fs"<span style="color: #000000;">)

async </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> read(fname) {
    </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">new</span> Promise( (resolve, reject) =&gt;<span style="color: #000000;"> {
        fs.readFile(fname, (err, content) </span>=&gt;<span style="color: #000000;"> {
            </span><span style="color: #0000ff;">if</span>(err) <span style="color: #0000ff;">return</span><span style="color: #000000;"> reject(err)
            resolve(content.toString())
        })
    })
}

(async () </span>=&gt;<span style="color: #000000;"> {
    let files </span>= ['file1.json', 'file2.json'<span style="color: #000000;">]

    </span><span style="color: #0000ff;">for</span>(let i = 0; i &lt; files.length; i++<span style="color: #000000;">) {
        let fcontent </span>=<span style="color: #000000;"> await read(files[i])
        console.log(fcontent)
        console.log(</span>"-------"<span style="color: #000000;">)
    }
})()</span></pre>
</div>
<h1>For... in 及 For&hellip; of</h1>
<p>他们看起来非常相似，但它们并不是相同类型的循环。</p>
<p>让我们尽量简要的解释它们：</p>
<p>For&hellip;in 循环遍历对象的可枚举属性，也就是说当你的自定义对象被用作哈希表或字典时，使用For&hellip;in 遍历他们时将变得非常简单。</p>
<p>但请注意，遍历顺序是按元素顺序执行执行的，因此请不要依赖循环顺序。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">let myMap {
  uno: </span>1<span style="color: #000000;">,
  dos: </span>2<span style="color: #000000;">,
  tres: </span>3<span style="color: #000000;">
}
</span><span style="color: #0000ff;">for</span>(let key <span style="color: #0000ff;">in</span><span style="color: #000000;"> myMap) {
  console.log(key, </span>"="<span style="color: #000000;">, myMap[key]);
}</span></pre>
</div>
<p>&nbsp;</p>
<p>看起来是很简单的，但请记住，For&hellip;in只能遍历一个实体对象，如果便利一个非实体，例如遍历一个string，那么将会发生如下情况：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">for</span>(let k <span style="color: #0000ff;">in</span> "Hello World!"<span style="color: #000000;">) {
   console.log(k)
}</span></pre>
</div>
<p><img src="./images/JS中3种风格的For循环有什么异同？4.png" alt="" /></p>
<p>&nbsp;</p>
<p>从结果可以看到，并没有遍历出每一个字母，而是遍历到了每个属性，正如您看到的，遍历出的数字并非是没有用的，因为"Hello World!"[1] 同样是可以返回相应的字母的。</p>
<p>相反，如果你想遍历每个字符，则需要使用其他变体：For&hellip;of</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">for</span>(let <span style="color: #0000ff;">char</span> of "Hello World!"<span style="color: #000000;">) {
  console.log(</span><span style="color: #0000ff;">char</span><span style="color: #000000;">)
}</span></pre>
</div>
<p><img src="./images/JS中3种风格的For循环有什么异同？5.png" alt="" /></p>
<p>&nbsp;</p>
<p>这种循环方式看起来对string类型更有效，相同的用例，因为使用了这种语法，就能够返回元素中相应的值了。所以我们通过上述用例可知，For&hellip;of遍历的内容是对象的值。</p>
<p>通过上述的示例我们可知，他们相互一个遍历属性，一个遍历值，那么有没有什么方法可以既获得属性又获得值呢，答案是有的，使用entries方法，就可以同时获得属性和值，如下所示：</p>
<div class="cnblogs_code">
<pre><code>let myArr = ["hello", "world"<span style="color: #000000;">]
</span><span style="color: #0000ff;">for</span><span style="color: #000000;">([idx, value] of myArr.entries()) {
    console.log(idx, </span>'='<span style="color: #000000;">, value)
}</span></pre>
</div>
<p><img src="./images/JS中3种风格的For循环有什么异同？6.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>最后，在处理异步代码时是怎样的呢？答案当然是和for循环相同了。</p>
<div class="cnblogs_code">
<pre><code>const fs = require("fs"<span style="color: #000000;">)

async </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> read(fname) {
    </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">new</span> Promise( (resolve, reject) =&gt;<span style="color: #000000;"> {
        fs.readFile(fname, (err, content) </span>=&gt;<span style="color: #000000;"> {
            </span><span style="color: #0000ff;">if</span>(err) <span style="color: #0000ff;">return</span><span style="color: #000000;"> reject(err)
            resolve(content.toString())
        })
    })
}



(async () </span>=&gt;<span style="color: #000000;"> {
    let files </span>= ['file2.json', 'file2.json'<span style="color: #000000;">]

    </span><span style="color: #0000ff;">for</span><span style="color: #000000;">(fname of files) {
        let fcontent </span>=<span style="color: #000000;"> await read(fname)
        console.log(fcontent)
        console.log(</span>"-------"<span style="color: #000000;">)
    }

    </span><span style="color: #0000ff;">for</span>(idx <span style="color: #0000ff;">in</span><span style="color: #000000;"> files) {
        let fcontent </span>=<span style="color: #000000;"> await read(files[idx])
        console.log(fcontent)
        console.log(</span>"-------"<span style="color: #000000;">)
    }
})()</span></pre>
</div>
<p>&nbsp;</p>
<p>最后我们再使用简短的方式来总结下For&hellip;in和For&hellip;of的区别</p>
<p>For&hellip;in&mdash;&mdash;遍历属性</p>
<p>For&hellip;of&mdash;&mdash;遍历值</p>
<h1>.forEach 循环</h1>
<p>这可能是我最喜欢的一个，这仅仅是因为我非常喜欢声明式语法或通过命令式编写代码的声明性方式。</p>
<p>而且，尽管上面的循环语法也很好用，并且都有很好的用例，但当我们需要关注数据本身时，forEach很好用。</p>
<p>不管怎样，先撇开哲学上的争论不谈，.foreach方法是for循环的另一个版本，但是这个方法是数组对象的一部分，它的目的是接收一个函数和一个额外的可选参数，以便在执行函数时重新定义该函数的上下文。</p>
<p>对于数组中的每个元素，我们的函数都将被执行，并且它将收到三个参数（是的，就是三个，而不是一个，因为您已经习惯了使用它）。它们分别是：</p>
<ol>
<li>正在处理的当前元素。</li>
<li>元素的索引，这已经简化了我们试图用for&hellip;of循环实现的任务</li>
<li>正在处理的实际数组。以防万一你需要做点什么。</li>
</ol>
<p>那么，让我们看一个简单的示例：</p>
<div class="cnblogs_code">
<pre><code>a = ["hello", "world"<span style="color: #000000;">]

a.forEach ( (elem, idx, arr) </span>=&gt;<span style="color: #000000;"> {
   console.log(elem, </span>"at: ", idx, "inside: "<span style="color: #000000;">, arr)
})</span></pre>
</div>
<p><img src="./images/JS中3种风格的For循环有什么异同？7.png" alt="" /></p>
<p>&nbsp;</p>
<p>更快更简单，不是吗？</p>
<p>但是你可以看到我们如何在函数中很容易地使用所有属性。下面是一个您希望在foreach方法上使用第二个可选参数的示例：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">class Person {
    constructor(name)  {
        </span><span style="color: #0000ff;">this</span>.name =<span style="color: #000000;"> name
    }
}

</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> greet(person) {
    console.log(</span><span style="color: #0000ff;">this</span>.greeting.replace("$"<span style="color: #000000;">, person.name))
}

let english </span>=<span style="color: #000000;"> {
    greeting: </span>"Hello there, $"<span style="color: #000000;">
}
let spanish </span>=<span style="color: #000000;"> {
    greeting: </span>"Hola $, &iquest;c&oacute;mo est&aacute;s?"<span style="color: #000000;">
}

let people </span>= [<span style="color: #0000ff;">new</span> Person("Fernando"), <span style="color: #0000ff;">new</span> Person("Federico"), <span style="color: #0000ff;">new</span> Person("Felipe"<span style="color: #000000;">)]


people.forEach( greet, english)
people.forEach( greet, spanish)</span></pre>
</div>
<p>&nbsp;</p>
<p>通过重写被调用函数greet的上下文，我可以在不影响其代码的情况下更改其行为。</p>
<p>最后，显示此方法也可以与异步代码一起使用，下面是示例：</p>
<div class="cnblogs_code">
<pre><code>const fs = require("fs"<span style="color: #000000;">)

async </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> read(fname) {
    </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">new</span> Promise( (resolve, reject) =&gt;<span style="color: #000000;"> {
        fs.readFile(fname, (err, content) </span>=&gt;<span style="color: #000000;"> {
            </span><span style="color: #0000ff;">if</span>(err) <span style="color: #0000ff;">return</span><span style="color: #000000;"> reject(err)
            resolve(content.toString())
        })
    })
}

let files </span>= ['file1.json', 'file2.json'<span style="color: #000000;">]

files.forEach( async fname </span>=&gt;<span style="color: #000000;"> {
    let fcontent </span>=<span style="color: #000000;"> await read(fname)
    console.log(fcontent)
    console.log(</span>"-------"<span style="color: #000000;">)
})</span></pre>
</div>
<p>&nbsp;</p>
<h1><strong>结论</strong></h1>
<p>这就是我想要分享的关于JavaScript中关于循环的全部内容，我希望现在您对它们有了更清晰的理解，并且可以根据这些知识和我们当前的实际需求来选择您喜欢的循环。</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>