<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Javascript事件系统' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Javascript事件系统</center></div><div class='banquan'>原文出处:本文由博客园博主额头有王的喵提供。<br/>
原文连接:https://www.cnblogs.com/etoumao/p/12123703.html</div><br>
    <h2 id="item-1" style="box-sizing: border-box; margin: 2.5rem 0px 1rem; line-height: 1.2; font-size: 1.75rem; padding-bottom: 0.5rem; border-bottom: 1px double rgba(0, 0, 0, 0.1); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件基础
</h2>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    注意：本文不会深入探究Javascript的事件循环。
</blockquote>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    提到事件，相信每位Javascript开发者都不会陌生，由于Javascript是先有实现，后有规范，因此，对于大部分人来说，事件模块可以说是比较模糊的，本文将从不同角度帮助你理清楚事件模块。
</p>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件的本质可以说是一个回调函数，当事件触发时会调用你的监听函数。
</p>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件是一定会触发的，如果没有对应的监听函数，就不会执行回调。
</blockquote>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    比如下面就是用户点击指定元素打印日志的例子：
</p>
<pre><code>document.querySelector(&#39;#button&#39;).onclick = function() {    console.log(&#39;clicked&#39;);
};</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件基础相信大家都没什么问题，重点在后面的内容。
</p>
<h2 id="item-2" style="box-sizing: border-box; margin: 2.5rem 0px 1rem; line-height: 1.2; font-size: 1.75rem; padding-bottom: 0.5rem; border-bottom: 1px double rgba(0, 0, 0, 0.1); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件监听方式
</h2>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    由于历史原因，Javascript目前存在三种事件监听方式：
</p>
<ol style="box-sizing: border-box; margin-bottom: 1.25rem; margin-top: 0px; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    <li style="box-sizing: border-box;">
        HTML代码中监听
    </li>
    <li style="box-sizing: border-box;">
        DOM0级监听
    </li>
    <li style="box-sizing: border-box;">
        DOM2级监听
    </li>
</ol>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    Q: 为啥从DOM0级开始？
</p>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    1998年，W3C综合各浏览器厂商的现有API，指定了DOM1标准。在DOM1标准出现之前浏览器已有的事件监听方式叫做DOM0级。
</blockquote>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    Q：DOM1级监听到哪里去了？
</p>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    由于DOM1标准只是对DOM0标准的整理+规范化，并没有增加新的内容，因此DOM0级可以看做DOM1级。
</blockquote>
<h3 id="item-2-1" style="box-sizing: border-box; margin: 2.25rem 0px 1rem; line-height: 1.2; font-size: 1.5rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    HTML代码监听
</h3>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">&lt;button onclick=&quot;alert(&#39;Hello World!&#39;)&quot;&gt;点我&lt;/button&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    直接将事件处理函数或事件处理代码写到HTML元素对应的属性上的方式就是<span style="box-sizing: border-box; font-weight: bolder;">HTML代码监听方式</span>。
</p>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    该方式有一个明显的缺点，如果事件逻辑比较复杂时，将大段代码直接写在HTML元素上不利于维护。因此一般会提取到一个专一的函数进行处理。
</p>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">&lt;button onclick=&quot;callback()&quot;&gt;点我&lt;/button&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    该方式也有一个问题，那就是如果<code>callback()</code>函数还未加载好时点击按钮将报错。而且直接将事件耦合到HTML元素上也不符合单一职责，HTML元素应该只负责展示，不负责事件。
</p>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    不建议在开发中使用该方式处理事件。
</blockquote>
<h3 id="item-2-2" style="box-sizing: border-box; margin: 2.25rem 0px 1rem; line-height: 1.2; font-size: 1.5rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    DOM0级事件监听
</h3>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    在DOM1级规范出来之前，各浏览器厂商已经提供了一套事件API，也就是DOM0级API，它的写法如下：
</p>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">&lt;button id=&quot;click&quot;&gt;点我&lt;/button&gt;&lt;script&gt;
  document.querySelector(&#39;#click&#39;).onclick = function() {    console.log(&#39;clicked&#39;);
  };&lt;/script&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    这个相信大家在刚开始入行时写的比较多，比如我们的ajax相关API就是DOM0级的。
</p>
<pre><code>var xhr = new XMLHttpRequest();
xhr.onload = function() {};
xhr.onerror = function() {};</pre>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    DOM0级事件基本上都是以&quot;on&quot;开头的
</blockquote>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    DOM0级事件也存在一个问题，那就是不支持添加多个事件处理函数，因此只有在不支持DOM2级事件的情况下才会使用DOM0级来绑定事件。
</p>
<h3 id="item-2-3" style="box-sizing: border-box; margin: 2.25rem 0px 1rem; line-height: 1.2; font-size: 1.5rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    DOM2级事件监听
</h3>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    DOM2级事件是最新的事件处理程序规范（有许多年未更新了）。DOM2级事件通过<code>addEventListener</code>方式给元素添加事件处理程序。
</p>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">&lt;button id=&quot;click&quot;&gt;点我&lt;/button&gt;&lt;script&gt;
  document.addEventListener(&#39;click&#39;, function(){    console.log(&#39;clicked&#39;);
  });&lt;/script&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    多次调用addEventListener可以绑定多个事件处理程序，但是需要注意：
</p>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    同样的事件名、同样的事件处理函数和同样的事件流机制(冒泡和捕获，下面会讲到)，<span style="box-sizing: border-box; font-weight: bolder;">只会触发一次</span>。
</blockquote>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">// 下面的代码只会触发一次&lt;button id=&quot;request&quot;&gt;登录&lt;/button&gt;&lt;script&gt;function onClick() {    console.log(&#39;clicked&#39;);
}document.querySelector(&#39;#request&#39;).addEventListener(&#39;click&#39;, onClick, false);document.querySelector(&#39;#request&#39;).addEventListener(&#39;click&#39;, onClick, false);&lt;/script&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    onClick是同一个事件处理程序，所以只触发一次
</p>
<pre><code>// 下面的代码只会触发两次&lt;button id=&quot;request&quot;&gt;登录&lt;/button&gt;
&lt;script&gt;
document.querySelector(&#39;#request&#39;).addEventListener(&#39;click&#39;, function() {
    console.log(&#39;clicked&#39;);
}, false);
document.querySelector(&#39;#request&#39;).addEventListener(&#39;click&#39;, function() {
    console.log(&#39;clicked&#39;);
}, false);
&lt;/script&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    两个匿名函数，所以会触发两次
</p>
<h2 id="item-3" style="box-sizing: border-box; margin: 2.5rem 0px 1rem; line-height: 1.2; font-size: 1.75rem; padding-bottom: 0.5rem; border-bottom: 1px double rgba(0, 0, 0, 0.1); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件默认行为
</h2>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    很多网页元素会有默认行为，比如下面这些：
</p>
<ul style="box-sizing: border-box; margin-bottom: 1.25rem; margin-top: 0px; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    <li style="box-sizing: border-box;">
        点击a标签的时候，会有跳转行为
    </li>
    <li style="box-sizing: border-box;">
        点击右键时会弹出菜单
    </li>
    <li style="box-sizing: border-box;">
        在表单中点击提交按钮会提交表单
    </li>
</ul>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    如果我们需要阻止默认行为，比如我们在阻止表单的默认提交事件，进行数据校验，通过校验后再调用表单submit方法提交。
</p>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    不同的监听方式阻止默认行为的方式也不同。
</blockquote>
<h3 id="item-3-4" style="box-sizing: border-box; margin: 2.25rem 0px 1rem; line-height: 1.2; font-size: 1.5rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    HTML代码方式
</h3>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    HTML代码方式支持return false和event.preventDefault()
</blockquote>
<h4 style="box-sizing: border-box; margin: 2rem 0px 1rem; line-height: 1.2; font-size: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    return false方式
</h4>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">&lt;form action=&quot;&quot; onsubmit=&quot;return handleSubmit()&quot;&gt;
    &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;&lt;/form&gt;&lt;script&gt;function handleSubmit() {    return false;
}&lt;/script&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    上例中我们监听了表单的<code>onsubmit</code>事件，当点击按钮或者按下回车时，将会触发<code>handleSubmit</code>方法，同时会阻止表单的提交。
</p>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    表单内如果有type=&quot;submit&quot;的按钮存在，按下回车时就会自动提交。
</blockquote>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    HTML监听方式阻止默认事件需要满足以下两点：
</p>
<ol style="box-sizing: border-box; margin-bottom: 1.25rem; margin-top: 0px; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    <li style="box-sizing: border-box;">
        HTML事件监听代码<code>return handler()</code>，<code>return不能少</code>，少了就无法阻止默认行为
    </li>
    <li style="box-sizing: border-box;">
        <code>handler()</code>函数需要返回<code>false</code>
    </li>
</ol>
<h4 style="box-sizing: border-box; margin: 2rem 0px 1rem; line-height: 1.2; font-size: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    event.preventDefault()
</h4>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">&lt;a href=&quot;https://www.ddhigh.com&quot; onclick=&quot;handleClick(event)&quot; id=&quot;click&quot;&gt;Href&lt;/a&gt;&lt;script&gt;function handleClick(e) {
    e.preventDefault();
}&lt;/script&gt;</pre>
<h3 id="item-3-5" style="box-sizing: border-box; margin: 2.25rem 0px 1rem; line-height: 1.2; font-size: 1.5rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    DOM0级事件方式
</h3>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    DOM0级事件支持return false和event.preventDefault()两种方式。
</blockquote>
<h4 style="box-sizing: border-box; margin: 2rem 0px 1rem; line-height: 1.2; font-size: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    event.preventDefault()
</h4>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">// event.preventDefault()&lt;a href=&quot;https://www.ddhigh.com&quot; id=&quot;click&quot;&gt;Href&lt;/a&gt;&lt;script&gt;
    document.querySelector(&#39;#click&#39;).onclick= function (event) {
      event.preventDefault();
  };&lt;/script&gt;</pre>
<h4 style="box-sizing: border-box; margin: 2rem 0px 1rem; line-height: 1.2; font-size: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    return false
</h4>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">// return false&lt;a href=&quot;https://www.ddhigh.com&quot; id=&quot;click&quot;&gt;Href&lt;/a&gt;&lt;script&gt;
    document.querySelector(&#39;#click&#39;).onclick= function (event) {      return false;
  };&lt;/script&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    两种方式都能工作，不过建议使用<code>event.preventDefault()</code>，原因在下面DOM2级会讲到
</p>
<h3 id="item-3-6" style="box-sizing: border-box; margin: 2.25rem 0px 1rem; line-height: 1.2; font-size: 1.5rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    DOM2级事件
</h3>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    DOM2级事件事件<span style="box-sizing: border-box; font-weight: bolder;">只支持event.preventDefault()</span>方式，这也是事件的标准处理方法。
</blockquote>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">&lt;a href=&quot;https://www.ddhigh.com&quot; id=&quot;click&quot;&gt;Href&lt;/a&gt;&lt;script&gt;document.querySelector(&#39;#click&#39;).addEventListener(&#39;click&#39;, function (e) {
    e.preventDefault();
});&lt;/script&gt;</pre>
<h2 id="item-4" style="box-sizing: border-box; margin: 2.5rem 0px 1rem; line-height: 1.2; font-size: 1.75rem; padding-bottom: 0.5rem; border-bottom: 1px double rgba(0, 0, 0, 0.1); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件冒泡与事件捕获
</h2>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    先来看一个HTML结构
</p>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">&lt;div id=&quot;father&quot;&gt;
  &lt;div id=&quot;child&quot;&gt;
    &lt;div id=&quot;son&quot;&gt;Click&lt;/div&gt;
  &lt;/div&gt;&lt;/div&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    我们知道，一旦绑定了事件处理程序，在事件触发时，事件处理函数都会触发。
</p>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    如果我们给father/child/son都绑定了事件处理函数，点击了son时，谁被触发呢？
</p>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事实上，三个函数都会被触发，因为son时child的子元素，child又是father的子元素，点击son，同时也点击了father和child。
</p>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    由此带来一个问题，三个函数谁先触发，谁后触发呢？这就是我们常说的事件流，father-&gt;child-&gt;son这种路径是可以的，但是son-&gt;child-&gt;father这种路径也是可以的。
</p>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    针对这两种方式，W3C给了我们一个答案，两种方式都支持，即可以从父元素到子元素，又可以从子元素到父元素，前者叫<span style="box-sizing: border-box; font-weight: bolder;">事件捕获</span>，后者叫<span style="box-sizing: border-box; font-weight: bolder;">事件冒泡</span>。
</p>
<h3 id="item-4-7" style="box-sizing: border-box; margin: 2.25rem 0px 1rem; line-height: 1.2; font-size: 1.5rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件捕获
</h3>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件发生时采取<code>自上而下</code>的方式进行触发，最先触发的是<code>window</code>，其次是<code>document</code>，然后根据DOM层级依次触发，最终进入到真正的事件元素。
</p>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    addEventListener第三个参数传入true就是捕获方式的标志。
</blockquote>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">&lt;div id=&quot;father&quot;&gt;
    &lt;div id=&quot;child&quot;&gt;
      &lt;div id=&quot;son&quot;&gt;Click&lt;/div&gt;
    &lt;/div&gt;
    &lt;/div&gt;

  &lt;script&gt;
  document.querySelector(&#39;#father&#39;).addEventListener(&#39;click&#39;, function () {      console.log(&#39;father&#39;);
  }, true);  document.querySelector(&#39;#child&#39;).addEventListener(&#39;click&#39;, function () {      console.log(&#39;child&#39;);
  }, true);  document.querySelector(&#39;#son&#39;).addEventListener(&#39;click&#39;, function () {      console.log(&#39;son&#39;);
  }, true);    &lt;/script&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    点击son之后的输出顺序为
</p>
<pre class="hljs ebnf" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">father
child
son</pre>
<h3 id="item-4-8" style="box-sizing: border-box; margin: 2.25rem 0px 1rem; line-height: 1.2; font-size: 1.5rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件冒泡
</h3>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件发生时采取<code>自下而上</code>的方式进行触发，最先触发的是发生事件的元素，其次是父元素，依次向上，最终触发到<code>document</code>和<code>window</code>。
</p>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    addEventListener第三个参数传入false就是事件冒泡的标志。
</blockquote>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">&lt;div id=&quot;father&quot;&gt;
    &lt;div id=&quot;child&quot;&gt;
      &lt;div id=&quot;son&quot;&gt;Click&lt;/div&gt;
    &lt;/div&gt;
    &lt;/div&gt;

  &lt;script&gt;
  document.querySelector(&#39;#father&#39;).addEventListener(&#39;click&#39;, function () {      console.log(&#39;father&#39;);
  }, false);  document.querySelector(&#39;#child&#39;).addEventListener(&#39;click&#39;, function () {      console.log(&#39;child&#39;);
  }, false);  document.querySelector(&#39;#son&#39;).addEventListener(&#39;click&#39;, function () {      console.log(&#39;son&#39;);
  }, false);    &lt;/script&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    点击son之后的输出顺序为
</p>
<pre class="hljs ebnf" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">son
child
father</pre>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    由于事件捕获和事件冒泡机制，我们需要一个标记来标识真正触发事件的元素，这个元素就是event.target，而另外一个相似的属性叫event.currentTarget，这是当前元素。
</blockquote>
<h3 id="item-4-9" style="box-sizing: border-box; margin: 2.25rem 0px 1rem; line-height: 1.2; font-size: 1.5rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件捕获和时间冒泡的顺序
</h3>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    根据浏览器规范，事件捕获会先于事件冒泡发生。因此，总的事件顺序如下
</blockquote>
<ol style="box-sizing: border-box; margin-bottom: 1.25rem; margin-top: 0px; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    <li style="box-sizing: border-box;">
        window 捕获阶段
    </li>
    <li style="box-sizing: border-box;">
        document 捕获阶段
    </li>
    <li style="box-sizing: border-box;">
        ... 依次到真正触发事件的元素 捕获阶段
    </li>
    <li style="box-sizing: border-box;">
        真正触发事件的元素 冒泡阶段
    </li>
    <li style="box-sizing: border-box;">
        依次向上的父元素 冒泡阶段
    </li>
    <li style="box-sizing: border-box;">
        document 冒泡阶段
    </li>
    <li style="box-sizing: border-box;">
        window 冒泡阶段
    </li>
</ol>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">&lt;div id=&quot;father&quot;&gt;
        &lt;div id=&quot;child&quot;&gt;
            &lt;div id=&quot;son&quot;&gt;Click&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;script&gt;
        document.querySelector(&#39;#father&#39;).addEventListener(&#39;click&#39;, function () {            console.log(&#39;father捕获&#39;);
        }, true);        document.querySelector(&#39;#child&#39;).addEventListener(&#39;click&#39;, function () {            console.log(&#39;child捕获&#39;);
        }, true);        document.querySelector(&#39;#son&#39;).addEventListener(&#39;click&#39;, function () {            console.log(&#39;son捕获&#39;);
        }, true);        document.querySelector(&#39;#father&#39;).addEventListener(&#39;click&#39;, function () {            console.log(&#39;father冒泡&#39;);
        }, false);        document.querySelector(&#39;#child&#39;).addEventListener(&#39;click&#39;, function () {            console.log(&#39;child冒泡&#39;);
        }, false);        document.querySelector(&#39;#son&#39;).addEventListener(&#39;click&#39;, function () {            console.log(&#39;son冒泡&#39;);
        }, false);    &lt;/script&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    点击son之后的输出为
</p>
<pre class="hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">father捕获
child捕获
son捕获
son冒泡
child冒泡
father冒泡</pre>
<h2 id="item-5" style="box-sizing: border-box; margin: 2.5rem 0px 1rem; line-height: 1.2; font-size: 1.75rem; padding-bottom: 0.5rem; border-bottom: 1px double rgba(0, 0, 0, 0.1); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件绑定和事件委托
</h2>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    弄明白浏览器的事件流机制之后，来讨论事件绑定和事件委托其实是很简单的事情。
</p>
<h3 id="item-5-10" style="box-sizing: border-box; margin: 2.25rem 0px 1rem; line-height: 1.2; font-size: 1.5rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件绑定
</h3>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    就是在事件监听方式中直接对具体元素进行事件监听的方式。有个明显的缺点，对于新增加的DOM节点是无法监听到事件的。
</p>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">    &lt;div class=&quot;a&quot;&gt;click1&lt;/div&gt;
    &lt;div class=&quot;a&quot;&gt;click2&lt;/div&gt;
    &lt;script&gt;
        document.querySelectorAll(&#39;.a&#39;).forEach(ele =&gt; ele.onclick = function () {            console.log(&#39;clicked &#39; + this.innerHTML);
        });
        setTimeout(function () {            const div3 = document.createElement(&#39;div&#39;)
            div3.className = &quot;a&quot;;
            div3.innerHTML = &quot;click3&quot;
            document.body.appendChild(div3)
        }, 500);    &lt;/script&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    上面的click3点击是没有任何反应的，因为在创建该元素时没有绑定事件处理函数。
</p>
<h3 id="item-5-11" style="box-sizing: border-box; margin: 2.25rem 0px 1rem; line-height: 1.2; font-size: 1.5rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件委托
</h3>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    我们利用事件流机制来实现上面的需求。
</p>
<blockquote style="box-sizing: border-box; margin: 0px 0px 1.25rem; padding-left: 1rem; border-left: 0.25rem solid rgb(233, 236, 239); color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    事件委托就是利用事件流机制，在父元素进行监听，由于事件冒泡机制，父元素可以接受新添加元素的事件。
</blockquote>
<pre class="xml hljs" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-top: 0px; margin-bottom: 1.25rem; overflow: auto; color: rgb(51, 51, 51); padding: 0.5rem; background: rgb(233, 236, 239); max-height: 35rem; line-height: 1.5;">    &lt;div class=&quot;a&quot;&gt;click1&lt;/div&gt;
    &lt;div class=&quot;a&quot;&gt;click2&lt;/div&gt;
    &lt;script&gt;
        document.body.addEventListener(&#39;click&#39;, function (e) {            console.log(e.target.innerHTML)
        }, false);
        setTimeout(function () {            const div3 = document.createElement(&#39;div&#39;)
            div3.className = &quot;a&quot;;
            div3.innerHTML = &quot;click3&quot;
            document.body.appendChild(div3)
        }, 500);    &lt;/script&gt;</pre>
<p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.25rem; color: rgb(33, 37, 41); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; white-space: normal;">
    由于事件冒泡机制，click3元素点击之后会将事件冒泡给父元素，也就是我们的document.body，通过event.target可以拿到真正触发事件的元素。
</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>