<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='ç”µè„‘,ç”µè„‘è®²è§£,ç”µè„‘æŠ€æœ¯,ç¼–ç¨‹,ç”µè„‘æ•…éšœç»´ä¿®UI_DEV_Environment ä¹‹ StoryBook' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>é¦–é¡µ</a></li>
</div><div onclick='hidden1()' >åˆ†äº«</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>UI_DEV_Environment ä¹‹ StoryBook</center></div><div class='banquan'>åŸæ–‡å‡ºå¤„:æœ¬æ–‡ç”±åšå®¢å›­åšä¸»ç³Šç³Šç³Šç³Šç³Šäº†æä¾›ã€‚<br/>
åŸæ–‡è¿æ¥:https://www.cnblogs.com/rynxiao/p/11056810.html</div><br>
    <h3 id="å†™åœ¨å‰é¢">å†™åœ¨å‰é¢</h3>
<p>ç”±äºæœ¬æ–‡ä¸»è¦é›†ä¸­å…³æ³¨ä¸å·¥å…·ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸å¯èƒ½å®Œå…¨ä»‹ç»å·¥å…·çš„æ‰€æœ‰åŠŸèƒ½ï¼Œæ‰€ä»¥è¦æƒ³äº†è§£æ›´å¤šï¼Œå¯ä»¥è‡ªå·±å»å„è‡ªå®˜æ–¹ç½‘ç«™ä¸ŠæŸ¥çœ‹ã€‚</p>
<ul>
<li><a href="https://github.com/Rynxiao/ui_dev_environment">github</a></li>
<li><a href="http://rynxiao.com/ui_dev_environment/">examples</a></li>
</ul>
<h3 id="ä»€ä¹ˆæ˜¯uiå¼€å‘ç¯å¢ƒ">ä»€ä¹ˆæ˜¯UIå¼€å‘ç¯å¢ƒ</h3>
<blockquote>
<p>UIå¼€å‘ç¯å¢ƒä¸“æ³¨äºç”¨æˆ·ä½“éªŒè®¾è®¡å¸ˆä¸å¼€å‘äººå‘˜ä¹‹é—´çš„åä½œï¼ˆUI dev environmentsï¼‰ï¼Œä¸ºUIç»„ä»¶çš„å¿«é€Ÿè¿­ä»£æä¾›äº†ç»¼åˆç¯å¢ƒã€‚</p>
</blockquote>
<p>é€šä¿—ç‚¹æ¥è®²ï¼Œç›®å‰ä¸»è¦åº”ç”¨äºä¸ªé¡¹ç›®ä¸­ç»„ä»¶çš„æµ‹è¯•ã€å¼€å‘ä»¥åŠæ–‡æ¡£ç¼–å†™ä¸­ï¼Œè¿™æ ·è®¾è®¡äººå‘˜å’Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡ç»„ä»¶é¢„è§ˆçš„æ–¹å¼æ¥æŒ‡å®šè®¾è®¡è§„èŒƒã€‚</p>
<p>ç›®å‰å¯ä»¥ä½¿ç”¨çš„å·¥å…·ä¸»è¦æœ‰ï¼š<a href="https://storybook.js.org/">Storybook</a>ã€<a href="https://react-styleguidist.js.org/">React Styleguidist</a>ã€<a href="https://compositor.io/">Compositor</a>å’Œ<a href="https://mdxjs.com/">MDX</a>ã€‚æœ¬æ–‡ä¼šé‡ç‚¹ä»‹ç»<code>storybook</code>ä»¥åŠ<code>React Styleguidist</code>ã€‚</p>
<h3 id="å„å·¥å…·ä¹‹é—´çš„æ¯”è¾ƒå½’çº³">å„å·¥å…·ä¹‹é—´çš„æ¯”è¾ƒå½’çº³</h3>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Tools</th>
<th style="text-align: left;">React/Angular/Vue</th>
<th style="text-align: center;">ä¸Šæ‰‹ç¨‹åº¦</th>
<th style="text-align: left;">ä¸»é¢˜è‡ªå®šä¹‰</th>
<th style="text-align: left;">é™„åŠ åŠŸèƒ½(æ’ä»¶)</th>
<th style="text-align: left;">æµ‹è¯•ç¯å¢ƒ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="https://storybook.js.org/">Storybook</a></td>
<td style="text-align: left;">âœ”ï¸ / âœ”ï¸ / âœ”ï¸</td>
<td style="text-align: center;">ä¸­ç­‰</td>
<td style="text-align: left;">ç®€ä¾¿ã€é¢œè‰²å˜åŒ–</td>
<td style="text-align: left;">ä¸°å¯Œ(æºç /viewport/backgrounds...)</td>
<td style="text-align: left;">æä¾›äº†å„ç§æµ‹è¯•æ¡ˆä¾‹</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://react-styleguidist.js.org/">React Styleguidist</a></td>
<td style="text-align: left;">âœ”ï¸ / X / X</td>
<td style="text-align: center;">ç®€å•</td>
<td style="text-align: left;">ç®€ä¾¿ã€é¢œè‰²ç»“æ„å˜åŒ–</td>
<td style="text-align: left;">æ— </td>
<td style="text-align: left;"><a href="https://github.com/airbnb/enzyme">Enzyme</a>ã€<a href="https://jestjs.io/">jest</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://compositor.io/">Compositor</a></td>
<td style="text-align: left;">âœ”ï¸ / X / X</td>
<td style="text-align: center;">ç®€å•</td>
<td style="text-align: left;">æš‚ä¸æ”¯æŒ</td>
<td style="text-align: left;">æ— </td>
<td style="text-align: left;"><a href="https://github.com/airbnb/enzyme">Enzyme</a>ã€<a href="https://jestjs.io/">jest</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://mdxjs.com/">MDX</a></td>
<td style="text-align: left;">âœ”ï¸ / X / âœ”ï¸(Beta)</td>
<td style="text-align: center;">ç®€å•</td>
<td style="text-align: left;">ç®€ä¾¿ã€å¯ä»¥å®Œå…¨è‡ªå®šä¹‰</td>
<td style="text-align: left;">ä¸€èˆ¬(remark/rehype )</td>
<td style="text-align: left;"><a href="https://github.com/airbnb/enzyme">Enzyme</a>ã€<a href="https://jestjs.io/">jest</a></td>
</tr>
</tbody>
</table>
<h3 id="storybook">StoryBook</h3>
<p>storybookçš„ç•Œé¢æ¸…æ–°è„±ä¿—ï¼Œè‡³å°‘ä¸ªäººè®¤ä¸ºè¿˜æ˜¯æ¯”è¾ƒå¥½çœ‹çš„ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š</p>
<p><img src="./images/UI_DEV_Environment ä¹‹ StoryBook0.png" alt="apperance" /></p>
<p>åŒæ—¶ï¼Œstorybookå¯ä»¥æ›´æ¢ä¸»é¢˜ï¼Œå…·ä½“å¯ä»¥æˆ³<a href="https://storybook.js.org/docs/configurations/theming/">è¿™é‡Œ</a>ï¼Œæ›´æ¢çš„åªæ˜¯é…è‰²ç³»ç»Ÿï¼Œç»“æ„æ–¹é¢æ”¹åŠ¨çš„è¯å¯èƒ½æœ‰ç‚¹å›°éš¾ã€‚</p>
<p>storybook å¯ä»¥æ”¯æŒå¤šç§è¯­è¨€ï¼ŒåŒ…æ‹¬<code>react</code>,<code>vue</code>,<code>angular</code>...ç­‰ä¸»æµå‰ç«¯åº“ã€‚</p>
<p>storybookä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µå°±æ˜¯<code>story</code>ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯æ•…äº‹ï¼Œä¸è¿‡å¯ä»¥é€šä¿—çš„ç†è§£ä¸ºä¸€ä¸ªç»„ä»¶çš„ä¸€ç§çŠ¶æ€ã€‚å½“ç„¶è¿™ä¸ªçŠ¶æ€æ˜¯ä½ è‡ªå·±æ·»åŠ çš„ï¼Œå¦‚æœæ·»åŠ çš„æ•…äº‹è¶Šå¤šï¼ŒåŒæ—¶ä¹Ÿå°±è¡¨æ˜äº†ä½ ç¼–å†™çš„ç»„ä»¶å¤æ‚åº¦å°±å¾ˆé«˜äº†ï¼Œè¿™æ—¶å€™ä½ å°±å¯ä»¥è€ƒè™‘æ˜¯å¦è¦æ‹†åˆ†ç»„ä»¶æ¥ä½¿å¾—ç»„ä»¶çš„åŠŸèƒ½å˜å¾—å•ä¸€çº¯ç²¹äº†ï¼Œè¿™æ ·ç»„ä»¶ç»´æŠ¤çš„æˆæœ¬æ‰ä¼šå˜å°‘ï¼ŒåŒæ—¶å¯ç”¨æ€§ä¹Ÿä¼šæ›´åŠ é«˜ã€‚</p>
<h3 id="ç®€å•çš„å…¥é—¨">ç®€å•çš„å…¥é—¨</h3>
<p>ä¸‹é¢ä»¥ä¸€ä¸ª<code>React</code>å°é¡¹ç›®æ¥ç»ƒæ‰‹ï¼Œå¦‚æœå¯¹<code>Vue</code>ä»¥åŠ<code>Angular</code>æ„Ÿå…´è¶£çš„ç«¥é‹ï¼Œå¯ä»¥å»<a href="https://storybook.js.org/docs/basics/introduction/">å®˜ç½‘</a>äº†è§£ä¸€ä¸‹ï¼Œå®˜æ–¹ç½‘ç«™ä¸Šæœ‰å¤§é‡çš„ä¾‹å­ä»¥åŠæ–°æ‰‹æ•™ç¨‹ã€‚</p>
<h4 id="step-1-åˆ›å»ºä¸€ä¸ªé¡¹ç›®åä¸ºstroybook-åŒæ—¶åˆ›å»ºpackage.jsonæ–‡ä»¶">Step 1: åˆ›å»ºä¸€ä¸ªé¡¹ç›®åä¸º<code>stroybook</code>, åŒæ—¶åˆ›å»º<code>package.json</code>æ–‡ä»¶</h4>
<pre><code><code>mkdir stroybook
cd storybook
yarn init</code></pre>
<p>å¡«å†™ä½ è¦åˆå§‹åŒ–çš„ä¿¡æ¯ï¼Œä¸‹ä¸€æ­¥ã€‚</p>
<h4 id="step2-å®‰è£…ä¾èµ–">Step2: å®‰è£…ä¾èµ–</h4>
<pre><code><code>yarn add @storybook/react react react-dom babel-loader @babel/core --dev</code></pre>
<h4 id="step3-æ·»åŠ npmè„šæœ¬">Step3: æ·»åŠ npmè„šæœ¬</h4>
<pre class="json"><code>{
&quot;scripts&quot;: {
    &quot;storybook&quot;: &quot;start-storybook -p 6006&quot;,
    &quot;build-storybook&quot;: &quot;build-storybook&quot;,
    &quot;serve&quot;: &quot;yarn build-storybook &amp;&amp; npx http-server ./storybook-static&quot;
  }
}</code></pre>
<ul>
<li><code>storybook</code>: è¿è¡Œè¿™ä¸ªè„šæœ¬ä¼šèµ·ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨ï¼Œç›‘å¬åœ¨6006ç«¯å£</li>
<li><code>build-storybook</code>: é€šè¿‡<code>webpack</code>è¿›è¡Œæ‰“åŒ…ï¼Œç”Ÿæˆé™æ€æ–‡ä»¶</li>
<li><code>serve</code>: ä½¿ç”¨nodeæœåŠ¡è¿è¡Œé™æ€æ–‡ä»¶</li>
</ul>
<h4 id="step4-åˆ›å»ºé…ç½®æ–‡ä»¶è®©storybookèƒ½å¤Ÿæ‰¾åˆ°stories">Step4: åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œè®©storybookèƒ½å¤Ÿæ‰¾åˆ°stories</h4>
<pre class="js"><code>import { configure } from &#39;@storybook/react&#39;;

// æ‰‹åŠ¨æ·»åŠ æ‰€æœ‰stories
function loadStories() {
  require(&#39;../stories/index.js&#39;);
  // You can require as many stories as you need.
}

/**
* æˆ–è€…åŒ¹é…æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰stories
*

function loadStories() {
  const req = require.context(&#39;../stories&#39;, true, /\.stories\.js$/);
  req.keys().forEach(filename =&gt; req(filename));
}

*/

configure(loadStories, module);</code></pre>
<h4 id="step5-ç¼–å†™ç»„ä»¶æ•…äº‹">Step5: ç¼–å†™ç»„ä»¶æ•…äº‹</h4>
<pre class="js"><code>import React from &#39;react&#39;;
import { storiesOf } from &#39;@storybook/react&#39;;
import { Button } from &#39;@storybook/react/demo&#39;;

storiesOf(&#39;Button&#39;, module)
  .add(&#39;with text&#39;, () =&gt; (
    &lt;Button&gt;Hello Button&lt;/Button&gt;
  ))
  .add(&#39;with emoji&#39;, () =&gt; (
    &lt;Button&gt;&lt;span role=&quot;img&quot; aria-label=&quot;so cool&quot;&gt;ğŸ˜€ ğŸ˜ ğŸ‘ ğŸ’¯&lt;/span&gt;&lt;/Button&gt;
  ));</code></pre>
<h4 id="step6-run">Step6: Run</h4>
<pre><code><code>yarn storybook

// open browser
localhost:6006</code></pre>
<p>ä½ å°±å¯ä»¥çœ‹åˆ°æ–‡ç« ä¸Šé¢çš„ç•Œé¢äº†ã€‚</p>
<h3 id="ç»„ä»¶æµ‹è¯•">ç»„ä»¶æµ‹è¯•</h3>
<p>storybookåœ¨UIæµ‹è¯•æ–¹é¢ä¹Ÿæä¾›äº†å¤šç§è§’åº¦çš„æµ‹è¯•æ–¹å¼ï¼š</p>
<ul>
<li>å†…å®¹ç»“æ„æµ‹è¯•ï¼šå†…å®¹ç»“æ„æµ‹è¯•ä¸»è¦å…³æ³¨ç‚¹åœ¨ç»„ä»¶ä¸­çš„å†…å®¹æ˜¯å¦å­˜åœ¨ï¼Œæ¯”å¦‚å†…å®¹æ˜¯å¦åŒ…å«<code>hello world</code>ç­‰å­—æ®µï¼Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ª<code>button</code>ç­‰ç­‰</li>
<li>äº¤äº’æµ‹è¯•ï¼šäº¤äº’æµ‹è¯•ä¸»è¦æ˜¯æµ‹è¯•ç”¨æˆ·çš„ç‚¹å‡»ã€è¾“å…¥äº‹ä»¶ï¼Œä¼šå¯¹ç»“æœé€ æˆçš„ä¸€ä¸ªå½±å“ï¼Œæ¯”å¦‚ç‚¹å‡»äº†ä¸€ä¸ªæŒ‰é’®ä¹‹åï¼Œæ˜¯ä¸æ˜¯ä¼šè·³è½¬åˆ°ä¸€ä¸ªæ–°çš„é¡µé¢</li>
<li>è§†è§‰(æ ·å¼)æµ‹è¯•: ä¸»è¦æ¯”è¾ƒçš„æ˜¯å˜æ›´å‘ç”Ÿå‰å’Œå‘ç”Ÿä¹‹åçš„<code>images</code>çš„å˜åŒ–ï¼Œå¯èƒ½æ˜¯åƒç´ çº§çš„</li>
<li>æ‰‹åŠ¨æµ‹è¯•</li>
</ul>
<h4 id="ç»“æ„æµ‹è¯•">ç»“æ„æµ‹è¯•</h4>
<p>åœ¨storybookä¸­ä½¿ç”¨<a href="https://facebook.github.io/jest/blog/2016/07/27/jest-14.html">jest's snapshot testing</a>ä½œä¸ºç»„ä»¶çš„ç»“æ„æµ‹è¯•ï¼Œä½¿ç”¨çš„åŸç†ä¸ºï¼š</p>
<p>æ¯”è¾ƒå˜æ›´ä¹‹å‰çš„<code>html</code>ç»“æ„å’Œå˜æ›´ä¹‹åçš„<code>html</code>ç»“æ„ï¼Œå¦‚æœä¸åŒï¼Œè¦ä¹ˆæ˜¯ç°åœ¨çš„å˜æ›´å½±å“çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬åªéœ€è¦æ›´æ–°ä¸ºæœ€æ–°çš„ç»“æ„å°±å¯ä»¥äº†ï¼Œåä¹‹å°±æ˜¯å‡ºç°äº†æœªçŸ¥çš„é”™è¯¯é€ æˆçš„ï¼Œå°±éœ€è¦è¿›è¡Œæ’æŸ¥äº†ã€‚</p>
<p>ä½¿ç”¨storybookçš„ç»“æ„æµ‹è¯•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦ä¸¤æ­¥é…ç½®å³å¯ï¼š</p>
<ul>
<li>å®‰è£…ä¾èµ–</li>
</ul>
<pre><code><code>yarn add --dev @storybook/addon-storyshots</code></pre>
<ul>
<li>åœ¨æµ‹è¯•æ–‡ä»¶ä¸­åˆå§‹åŒ–ï¼Œä¾‹å¦‚<code>storyshots.test.js</code></li>
</ul>
<pre class="js"><code>import initStoryshots from &#39;@storybook/addon-storyshots&#39;;

initStoryshots({ /* configuration options */ });</code></pre>
<p>ç„¶åè¿è¡Œ<code>yarn test</code>å³å¯ã€‚</p>
<h4 id="äº¤äº’æµ‹è¯•">äº¤äº’æµ‹è¯•</h4>
<p>é€šå¸¸ä½¿ç”¨<a href="https://github.com/airbnb/enzyme">Enzyme</a>æ¥æµ‹è¯•ç”¨æˆ·çš„è¾“å…¥ä»¥åŠç‚¹å‡»äº‹ä»¶ã€‚åŒæ—¶storybookä¹Ÿç»§æ‰¿äº†ç›¸å…³çš„æ’ä»¶<a href="https://github.com/mthuret/storybook-addon-specifications">Specs Addon</a></p>
<p>è¿™é‡Œå°±ä¸å¤šåšæ¼”ç¤ºäº†ï¼Œè¯¦æƒ…å¯ä»¥æˆ³ä¸Šé¢çš„é“¾æ¥ã€‚</p>
<h4 id="è‡ªåŠ¨åŒ–çš„è§†è§‰æµ‹è¯•">è‡ªåŠ¨åŒ–çš„è§†è§‰æµ‹è¯•</h4>
<p>è§†è§‰æµ‹è¯•ä¸»è¦çš„ä¼˜ç‚¹å°±æ˜¯ä¸€ç›®äº†ç„¶ï¼Œå¦‚æœè§†è§‰æµ‹è¯•èƒ½å¤Ÿåšå¾—éå¸¸å®¹æ˜“ï¼Œé‚£ä¹ˆç”šè‡³å¯ä»¥å–ä»£ä¸€äº›æ¯”è¾ƒè„†å¼±çš„æµ‹è¯•ï¼Œæ¯”å¦‚åˆ¤æ–­æ˜¯å¦æœ‰å“ªäº›<code>css</code>å£°æ˜ï¼Œ<code>html</code>æ ‡ç­¾ç­‰ç­‰ï¼Œå¦‚æœè§†è§‰ä¸Šçœ‹èµ·æ¥å’Œå˜æ›´å‰åä¿æŒä¸€è‡´ï¼Œè¿™äº›æµ‹è¯•æˆ‘ä»¬éƒ½æ˜¯å¯ä»¥ä¸å…³æ³¨çš„ã€‚</p>
<p>ç„¶è€Œè§†è§‰æµ‹è¯•æœ€å¤§çš„éš¾ç‚¹å°±æ˜¯äººç±»çš„å¯¹åƒç´ çš„æ„ŸçŸ¥åº¦ä¸åŒï¼Œæœºå™¨ç›¸å¯¹äººçœ¼æ¥è¯´ï¼Œå¯ä»¥è¯†åˆ«çš„åƒç´ è¾¨è¯†åº¦ä¼šé«˜å‡ºè®¸å¤šï¼Œå¾ˆå¤šçœ‹ä¸Šå»ç›¸åŒçš„é¡µé¢å…¶å®æ˜¯å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†æ˜¯äººçš„è‚‰çœ¼å¯èƒ½çœ‹ä¸å‡ºæ¥è€Œå·²ã€‚</p>
<p>å…³äºè§†è§‰æµ‹è¯•ï¼Œæœ‰ä¸€äº›æ¯”è¾ƒçŸ¥åçš„åº“å¯ä»¥è¿›è¡Œå‚è€ƒï¼š</p>
<ul>
<li><a href="https://applitools.com/storybook">Applitools</a></li>
<li><a href="https://www.chromaticqa.com/">Chromatic</a></li>
<li><a href="https://happo.io/">Happo</a></li>
<li><a href="https://loki.js.org/">Loki</a></li>
<li><a href="https://docs.percy.io/docs/storybook-for-react">Percy</a></li>
<li><a href="https://screener.io/v2/docs">Screener</a></li>
<li><a href="https://github.com/storybookjs/storybook/tree/master/addons/storyshots">StoryShots</a> with its <a href="https://github.com/storybookjs/storybook/tree/master/addons/storyshots#configure-storyshots-for-image-snapshots">seamless integration</a> with <a href="https://github.com/americanexpress/jest-image-snapshot">jest-image-snapshot</a></li>
</ul>
<p>æ›´å¤šè¯·å‚çœ‹<a href="https://storybook.js.org/docs/testing/react-ui-testing/">è¿™é‡Œ</a></p>
<h3 id="å¼ºå¤§çš„æ’ä»¶">å¼ºå¤§çš„æ’ä»¶</h3>
<p>storybooké›†æˆäº†è®¸å¤šä¼˜ç§€çš„æ’ä»¶ï¼Œè¿™äº›æ’ä»¶éƒ½æ˜¯å¯ä»¥è‡ªç”±å®‰è£…å’Œå¸è½½çš„ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»å‡ æ¬¾å®ç”¨çš„æ’ä»¶ï¼š</p>
<p><strong>æ³¨1</strong>ï¼šstorybookçš„ç»å¤§éƒ¨åˆ†æ’ä»¶éœ€è¦é¦–å…ˆå®‰è£…ä¾èµ–ï¼Œç„¶ååœ¨<code>.storybook/addons</code>ä¸­è¿›è¡Œæ³¨å†Œï¼Œæœ€åä½¿ç”¨<code>.storybook/config</code>è¿›è¡Œå‚æ•°é…ç½®ã€‚å½“ç„¶ä¹Ÿæœ‰ä¾‹å¤–ï¼Œå¯ä»¥ç›´æ¥åœ¨<code>config</code>ä¸­è¿›è¡Œå¼•ç”¨ï¼Œå…·ä½“ä½¿ç”¨å‚çœ‹æ–‡æ¡£ã€‚</p>
<p><strong>æ³¨2</strong>ï¼šstorybookæä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„æ’ä»¶ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾çš„äº†ï¼Œå¯ä»¥è‡ªå·±å»<a href="https://storybook.js.org/addons/">Addons</a>äº†è§£</p>
<ul>
<li><a href="https://github.com/storybookjs/storybook-addon-console">console</a></li>
</ul>
<p>é€šå¸¸æˆ‘ä»¬ä½¿ç”¨<code>command + alt + I</code>(Mac)ä»¥åŠ<code>F12</code>(Windows)æ‰“å¼€<code>chrome</code>çš„æ§åˆ¶å°æ¥æŸ¥çœ‹æ‰“å°çš„æ—¥å¿—ï¼Œè€Œè¿™ä¸ªæ’ä»¶å¯ä»¥ä½¿æˆ‘ä»¬ä¸éœ€è¦è¿™ä¹ˆåšï¼Œç›´æ¥åœ¨<code>Actions</code>é¢æ¿ä¸­å°±å¯ä»¥æŸ¥çœ‹æ‰“å°çš„æ—¥å¿—ï¼Œå¹¶ä¸”å¯ä»¥ç­›é€‰å‡ºè‡ªå·±å…³å¿ƒçš„æ—¥å¿—ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥</p>
<pre class="js"><code>// install dependence
yarn add --dev @storybook/addon-console

// .storybook/config.js
import { setConsoleOptions } from &#39;@storybook/addon-console&#39;;

setConsoleOptions({
  panelExclude: [],
});

// or write in story singly
// wrap your stories with specified addon options.
import { storiesOf } from &#39;@storybook/react&#39;;
import { withConsole } from &#39;@storybook/addon-console&#39;;

storiesOf(&#39;withConsole&#39;, module)
 .addDecorator((storyFn, context) =&gt; withConsole()(storyFn)(context))
 .add(&#39;with Log&#39;, () =&gt; &lt;Button onClick={() =&gt; console.log(&#39;Data:&#39;, 1, 3, 4)}&gt;Log Button&lt;/Button&gt;)
 .add(&#39;with Warning&#39;, () =&gt; &lt;Button onClick={() =&gt; console.warn(&#39;Data:&#39;, 1, 3, 4)}&gt;Warn Button&lt;/Button&gt;)
 .add(&#39;with Error&#39;, () =&gt; &lt;Button onClick={() =&gt; console.error(&#39;Test Error&#39;)}&gt;Error Button&lt;/Button&gt;)
 .add(&#39;with Uncatched Error&#39;, () =&gt;
   &lt;Button onClick={() =&gt; console.log(&#39;Data:&#39;, T.buu.foo)}&gt;Throw Button&lt;/Button&gt;
 )
 // Action Logger Panel:
 // withConsole/with Log: [&quot;Data:&quot;, 1, 3, 4]
 // withConsole/with Warning warn: [&quot;Data:&quot;, 1, 3, 4]
 // withConsole/with Error error: [&quot;Test Error&quot;]
 // withConsole/with Uncatched Error error: [&quot;Uncaught TypeError: Cannot read property &#39;foo&#39; of undefined&quot;, &quot;http://localhost:9009/static/preview.bundle.js&quot;, 51180, 42, Object]</code></pre>
<p><img src="./images/UI_DEV_Environment ä¹‹ StoryBook1.png" alt="console" /></p>
<ul>
<li><a href="https://github.com/storybookjs/storybook/tree/master/addons/storysource">source</a></li>
</ul>
<p>sourceæ’ä»¶ä¸»è¦ä¼šåœ¨å·¥å…·æ é¢æ¿ä¸­å±•ç¤ºå‡ºæˆ‘ä»¬å½“å‰æ‰€åœ¨çš„<code>story</code>æºç </p>
<p><img src="./images/UI_DEV_Environment ä¹‹ StoryBook2.png" alt="source" /></p>
<p>å…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code><code>yarn add @storybook/addon-storysource --dev</code></pre>
<p>ç„¶ååœ¨<code>addon</code>ä¸­æ³¨å†Œ</p>
<pre class="js"><code>import &#39;@storybook/addon-storysource/register&#39;;</code></pre>
<p>æœ€ååœ¨<code>.storybook</code>ä¸­æ·»åŠ <code>webpack.config.js</code>ï¼Œç»™æ¯ä¸ª<code>story</code>æ·»åŠ <code>decorator</code></p>
<pre class="js"><code>module.exports = function({ config }) {
  config.module.rules.push({
    test: /\.stories\.jsx?$/,
    loaders: [require.resolve(&#39;@storybook/addon-storysource/loader&#39;)],
    enforce: &#39;pre&#39;,
  });

  return config;
};</code></pre>
<ul>
<li><a href="https://github.com/storybookjs/storybook/tree/master/addons/knobs">knobs</a></li>
</ul>
<p>å®‰è£…äº†knobsæ’ä»¶ä¹‹åï¼Œå¯ä»¥åœ¨æ§åˆ¶é¢æ¿ä¸­ç¼–è¾‘<code>React</code>ç»„ä»¶ä¸­çš„<code>props</code>ï¼ŒåŒæ—¶knobsæ’ä»¶ä¹Ÿä¼šå…è®¸ä¿®æ”¹åœ¨storyä¸­ç¼–å†™çš„ä¸´æ—¶å˜é‡ã€‚</p>
<pre><code><code>yarn add @storybook/addon-knobs --dev</code></pre>
<pre class="js"><code>import &#39;@storybook/addon-knobs/register&#39;;

import { storiesOf } from &#39;@storybook/react&#39;;
import { withKnobs, text, boolean, number } from &#39;@storybook/addon-knobs&#39;;

const stories = storiesOf(&#39;Storybook Knobs&#39;, module);

// Add the `withKnobs` decorator to add knobs support to your stories.
// You can also configure `withKnobs` as a global decorator.
stories.addDecorator(withKnobs);

// Knobs for React props
stories.add(&#39;with a button&#39;, () =&gt; (
  &lt;button disabled={boolean(&#39;Disabled&#39;, false)} &gt;
    {text(&#39;Label&#39;, &#39;Hello Storybook&#39;)}
  &lt;/button&gt;
));</code></pre>
<p><img src="./images/UI_DEV_Environment ä¹‹ StoryBook3.png" alt="knobs" /></p>
<ul>
<li><a href="https://github.com/storybookjs/storybook/tree/master/addons/notes">notes</a></li>
<li><a href="https://github.com/storybookjs/storybook/tree/master/addons/backgrounds">backgrounds</a></li>
<li><a href="https://github.com/storybookjs/storybook/tree/master/addons/viewport">viewport</a></li>
<li><a href="https://github.com/mthuret/storybook-addon-specifications">spec</a></li>
<li><a href="https://github.com/vertexbz/storybook-addon-react-live-edit">react-live-edit</a></li>
</ul>
<h3 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h3>
<p>storybookä½œä¸ºä¸€ä¸ªç»„ä»¶å¼€å‘å·¥å…·æ¥è¯´ï¼Œæ•´ä½“ä¸Šæ‰‹éš¾åº¦ä»¥åŠæ¥å…¥åˆ°å·²æœ‰é¡¹ç›®ä¸­çš„æˆæœ¬å¹¶ä¸æ˜¯ç‰¹åˆ«é«˜ã€‚</p>
<p>åŒæ—¶å¯¹ç»„ä»¶çš„é¢„è§ˆã€æ–‡æ¡£ç”Ÿæˆã€æµ‹è¯•ä»¥åŠåŠŸèƒ½ç¼–è¾‘ç­‰ç­‰éƒ½æä¾›äº†å¾ˆå¥½çš„æ”¯æŒï¼Œæ‰€ä»¥å¯¹äºæƒ³ç±»ä¼¼äºå¼€å‘å…¬å…±ç»„ä»¶åº“çš„å›¢é˜Ÿæ¥è¯´storybookæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„é€‰æ‹©ã€‚</p>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>