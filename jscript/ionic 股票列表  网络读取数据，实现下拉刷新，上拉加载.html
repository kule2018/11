<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修ionic 股票列表  网络读取数据，实现下拉刷新，上拉加载' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>ionic 股票列表  网络读取数据，实现下拉刷新，上拉加载</center></div><div class='banquan'>原文出处:本文由博客园博主道强开提供。<br/>
原文连接:https://www.cnblogs.com/codeadmin/p/11243684.html</div><br>
    <p><span style="color: #ff0000; font-size: 18pt;"><strong>html:　　</strong></span></p>
<div>
<div>
<div>
<div style="margin-left: 60px;">&lt;ion-header&gt;</div>
<div style="margin-left: 60px;">&lt;ion-toolbar&gt;</div>
<div style="margin-left: 60px;">&lt;ion-title&gt;</div>
<div style="margin-left: 60px;">股票</div>
<div style="margin-left: 60px;">&lt;/ion-title&gt;</div>
<div style="margin-left: 60px;">&lt;/ion-toolbar&gt;</div>
<div style="margin-left: 60px;">&lt;/ion-header&gt;</div>
<br />
<div style="margin-left: 60px;">&lt;ion-content&gt;</div>
<div style="margin-left: 60px;">      &lt;ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)"&gt;</div>
<div style="margin-left: 60px;">          &lt;ion-refresher-content </div>
<div style="margin-left: 60px;">            pullingIcon="arrow-dropdown"</div>
<div style="margin-left: 60px;">            pullingText="下拉刷新" </div>
<div style="margin-left: 60px;">            refreshingSpinner="circles"</div>
<div style="margin-left: 60px;">            refreshingText="下拉刷新11"&gt; </div>
<div style="margin-left: 60px;">          &lt;/ion-refresher-content&gt;</div>
<div style="margin-left: 60px;">      &lt;/ion-refresher&gt;</div>
<div style="margin-left: 60px;">  &lt;ion-grid&gt;</div>
<div style="margin-left: 60px;">    &lt;ion-row *ngFor="let item of aboutData.stockData"   </div>
<div style="margin-left: 60px;">        [routerLink]="[ '/stock-details']"  </div>
<div style="margin-left: 60px;">        [queryParams]="item"</div>
<div style="margin-left: 60px;">    &gt;</div>
<div style="margin-left: 60px;">        &lt;ion-col size="3" &gt;</div>
<div style="margin-left: 60px;">          {{ item.symbol}}</div>
<div style="margin-left: 60px;">        &lt;/ion-col&gt;</div>
<div style="margin-left: 60px;">        &lt;ion-col size="6"&gt;</div>
<div style="margin-left: 60px;">            {{ item.name}}</div>
<div style="margin-left: 60px;">        &lt;/ion-col&gt;</div>
<div style="margin-left: 60px;">        &lt;ion-col &gt;</div>
<div style="margin-left: 60px;">            {{ item.lasttrade}}</div>
<div style="margin-left: 60px;">      &lt;/ion-col&gt;</div>
<div style="margin-left: 60px;">    &lt;/ion-row&gt;</div>
<div style="margin-left: 60px;">  &lt;/ion-grid&gt;</div>
<div style="margin-left: 60px;">    &lt;ion-infinite-scroll threshold="150px" (ionInfinite)="doInfinite($event)"&gt;</div>
<div style="margin-left: 60px;">       &lt;ion-infinite-scroll-content loadingSpinner="ios" loadingText="上拉加载"&gt;</div>
<div style="margin-left: 60px;">       &lt;/ion-infinite-scroll-content&gt;</div>
<div style="margin-left: 60px;">    &lt;/ion-infinite-scroll&gt;</div>
<div style="margin-left: 60px;">&lt;/ion-content&gt;</div>
<div style="margin-left: 60px;">&nbsp;</div>
<div><span style="color: #ff0000; font-size: 18pt;"><em><em>ts:</em></em></span></div>
<div style="margin-left: 60px;">
<div>
<div>import { Component } from '@angular/core';</div>
<div>import { HttpClient } from '@angular/common/http';</div>
<br /><br />
<div>@Component({</div>
<div>  selector: 'app-tab2',</div>
<div>  templateUrl: 'tab2.page.html',</div>
<div>  styleUrls: ['tab2.page.scss']</div>
<div>})</div>
<div>export class Tab2Page {</div>
<div>    //f37304922567ba032a7332a50765b21a</div>
<div>  aboutData={</div>
<div>    url:"http://web.juhe.cn:8080/finance/stock/hkall",</div>
<div>    ionicUrl:"http://106.13.46.223:8066/home/getData",</div>
<div>    ionicStockUrl:"http://106.13.46.223:8066/home/GetStockAllData",</div>
<div>    key:"f37304922567ba032a7332a50765b21a",</div>
<div>    page:1,</div>
<div>    stockData:[</div>
<div>    ],</div>
<div>    httpOptions:{}</div>
<div>  }</div>
<div>  constructor(public http:HttpClient) {</div>
<div>     this.http.get(</div>
<div>       this.aboutData.ionicStockUrl+"?url="+</div>
<div>      this.aboutData.url+"?key="+this.aboutData.key+"&amp;page="+this.aboutData.page)</div>
<div>        .subscribe((respone:any)=&gt;{</div>
<div>           console.log(respone);</div>
<div>           if(respone.reason=="SUCCESSED!")</div>
<div>           {</div>
<div>             // this.aboutData.stockData.push(respone.result.data);</div>
<div>              this.aboutData.stockData.push.apply(this.aboutData.stockData,respone.result.data);</div>
<div>              //</div>
<div>              this.aboutData.page=parseInt(respone.result.page)+1;</div>
<div>           }</div>
<div>     })</div>
<div>  }</div>

<br />
<div>  doRefresh($event)&nbsp;{&nbsp;&nbsp;</div>
<div>    this.aboutData.page=1;</div>

<br />
<div>    this.http.get(</div>
<div>      this.aboutData.ionicStockUrl+"?url="+</div>
<div>     this.aboutData.url+"?key="+this.aboutData.key+"&amp;page="+this.aboutData.page)</div>
<div>       .subscribe((respone:any)=&gt;{</div>
<div>          console.log(respone);</div>
<div>          if(respone.reason=="SUCCESSED!")</div>
<div>          {</div>
<div>            this.aboutData.stockData.length=0;</div>
<div>            // this.aboutData.stockData.push(respone.result.data);</div>
<div>             this.aboutData.stockData.push.apply(this.aboutData.stockData,respone.result.data);</div>
<div>             //</div>
<div>             this.aboutData.page=parseInt(respone.result.page)+1;</div>
<div>          }</div>
<div>          $event.target.complete();</div>
<div>    })</div>

<br />
<div>  }</div>
<div>  doInfinite($event)&nbsp;{&nbsp;&nbsp;</div>
<div>    console.log(this.aboutData.page);</div>
<div>    this.http.get(</div>
<div>      this.aboutData.ionicStockUrl+"?url="+</div>
<div>     this.aboutData.url+"?key="+this.aboutData.key+"&amp;page="+this.aboutData.page)</div>
<div>       .subscribe((respone:any)=&gt;{</div>
<div>          console.log(respone);</div>
<div>          if(respone.reason=="SUCCESSED!")</div>
<div>          {</div>
<div>            // this.aboutData.stockData.push(respone.result.data);</div>
<div>             this.aboutData.stockData.push.apply(this.aboutData.stockData,respone.result.data);</div>
<div>             //</div>
<div>             this.aboutData.page=parseInt(respone.result.page)+1;</div>

<br />
<div>             console.log(this.aboutData.page);</div>
<div>          }</div>

<br />
<div>          $event.target.complete();</div>
<div>    })</div>
<div>  }</div>

<br />
<div>  rowClick($event)</div>
<div>  {</div>
<div>      console.log($event.target);</div>
<div>  }</div>

<br />
<div>}</div>

</div>
</div>
<div style="margin-left: 60px;">&nbsp;</div>

</div>
</div>

</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>