<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修jstree使用' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>jstree使用</center></div><div class='banquan'>原文出处:本文由博客园博主爱你如初提供。<br/>
原文连接:https://www.cnblogs.com/appskyy/p/10944957.html</div><br>
    <div class="cnblogs_code">
<pre><code>$('#using_json'<span style="color: #000000;">).jstree({
        </span>'core'<span style="color: #000000;"> : {
            </span>"themes"<span style="color: #000000;"> : {
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> "stripes" : true,//背景是否显示间纹。</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> "dots": true,//是否显示树连接线</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> "icons": true,//是否显示节点的图标</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> "ellipsis": true//节点名过长时是否显示省略号</span>
<span style="color: #000000;">            },
            </span>"check_callback" : <span style="color: #0000ff;">true</span><span style="color: #000000;">,
            </span>'data'<span style="color: #000000;"> : 
            {
                </span>'url': 'data-demo/dept.json'<span style="color: #000000;">,
                </span>'dataType': 'json'<span style="color: #000000;">,
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 'data': function (node) { // 传给服务端点击的节点</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">     //return { id: node.id == "#" ? "0" : node.id };</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">     return { clickId: node.id };</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> },</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> success: function () {</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">     alert('ok');</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> }</span>
            },<span style="color: #008000;">//</span><span style="color: #008000;"> 生成节点的数据，treedata是后台返回的JSON数据</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> 'multiple' : true,  // 可否多选</span>
            'dblclick_toggle': <span style="color: #0000ff;">true</span>,   <span style="color: #008000;">//</span><span style="color: #008000;">允许tree的双击展开</span>
   <span style="color: #008000;">//</span><span style="color: #008000;">          "check_callback" : function (operation, node, parent, position, more) {</span>
            <span style="color: #008000;">//</span><span style="color: #008000;">     if(operation === "copy_node" || operation === "move_node") {</span>
            <span style="color: #008000;">//</span><span style="color: #008000;">         if(parent.id === "#") {</span>
            <span style="color: #008000;">//</span><span style="color: #008000;">             return false; // prevent moving a child above or below the root</span>
            <span style="color: #008000;">//</span><span style="color: #008000;">         }</span>
            <span style="color: #008000;">//</span><span style="color: #008000;">     };</span>
            <span style="color: #008000;">//</span><span style="color: #008000;">     return true;</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> }</span>
<span style="color: #000000;">
        },
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 引入插件</span>
        'plugins': ["state",'checkbox','types','themes','contextmenu'<span style="color: #000000;">],
        </span>"types"<span style="color: #000000;"> : {
            </span>"default"<span style="color: #000000;"> : {

            },
            </span>"company"<span style="color: #000000;"> : {
                </span>"icon" : 'fa fa-home'<span style="color: #000000;">,
            },
            </span>"department"<span style="color: #000000;"> : {
                </span>"icon" : "fa fa-cubes"<span style="color: #000000;">,
            },
            </span>"user"<span style="color: #000000;"> : {
                </span>"icon" : "fa fa-user"<span style="color: #000000;">,
            },

        },
        </span>'checkbox': {  <span style="color: #008000;">//</span><span style="color: #008000;"> 去除checkbox插件的默认效果</span>
            'tie_selection': <span style="color: #0000ff;">false</span><span style="color: #000000;">,
            </span>'keep_selected_style': <span style="color: #0000ff;">false</span><span style="color: #000000;">,
            </span>'whole_node': <span style="color: #0000ff;">false</span><span style="color: #000000;">
        },
        </span>'contextmenu': {<span style="color: #008000;">//</span><span style="color: #008000;"> 右键菜单</span>
            'items' : customMenu     <span style="color: #008000;">//</span><span style="color: #008000;">每个节点都会调用这个函数</span>
<span style="color: #000000;">        },        
    })
    .bind(</span>'click.jstree', <span style="color: #0000ff;">function</span>(event) { <span style="color: #008000;">//</span><span style="color: #008000;">单击事件<br /></span><span style="color: #000000;">   
    })
    </span><span style="color: #008000;">//</span><span style="color: #008000;">双击  确定jstree.js中已经添加双击事件</span>
    .bind('dblclick.jstree',<span style="color: #0000ff;">function</span><span style="color: #000000;">(event){
        
    });
    </span><span style="color: #008000;">//</span><span style="color: #008000;">$('#using_json').jstree("destroy");//销毁树</span>

<span style="color: #0000ff;">function</span><span style="color: #000000;"> customMenu(node)
{
    </span><span style="color: #0000ff;">var</span> items =<span style="color: #000000;"> {
        </span>'add'<span style="color: #000000;">: {
            </span>'label': '添加子公司'<span style="color: #000000;">,
            </span>'action': <span style="color: #0000ff;">function</span><span style="color: #000000;"> (obj) {

                </span><span style="color: #0000ff;">var</span> inst =<span style="color: #000000;"> jQuery.jstree.reference(obj.reference);
                </span><span style="color: #0000ff;">var</span> clickedNode = inst.get_node(obj.reference);<span style="color: #008000;">//</span><span style="color: #008000;">获取节点对象</span>
                <span style="color: #0000ff;">var</span> ty =<span style="color: #000000;"> inst.get_type(obj.reference);
                </span><span style="color: #0000ff;">if</span> (ty == 'department'<span style="color: #000000;">) {
                    swal({
                        title : </span>""<span style="color: #000000;">,
                        text : </span>"无法对部门添加下级部门！"<span style="color: #000000;">,
                        type : </span>"warning"<span style="color: #000000;">,
                        confirmButtonColor : </span>"#1ab394"<span style="color: #000000;">,
                        confirmButtonText : </span>"确认"<span style="color: #000000;">,
                    });
                    </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
                } 
                </span><span style="color: #0000ff;">var</span> newNode =<span style="color: #000000;"> inst.create_node(obj.reference,clickedNode.val);
                </span><span style="color: #0000ff;">if</span> (obj.reference[0].id=='j1_10_anchor'<span style="color: #000000;">) {
                    inst.set_type(newNode, </span>'company'<span style="color: #000000;">);
                }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
                    inst.set_type(newNode, </span>'department'<span style="color: #000000;">);
                }
                </span><span style="color: #0000ff;">var</span> Nodeobj =<span style="color: #000000;"> inst.get_json(newNode);
                </span><span style="color: #0000ff;">var</span> str =<span style="color: #000000;"> {
                    </span>"text"<span style="color: #000000;"> : Nodeobj.text,
                    </span>"icon"<span style="color: #000000;"> : Nodeobj.icon,
                    </span>"type"<span style="color: #000000;"> : Nodeobj.type,
                    </span>"parentid"<span style="color: #000000;"> : clickedNode.id,
                    </span>"tablelist" : <span style="color: #0000ff;">null</span><span style="color: #000000;">
                };
                console.log(str)
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> var selectedTab = $('#t_map').tabs('getSelected');</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> var pageTitle = selectedTab.panel('options').title;</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> $.post("lwy/createNode.do", {changedata : JSON.stringify(str),pageTitle:pageTitle}, function(data) {});</span>
<span style="color: #000000;">                inst.edit(newNode);
                inst.open_node(obj.reference);
            }
        },</span>'edit'<span style="color: #000000;">: {
            </span>'label': '编辑'<span style="color: #000000;">,
            </span>'action': <span style="color: #0000ff;">function</span><span style="color: #000000;"> (obj) {

            }
        },
        </span>'delete'<span style="color: #000000;">: {
            </span>'label': '删除'<span style="color: #000000;">,
            </span>'action': <span style="color: #0000ff;">function</span><span style="color: #000000;"> (obj) {

            }
        }
    }
 
    </span><span style="color: #0000ff;">if</span> (node.type === 'department'<span style="color: #000000;">) {
        </span><span style="color: #0000ff;">delete</span> items.item2;  <span style="color: #008000;">//</span><span style="color: #008000;">删除节点 items</span>
    } <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (node.type === 'user'<span style="color: #000000;">) {
        </span><span style="color: #0000ff;">delete</span> items.item1;  <span style="color: #008000;">//</span><span style="color: #008000;">删除节点 items</span>
<span style="color: #000000;">    }
 
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> items;
}</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>