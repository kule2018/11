<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修vue-cli3构建ts项目' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>vue-cli3构建ts项目</center></div><div class='banquan'>原文出处:本文由博客园博主Jade_g提供。<br/>
原文连接:https://www.cnblogs.com/gxp69/p/11302095.html</div><br>
    <h2>1、构建项目</h2>
<div class="cnblogs_code">
<pre><code>vue create xxx</pre>
</div>
<p><img src="./images/vue-cli3构建ts项目0.png" alt="" /></p>
<p>上面的第一条，也就是 aaa 这一个选项在你第一次创建项目的时候是并不会出现的，只有你第一次创建完成项目后回提示你保存为默认配置模板，下次新建项目的时候就可以使用你选用的配置快速新建项目了，不需要再重新选择配置项目了。</p>
<p>第二条选项便是 vue cli 3 默认的项目模板，包含 babel 和 eslint。</p>
<p>第三条选项便是自主选择你项目所需的配置。</p>
<p>这里由于默认模板没有啥展示的必要所以我们便选择手动配置。</p>
<p><strong>选择项目配置：</strong></p>
<p><strong><img src="./images/vue-cli3构建ts项目1.png" alt="" /></strong></p>
<p>这里我们可以选择我们需要的配置选项，选择完成后回车进入下一步。</p>
<p>在选择功能后，会询问更细节的配置</p>
<p><img src="./images/vue-cli3构建ts项目2.png" alt="" /></p>
<p>&nbsp;</p>
<p>TypeScript：</p>
<ol class=" list-paddingleft-2">
<li>
<p>是否使用class风格的组件语法：Use class-style component syntax?</p>
</li>
<li>
<p>是否使用babel做转义：Use Babel alongside TypeScript for auto-detected polyfills?</p>
</li>
</ol>
<p>Router:</p>
<p>　　1.是否使用history模式：Use history mode for router?</p>
<p>CSS Pre-processors：</p>
<ol class=" list-paddingleft-2">
<li>
<p>选择CSS 预处理类型：Pick a CSS pre-processor</p>
</li>
</ol>
<p>Linter / Formatter</p>
<ol class=" list-paddingleft-2">
<li>
<p>选择Linter / Formatter规范类型：Pick a linter / formatter config</p>
</li>
<li>
<p>选择lint方式，保存时检查/提交时检查：Pick additional lint features</p>
</li>
</ol>
<p>Testing</p>
<ol class=" list-paddingleft-2">
<li>
<p>选择Unit测试方式</p>
</li>
<li>
<p>选择E2E测试方式</p>
</li>
</ol>
<p>选择 Babel, PostCSS, ESLint 等自定义配置的存放位置 Where do you prefer placing config for Babel, PostCSS, ESLint, etc.?</p>
<p>&nbsp;<img src="./images/vue-cli3构建ts项目3.png" alt="" /></p>
<p>创建成功。</p>
<h2>2、修改配置</h2>
<p>&nbsp;vue-cli3脚手架生成项目目录说明</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">│  .browserslistrc
│  .gitignore
│  .postcssrc.js </span><span style="color: #008000;">//</span><span style="color: #008000;"> postcss 配置</span>
<span style="color: #000000;">│  babel.config.js
│  package.json </span><span style="color: #008000;">//</span><span style="color: #008000;"> 依赖</span>
│  README.md <span style="color: #008000;">//</span><span style="color: #008000;"> 项目 readme</span>
│  tsconfig.json <span style="color: #008000;">//</span><span style="color: #008000;"> ts 配置</span>
│  tslint.json <span style="color: #008000;">//</span><span style="color: #008000;"> tslint 配置</span>
│  vue.config.js <span style="color: #008000;">//</span><span style="color: #008000;"> webpack 配置（~自己新建~）</span>
│  yarn.<span style="color: #0000ff;">lock</span><span style="color: #000000;">
│  
├─</span><span style="color: #0000ff;">public</span> <span style="color: #008000;">//</span><span style="color: #008000;"> 静态页面</span>
<span style="color: #000000;">│  │&mdash;favicon.ico
│  │&mdash;index.html
│ 
├─src </span><span style="color: #008000;">//</span><span style="color: #008000;"> 主目录</span>
│  ├─assets <span style="color: #008000;">//</span><span style="color: #008000;"> 静态资源</span>
<span style="color: #000000;">│  │      logo.png
│  │  
│  ├─components
│  │      HelloWorld.vue
│  │ 
│  │─views </span><span style="color: #008000;">//</span><span style="color: #008000;"> 页面</span>
<span style="color: #000000;">│  │      About.vue
│  │      Home.vue
│  │ 
│  │  App.vue </span><span style="color: #008000;">//</span><span style="color: #008000;"> 页面主入口</span>
<span style="color: #000000;">│  │ 
│  │  main.ts </span><span style="color: #008000;">//</span><span style="color: #008000;"> 脚本主入口</span>
<span style="color: #000000;">│  │ 
│  ├─router </span><span style="color: #008000;">//</span><span style="color: #008000;"> 路由配置</span>
<span style="color: #000000;">│  │      index.ts
│  │  
│  │  registerServiceWorker.ts </span><span style="color: #008000;">//</span><span style="color: #008000;"> PWA 配置</span>
<span style="color: #000000;">│  │ 
│  │  shims</span>-<span style="color: #000000;">tsx.d.ts
│  │  shims</span>-<span style="color: #000000;">vue.d.ts
│  │      </span><span style="color: #000000;">   
│  │  
│  ├─store </span><span style="color: #008000;">//</span><span style="color: #008000;"> vuex 配置</span>
<span style="color: #000000;">│  │      index.ts
│  │      
│  ├─typings </span><span style="color: #008000;">//</span><span style="color: #008000;"> 全局注入（~自己新建~）</span>
<span style="color: #000000;">│  │  
│  ├─utils </span><span style="color: #008000;">//</span><span style="color: #008000;"> 工具方法(axios封装，全局方法等)（~自己新建~）</span>
<span style="color: #000000;">│  
│          
└─tests </span><span style="color: #008000;">//</span><span style="color: #008000;"> 测试用例</span>
<span style="color: #000000;">    ├─e2e
    │  ├─plugins
    │  │      index.js
    │  │      
    │  ├─specs
    │  │      test.js
    │  │      
    │  └─support
    │          commands.js
    │          index.js
    │          
    └─unit
            HelloWorld.spec.ts        </span></pre>
</div>
<h3>1、在.browserslistrc文件中添加</h3>
<div class="cnblogs_code">
<pre><code>last <span style="color: #800080;">3</span><span style="color: #000000;"> ie versions,
not ie </span>&lt;= <span style="color: #800080;">8</span></pre>
</div>
<p><code>其它配置，请去<a href="https://github.com/browserslist/browserslist">https://github.com/browserslist/browserslist</a>。npx browserslist</code><span><span>在项目目录中</span><span>运行</span><span>以查看查询选择了哪些浏览器</span></span></p>
<h3><span><span>2、tslint配置</span></span></h3>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;"> 关闭console</span>
<span style="color: #800000;">"</span><span style="color: #800000;">no-console</span><span style="color: #800000;">"</span>: [<span style="color: #0000ff;">true</span>, <span style="color: #800000;">"</span><span style="color: #800000;">log</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">dir</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">table</span><span style="color: #800000;">"</span><span style="color: #000000;">]
    
</span><span style="color: #008000;">//</span><span style="color: #008000;"> tslint的函数前后空格：</span>
<span style="color: #800000;">"</span><span style="color: #800000;">space-before-function-paren</span><span style="color: #800000;">"</span>: [<span style="color: #800000;">"</span><span style="color: #800000;">error</span><span style="color: #800000;">"</span><span style="color: #000000;">, {
  </span><span style="color: #800000;">"</span><span style="color: #800000;">anonymous</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">always</span><span style="color: #800000;">"</span><span style="color: #000000;">,
  </span><span style="color: #800000;">"</span><span style="color: #800000;">named</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">always</span><span style="color: #800000;">"</span><span style="color: #000000;">,
  </span><span style="color: #800000;">"</span><span style="color: #800000;">asyncArrow</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">always</span><span style="color: #800000;">"</span><span style="color: #000000;">
}]


</span><span style="color: #008000;">//</span><span style="color: #008000;"> tslint分号的配置：</span>
<span style="color: #800000;">"</span><span style="color: #800000;">semicolon</span><span style="color: #800000;">"</span>: [<span style="color: #0000ff;">true</span>, <span style="color: #800000;">"</span><span style="color: #800000;">never</span><span style="color: #800000;">"</span>]</pre>
</div>
<p>其它规则：<a href="https://palantir.github.io/tslint/rules/">https://palantir.github.io/tslint/rules/</a></p>
<h3>3、路由处理逻辑（登录验证、拦截等）</h3>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;"> main.ts文件</span>
<span style="color: #000000;">
router.beforeEach((to: any, </span><span style="color: #0000ff;">from</span>: any, next: any) =&gt;<span style="color: #000000;"> {
  </span><span style="color: #0000ff;">if</span> (to.name === <span style="color: #800000;">'</span><span style="color: #800000;">login</span><span style="color: #800000;">'</span><span style="color: #000000;">) {
    next({name: </span><span style="color: #800000;">'</span><span style="color: #800000;">home/index</span><span style="color: #800000;">'</span><span style="color: #000000;">})
  } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
    next()
  }
})</span></pre>
</div>
<h3>4、axios改造</h3>
<div class="cnblogs_code">
<pre><code>npm i axios --save</pre>
</div>
<p>src下新建axios.d.ts axios.config.ts文件</p>
<div class="cnblogs_code">
<pre><code>//axios.config.ts<br />import axios, { AxiosInstance } <span style="color: #0000ff;">from</span> <span style="color: #800000;">'</span><span style="color: #800000;">axios</span><span style="color: #800000;">'</span><span style="color: #000000;">

declare module </span><span style="color: #800000;">'</span><span style="color: #800000;">Vue/types/vue</span><span style="color: #800000;">'</span><span style="color: #000000;"> {
    </span><span style="color: #0000ff;">interface</span><span style="color: #000000;"> Vue {
        $axios: AxiosInstance
    }
}</span></pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;"> main.ts文件</span></pre>
<pre><code>import Vue from 'vue';<br />import axios from 'axios';<br /><br />Vue.prototype.$axios = axios;<br /><br />/**<br /> * 创建 axios 实例<br /> */<br />const service = axios.create({<br />    timeout: 3000,<br />    baseURL: 'http://xxx',<br />});<br /><br />/**<br /> * req 拦截器<br /> */<br />service.interceptors.request.use((config: object): object =&gt; {<br />    return config<br />}, (error: any): object =&gt; {<br />    return Promise.reject(error)<br />});<br /><br />/**<br /> * res 拦截器<br /> */<br />service.interceptors.response.use((response: any) =&gt; {<br />    const res = response.data;<br />    if (res.error) {<br />        if (process.env.NODE_ENV !== 'production') {<br />            console.error(res);<br />        }<br />        return Promise.reject(res);<br />    }<br />    return Promise.resolve(res);<br />});</pre>
</div>
<div class="cnblogs_code">
<pre><code>// main.ts<br />import <span style="color: #800000;">'</span><span style="color: #800000;">./axios.config</span><span style="color: #800000;">'</span>;</pre>
</div>
<h3>4、store改造</h3>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">├── index.html
├── main.js
├── components
│   ├── App.vue
│   └── ...
└── store
    ├── index.ts          # 我们组装模块并导出 store 的地方
    ├── actions.ts        # 根级别的 action
    ├── mutations.ts      # 根级别的 mutation
    └── modules
        ├── cart.ts      # 购物车模块<br /></span></pre>
</div>
<p>&nbsp;</p>
<p>使用：</p>
<ul>
<li>使用<code>module</code>形式</li>
<li>全局的一些操作，方法，放入<code>store</code>中，业务逻辑尽量少放，项目全局方法可以放入。例如：<code>cookie</code>,&nbsp;<code>global cache</code></li>
</ul>
<p><code>　　action(异步)</code>: api的操作， 调用方式：<code>this.$store.dispatch(functionName, data)</code></p>
<p><code>　　mutations(同步)</code>: dom相关操作，方法名一般使用常量，<br />　　调用方式:&nbsp;<code>this.$store.commit(mutationsName, data)</code></p>
<div class="jb51code">
<pre class="brush:js;">　　this.$store.getters[XXX] =&gt; this.$store.getters[namespaced/XXX]
　　this.$store.dispatch(XXX, {}) =&gt; this.$store.dispatch(namespaced/XXX, {})
　　this.$store.commit(XXX, {}) =&gt; this.$store.commit(namespaced/XXX, {})</pre>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;">store/index.ts</span>
import Vue <span style="color: #0000ff;">from</span> <span style="color: #800000;">'</span><span style="color: #800000;">vue</span><span style="color: #800000;">'</span><span style="color: #000000;">;
import Vuex </span><span style="color: #0000ff;">from</span> <span style="color: #800000;">'</span><span style="color: #800000;">vuex</span><span style="color: #800000;">'</span><span style="color: #000000;">;
import cart </span><span style="color: #0000ff;">from</span> <span style="color: #800000;">'</span><span style="color: #800000;">./modules/cart</span><span style="color: #800000;">'</span><span style="color: #000000;">;

Vue.use(Vuex);

export </span><span style="color: #0000ff;">default</span> <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vuex.Store({
  modules: {
    cart,
  },
});</span></pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;"> cart.ts</span>
import {ActionContext} <span style="color: #0000ff;">from</span> <span style="color: #800000;">'</span><span style="color: #800000;">vuex</span><span style="color: #800000;">'</span><span style="color: #000000;">;
export </span><span style="color: #0000ff;">interface</span><span style="color: #000000;"> State {
    token: </span><span style="color: #0000ff;">string</span><span style="color: #000000;">;
}

</span><span style="color: #0000ff;">const</span> state: State =<span style="color: #000000;"> {
    token: </span><span style="color: #800000;">''</span><span style="color: #000000;">,
};

</span><span style="color: #008000;">//</span><span style="color: #008000;"> getters</span>
<span style="color: #0000ff;">const</span> getters =<span style="color: #000000;"> {
    toUpperToken: (state: State) </span>=&gt;<span style="color: #000000;"> {
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> state.token.toUpperCase();
    },
};

</span><span style="color: #008000;">//</span><span style="color: #008000;"> actions</span>
<span style="color: #0000ff;">const</span> actions =<span style="color: #000000;"> {
    setTokenAsync({ commit }: ActionContext</span>&lt;State, State&gt;<span style="color: #000000;">, payload: any) {
        setTimeout(() </span>=&gt;<span style="color: #000000;"> {
            commit(</span><span style="color: #800000;">'</span><span style="color: #800000;">setToken</span><span style="color: #800000;">'</span><span style="color: #000000;">, payload);
        }, </span><span style="color: #800080;">1000</span><span style="color: #000000;">);
    },
};

</span><span style="color: #008000;">//</span><span style="color: #008000;"> mutations</span>
<span style="color: #0000ff;">const</span> mutations =<span style="color: #000000;"> {
    setToken(state: State, payload: any) {
        state.token </span>=<span style="color: #000000;"> payload;
    },
};

export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
    namespaced: </span><span style="color: #0000ff;">true</span><span style="color: #000000;">,
    state,
    getters,
    actions,
    mutations,
};</span></pre>
</div>
<h3>5、vue.config.js配置</h3>
<p><a href="https://cli.vuejs.org/zh/config/#vue-config-js">　　https://cli.vuejs.org/zh/config/#vue-config-js</a>所列出的属性，可以直接配置。其它属性可以通过<a href="https://cli.vuejs.org/zh/guide/webpack.html#%E7%AE%80%E5%8D%95%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F" target="_blank">configureWebpack</a>、<a href="https://cli.vuejs.org/zh/guide/webpack.html#%E9%93%BE%E5%BC%8F%E6%93%8D%E4%BD%9C-%E9%AB%98%E7%BA%A7" target="_blank">chainWebpack</a>配置。</p>
<p>&nbsp;</p>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>