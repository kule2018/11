<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修web交互方式---ajax' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>web交互方式---ajax</center></div><div class='banquan'>原文出处:本文由博客园博主Frank丶HQ提供。<br/>
原文连接:https://www.cnblogs.com/hq-fighting/p/11150309.html</div><br>
    <p><span style="font-family: 宋体; font-size: 16px;">知识不怕旧，关键在于在旧知识的基础上不断创新与提高！</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">引入一个问题：打开一个浏览器，在地址栏输入一个网址，按下 enter 键到看到整个页面，中间都经历了哪些事情?</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">这是一个前端的面试题，相信很多朋友都知道，知道了解的朋友可以略过这一块。</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">1、HTTP请求阶段：向服务器发送请求</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　浏览器首先向DNS域名解析服务器发送请求，DNS域名解析服务器对该地址进行解析，根据浏览器请求地址中的域名，到DNS服务器中找到对应的服务器外网IP地址，进而通过找到的外网IP，向对应的服务器发送请求，通过URL地址中携带的端口号，找到服务器上对应的服务，以及服务所管理的项目源文件；</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">2、HTTP响应阶段：服务器把客户端需要的内容准备好，并且返回给客户端</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　服务器端根据请求地址中的路径名称、问号传参或者哈希值，把客户端需要的内容进行准备和处理，把准备的内容响应给客户端；</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　注意：如果请求的是HTML或者CSS等这样的资源文件，服务器返回的是资源文件中的源代码</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">3、浏览器渲染阶段</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　客户端浏览器接受到服务器返回的源代码，基于自己内部的渲染引擎（内核）开始进行页面的绘制和渲染。</span></p>
<p><img src="./images/web交互方式---ajax0.png" alt="" /></p>
<p><span style="font-family: 宋体; font-size: 16px;">URL，在上诉中一个很重要的媒介：https://i.cnblogs.com/helloworld.html?name=xxx&amp;sex=xxx#boy，我们再来认识认识这个东西是什么？</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">1、URL / URN / URI</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　URI = URL + URN</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　URI：统一资源标识符</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　URL：统一资源定位符</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　URN：统一资源名称</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">2、传输协议（http）：用来传输客户端和服务器端交互的信息（这是个很重要的东西）</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　HTTP：超文本传输协议（除了传递普通的文本，还可以传递文件流或者进制编码等信息），是目前最常用的WEB传输协议</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　HTTPS：基于SSL（Secure Sockets Layer 安全套接层）加密的HTTP传输协议，比HTTP更加的安全</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">扩展：FTP：文件传输协议，一般用来实现资源文件在服务器上的上传下载</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">3、域名：i.cnblogs.com</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　这个没什么好说的，基本就是为了语义化，好记</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">4、端口号（8080）：用来区分同一台服务器上不同服务的标识</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　HTTP&nbsp; =&gt;&nbsp; 默认端口号 80</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　HTTPS&nbsp; =&gt;&nbsp; 默认端口号 443</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　FTP&nbsp; =&gt;&nbsp; 默认端口号 21</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　端口号范围：0~65535之间</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">5、请求路径名称：/helloworld.html</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　（1）有后缀信息：/helloworld.html</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　　一般都是请求当前服务对应的项目目录中，helloworld.html页面</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　（2）无后缀信息：/helloworld</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　　一般都不是用来请求资源文件的，而是用于AJAX数据请求的接口地址</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">6、问号传参及哈希值：?name=xxx&amp;sex=xxx#boy</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　在HTTP事务中，问号传参是客户端把信息传递给服务器的一种方式(也有可能是跳转到某一个页面，把参数值传递给页面用来标识的)</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　哈希值一般都跟客户端服务器交互没啥关系，主要用于页面中的锚点定位和HASH路由切换</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">看了这么多是不是觉得啰嗦了呢，别急，正题这不就来了吗！</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">&nbsp;AJAX ：async javascript and xml 异步的 JS 和 XML&nbsp;</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">1、操作</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #000000;">// 创建AJAX实例：IE6中是不兼容的（忽略这万恶的）
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;">let xhr = new XMLHttpRequest();
</span><span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> <span style="color: #000000;">// 打开请求：发送请求之前的一些配置项
</span><span style="color: #008080;"> 5</span> <span style="color: #000000;">// 1.HTTP METHOD 请求方式
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">//  GET/DELETE/HEAD/OPTIONS/TRACE/CONNECT/POST/PUT
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">// 2.URL 向服务器端发送请求的API
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">// 3.ASYNC 设置AJAX请求的同步异步，默认是异步（写TRUE也是异步），FALSE是同步，一般都使用异步编程，防止阻塞后续代码执行
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">// 4.USER-NAME/USER-PASS：用户名密码，一般不用
</span><span style="color: #008080;">10</span> <span style="color: #000000;">xhr.open([HTTP METHOD],[URL],[ASYNC],[USER-NAME],[USER-PASS]);
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> <span style="color: #000000;">// 事件监听：一般监听的都是 READY-STATE-CHANGE 事件（AJAX状态改变事件），基于这个事件可以获取服务器返回的响应头响应主体内容
</span><span style="color: #008080;">13</span> <span style="color: #000000;">xhr.onreadystatechange=()=&gt;{
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    if(xhr.readyState===4 &amp;&amp; xhr.status===200){
</span><span style="color: #008080;">15</span> <span style="color: #000000;">       xhr.responseText;
</span><span style="color: #008080;">16</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">17</span> <span style="color: #000000;">};
</span><span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span> <span style="color: #000000;">// 发送AJAX请求：从这步开始，当前AJAX任务开始，如果AJAX是同步的，后续代码不会执行，要等到AJAX状态成功后在执行，反之异步不会
</span><span style="color: #008080;">20</span> xhr.send([请求主体内容]);</pre>
</div>
<p><span style="font-family: 宋体; font-size: 16px;">2、HTTP请求方式</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　所有的请求都可以给服务器端传递内容，也都可以从服务器端获取内容</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　GET：从服务器端获取数据(给少拿多)</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　POST：向服务器端推送数据(给多拿少)</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　DELETE：删除服务器端的某些内容（一般是删除一些文件）</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　PUT：向服务器上存放一些内容（一般也是存放文件）</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　HEAD：只想获取服务器返回的响应头信息，不要响应主体中的内容</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　OPTIONS：一般使用它向服务器发送一个探测性请求，如果服务器端返回的信息了，说明当前 &gt; 客户端和服务器端建立了连接，我们可以继续执行其它请求了</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">3、GET VS POST（重点嘛）</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　（1）传递给服务器信息的方式不一样</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span> <span style="color: #000000;">// GET是基于URL地址&ldquo;问号传参&rdquo;的方式把信息传递给服务器
</span><span style="color: #008080;">2</span> xhr.open('GET','/haha/list?xxx=xxx<span style="color: #ff0000;">&amp;xxx</span><span style="color: #000000;">=xxx')
</span><span style="color: #008080;">3</span> 
<span style="color: #008080;">4</span> <span style="color: #000000;">// POST是基于&ldquo;请求主体&rdquo;把信息传递给服务器
</span><span style="color: #008080;">5</span> xhr.send('xxx=xxx<span style="color: #ff0000;">&amp;xxx</span>=xxx')</pre>
</div>
<p>　<span style="font-family: 宋体; font-size: 16px;">（2）GET不安全，POST相对安全</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　（3）GET会产生不可控制的缓存,POST不会</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">4、AJAX状态</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- 0 ：刚开始创建XHR，还没有发送</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- 1 ：已经执行了OPEN这个操作</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- 2 ：已经发送AJAX请求（AJAX任务开始），响应头信息已经被客户端接收了（响应头中包含了：服务器的时间、返回的HTTP状态码...）</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- 3 ：响应主体内容正在返回</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- 4 ：响应主体内容已经被客户端接收</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">5、HTTP网络状态码</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　根据状态码能够清楚的反映出当前交互的结果及原因</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- 200 OK 成功(只能证明服务器成功返回信息了，但是信息不一定是你业务需要的)</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- 301 Moved Permanently 永久转移（永久重定向）</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- 302 Move temporarily 临时转移（临时重定向 =&gt;307）</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- 304 Not Modified 设置缓存</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- 400 Bad Request 请求参数错误</span><br /><span style="font-family: 宋体; font-size: 16px;">　- 401 Unauthorized 无权限访问</span><br /><span style="font-family: 宋体; font-size: 16px;">　- 404 Not Found  找不到资源(地址不存在)</span><br /><span style="font-family: 宋体; font-size: 16px;">　- 413 Request Entity Too Large 和服务器交互的内容资源超过服务器最大限制</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- 500 Internal Server Error 未知的服务器错误</span><br /><span style="font-family: 宋体; font-size: 16px;">　- 503 Service Unavailable 服务器超负荷</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">6、XHR的属性和方法</span><br /><span style="font-family: 宋体; font-size: 16px;">　- xhr.response  响应主体内容</span><br /><span style="font-family: 宋体; font-size: 16px;">　- xhr.responseText 响应主体的内容是字符串（JSON或者XML格式字符串都可以）</span><br /><span style="font-family: 宋体; font-size: 16px;">　- xhr.responseXML 响应主体的内容是XML文档</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- xhr.status 返回的HTTP状态码</span><br /><span style="font-family: 宋体; font-size: 16px;">　- xhr.statusText 状态码的描述</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- xhr.timeout 设置请求超时的时间</span><br /><span style="font-family: 宋体; font-size: 16px;">　- xhr.withCredentials 是否允许跨域（FALSE）</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- xhr.abort() 强制中断AJAX请求</span><br /><span style="font-family: 宋体; font-size: 16px;">　- xhr.getAllResponseHeaders() 获取所有响应头信息</span><br /><span style="font-family: 宋体; font-size: 16px;">　- xhr.getResponseHeader([key]) 获取KEY对应的响应头信息</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">　- xhr.open() 打开URL请求</span><br /><span style="font-family: 宋体; font-size: 16px;">　- xhr.overrideMimeType() 重写MIME类型</span><br /><span style="font-family: 宋体; font-size: 16px;">　- xhr.send() 发送AJAX请求</span><br /><span style="font-family: 宋体; font-size: 16px;">　- xhr.setRequestHeader() 设置请求头</span></p>
<p><span style="font-family: 宋体; font-size: 16px;">后面就是让我们动动自己的小手，实现你自己代码吧！</span></p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>