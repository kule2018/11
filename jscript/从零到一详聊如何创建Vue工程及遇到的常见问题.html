<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修从零到一详聊如何创建Vue工程及遇到的常见问题' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>从零到一详聊如何创建Vue工程及遇到的常见问题</center></div><div class='banquan'>原文出处:本文由博客园博主pubdreamcc提供。<br/>
原文连接:https://www.cnblogs.com/dreamcc/p/10766750.html</div><br>
    <h2 id="前言">前言</h2>
<blockquote>
<p>本文也会在github上我的web-study仓库中同步更新，欢迎star。 戳这里，<a href="https://github.com/pubdreamcc/web-study/tree/master/Vue">传送</a></p>
</blockquote>
<h2 id="准备工作">准备工作</h2>
<ol>
<li><p>判断是否需要翻墙或安装镜像，镜像一般可安装国内淘宝镜像，详情可看这里：<a href='https://registry.npm.taobao.org'>cnpm</a><br />
<code>npm install -g cnpm --registry=&quot;cnpm&quot;</code>全局安装淘宝cnpm。</p></li>
<li><p>开发工具选择很多，VUE无专用开发工具，开发项目多以SPA形式体现，本例使用 Visual Studio Code。</p></li>
<li><p>调试工具选择很多，官方推荐 vue-devtools 。</p>
<blockquote>
<p>安装方法：翻墙或者github主页。<strong>https://github.com/vuejs/vue-devtools</strong>下载压缩包，解压到Chrome扩展程序。</p>
</blockquote></li>
</ol>
<h2 id="环境搭建">环境搭建</h2>
<ol>
<li><p>安装 Node.js 10.15.3, npm包管理工具（高版本node.js自带npm）。</p>
<blockquote>
<p>安装完成后，DOS命令行输入命令检查安装情况npm -v,出现npm版本号即可。<br />
下载地址<strong>https://nodejs.org/en/download/</strong></p>
</blockquote></li>
<li><p>全局安装 vue-cli脚手架</p>
<p>DOS命令行安装(-g 参数表示安装至 npm 工作路径,以后任意位置均可访问)<br />
<strong>npm install -g vue-cli</strong></p></li>
<li><p>安装 开发工具 Visual Studio Code</p>
<ol>
<li><p><strong>下载地址 https://code.visualstudio.com/Download</strong></p>
<blockquote>
<p><strong><em>注意 User Installer / System Installer 不同</em></strong>（建议安装系统版本）</p>
</blockquote></li>
<li><p>安装 <strong>Vetur</strong> ,<strong>vue 2 snippets</strong>插件</p>
<p>文件 -&gt; 首选项 -&gt; 扩展 -&gt; 搜索 -&gt; 输入 Vetur/vue 2 snippets -&gt; 安装</p></li>
<li><p>安装 语言包（视个人喜好）</p>
<p>文件 -&gt; 首选项 -&gt; 扩展 -&gt; 搜索 -&gt; 输入 Chinese(Simplified)... -&gt; 安装</p></li>
<li><p>打开文件夹... 开发已存在项目</p></li>
</ol></li>
<li><p>安装 vue-devtools。</p>
<ol>
<li><p>下载 https://github.com/vuejs/vue-devtools</p></li>
<li><p>DOS 命令进入解压后目录<br />
修改 <code>\shells\chrome\manifest.json</code>中 background 节点 persistent 值为 true</p></li>
<li><p>运行 npm install 命令安装依赖包。<br />
<strong><em>进度条等待完成，大约5-15分钟，必要使用cnpm</em></strong></p></li>
<li><p>运行 npm run build(一定要执行这步，不然后面会报错)</p></li>
<li><p>启动 Google Chrome -&gt; 输入 chrome://extensions/ -〉确认打开“开发者模式” -&gt; 加载已解压扩展程序 -&gt; 选择 shells\chrome 确定即可安装</p></li>
</ol></li>
</ol>
<h2 id="初始化项目">初始化项目</h2>
<blockquote>
<p>初始化项目有多种方式，建议采用 Webpack 模板模式</p>
</blockquote>
<ol>
<li><p>进入需要创建Vue项目文件夹，打开DOS命令行输入：<strong>vue init webpack 项目名称</strong></p></li>
<li><p>然后终端会出现下图“一问一答”模式</p>
<blockquote>
<p>“Project name”：这个是项目名称，默认是输入时的那个名称，想改的话直接输入修改，也可以直接回车</p>
</blockquote>
<blockquote>
<p>“Install vue-router”:是否需要vue-router，这里默认选择使用，这样生成好的项目就会有相关的路由配置文件</p>
</blockquote>
<blockquote>
<p>“Use ESLint to lint your code”:是否使用ESLint，刚才说了我们这个项目需要使用所以也是直接回车，默认使用，这样会生成相关的ESLint配置</p>
</blockquote>
<blockquote>
<p>“Setup unit tests with Karma + Moch?”: 是否安装单元测试。由于我们现在还没有单元测试，所以这里选择的是”N”</p>
</blockquote>
<blockquote>
<p>“Setup e2e tests with Nightwatch”：是否安装e2e测试，这里我也同样选择的是“N”</p>
</blockquote></li>
<li><p>下载依赖包</p>
<p>cd ‘项目文件’ 终端执行命令：npm install .这个过程会生成一个<strong>node_modules</strong> 文件夹</p></li>
<li><p>调试项目</p>
<p>终端输入：npm run dev/start</p></li>
<li><p>打开Google Chrome ,默认项目地址:localhost://8080,访问即可。F12启用开发者调试工具，调试菜单栏选择 Vue</p></li>
</ol>
<h2 id="开发过程">开发过程</h2>
<ol>
<li><p>相关文件说明</p>
<p>build和config &gt;webpack配置相关文件</p>
<p>node_modules&gt;项目需要的模板文件</p>
<p>src/main.js&gt;入口js文件</p>
<p>src/assets&gt;公共的样式，图片文件</p>
<p>src/components&gt;各种vue组件文件</p>
<p>src/App.vue&gt;页面主组件</p>
<p>src/router&gt;vue-router 路由配置文件</p>
<p>static&gt;静态资源文件（不会被webpack处理）</p>
<p>.eslintrc.js&gt;eslint检查配置文件</p>
<p>.editorconfig&gt;代码编辑环境配置文件</p>
<p>.eslintignore&gt;eslint检查忽略文件</p>
<p>.babelrc&gt;babel编译参数配置文件</p>
<p>index.html&gt;主页，项目入口文件</p>
<p>package.json&gt;项目配置文件，描述项目信息和依赖</p>
<p>README.md&gt;项目的说明文档</p></li>
<li><p>新增组件</p>
<p>在 \src\components 目录新建 vue 文件(每一个.vue文件都是一个单独vue组件，用来实现页面特定的功能界面，包括基本的骨架<strong>html+CSS+js</strong>)。例如 Hellovue.vue，vue文件代码标准模板样式如下：</p></li>
</ol>
<pre><code><code>        &lt;template&gt;
        &lt;div id=&quot;...&quot;&gt;
            组件html模板
        &lt;/div&gt;
        &lt;/template&gt;

        &lt;style&gt;
            css相关样式
        &lt;/style&gt;

        &lt;script&gt;
        export default {  //默认向外暴露一个对象
            name:&#39;Hellovue&#39;,
            data () {
                return {};// data保存数据必须返回一个对象
            }
        };
        &lt;/script&gt;</code></pre>
<ol>
<li><p>引入组件</p>
<ol>
<li><p>在App.vue主文件中script标签添加<code>import Hellovue form ./components/Hellovue.vue</code>导入子组件。</p></li>
<li><p>组件模板对象添加components属性。</p></li>
<li><p>重启项目即可看到自己定义的组件。</p></li>
<li><p>新增页面（利用vue路由实现）在 \router\index.js 添加新增页面路由</p></li>
</ol></li>
</ol>
<pre><code><code>import Hellovue from &#39;@/components/Hellovue&#39;
...
    {
      path: &#39;/Hellovue&#39;,
      name: &#39;Hellovue&#39;,
      component: Hellovue
    }</code></pre>
<p>在App.vue主页面挂载<code>&lt;router-link to='Hellovue'&gt;跳转我的页面&lt;/router-link&gt;</code>即可</p>
<ol>
<li><p>打包编译</p>
<p>终端运行命令编译<br />
<strong>npm run build</strong><br />
即可产品dist文件，项目上线后只需把dist文件丢到服务器即可。ps:如果本地测试，则需修改webpack生产环境下的<strong>assetsPublicPath</strong>配置</p></li>
</ol>
<h2 id="注意事项">注意事项：</h2>
<ol>
<li>最好使用cnpm代替npm安装依赖，因为开发过程中少部分包如果用npm是无法下载完成，一直卡住，换为cnpm毫无压力记得加上--save选项，否则别人安装的话会缺少包.</li>
<li><p>路径说明</p>
<p>‘/‘, 表示项目根目录</p>
<p>‘./‘，表示当前目录</p>
<p>‘../‘ ，表示上一级目录，可以连续多个，比如‘../../../‘表示往外层退3级目录</p></li>
<li>所有组件的数据都必须放置在data函数返回的对象中，无论是否有数据，否则会报错。</li>
<li>一个template组件下只能有一个并列的div，否则报错。</li>
<li><p>ESLint 格式问题</p>
<ol>
<li><p>vue 创建项目时，ESLint 选择启用时候，因 ESLint 代码检查极其严格，缩进空格数量，尾部空行等皆在检查之列，可以选择关闭。<br />
build/webpack.base.conf.js 注释掉 module-&gt;rules 中 ESLint 规则，关闭代码：<br />
<code>//...(config.dev.useEslint ? [createLintingRule()] : [])</code>,<br />
规范起见，修改 .eslintrc.js 文件 rules 节点，关闭指定格式检查。</p>
<blockquote>
<p>例如<code>'semi': ['off', 'always']</code>, 需要分号的地方即录入，否则 ESLint 强制检查不录入分号。说明参照<strong>https://eslint.org/docs/rules/semi</strong>。随后重新 npm run dev 即可。完整说明参照<strong>https://github.com/standard/standard/blob/master/docs/RULES-zhcn.md</strong>。或者在.eslintignore文件下配置相关忽略ESlint检查的文件格式，如:<code>*.js</code>,eslint则默认忽略根目录下所有的js文件。</p>
</blockquote></li>
<li><p>Tab Size 调整</p>
<p>多数开发工具 Tab Size 默认 4，ESLint 默认 2，需要将开发工具 Tab Size 默认值调为2或关闭 ESLint</p></li>
<li><p>VUE 脚本结束标志 <code>&lt;/script&gt;</code> 或者.vue文件结尾<code>&lt;/style&gt;</code>不能作为文件结尾，其后必须另起一行写入其它代码，必要时插入空行.</p></li>
</ol></li>
</ol>
<h2 id="常见问题">常见问题：</h2>
<ol>
<li><p><code>npm run dev</code> 提示 <code>webpack-dev-server --inline --progress --config build/webpack.dev.conf.js</code></p>
<blockquote>
<p>not found module ‘xxx’</p>
</blockquote>
<p>原因：<strong>依赖库不完整</strong></p>
方案：项目所在目录运行 <code>npm install xxx -S</code> 安装相关依赖包，或按照如下指定安装相关版本，<code>npm install xx@版本号 -S</code>。</li>
<li><p>安装插件提示 <code>npm WARN rollback Rolling back ...... failed (this is probably harmless): EPERM: operation not permitted</code></p>
<p>原因：<strong>npm 权限不足</strong></p>
<p>方案：安装所在目录设置权限</p>
<p><code>npm config set user 0</code></p>
<code>npm config set unsafe-perm true</code></li>
<li><p><code>npm run build</code> 后，打包生成的dist文件本地测试发现404错误。</p>
<p>原因：本地测试当前文件默认路径以‘./’开头，vue配置文件中默认以‘/’开头</p>
<p>方案：设置config/index.js中assetsPublicPath属性值为‘./’</p></li>
</ol>
<h2 id="vue项目启动原理">vue项目启动原理</h2>
<ol>
<li><p>读取 package.json 文件 scripts 内部节点，例 start / build / dev 节点，根据节点值获得相应启动参数</p></li>
<li><p>Webpack配置项目入口文件，出口文件名。</p>
<p>在<code>.\build\webpack.base.conf.js</code>文件配置入口文件module.exports.entry值即项目总入口，默认为 ./src/main.js。</p>
<p>在config/index.js文件中build对象assetsRoot中配置打包后文件名。</p></li>
<li><p>./src/main.js。页面入口js文件，实例化一个Vue，平且引入vue和主入口组件。<strong>componens和template属性缺一不可。</strong></p></li>
</ol>
<pre><code><code>new Vue({
  el: &#39;#app&#39;,
  router,
  components: { App },  // 定义组件映射
  template: &#39;&lt;App/&gt;&#39;   // 定义组件模板
})</code></pre>
<ol>
<li>打包项目提交到Svn或github注意不要提交node_modules文件夹，以免造成资源浪费</li>
</ol>
<h2 id="附件">附件</h2>
<ol>
<li><p>帮助文档</p>
<blockquote>
<p><strong>vuex状态管理库</strong>:https://vuex.vuejs.org/zh/guide/</p>
</blockquote>
<blockquote>
<p><strong>vue中文网</strong>：https://cn.vuejs.org/</p>
</blockquote>
<blockquote>
<p><strong>vue-axios</strong>https://www.npmjs.com/package/vue-axios</p>
</blockquote>
<blockquote>
<p><strong>vue-router</strong>https://router.vuejs.org/zh/</p>
</blockquote>
<blockquote>
<p><strong>webpack中文网</strong>https://www.webpackjs.com/</p>
</blockquote></li>
<li><p>安装 cnpm 淘宝镜像避免翻墙</p>
<p><code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code><br />
完成后安装相关命令可用 cnpm 代替 npm。</p>
<blockquote>
<p><strong>淘宝镜像包与原包存在一定差异，避免莫名其妙问题起见，尽量使用原包命令 npm 安装，可以使用 hosts 翻墙模式。</strong></p>
</blockquote></li>
<li><p>依赖包出错删除重装</p>
<p>删除全局包<br />
<code>npm uninstall -g</code> 包名</p>
<p>删除本地包<br />
<code>npm uninstall</code> 包名</p>
<blockquote>
<p><strong><em>不成功可以采用 remove 代替 uninstall</em></strong></p>
</blockquote></li>
<li><p>引用外部 js</p>
<blockquote>
<p>引用外部 js 有全局引用、VUE 外部引用、VUE 内部引用等多种方法</p>
</blockquote>
<ol>
<li><p>内部引用</p>
<p>A. 安装模块至项目目录（jQuery案例）<br />
<code>npm install jquery --save</code></p>
<p>B. 确认 package.json dependencies 节点已添加依赖<br />
&quot;jquery&quot;: &quot;^3.3.1&quot;,</p>
C. Vue 文件直接引用<br />
import $ from 'jquery'</li>
<li><p>全局引用</p>
<p>A. 在package.json中添加依赖文件<code>dependencies:{&quot;jquery&quot;:&quot;^2.2.1&quot;} //可以自己指定版本</code></p>
<p>B. 重新安装项目依赖<code>cnpm install</code></p>
<p>c. 在webpack.base.conf.js中module.exports中提供一个全局变量:$</p></li>
</ol></li>
</ol>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>