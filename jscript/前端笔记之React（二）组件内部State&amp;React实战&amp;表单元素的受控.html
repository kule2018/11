<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修前端笔记之React（二）组件内部State&amp;React实战&amp;表单元素的受控' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>前端笔记之React（二）组件内部State&amp;React实战&amp;表单元素的受控</center></div><div class='banquan'>原文出处:本文由博客园博主RopeHuo提供。<br/>
原文连接:https://www.cnblogs.com/rope/p/10740834.html</div><br>
    <h1>一、<strong><span style="font-family: 宋体;">组件内部的</span>State</strong></h1>
<h2><strong>1.1 state</strong></h2>
<p>state<span style="font-family: 宋体;">叫状态，是每一个类式组件都有的属性，但函数式组件，没有</span><span style="font-family: Consolas;">state</span><span style="font-family: 宋体;">。</span></p>
<p>state<span style="font-family: 宋体;">是一个对象，什么值都可以定义。</span></p>
<p><span style="color: #ff0000;"><strong>在任何<span style="font-family: 宋体;">类式组件</span><span style="font-family: 宋体;">的构造函数中，可以用</span>this.state = {} <span style="font-family: 宋体;">来给类的实例添加</span><span style="font-family: Consolas;">state</span><span style="font-family: 宋体;">属性，表示&ldquo;状态&rdquo;。</span></strong></span></p>
<p><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">在</span>render()<span style="font-family: 宋体;">函数的</span><span style="font-family: Consolas;">return</span><span style="font-family: 宋体;">中，可以用</span><span style="font-family: Consolas;">{this.state.a}</span><span style="font-family: 宋体;">插值来显示出每一个属性的值</span></strong></span></p>
<p><span style="color: #ff0000;">&nbsp;</span></p>
<div class="cnblogs_code">
<pre><code>import React from "react"<span style="color: #000000;">;

export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class App extends React.Component {
    constructor() {
        super();
        </span><span style="color: #008000;">//</span><span style="color: #008000;">组件的内部状态，state属性</span>
        <span style="color: #ff0000;">this.state = {
            a : 100</span><span style="color: #000000;"><span style="color: #ff0000;">
        }</span>
    }
    render() {
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;
               &lt;h1&gt;<span style="color: #ff0000;">{this.state.a}</span>&lt;/h1&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
}</span></pre>
</div>
<p><img src="./images/前端笔记之React（二）组件内部State&amp;React实战&amp;表单元素的受控0.png" alt="" /></p>
<hr />
<h2><strong>1.2 setState()</strong></h2>
<p><span style="font-family: 宋体;">点击按钮之后，让</span>100<span style="font-family: 宋体;">加</span><span style="font-family: Consolas;">1</span></p>
<div class="cnblogs_code">
<pre><code>import React from "react"<span style="color: #000000;">;
import ReactDOM from </span>"react-dom"<span style="color: #000000;">;
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class App extends React.Component {
    constructor() {
        super();
        </span><span style="color: #0000ff;">this</span>.state =<span style="color: #000000;"> {
            a : </span>100<span style="color: #000000;">
        }
    }
    render() {
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;
            <span style="color: #0000ff;">&lt;button onClick={()=&gt;{
                </span><span style="color: #ff0000;">this.setState({
                    a : this.state.a + 1</span><span style="color: #000000;"><span style="color: #ff0000;">
                })</span>
            <span style="color: #0000ff;">}}</span></span><span style="color: #0000ff;">&gt;按我&lt;/button&gt;</span>
            &lt;h1&gt;{<span style="color: #0000ff;">this</span>.state.a}&lt;/h1&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
}</span></pre>
</div>
<p>注意：</p>
<p>&nbsp;React<span style="font-family: 宋体;">中事件监听，要写在标签上。</span></p>
<p>&nbsp;<span style="font-family: 宋体;">事件名</span>onClick<span style="font-family: 宋体;">而不是</span><span style="font-family: Consolas;">onclick</span><span style="font-family: 宋体;">，注意大写字母。因为</span><span style="font-family: Consolas;">React</span><span style="font-family: 宋体;">将事件名都进行了拓展，所以</span><span style="font-family: Consolas;">onClick</span><span style="font-family: 宋体;">是</span><span style="font-family: Consolas;">React</span><span style="font-family: 宋体;">自己的方法。同理，</span><strong><span style="text-decoration: underline;"><span style="font-family: 宋体;">所有事件名</span>on<span style="font-family: 宋体;">后面的首字母都是大写</span></span></strong><span style="font-family: 宋体;">：</span>onMouseEnter<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">onDoubleClick</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">onKeyDown</span><span style="font-family: 宋体;">。</span></p>
<p>&nbsp;onClick=<span style="font-family: 宋体;">后面紧跟</span><span style="font-family: Consolas;">{}</span><span style="font-family: 宋体;">，表示插值。大括号中是一个箭头函数，这个函数必须是箭头函数，否则</span><span style="font-family: Consolas;">this</span><span style="font-family: 宋体;">错误。</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">onClick</span><span style="color: #0000ff;">={</span><span style="color: #ff0000;">()=&gt;{ }</span>}&gt;<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p>setState<span style="font-family: 宋体;">是定义在</span><span style="font-family: Consolas;">React.Component</span><span style="font-family: 宋体;">类中的方法，所以任何一个组件都能够无脑调用</span><span style="font-family: Consolas;">this.setState()</span><span style="font-family: 宋体;">。表示&ldquo;设置</span><span style="font-family: Consolas;">state</span><span style="font-family: 宋体;">&rdquo;。</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">this</span>.setState(<span style="color: #ff0000;">{</span>要设置的k : 新的v<span style="color: #ff0000;">}</span>);</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong><span style="text-decoration: underline;">setState</span></strong></span><span style="font-family: 宋体;">不仅能够改变实例的</span>state<span style="font-family: 宋体;">的属性值，</span><span style="color: #ff0000;"><strong><span style="text-decoration: underline;"><span style="font-family: 宋体;">而且能产生视图刷新</span></span></strong></span><span style="font-family: 宋体;">。而如果不用</span>setState()<span style="font-family: 宋体;">，只是让</span><span style="font-family: Consolas;">state</span><span style="font-family: 宋体;">的属性值进行改变，视图是不刷新的。</span></p>
<p align="justify">错误的：</p>
<div class="cnblogs_code">
<pre><code>export <span style="color: #0000ff;">default</span><span style="color: #000000;"> class App extends React.Component {
    constructor() {
        super();
        </span><span style="color: #0000ff;">this</span>.state =<span style="color: #000000;"> {
            a : </span>100<span style="color: #000000;">
        }
    }
    render() {
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;
            &lt;button onClick={()=&gt;<span style="color: #000000;">{
                </span><span style="color: #ff0000;">this.state.a++</span><span style="color: #000000;"><span style="color: #ff0000;">;</span>
            }}</span>&gt;按我&lt;/button&gt;
            &lt;h1&gt;{<span style="color: #0000ff;">this</span>.state.a}&lt;/h1&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
}</span></pre>
</div>
<hr />
<h2><strong>1.3<span style="font-family: 宋体;">提炼出事件处理函数</span></strong></h2>
<p><span style="font-family: 宋体;">之前的</span>onClick<span style="font-family: 宋体;">后面直接跟上了</span><span style="font-family: Consolas;">{()=&gt;{}}</span><span style="font-family: 宋体;">，实际上可以提出来，封装成函数。</span></p>
<div class="cnblogs_code">
<pre><code>import React from "react"<span style="color: #000000;">;
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class App extends React.Component{
    constructor(){
        super();
        </span><span style="color: #0000ff;">this</span>.state =<span style="color: #000000;"> {
            a : </span>100<span style="color: #000000;">
        }
    }
<span style="color: #0000ff;">    add(){
        </span></span><span style="color: #ff0000;">this.setState({
            a:this.state.a + 1</span><span style="color: #000000;"><span style="color: #ff0000;">
        });</span>
   <span style="color: #0000ff;"> }</span>
    render(){
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;
            &lt;h1&gt;{<span style="color: #0000ff;">this</span>.state.a}&lt;/h1&gt;
            &lt;button <span style="color: #ff0000;">onClick={()=&gt;{this.add()}}</span>&gt;按我加1&lt;/button&gt;
        &lt;button<span style="color: #ff0000;"> onClick={this.add.bind(this)}</span>&gt;按我加1&lt;/button&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
};</span></pre>
</div>
<p>方法的执行可以不通过箭头函数，但是不好，因为这样写不能传递参数</p>
<p><span style="font-family: 宋体;">注意，提炼成为组件的方法（实际上写在了构造器的</span>prototype<span style="font-family: 宋体;">上，实例的原型上），</span><strong><span style="text-decoration: underline;"><span style="font-family: 宋体;">在</span>onClick<span style="font-family: 宋体;">调用的时候，必须写</span><span style="font-family: Consolas;">bind(this)</span><span style="font-family: 宋体;">，将调用的这个函数的上下文绑定为组件的实例</span></span></strong>。<strong><span style="text-decoration: underline;">可以当做是一个固定的语法！</span></strong></p>
<p>&nbsp;</p>
<p><strong>如何传参数？</strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">import React from "react";
import ReactDOM from "react-dom";
export default class App extends React.Component {
    constructor() {
        super();
        this.state = {
            a : 100
        }
    }
    //单击事件的处理函数
 <span style="color: #ff0000;">   add(<span style="color: #0000ff;">n</span>){
        this.setState({
            a : this.state.a + <span style="color: #0000ff;">n</span>
        });
    }</span>

    render() {
        return </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">onClick</span><span style="color: #ff0000;">={<strong>()=&gt;{</strong>this.add(1)<strong>}</strong>}</span>&gt;按我<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">onClick</span><span style="color: #ff0000;">={<strong>()=&gt;{</strong>this.add(2)<strong>}</strong>}</span>&gt;按我<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">onClick</span><span style="color: #ff0000;">={<strong>()=&gt;{</strong>this.add(3)<strong>}</strong>}</span>&gt;按我<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
             
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>{this.state.a}<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
            
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">style</span><span style="color: #0000ff;">={{
                </span><span style="color: #ff0000;">"width" : this.state.a + "px",
                "height": this.state.a + "px",
                "backgroundColor" : "orange",
                "transform" : "rotate(" + this.state.a + "deg)" 
            }}</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
    }
}</span></pre>
</div>
<hr />
<h2><strong>1.4 MVVM<span style="font-family: 宋体;">模式</span></strong></h2>
<p>React<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">Vue</span><span style="font-family: 宋体;">以及已经过时</span><span style="font-family: Consolas;">Angular</span><span style="font-family: 宋体;">都是</span><span style="font-family: Consolas;">MVVM</span><span style="font-family: 宋体;">模式，都有一个特点，就是：</span></p>
<p align="justify"><span style="color: #ff0000;"><strong>数据驱动视图：数据变化了，视图自动变化</strong></span></p>
<p>&nbsp;<img src="./images/前端笔记之React（二）组件内部State&amp;React实战&amp;表单元素的受控1.png" alt="" /></p>
<p align="justify"><strong>MVVM<span style="font-family: 宋体;">模式经典的</span><span style="font-family: Consolas;">4</span><span style="font-family: 宋体;">句话：</span></strong></p>
<p align="justify">1<span style="font-family: 宋体;">）数据变化，视图就会自动变化</span></p>
<p align="justify">2<span style="font-family: 宋体;">）视图变化的原因，一定是数据变化了</span></p>
<p align="justify"><span style="color: #ff0000;"><strong>3<span style="font-family: 宋体;">）数据是视图的本质</span></strong></span></p>
<p align="justify"><span style="color: #ff0000;"><strong>4<span style="font-family: 宋体;">）视图是数据的表现</span></strong></span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">我们以后再也不用关心</span>DOM<span style="font-family: 宋体;">结构了，只关心数据，数据变化，视图自动变化</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">现在只需要用</span>setState()<span style="font-family: 宋体;">来改变组件的实例的</span><span style="font-family: Consolas;">state</span><span style="font-family: 宋体;">，视图就会自动变化，后面你将知道，视图变化的原因是因为组件进入了新的生命周期，也将知道视图更新的效率因为有的</span><span style="font-family: Consolas;">Virtual DOM</span><span style="font-family: 宋体;">从而变的很快。</span></p>
<hr />
<h1>二、<strong>案例</strong></h1>
<h2><strong>2.1<span style="font-family: 宋体;">组件</span><span style="font-family: 华文中宋;">state</span><span style="font-family: 宋体;">的增删改查</span></strong></h2>
<p><span style="font-family: 宋体;">知识点：</span>html<span style="font-family: 宋体;">标签可以加</span><span style="font-family: Consolas;">ref</span><span style="font-family: 宋体;">（</span><span style="font-family: Consolas;">reference</span><span style="font-family: 宋体;">引用）属性，在组件内部可以通过</span><span style="font-family: Consolas;">this.refs</span><span style="font-family: 宋体;">来引用这个</span><span style="font-family: Consolas;">DOM</span><span style="font-family: 宋体;">元素。</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> ref</span><span style="color: #0000ff;">="nameTxt"</span><span style="color: #0000ff;">/&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p>获取标签的值：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> val = <span style="color: #ff0000;">this.refs.nameTxt</span>.value</pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">import React from "react";
export default class App extends React.Component {
    constructor() {
        super();
        this.state = {
            arr: [
                { "id": 1, "name": "小明", "age": 12, "sex": "男" },
                { "id": 2, "name": "小红", "age": 13, "sex": "女" },
                { "id": 3, "name": "小刚", "age": 14, "sex": "男" },
                { "id": 4, "name": "小白", "age": 15, "sex": "男" }
            ]
        }
    }
    //添加学员
  <span style="color: #0000ff;">  addList(){
        //获取值
       <span style="color: #ff0000;"> var name = this.refs.nameTxt.value;
        var age = this.refs.ageTxt.value;
        var sex = this.refs.sexTxt.value;</span>
        //改变state必须用setState()方法
        this.setState({
            <span style="color: #ff0000;">arr:[
                // 原来的项是不变
                ...this.state.arr,
                // 只增加一项
                {
                   <span style="text-decoration: line-through;"> //id : 6</span>
                    id:this.state.arr.reduce((a,b)=&gt;{
                        return a.id &gt; b.id ? a : b
                    }).id + 1,
                    name,
                    age,
                    sex
                }
            ]</span>
        })
    }</span>
    //删除列表
  <span style="color: #0000ff;">  delList(id){
        <span style="color: #ff0000;">this.setState({
            arr:this.state.arr.filter(item=&gt;item.id !=id)
        });</span>
    }</span>
    render(){
        return </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>姓名：<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> ref</span><span style="color: #ff0000;">="nameTxt"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>年龄：<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> ref</span><span style="color: #ff0000;">="ageTxt"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>性别：<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> ref</span><span style="color: #ff0000;">="sexTxt"</span> <span style="color: #0000ff;">/&gt;&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #0000ff;">onClick={()=&gt;{this.addList()}}</span>&gt;添加<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ul</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
                {
                   <span style="color: #0000ff;"> this.state.arr.map(item=&gt;{</span>
                        return </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li </span><span style="color: #ff0000;">key</span><span style="color: #ff0000;">={item.id}</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">
                            {item.id} -- {item.name}--年龄{item.age}岁，性别{item.sex}
                            </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #0000ff;">onClick={()=&gt;{this.delList(item.id)}}</span>&gt;删除<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
                        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"><span style="color: #0000ff;">

                    })</span>
                }
            </span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ul</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
    }
}</span></pre>
</div>
<p><span style="color: #ff0000;"><strong>React<span style="font-family: 宋体;">中都是纯函数编程。</span></strong></span></p>
<hr />
<h2><strong>2.2<span style="font-family: 宋体;">调色板</span></strong></h2>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">import React from "react";
export default class App extends React.Component{
    constructor(){
        super();
       <span style="color: #ff0000;"> this.state = {
            r : 20,
            g : 200,
            b : 123
        }</span>
    }
    //变化颜色
    <span style="color: #0000ff;">setColor(k,v){
        <span style="color: #ff0000;">this.setState({ [k] : v })</span>
    }</span>
    render(){
        return </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">style</span><span style="color: #ff0000;">={{
</span><span style="color: #ff0000;">"width":"200px",
"height":"200px",
"background":`rgb(${this.state.r},${this.state.g},${this.state.b})`}}</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
                <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input
                    </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="range"</span><span style="color: #ff0000;">
                    max</span><span style="color: #ff0000;">={255}
                    </span><span style="color: #ff0000;">value </span><span style="color: #ff0000;">= {this.state.r}
                    </span><span style="color: #0000ff;">onChange={(e)=&gt;</span><span style="color: #000000;"><span style="color: #0000ff;">{this.setColor("r",e.target.value)}}</span>
                /&gt;
                </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{this.state.r}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
                <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input
                    </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="range"</span><span style="color: #ff0000;">
                    max</span><span style="color: #0000ff;">={255}
                    </span><span style="color: #ff0000;">value</span><span style="color: #ff0000;">={this.state.g}
                    </span><span style="color: #0000ff;">onChange={(e)=&gt;</span><span style="color: #000000;"><span style="color: #0000ff;">{this.setColor("g",e.target.value)}}</span>
                /&gt;
                </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{this.state.g}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
                <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input
                    </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="range"</span><span style="color: #ff0000;">
                    max</span><span style="color: #0000ff;">={255}
                    </span><span style="color: #ff0000;">value={this.state.b}</span>
                    <span style="color: #0000ff;">onChange={(e)=&gt;</span><span style="color: #000000;"><span style="color: #0000ff;">{this.setColor("b",e.target.value)}}</span>
                /&gt;
                </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{this.state.b}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
    }
};</span></pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">如果一个表单元素，和state的一个值进行了&ldquo;关联&rdquo;：
1）state的值就是表单元素的值；
2）改变表单元素，就会改变state的值。
我们叫做这个表单元素和数据进行了&ldquo;双向数据绑定&rdquo;，也叫作表单元素&ldquo;受控&rdquo;。</span></pre>
</div>
<p><span style="font-family: 宋体;">在</span>React<span style="font-family: 宋体;">中，实现双向数据绑定（实现表单元素受控）的套路：</span></p>
<p>加上<span style="color: #ff0000;"><strong><span style="text-decoration: underline;">value</span></strong></span><span style="font-family: 宋体;">属性实现从</span>state<span style="font-family: 宋体;">中&ldquo;要&rdquo;值；</span></p>
<p>加上<span style="color: #ff0000;"><strong><span style="text-decoration: underline;">onChange</span></strong></span><span style="font-family: 宋体;">事件实现</span>&ldquo;设置&rdquo;<span style="font-family: Consolas;">state</span><span style="font-family: 宋体;">的值。</span></p>
<p><span style="color: #ff0000;"><strong><span style="text-decoration: underline;"><span style="font-family: 宋体;">如果一个组件内部，所有表单元素都有</span>state<span style="font-family: 宋体;">的数据，进行了双向数据绑定，此时称为&ldquo;受控组件&rdquo;。</span></span></strong></span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input 
        </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="range"</span><span style="color: #ff0000;"> 
        min</span><span style="color: #0000ff;">={0} 
        </span><span style="color: #ff0000;">max</span><span style="color: #0000ff;">={255} 
        </span><span style="color: #ff0000;">value={this.state.b}
        onChange={(e)=&gt;</span><span style="color: #000000;"><span style="color: #ff0000;">{this.setColor("b" , <strong>e.target.value</strong>)}}</span>
    /&gt;
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p><span style="font-family: 宋体;">简单的说</span>&ldquo;一个表单元素受控&rdquo;，等价于&ldquo;这个表单元素有一个值和他双向绑定&rdquo;。</p>
<p>所有的表单元素受控，我们就说组件受控。</p>
<hr />
<p>&nbsp;</p>
<h2><strong>2.3<span style="font-family: 宋体;">微博发布框</span></strong></h2>
<p><span style="font-family: 宋体;">结构：输入框、发布按钮、内容清空按钮，一串文字</span>&ldquo;当前<span style="font-family: Consolas;">88/140</span><span style="font-family: 宋体;">字&rdquo;</span></p>
<p><span style="font-family: 宋体;">当内容超过</span>140<span style="font-family: 宋体;">字，则发布按钮不能点，文字变红</span></p>
<p>实时显示字数，当框中有内容，按钮可以点击清空</p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">如果让一个元素是否使用某一个类，</span>React<span style="font-family: 宋体;">官方建议安装</span><span style="font-family: Consolas;">classnames</span><span style="font-family: 宋体;">依赖</span></p>
<div class="cnblogs_code">
<pre><code>npm install --save classnames</pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">import React from "react";
<span style="color: #ff0000;">import classnames from "classnames";</span>
export default class App extends React.Component{
    constructor(){
        super();
        <span style="color: #ff0000;">this.state = {
            txt: ""
        }</span>
    }
    render(){
       <span style="color: #ff0000;"> const length = this.state.txt.length;</span>
        return </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">textarea
                </span><span style="color: #ff0000;">cols</span><span style="color: #0000ff;">="30"</span><span style="color: #ff0000;">
                rows</span><span style="color: #0000ff;">="10"</span><span style="color: #ff0000;">
                value</span><span style="color: #ff0000;">={this.state.txt}
                </span><span style="color: #0000ff;">onChange={<span style="color: #ff0000;">(e)=</span></span><span style="color: #ff0000;">&gt;</span><span style="color: #000000;"><span style="color: #ff0000;">{this.setState({txt:e.target.value})}</span><span style="color: #0000ff;">}</span>
            &gt;
            </span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">textarea</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
                 <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">disabled</span><span style="color: #ff0000;">={length == 0 || length&gt;140}</span>&gt;发布<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
                 <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">disabled</span><span style="color: #ff0000;">={length==0} <span style="color: #0000ff;">onClick={</span>()=&gt;</span><span style="color: #000000;"><span style="color: #ff0000;">{this.setState({txt:""})}<span style="color: #0000ff;">}</span></span>&gt;
清空
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
                  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">span </span><span style="color: #ff0000;">className</span><span style="color: #ff0000;">={classnames({"danger":length &gt;</span><span style="color: #000000;"><span style="color: #ff0000;"> 140})}</span>&gt;
已写<span style="color: #ff0000;">{length}</span>/140字
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
    }
};</span></pre>
</div>
<hr />
<h1><strong>三、表单元素的受控</strong></h1>
<p>什么是受控？</p>
<p><span style="font-family: 宋体;">一个表单元素的</span>value<span style="font-family: 宋体;">值和</span><span style="font-family: Consolas;">state</span><span style="font-family: 宋体;">中某个属性息息相关：</span></p>
<p><span style="font-family: 宋体;">这个表单元素的值，来自于</span>state<span style="font-family: 宋体;">中的属性</span></p>
<p><span style="font-family: 宋体;">更改表单元素的值，能够更改</span>state<span style="font-family: 宋体;">中的值</span></p>
<p><span style="font-family: 宋体;">也叫双向数据绑定，不过</span>React<span style="font-family: 宋体;">中称为&ldquo;受控组件（</span><span style="font-family: Consolas;">Controller Component</span><span style="font-family: 宋体;">）&rdquo;</span></p>
<p>Vue<span style="font-family: 宋体;">才叫双向数据绑定。</span></p>
<p><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">在</span>React<span style="font-family: 宋体;">中，所有表单元素的受控方式一样，都是</span><span style="font-family: Consolas;">value={}</span><span style="font-family: 宋体;">，</span><span style="font-family: Consolas;">onChange={}</span></strong></span></p>
<p>&nbsp;</p>
<h2><strong>3.1<span style="font-family: 宋体;">单行和多行文本框</span></strong></h2>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">import React from "react";
var classNames = require('classnames');
export default class App extends React.Component {
    //构造函数
    constructor() {
        super();
        this.state = {
           <span style="color: #ff0000;"> a : "我是默认的a值",
            b : 50,</span>
        }
    }
    render() {
        return (
            </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
               <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
                    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;">
                        value</span><span style="color: #ff0000;">={this.state.a}
                        </span><span style="color: #ff0000;">onChange</span><span style="color: #ff0000;">={(e) =&gt;</span><span style="color: #000000;"><span style="color: #ff0000;"> { this.setState({ a: e.target.value }) }}</span>
                    /&gt;
                    </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{this.state.a}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>
               <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
              
                <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
                    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="range"</span><span style="color: #ff0000;">
                        value</span><span style="color: #ff0000;">={this.state.b}
                        </span><span style="color: #ff0000;">onChange</span><span style="color: #ff0000;">={(e) =&gt;</span><span style="color: #000000;"><span style="color: #ff0000;"> { this.setState({ b: e.target.value })}}</span>
                    /&gt;
                    </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{this.state.b}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>
                <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
        )
    }
};</span></pre>
</div>
<hr />
<h2>&nbsp;</h2>
<h2><strong>3.2<span style="font-family: 宋体;">下拉菜单</span></strong></h2>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">this</span>.state =<span style="color: #000000;"> {
   <span style="color: #ff0000;"> c : </span></span><span style="color: #ff0000;">"广州"</span><span style="color: #000000;">
}</span></pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select 
        </span><span style="color: #ff0000;">value</span><span style="color: #0000ff;"><span style="color: #ff0000;">={this.state.c}</span> 
        </span><span style="color: #ff0000;">onChange</span><span style="color: #ff0000;">={(e) =&gt;</span><span style="color: #000000;"><span style="color: #ff0000;"> { this.setState({ c: e.target.value }) }}</span>
    &gt;
        </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">option </span><span style="color: #ff0000;">value</span><span style="color: #0000ff;">="广州"</span><span style="color: #0000ff;">&gt;</span>广州<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">option</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">option </span><span style="color: #ff0000;">value</span><span style="color: #0000ff;">="深圳"</span><span style="color: #0000ff;">&gt;</span>深圳<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">option</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">option </span><span style="color: #ff0000;">value</span><span style="color: #0000ff;">="佛山"</span><span style="color: #0000ff;">&gt;</span>佛山<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">option</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">option </span><span style="color: #ff0000;">value</span><span style="color: #0000ff;">="东莞"</span><span style="color: #0000ff;">&gt;</span>东莞<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">option</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">option </span><span style="color: #ff0000;">value</span><span style="color: #0000ff;">="云浮"</span><span style="color: #0000ff;">&gt;</span>云浮<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">option</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{this.state.c}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<hr />
<h2><strong>3.3<span style="font-family: 宋体;">单选按钮</span></strong></h2>
<p><span style="font-family: 宋体;">单选按钮受控的套路：</span>checked={}<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">value="" </span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">onChange={}</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input 
        </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="radio"</span><span style="color: #ff0000;"> 
        name</span><span style="color: #0000ff;">="sex"</span><span style="color: #ff0000;"> 
        value</span><span style="color: #ff0000;">="男"</span><span style="color: #ff0000;"> 
        checked</span><span style="color: #0000ff;"><span style="color: #ff0000;">={this.state.e ==</span> </span><span style="color: #ff0000;">'男'}
        onChange</span><span style="color: #ff0000;">={(e) =&gt;</span><span style="color: #000000;"><span style="color: #ff0000;"> { this.setState({ d: e.target.value }) }}</span>
    /&gt;男
    </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input 
        </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="radio"</span><span style="color: #ff0000;"> 
        name</span><span style="color: #0000ff;">="sex"</span><span style="color: #ff0000;"> 
        value</span><span style="color: #ff0000;">="女"</span><span style="color: #ff0000;"> 
        checked</span><span style="color: #ff0000;">={this.state.e == </span><span style="color: #ff0000;">'女'}
        onChange</span><span style="color: #ff0000;">={(e) =&gt;</span><span style="color: #000000;"><span style="color: #ff0000;"> { this.setState({ d: e.target.value })}}</span>
    /&gt;女
    </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>【<span style="color: #ff0000;">{this.state.d}</span>】<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<hr />
<h2><strong>3.4<span style="font-family: 宋体;">复选框受控</span></strong></h2>
<p>复选框和上面所有表单元素都不一样：</p>
<p><span style="font-family: 宋体;">要靠</span>checked={}<span style="font-family: 宋体;">得到值，要判断</span><span style="font-family: Consolas;">includes</span></p>
<p>要写一个函数，传入将要验证的值，根据这个值是不是已经在数组中，再决定删除、添加。</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">setF(<span style="color: #ff0000;">word</span>){
    </span><span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span><span style="color: #000000;">.state.f.includes(word)){
        </span><span style="color: #008000;">//</span><span style="color: #008000;">如果这个值已经在f数组中，则删除</span>
        <span style="color: #ff0000;">this.setState({
            f : this.state.f.filter(item=&gt;item !=</span><span style="color: #000000;"><span style="color: #ff0000;"> word)
        });</span>
    }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
        </span><span style="color: #008000;">//</span><span style="color: #008000;">如果这个值不在f数组中，则加入数组</span>
       <span style="color: #ff0000;"> this.setState({
            f : [...this</span><span style="color: #000000;"><span style="color: #ff0000;">.state.f, word]
        });</span>
    }
}</span></pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
    爱好：
    </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input 
        </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="checkbox"</span><span style="color: #ff0000;"> 
        value</span><span style="color: #0000ff;">="看书"</span><span style="color: #ff0000;">
        checked</span><span style="color: #ff0000;">={this.state.f.includes('看书')}
        </span><span style="color: #ff0000;">onChange</span><span style="color: #ff0000;">={(e) =&gt;</span><span style="color: #000000;"><span style="color: #ff0000;"> { this.setF("看书") }}</span>
    /&gt;看书
    </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input 
        </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="checkbox"</span><span style="color: #ff0000;"> 
        value</span><span style="color: #0000ff;">="游泳"</span><span style="color: #ff0000;">
        checked</span><span style="color: #ff0000;">={this.state.f.includes('游泳')}
        </span><span style="color: #ff0000;">onChange</span><span style="color: #ff0000;">={(e) =&gt;</span><span style="color: #000000;"><span style="color: #ff0000;"> { this.setF("游泳") }}</span>
    /&gt;游泳
    </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input 
        </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="checkbox"</span><span style="color: #ff0000;"> 
        value</span><span style="color: #0000ff;">="打球"</span><span style="color: #ff0000;">
        checked</span><span style="color: #ff0000;">={this.state.f.includes('打球')}
        </span><span style="color: #ff0000;">onChange</span><span style="color: #ff0000;">={(e) =&gt;</span><span style="color: #000000;"><span style="color: #ff0000;"> { this.setF("打球") }}</span>
    /&gt;打球
    </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>【<span style="color: #ff0000;">{this.state.f.join('，')}</span>】<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<hr />
<h2><strong>3.5<span style="font-family: 宋体;">可选择的表单类</span><span style="font-family: 华文中宋;">-</span><span style="font-family: 宋体;">案例</span></strong></h2>
<p><span style="font-family: 宋体;">这个案例学习</span>DOM<span style="font-family: 宋体;">的上下树</span></p>
<p><span style="font-family: 宋体;">控制元素是否显示或隐藏，不要用</span>display<span style="font-family: 宋体;">属性</span></p>
<p><span style="font-family: 宋体;">而是用三元运算符控制</span>DOM<span style="font-family: 宋体;">元素是否上下树。如果上数写标签，如果不上树写</span><span style="font-family: Consolas;">null</span></p>
<p><span style="font-family: 宋体;">不管是做什么案例，都是两大部分：</span>①、写<span style="font-family: Consolas;">JSX</span><span style="font-family: 宋体;">侵入</span><span style="font-family: Consolas;">DOM</span><span style="font-family: 宋体;">标签，②、事件监听，改变</span><span style="font-family: Consolas;">state</span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">import React from "react";
export default class App extends React.Component{
    // 构造函数
    constructor(){
        super();
      <span style="color: #ff0000;">  this.state = {</span>
            arr:[
                { "id": 1, "name": "小明", "age": 12, "sex": "男" },
                { "id": 2, "name": "小红", "age": 13, "sex": "女" },
                { "id": 3, "name": "小刚", "age": 14, "sex": "男" },
                { "id": 4, "name": "小白", "age": 15, "sex": "男" }
            ],
            showCols:['姓名',"年龄","性别"]
      <span style="color: #ff0000;">  }</span>
    }
   <span style="color: #0000ff;"> setChangeCols(word){
        if(this.state.showCols.includes(word)){
            <span style="color: #ff0000;">this.setState({
                showCols:this.state.showCols.filter(item=&gt;item !=word)
            })</span>
        }else{
            <span style="color: #ff0000;">this.setState({
                showCols:[ ...this.state.showCols, word ]
            });</span>
        };
    }</span>
  <span style="color: #0000ff;">  render(){
        return </span></span><span style="color: #0000ff;">&lt;div&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
                <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="checkbox"</span><span style="color: #ff0000;">
                    value</span><span style="color: #0000ff;">="姓名"</span>
                  <span style="color: #ff0000;">  checked={this.state.showCols.includes("姓名")}
                    </span><span style="color: #0000ff;">onChange={(e)=&gt;</span><span style="color: #000000;"><span style="color: #0000ff;">{this.setChangeCols("姓名")}}</span>
                 /&gt;姓名
                </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="checkbox"</span><span style="color: #ff0000;">
                    value</span><span style="color: #0000ff;">="年龄"</span>
                    <span style="color: #ff0000;">checked={this.state.showCols.includes("年龄")}
                    </span><span style="color: #0000ff;">onChange={(e)=&gt;</span><span style="color: #000000;"><span style="color: #0000ff;">{this.setChangeCols("年龄")}}</span>
                 /&gt;年龄
                </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="checkbox"</span><span style="color: #ff0000;">
                    value</span><span style="color: #0000ff;">="性别"</span>
                    <span style="color: #ff0000;">checked={this.state.showCols.includes("性别")}
                    </span><span style="color: #0000ff;">onChange={(e)=&gt;</span><span style="color: #000000;"><span style="color: #0000ff;">{this.setChangeCols("性别")}}</span>
                 /&gt;性别
            </span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{this.state.showCols}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">table</span><span style="color: #0000ff;">&gt;</span>
                <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">tbody</span><span style="color: #0000ff;">&gt;</span>
                   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">tr</span><span style="color: #0000ff;">&gt;</span>
                        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">th</span><span style="color: #0000ff;">&gt;</span>ID<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">th</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"><span style="color: #ff0000;">
                        {</span>this.state.showCols.includes("姓名") <span style="color: #ff0000;">? </span></span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">th</span><span style="color: #0000ff;">&gt;</span>姓名<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">th</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"><span style="color: #ff0000;"> : null}</span>
                     <span style="color: #ff0000;">   {</span>this.state.showCols.includes("年龄") <span style="color: #ff0000;">?</span> </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">th</span><span style="color: #0000ff;">&gt;</span>年龄<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">th</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"><span style="color: #ff0000;"> : null}</span>
                      <span style="color: #ff0000;">  {</span>this.state.showCols.includes("性别") <span style="color: #ff0000;">? </span></span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">th</span><span style="color: #0000ff;">&gt;</span>性别<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">th</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;"> : null}
                   </span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">tr</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
                   {
                        <span style="color: #0000ff;">this.state.arr.map(item=&gt;{</span>
                            return </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">tr </span><span style="color: #ff0000;">key</span><span style="color: #ff0000;">={item.id}</span><span style="color: #0000ff;">&gt;</span>
                               <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">td</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{item.id}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">td</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"><span style="color: #ff0000;">
                               {</span>this.state.showCols.includes("姓名")<span style="color: #ff0000;"> ? </span></span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">td</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{item.name}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">td</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"><span style="color: #ff0000;">:null}</span>
                            <span style="color: #ff0000;">   {</span>this.state.showCols.includes("年龄")<span style="color: #ff0000;"> ?</span> </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">td</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{item.age}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">td</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"><span style="color: #ff0000;">:null}</span>
                           <span style="color: #ff0000;">    {</span>this.state.showCols.includes("性别") <span style="color: #ff0000;">?</span> </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">td</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{item.sex}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">td</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">:null}
                            </span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">tr</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;"><span style="color: #0000ff;">
                        })</span>
                   }
                </span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">tbody</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">table</span><span style="color: #0000ff;">&gt;</span>
     <span style="color: #0000ff;">   &lt;/div&gt;</span><span style="color: #000000;"><span style="color: #0000ff;">
    }</span>
};</span></pre>
</div>
<hr />
<h2>&nbsp;</h2>
<h2><strong>3.6<span style="font-family: 宋体;">三级联动</span>-<span style="font-family: 宋体;">案例</span></strong></h2>
<p>&nbsp;<img src="./images/前端笔记之React（二）组件内部State&amp;React实战&amp;表单元素的受控2.png" alt="" /></p>
<p>额外提供的数据：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('7bf9cff9-0c76-403a-bfeb-af63f6a5b1a2')"><img id="code_img_closed_7bf9cff9-0c76-403a-bfeb-af63f6a5b1a2" class="code_img_closed" src="./images/前端笔记之React（二）组件内部State&amp;React实战&amp;表单元素的受控3.png" alt="" /><img id="code_img_opened_7bf9cff9-0c76-403a-bfeb-af63f6a5b1a2" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('7bf9cff9-0c76-403a-bfeb-af63f6a5b1a2',event)" src="./images/前端笔记之React（二）组件内部State&amp;React实战&amp;表单元素的受控4.png" alt="" />
<div id="cnblogs_code_open_7bf9cff9-0c76-403a-bfeb-af63f6a5b1a2" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">[
    {

        </span>"name" : "广东省"<span style="color: #000000;">,
        </span>"city"<span style="color: #000000;"> : [
            {
                </span>"name":"广州"<span style="color: #000000;">,
                </span>"area"<span style="color: #000000;">:[
                    </span>"天河区"<span style="color: #000000;">,
                    </span>"白云区"<span style="color: #000000;">,
                    ...
                ]            
            },
            {
                </span>"name":"深圳"<span style="color: #000000;">,
                </span>"area"<span style="color: #000000;">:[
                    </span>"福田区"<span style="color: #000000;">,
                    </span>"南山区"<span style="color: #000000;">
                ]
            }
            ....
        ]
    },
    ....
]</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>forEach<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">filter</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">map</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">reduce</span><span style="font-family: 宋体;">函数都是表达式，而不是语句体。</span><span style="font-family: Consolas;">if</span><span style="font-family: 宋体;">和</span><span style="font-family: Consolas;">for</span><span style="font-family: 宋体;">语句是语句体。</span></strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">import React from "react";
<span style="color: #ff0000;">import city from "./city.js";</span>
export default class App extends React.Component{
    constructor(){
        super();
        <span style="color: #ff0000;">this.state = {
            "province":"广东省",
            "city":"广州市",
            "area":"天河区"
        }</span>
    }
    render(){
        //循环遍历省份
       <span style="color: #0000ff;"> const showProvinces = ()=&gt;{</span>
            //遍历city数据，提取每一项省份成为option
            var arr=[];
         <span style="color: #0000ff;">   city.forEach((item,index)=&gt;{</span>
                <span style="color: #ff0000;">arr.push(</span></span><span style="color: #ff0000;">&lt;option key={index} value={item.name}&gt;{item.name}&lt;/option&gt;</span><span style="color: #000000;"><span style="color: #ff0000;">)</span>
       <span style="color: #0000ff;">     });</span>
            return arr;
     <span style="color: #0000ff;">   }</span>

        //循环遍历市，显示哪一个城市，需要根据state的province属性的省份选择城市
        <span style="color: #0000ff;">const showCitys = ()=&gt;{</span>
            var arr = [];
            // 先筛选省份，再次筛选对应城市列表
        <span style="color: #ff0000;">var cityArr = city.filter(item=&gt;item.name == this.state.province)[0].city;</span>
            <span style="color: #0000ff;">cityArr.forEach((item,index)=&gt;{</span>
               <span style="color: #ff0000;"> arr.push(</span></span><span style="color: #ff0000;">&lt;option key={index} value={item.name}&gt;{item.name}&lt;/option&gt;</span><span style="color: #000000;"><span style="color: #ff0000;">)</span>
         <span style="color: #0000ff;">   });</span>
            return arr;
        <span style="color: #0000ff;">};</span>

        //显示区县
      <span style="color: #0000ff;">  const showAreas = ()=&gt;{</span>
            var arr = [];
               // 先筛选省份，再次筛选对应城市列表
       <span style="color: #ff0000;"> var cityArr = city.filter(item=&gt;item.name == this.state.province)[0].city;</span>
        //根据市，得出区，只需选择区的第一项
      <span style="color: #ff0000;">  var areaArr = cityArr.filter(item =&gt; item.name == this.state.city)[0].area</span>
       //最后根据筛选出的市，遍历区
       <span style="color: #0000ff;">     areaArr.forEach((item,index)=&gt;{</span>
               <span style="color: #ff0000;"> arr.push(</span></span><span style="color: #ff0000;">&lt;option key={index} value={item}&gt;{item}&lt;/option&gt;</span><span style="color: #000000;"><span style="color: #ff0000;">)</span>
          <span style="color: #0000ff;">  })</span>
            return arr;
    <span style="color: #0000ff;">    }</span>

        return </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
            省份：</span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select
                    </span><span style="color: #ff0000;">value</span><span style="color: #ff0000;">={this.state.province}
                    </span><span style="color: #0000ff;">onChange={(e)=&gt;</span><span style="color: #000000;"><span style="color: #0000ff;">{</span>
                        <span style="color: #ff0000;">this.setState({
                           "province":e.target.value,
                           "city":city.filter(item=&gt;item.name == e.target.value)[0].city[0].name
                        })</span>
               <span style="color: #0000ff;">     }}</span>
                    &gt;
                      <span style="color: #ff0000;">  {showProvinces()}
                    </span></span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
            城市：</span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select
                    </span><span style="color: #ff0000;">value={this.state.city}
                  </span>  <span style="color: #0000ff;">onChange={(e)=&gt;</span><span style="color: #000000;"><span style="color: #0000ff;">{</span>
                      <span style="color: #ff0000;">  this.setState({"city":e.target.value})</span>
                  <span style="color: #0000ff;">  }}</span>
                     &gt;
                      <span style="color: #ff0000;">  {showCitys()}
                     </span></span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;　　</span><span style="color: #000000;">
            区县：</span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select
                    </span><span style="color: #ff0000;">value={this.state.area}
              </span>     <span style="color: #0000ff;"> onChange={(e)=&gt;</span><span style="color: #000000;"><span style="color: #0000ff;">{</span>
                      <span style="color: #ff0000;">  this.setState({"area":e.target.value})</span>
               <span style="color: #0000ff;">     }}</span>
                     &gt;
                       <span style="color: #ff0000;">  {showAreas()}
                     </span></span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
    }
};</span></pre>
</div>
<hr />
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>