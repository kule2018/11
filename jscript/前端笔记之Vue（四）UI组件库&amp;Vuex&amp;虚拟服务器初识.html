<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识</center></div><div class='banquan'>原文出处:本文由博客园博主RopeHuo提供。<br/>
原文连接:https://www.cnblogs.com/rope/p/10736798.html</div><br>
    <h1><strong>一、日历组件</strong></h1>
<p><strong>new Date()<span style="font-family: 宋体;">的月份是从</span><span style="font-family: Consolas;">0</span><span style="font-family: 宋体;">开始的。</span></strong>&nbsp;</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">下面表达式是：2018年6月1日
</span><span style="color: #0000ff;">new</span> Date(2018, 5, 1<span style="color: #000000;">);

下面表达式是：2018年5月1日
</span><span style="color: #0000ff;">new</span> Date(2018, 4, 1<span style="color: #000000;">);
或
</span><span style="color: #0000ff;">new</span> Date(2018, 5-1, 1<span style="color: #000000;">);

下面表达式是：2018年5月31日（得到上个月的最后一天）
</span><span style="color: #0000ff;">new</span> Date(2018, 5 , 0<span style="color: #000000;">);
日的参数可以是0，也可以是负数，表示上个月底的那一天。

下面表达式是：2018年7月01日
</span><span style="color: #0000ff;">new</span> Date(2018, 5, 31);</pre>
</div>
<p>&nbsp;</p>
<p>l&nbsp;<strong>App.vue<span style="font-family: 宋体;">父组件：</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('926a61e3-9ee0-472a-a64e-8bf03be21677')"><img id="code_img_closed_926a61e3-9ee0-472a-a64e-8bf03be21677" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_926a61e3-9ee0-472a-a64e-8bf03be21677" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('926a61e3-9ee0-472a-a64e-8bf03be21677',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_926a61e3-9ee0-472a-a64e-8bf03be21677" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;MonthView :year="year" :month="month"&gt;&lt;/MonthView&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    import MonthView from </span>"./components/MonthView.vue"<span style="color: #000000;">;
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
        data(){
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> {
                year : </span>2018<span style="color: #000000;"> ,
                month : </span>8<span style="color: #000000;"> ,
            }
        },
        components : {
            MonthView
        },
        methods : {
        }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>l&nbsp;<strong>MonthView.vue<span style="font-family: 宋体;">子组件</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('8f1b0305-821b-42d2-a00b-85cb0cbe5290')"><img id="code_img_closed_8f1b0305-821b-42d2-a00b-85cb0cbe5290" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_8f1b0305-821b-42d2-a00b-85cb0cbe5290" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('8f1b0305-821b-42d2-a00b-85cb0cbe5290',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_8f1b0305-821b-42d2-a00b-85cb0cbe5290" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
&lt;div&gt;<span style="color: #000000;">
    月视图{{year}} {{month}}
        {{arr}}
    </span>&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
        props : [</span>"year" , "month"<span style="color: #000000;">],
        computed : {
            arr(){
                </span><span style="color: #008000;">//</span><span style="color: #008000;">计算日历的数组：三要素</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">本月1号星期几</span>
                <span style="color: #0000ff;">var</span> this1DayWeek = <span style="color: #0000ff;">new</span> Date(<span style="color: #0000ff;">this</span>.year, <span style="color: #0000ff;">this</span>.month - 1, 1<span style="color: #000000;">).getDay();
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 本月有几天</span>
                <span style="color: #0000ff;">var</span> thisMonthDay = <span style="color: #0000ff;">new</span> Date(<span style="color: #0000ff;">this</span>.year, <span style="color: #0000ff;">this</span>.month, 0<span style="color: #000000;">).getDate();
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 上月有多少天</span>
                <span style="color: #0000ff;">var</span> prevMonthDay = <span style="color: #0000ff;">new</span> Date(<span style="color: #0000ff;">this</span>.year, <span style="color: #0000ff;">this</span>.month - 1, 0<span style="color: #000000;">).getDate();

                console.log(benyue1haoxingqiji)
                console.log(benyueyoujitian)
                console.log(shangyueduoshaotian)
            }
        }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>l&nbsp;<strong>显示在页面：</strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('ff2c1d05-0d5e-42dc-a7ff-c5a8e8c49411')"><img id="code_img_closed_ff2c1d05-0d5e-42dc-a7ff-c5a8e8c49411" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_ff2c1d05-0d5e-42dc-a7ff-c5a8e8c49411" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ff2c1d05-0d5e-42dc-a7ff-c5a8e8c49411',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_ff2c1d05-0d5e-42dc-a7ff-c5a8e8c49411" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;table&gt;
            &lt;tr v-<span style="color: #0000ff;">for</span>="i in 6"&gt;
                &lt;td v-<span style="color: #0000ff;">for</span>="j in arr.slice((i-1) * 7, i * 7)"&gt;<span style="color: #000000;">
                    {{j}}
                </span>&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
         props:[</span>"year","month"<span style="color: #000000;">],
         computed : {
            arr(){
                </span><span style="color: #0000ff;">var</span> _arr = []; <span style="color: #008000;">//</span><span style="color: #008000;">存储42天的数组</span>

                <span style="color: #008000;">//</span><span style="color: #008000;"> 计算日历的数组：三要素</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">本月1号星期几，根据星期几得到上个月剩余天数</span>
                <span style="color: #0000ff;">var</span> this1DayWeek = <span style="color: #0000ff;">new</span> Date(<span style="color: #0000ff;">this</span>.year, <span style="color: #0000ff;">this</span>.month-1, 1<span style="color: #000000;">).getDay();
                </span><span style="color: #008000;">//</span><span style="color: #008000;">上个月有多少天</span>
                <span style="color: #0000ff;">var</span> prevMonthDay =  <span style="color: #0000ff;">new</span> Date(<span style="color: #0000ff;">this</span>.year, <span style="color: #0000ff;">this</span>.month-1, 0<span style="color: #000000;">).getDate();
                </span><span style="color: #008000;">//</span><span style="color: #008000;">本月有几天</span>
                <span style="color: #0000ff;">var</span> thisMonthDay =  <span style="color: #0000ff;">new</span> Date(<span style="color: #0000ff;">this</span>.year, <span style="color: #0000ff;">this</span>.month, 0<span style="color: #000000;">).getDate();

                </span><span style="color: #008000;">//</span><span style="color: #008000;">用本月1号星期几，推断出上月的剩余天数</span>
                <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">var</span> i = 0; i &lt; this1DayWeek;i++<span style="color: #000000;">){
                    _arr.unshift(prevMonthDay </span>-<span style="color: #000000;"> i)
                }
                
                </span><span style="color: #008000;">//</span><span style="color: #008000;">循环本月天数（累加），从数组末尾插入</span>
                <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">var</span> i = 1; i &lt;= thisMonthDay;i++<span style="color: #000000;">){
                    _arr.push(i)
                }

                </span><span style="color: #008000;">//</span><span style="color: #008000;">补充下月的天数（满42天为止）</span>
                <span style="color: #0000ff;">var</span> i = 1<span style="color: #000000;">;
                </span><span style="color: #0000ff;">while</span>(_arr.length != 42<span style="color: #000000;">){
                    _arr.push(i</span>++<span style="color: #000000;">);
                }
                
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> _arr;
            }
         }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>l&nbsp;<strong>显示农历，安装插件：</strong></p>
<div class="cnblogs_code">
<pre><code>npm install solarlunar --save</pre>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('3eef0ce2-8b77-461b-80f9-cf7c06753623')"><img id="code_img_closed_3eef0ce2-8b77-461b-80f9-cf7c06753623" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_3eef0ce2-8b77-461b-80f9-cf7c06753623" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('3eef0ce2-8b77-461b-80f9-cf7c06753623',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_3eef0ce2-8b77-461b-80f9-cf7c06753623" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;h1&gt;月视图 {{year}}年{{month}}月&lt;/h1&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;th&gt;日&lt;/th&gt;
                &lt;th&gt;一&lt;/th&gt;
                &lt;th&gt;二&lt;/th&gt;
                &lt;th&gt;三&lt;/th&gt;
                &lt;th&gt;四&lt;/th&gt;
                &lt;th&gt;五&lt;/th&gt;
                &lt;th&gt;六&lt;/th&gt;
            &lt;/tr&gt;
            &lt;tr v-<span style="color: #0000ff;">for</span>="i in 6"&gt;
                &lt;td v-<span style="color: #0000ff;">for</span>="j in arr.slice((i-1) * 7, i * 7)"&gt;
                    &lt;p class="p1"&gt;{{j.d}}&lt;/p&gt;
                    &lt;p class="p2"&gt;{{j.n}}&lt;/p&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    import solarLunar from </span>'solarLunar'<span style="color: #000000;">;
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
         props:[</span>"year","month"<span style="color: #000000;">],
         computed : {
            arr(){
                </span><span style="color: #0000ff;">var</span> _arr = []; <span style="color: #008000;">//</span><span style="color: #008000;">存储42天的数组</span>

                <span style="color: #008000;">//</span><span style="color: #008000;"> 计算日历的数组：三要素</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">本月1号星期几，根据星期几得到上个月剩余天数</span>
                <span style="color: #0000ff;">var</span> this1DayWeek = <span style="color: #0000ff;">new</span> Date(<span style="color: #0000ff;">this</span>.year, <span style="color: #0000ff;">this</span>.month-1, 1<span style="color: #000000;">).getDay();
                </span><span style="color: #008000;">//</span><span style="color: #008000;">上个月有多少天</span>
                <span style="color: #0000ff;">var</span> prevMonthDay =  <span style="color: #0000ff;">new</span> Date(<span style="color: #0000ff;">this</span>.year, <span style="color: #0000ff;">this</span>.month-1, 0<span style="color: #000000;">).getDate();
                </span><span style="color: #008000;">//</span><span style="color: #008000;">本月有几天</span>
                <span style="color: #0000ff;">var</span> thisMonthDay =  <span style="color: #0000ff;">new</span> Date(<span style="color: #0000ff;">this</span>.year, <span style="color: #0000ff;">this</span>.month, 0<span style="color: #000000;">).getDate();

                </span><span style="color: #008000;">//</span><span style="color: #008000;">用本月1号星期几，推断出上月的剩余天数</span>
                <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">var</span> i = 0; i &lt; this1DayWeek;i++<span style="color: #000000;">){
                    _arr.unshift({
                        d: prevMonthDay </span>-<span style="color: #000000;"> i,
                        n: solarLunar.solar2lunar(</span><span style="color: #0000ff;">this</span>.year, <span style="color: #0000ff;">this</span>.month-1, prevMonthDay -<span style="color: #000000;"> i).dayCn
                    })
                }
                
                </span><span style="color: #008000;">//</span><span style="color: #008000;">循环本月天数，累加，从数组末尾插入</span>
                <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">var</span> i = 1; i &lt;= thisMonthDay;i++<span style="color: #000000;">){
                    _arr.push({
                        d: i,
                        n: solarLunar.solar2lunar(</span><span style="color: #0000ff;">this</span>.year, <span style="color: #0000ff;">this</span><span style="color: #000000;">.month, i).dayCn
                    })
                }

                </span><span style="color: #008000;">//</span><span style="color: #008000;">补充下个月的天数（满42天为止）</span>
                <span style="color: #0000ff;">var</span> i = 1<span style="color: #000000;">;
                </span><span style="color: #0000ff;">while</span>(_arr.length != 42<span style="color: #000000;">){
                    _arr.push({
                        d : i,
                        n : solarLunar.solar2lunar(</span><span style="color: #0000ff;">this</span>.year, <span style="color: #0000ff;">this</span>.month+1<span style="color: #000000;">, i).dayCn
                    });
                    i</span>++<span style="color: #000000;">;
                }
                console.log(_arr)
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> _arr;
            }
         }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">下面做</span>&ldquo;换月换年&rdquo;业务：</p>
<p>App.vue<span style="font-family: 宋体;">父组件</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('59794d19-2625-4dc2-bf0f-8fa92ec084f5')"><img id="code_img_closed_59794d19-2625-4dc2-bf0f-8fa92ec084f5" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_59794d19-2625-4dc2-bf0f-8fa92ec084f5" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('59794d19-2625-4dc2-bf0f-8fa92ec084f5',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_59794d19-2625-4dc2-bf0f-8fa92ec084f5" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;<span style="color: #000000;">MonthChooser 
            :year</span>="year"<span style="color: #000000;"> 
            :month</span>="month"<span style="color: #000000;"> 
            :setYear</span>="setYear"<span style="color: #000000;"> 
            :setMonth</span>="setMonth"
        &gt;
        &lt;/MonthChooser&gt;
        &lt;MonthView :year="year" :month="month"&gt;&lt;/MonthView&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    import MonthView from </span>"./components/MonthView.vue"<span style="color: #000000;">;
    import MonthChooser from </span>"./components/MonthChooser.vue"<span style="color: #000000;">;
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
        data(){
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;">{
                year :</span>2018<span style="color: #000000;">,
                month:</span>8<span style="color: #000000;">,
            }
        },
        components :{
            MonthView,
            MonthChooser
        },
        methods : {
            setYear(year){
                </span><span style="color: #0000ff;">this</span>.year = year; <span style="color: #008000;">//</span><span style="color: #008000;">设置年</span>
<span style="color: #000000;">            },
            setMonth(month){
                </span><span style="color: #0000ff;">this</span>.month = month; <span style="color: #008000;">//</span><span style="color: #008000;">设置月</span>
<span style="color: #000000;">            }
        }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>MonthChooser.vue<span style="font-family: 宋体;">切换年月组件</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('10a50411-13b1-4e3b-a0a3-baaad6d0b7ee')"><img id="code_img_closed_10a50411-13b1-4e3b-a0a3-baaad6d0b7ee" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_10a50411-13b1-4e3b-a0a3-baaad6d0b7ee" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('10a50411-13b1-4e3b-a0a3-baaad6d0b7ee',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_10a50411-13b1-4e3b-a0a3-baaad6d0b7ee" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;h1&gt;
            &lt;button @click="goPrev()"&gt;-&lt;/button&gt;
            &lt;a href="###"&gt;{{year}}&lt;/a&gt; 年{{month}}月
            &lt;button @click="goNext()"&gt;+&lt;/button&gt;
        &lt;/h1&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
         props:[</span>"year","month","setYear","setMonth"<span style="color: #000000;">],
         methods :{
             goNext(){
                 </span><span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.month &lt; 12<span style="color: #000000;">){
                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 如果月份小于12，可以加月</span>
                     <span style="color: #0000ff;">this</span>.setMonth(<span style="color: #0000ff;">this</span>.month + 1<span style="color: #000000;">)
                 }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
                    </span><span style="color: #008000;">//</span><span style="color: #008000;">  否则就加年，并且重设下年为1月</span>
                     <span style="color: #0000ff;">this</span>.setMonth(1<span style="color: #000000;">)
                     </span><span style="color: #0000ff;">this</span>.setYear(<span style="color: #0000ff;">this</span>.year + 1<span style="color: #000000;">)
                 }
             },
             goPrev(){
                 </span><span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.month &gt; 1<span style="color: #000000;">){
                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 如果月份大于1月，可以减月</span>
                     <span style="color: #0000ff;">this</span>.setMonth(<span style="color: #0000ff;">this</span>.month - 1<span style="color: #000000;">)
                 }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
                    </span><span style="color: #008000;">//</span><span style="color: #008000;">  否则就减年，并且重设上年为12月</span>
                     <span style="color: #0000ff;">this</span>.setMonth(12); <span style="color: #008000;">//</span><span style="color: #008000;">重设为12月</span>
                     <span style="color: #0000ff;">this</span>.setYear(<span style="color: #0000ff;">this</span>.year - 1); <span style="color: #008000;">//</span><span style="color: #008000;">减年</span>
<span style="color: #000000;">                 }
             }
         }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>&nbsp;</p>
<p><strong>切换年代视图组件：</strong></p>
<p>l&nbsp;App.vue<span style="font-family: 宋体;">父组件</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('56f3ee5d-7dc8-4fa8-8bdf-7dbd20529f11')"><img id="code_img_closed_56f3ee5d-7dc8-4fa8-8bdf-7dbd20529f11" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_56f3ee5d-7dc8-4fa8-8bdf-7dbd20529f11" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('56f3ee5d-7dc8-4fa8-8bdf-7dbd20529f11',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_56f3ee5d-7dc8-4fa8-8bdf-7dbd20529f11" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;<span style="color: #000000;">MonthChooser
            :year</span>="year"<span style="color: #000000;">
            :month</span>="month"<span style="color: #000000;">
            :setYear</span>="setYear"<span style="color: #000000;">
            :setMonth</span>="setMonth"
        &gt;&lt;/MonthChooser&gt;
        &lt;MonthView :year="year" :month="month"&gt;&lt;/MonthView&gt;
        &lt;DecadeView :year="year" :setYear="setYear"&gt;&lt;/DecadeView&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    import MonthView from </span>"./components/MonthView.vue"<span style="color: #000000;">;
    import MonthChooser from </span>"./components/MonthChooser.vue"<span style="color: #000000;">;
    import DecadeView from </span>"./components/DecadeView.vue"<span style="color: #000000;">;
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
        data(){
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> {
               ...
            }
        },
        components : {
            MonthView,
            MonthChooser,
            DecadeView
        },
        methods : {
            ...
        }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>l&nbsp;<strong>DecadeView</strong><strong>.vue<span style="font-family: 宋体;">子组件</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('9def64ea-30f2-41c5-ba29-1a3b93e6a5b1')"><img id="code_img_closed_9def64ea-30f2-41c5-ba29-1a3b93e6a5b1" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_9def64ea-30f2-41c5-ba29-1a3b93e6a5b1" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('9def64ea-30f2-41c5-ba29-1a3b93e6a5b1',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_9def64ea-30f2-41c5-ba29-1a3b93e6a5b1" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;table&gt;
            &lt;tr v-<span style="color: #0000ff;">for</span>="i in 10"&gt;
            &lt;!-- &lt;td v-<span style="color: #0000ff;">for</span>="j in arr.slice((i-1) * 3, i * 3)"&gt; --&gt;
                &lt;td v-<span style="color: #0000ff;">for</span>="j in 3" :class="{'cur':year == showYear(i, j)}"<span style="color: #000000;"> 
@click</span>="setYear(showYear(i, j))"
&gt;<span style="color: #000000;">
                   {{showYear(i, j)}}
                </span>&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
        props : [</span>"year"<span style="color: #000000;">],
        computed : {
            arr(){
                </span><span style="color: #0000ff;">var</span> _arr =<span style="color: #000000;"> [];
                </span><span style="color: #008000;">//</span><span style="color: #008000;">计算年份的头</span>
                <span style="color: #0000ff;">var</span> tou = <span style="color: #0000ff;">this</span>.year - <span style="color: #0000ff;">this</span>.year % 10 - 10<span style="color: #000000;">;
                </span><span style="color: #008000;">//</span><span style="color: #008000;">从得到的年份的头开始循环 + 30</span>
                <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">var</span> i = tou ; i &lt; tou + 30;i++<span style="color: #000000;">){
                    _arr.push(i); 
                }
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> _arr;
            }
        },
        methods : {
            showYear(i , j){
                </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span>.arr[(j - 1) * 10 + (i - 1<span style="color: #000000;">)]
            }
        }
    }
</span>&lt;/script&gt;
&lt;style&gt;<span style="color: #000000;">
    .cur{color:red;font</span>-<span style="color: #000000;">weight:bold;}
</span>&lt;/style&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>&nbsp;</p>
<p>【<strong>以下开始完善整个项目</strong>】：</p>
<p><strong><span style="font-family: 宋体;">切换视图：</span>App.vue<span style="font-family: 宋体;">父组件</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('3ad45190-60b5-4e7f-9041-63503173ec23')"><img id="code_img_closed_3ad45190-60b5-4e7f-9041-63503173ec23" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_3ad45190-60b5-4e7f-9041-63503173ec23" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('3ad45190-60b5-4e7f-9041-63503173ec23',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_3ad45190-60b5-4e7f-9041-63503173ec23" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;<span style="color: #000000;">MonthChooser
            :year</span>="year"<span style="color: #000000;">
            :month</span>="month"<span style="color: #000000;">
            :setYear</span>="setYear"<span style="color: #000000;">
            :setMonth</span>="setMonth"<span style="color: #000000;">
            :setView</span>="setView"<span style="color: #000000;">
            v</span>-<span style="color: #0000ff;">if</span>="view == 'month'"
        &gt;&lt;/MonthChooser&gt;
    &lt;MonthView :year="year" :month="month" v-<span style="color: #0000ff;">if</span>="view == 'month'"&gt;&lt;/MonthView&gt;

        &lt;<span style="color: #000000;">DecadeChooser
            :year</span>="year"<span style="color: #000000;">
            :month</span>="month"<span style="color: #000000;">
            :setYear</span>="setYear"<span style="color: #000000;">
            :setMonth</span>="setMonth"<span style="color: #000000;">
            :setView</span>="setView"<span style="color: #000000;">
            v</span>-<span style="color: #0000ff;">if</span>="view=='decade'"
        &gt;&lt;/DecadeChooser&gt;
        &lt;<span style="color: #000000;">DecadeView
            :year</span>="year"<span style="color: #000000;">
            :setYear</span>="setYear"<span style="color: #000000;">
            v</span>-<span style="color: #0000ff;">if</span>="view == 'decade'"<span style="color: #000000;">
            :setView</span>="setView"
        &gt;&lt;/DecadeView&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    import MonthView from </span>"./components/MonthView.vue"<span style="color: #000000;">;
    import MonthChooser from </span>"./components/MonthChooser.vue"<span style="color: #000000;">;
    import DecadeChooser from </span>"./components/DecadeChooser.vue"<span style="color: #000000;">;
    import DecadeView from </span>"./components/DecadeView.vue"<span style="color: #000000;">;
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
        data(){
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> {
                year : </span>2018<span style="color: #000000;"> ,
                month : </span>5<span style="color: #000000;"> ,
                view : </span>"month"<span style="color: #000000;">
            }
        },
        components : {
            MonthView,
            MonthChooser,
            DecadeView,
            DecadeChooser
        },
        methods : {
            ...
            setView(view){
                </span><span style="color: #0000ff;">this</span>.view = view; <span style="color: #008000;">//</span><span style="color: #008000;">设置视图切换</span>
<span style="color: #000000;">            }
        }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p><strong>DecadeChooser.vue<span style="font-family: 宋体;">年视图按钮组件：</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('a6e11d6e-9063-4b09-b104-c54a00e8e647')"><img id="code_img_closed_a6e11d6e-9063-4b09-b104-c54a00e8e647" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_a6e11d6e-9063-4b09-b104-c54a00e8e647" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('a6e11d6e-9063-4b09-b104-c54a00e8e647',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_a6e11d6e-9063-4b09-b104-c54a00e8e647" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;h1&gt;
            &lt;button @click="goPrev()"&gt;-&lt;/button&gt;
            {{year}}年&lt;a href="javascript:;" @click="setView('month')"&gt;{{month}}月&lt;/a&gt;
            &lt;button @click="goNext()"&gt;+&lt;/button&gt;
        &lt;/h1&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;">{
        props : [</span>"year", "month" , "setYear","setView"<span style="color: #000000;">],
        methods : {
            goNext(){
                </span><span style="color: #0000ff;">this</span>.setYear(<span style="color: #0000ff;">this</span>.year + 1<span style="color: #000000;">)
            },
            goPrev(){
                </span><span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.year &lt;= 1970) <span style="color: #0000ff;">return</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">this</span>.setYear(<span style="color: #0000ff;">this</span>.year - 1<span style="color: #000000;">)
            }
        }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p><strong>MonthChooser.vue<span style="font-family: 宋体;">月视图按钮组件：</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('52350a57-07c1-4258-83bc-2bb28f886a51')"><img id="code_img_closed_52350a57-07c1-4258-83bc-2bb28f886a51" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_52350a57-07c1-4258-83bc-2bb28f886a51" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('52350a57-07c1-4258-83bc-2bb28f886a51',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_52350a57-07c1-4258-83bc-2bb28f886a51" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;h1&gt;
            &lt;button @click="goPrev()"&gt;-&lt;/button&gt;
            &lt;a href="javascript:;" @click="setView('decade')"&gt;{{year}}&lt;/a&gt;年{{month}}月
            &lt;button @click="goNext()"&gt;+&lt;/button&gt;
        &lt;/h1&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;">{
        props : [</span>"year", "month" , "setYear", "setMonth","setView"<span style="color: #000000;">],
        methods : {
            goNext(){
                ...
            },
            goPrev(){
                ...
            }
        }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p><strong>DecadeView</strong><strong>.vue<span style="font-family: 宋体;">年份视图组件：</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('54483c29-3c43-4d3e-aab8-1c28b5cc6238')"><img id="code_img_closed_54483c29-3c43-4d3e-aab8-1c28b5cc6238" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_54483c29-3c43-4d3e-aab8-1c28b5cc6238" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('54483c29-3c43-4d3e-aab8-1c28b5cc6238',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_54483c29-3c43-4d3e-aab8-1c28b5cc6238" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;table&gt;
            &lt;tr v-<span style="color: #0000ff;">for</span>="i in 10"&gt;
                &lt;<span style="color: #000000;">td
                    v</span>-<span style="color: #0000ff;">for</span>="j in 3"<span style="color: #000000;">
                    :class</span>="{'cur' : year == showYear(i , j)}"<span style="color: #000000;">
                    @click</span>="tdClick(i,j)"
                &gt;<span style="color: #000000;">
                   {{showYear(i , j)}}
                </span>&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
        props : [</span>"year","setYear","setView"<span style="color: #000000;">],
        computed : {
            arr(){
                ...
            }
        },
        methods : {
            showYear(i , j){
                </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span>.arr[(j - 1) * 10 + (i - 1<span style="color: #000000;">)]
            },
            tdClick(i , j){
                </span><span style="color: #0000ff;">this</span>.setYear(<span style="color: #0000ff;">this</span>.showYear(i , j)); <span style="color: #008000;">//</span><span style="color: #008000;">切换年份</span>
                <span style="color: #0000ff;">this</span>.setView("month"); <span style="color: #008000;">//</span><span style="color: #008000;">切换年份后，回到月视图</span>
<span style="color: #000000;">            }
        }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>MonthView.vue<span style="font-family: 宋体;">月视图早已完善。</span></p>
<hr />
<p>&nbsp;</p>
<h1>二、<strong>UI<span style="font-family: 宋体;">组件库</span></strong></h1>
<p><span style="font-family: 宋体;">饿了么</span>UI<span style="font-family: 宋体;">：</span><a href="http://element-cn.eleme.io/#/zh-CN"><span style="text-decoration: underline;">http://element-cn.eleme.io/#/zh-CN</span></a></p>
<p>iviewUI <span style="font-family: 宋体;">：</span><a href="https://www.iviewui.com/"><span>https://www.iviewui.com/</span></a></p>
<p>&nbsp;</p>
<h2><strong>2.1<span style="font-family: 宋体;">饿了么</span><span style="font-family: 华文中宋;">UI</span></strong></h2>
<p><span style="font-family: 宋体;">以饿了么</span>UI<span style="font-family: 宋体;">为例</span></p>
<p>安装依赖：</p>
<div class="cnblogs_code">
<pre><code>npm install --save element-ui</pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">在</span>main.js<span style="font-family: 宋体;">中配置</span><span style="font-family: Consolas;">eleUI</span><span style="font-family: 宋体;">组件：</span></p>
<p><span style="font-family: 宋体;">在引入</span> Element <span style="font-family: 宋体;">时，可以传入一个全局配置对象。该对象目前仅支持 </span><span style="font-family: Consolas;">size </span><span style="font-family: 宋体;">字段，用于改变组件的默认尺寸。按照引入 </span><span style="font-family: Consolas;">Element </span><span style="font-family: 宋体;">的方式，具体操作如下：</span></p>
<div class="cnblogs_code">
<pre><code>import Vue from "vue"<span style="color: #000000;">;
import App from </span>"./App.vue"<span style="color: #000000;">;
<span style="color: #ff0000;">import ElementUI from </span></span><span style="color: #ff0000;">'element-ui';
//import 'element-ui/lib/theme-chalk/index.css'; //样式在index.html页面引入</span><span style="color: #008000;">
//</span><span style="color: #008000;"> Vue.use(ElementUI);</span>
<span style="color: #ff0000;">Vue.use(ElementUI, { size: 'small' });

</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
    el : </span>"#app"<span style="color: #000000;"> ,
    render: (h) </span>=&gt;<span style="color: #000000;"> h(App)
});</span></pre>
</div>
<p><span style="font-family: 宋体;">然后就可以在</span>.vue<span style="font-family: 宋体;">组件中直接使用了。</span></p>
<hr />
<p>&nbsp;</p>
<h2><strong>2.2 iviewui</strong></h2>
<div class="cnblogs_code">
<pre><code>npm install iview --save</pre>
</div>
<hr />
<h1><strong>三、传统数据管理的问题</strong></h1>
<p><strong><span style="font-family: 'Source Sans Pro';">以下是一个表示</span>&ldquo;单向数据流&rdquo;理念的极简示意：</strong></p>
<p>&nbsp;</p>
<p><strong><span style="font-family: 宋体;"><img src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识24.png" alt="" /></span></strong></p>
<p>当我们的应用遇到多个组件共享状态时，单向数据流的简洁性很容易被破坏：</p>
<p>多个视图依赖于同一状态。</p>
<p>来自不同视图的行为需要变更同一状态。</p>
<p><span style="font-family: 宋体;">对于问题</span>1<span style="font-family: 宋体;">：传参的方法对于多层嵌套的组件将会非常繁琐，并且对于兄弟组件间的状态传递无能为力。</span></p>
<p><span style="font-family: 宋体;">对于问题</span>2<span style="font-family: 宋体;">：我们经常会采用父子组件直接引用或者通过事件来变更和同步状态的多份拷贝。以上的这些模式非常脆弱，通常会导致无法维护的代码。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">因此，我们为什么不把组件的共享状态抽取出来，以一个全局单例模式管理呢？在这种模式下，我们的组件树构成了一个巨大的</span>&ldquo;视图&rdquo;，不管在树的哪个位置，任何组件都能获取状态或者触发行为！</p>
<p>&nbsp;</p>
<p>另外，通过定义和隔离状态管理中的各种概念并强制遵守一定的规则，我们的代码将会变得更结构化且易维护。</p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">这就是</span> Vuex <span style="font-family: 宋体;">背后的基本思想，借鉴了 </span><span style="font-family: Consolas;">Flux</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">Redux</span><span style="font-family: 宋体;">、和 </span><span style="font-family: Consolas;">The Elm Architecture</span><span style="font-family: 宋体;">。与其他模式不同的是，</span><span style="font-family: Consolas;">Vuex </span><span style="font-family: 宋体;">是专门为 </span><span style="font-family: Consolas;">Vue.js </span><span style="font-family: 宋体;">设计的状态管理库，以利用 </span><span style="font-family: Consolas;">Vue.js </span><span style="font-family: 宋体;">的细粒度数据响应机制来进行高效的状态更新。</span></p>
<p>&nbsp;</p>
<p><strong>之前我们做的日历组件将数据放到了</strong><strong>App.vue<span style="font-family: 宋体;">最大父组件上，并且还有</span><span style="font-family: Consolas;">:year</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">:month</span><span style="font-family: 宋体;">、：</span><span style="font-family: Consolas;">setYear</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">:setMonth</span><span style="font-family: 宋体;">等一系列的参数传递操作。</span></strong></p>
<p><span style="color: #ff0000;">&nbsp;</span></p>
<p><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">但是</span>vuex<span style="font-family: 宋体;">就是将数据放到了全局</span><span style="font-family: Consolas;">store</span><span style="font-family: 宋体;">中。</span></strong></span></p>
<p><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">不用</span>vuex<span style="font-family: 宋体;">也能做项目，只不过数据管理起来很不方便。</span></strong></span></p>
<hr />
<h1><strong><span style="font-family: 宋体;">四、</span>Vuex</strong></h1>
<h2><strong>4.1 Vuex<span style="font-family: 宋体;">配置</span></strong></h2>
<p>官网：<span style="text-decoration: underline;"><a href="https://vuex.vuejs.org/zh-cn/">https://vuex.vuejs.org/zh-cn/</a></span></p>
<p><span style="font-family: 宋体;">安装</span>vuex<span style="font-family: 宋体;">：</span></p>
<div class="cnblogs_code">
<pre><code>npm install --save vuex</pre>
</div>
<p><strong><span style="font-family: 宋体;">什么是</span>vuex<span style="font-family: 宋体;">？</span></strong></p>
<p>Vuex <span style="font-family: 宋体;">是一个专为 </span><span style="font-family: Consolas;">Vue.js </span><span style="font-family: 宋体;">应用程序开发的</span><span style="color: #ff0000;"><strong>状态管理模式</strong></span>。它采用集中式存储管理应用的所有组件的<span style="color: #ff0000;"><strong>状态</strong></span>，并以相应的规则保证<span style="color: #ff0000;"><strong>状态</strong></span>以一种可预测的方式发生变化。</p>
<p><strong><span style="font-family: 宋体;">简单说：</span>vuex<span style="font-family: 宋体;">就是一个</span></strong><span style="color: #ff0000;"><strong><span style="text-decoration: underline;"><span style="font-family: 宋体;">状态管理容器</span></span></strong></span><strong>，说白了就是将数据单独存放出去。</strong></p>
<hr />
<h2><strong>4.2 state<span style="font-family: 宋体;">（全局仓库）</span></strong></h2>
<p><strong><span style="font-family: 宋体;">什么是</span>&ldquo;状态管理模式&rdquo;？</strong></p>
<p><span style="font-family: 宋体;">每个</span>Vuex<span style="font-family: 宋体;">应用的核心就是</span><span style="font-family: Consolas;">store</span><span style="font-family: 宋体;">（仓库）。</span><span style="font-family: Consolas;">store</span><span style="font-family: 宋体;">就是一个容器，它包含着你项目中大部分的状态 </span><span style="font-family: Consolas;">(state)</span><span style="font-family: 宋体;">。</span></p>
<p>&nbsp;</p>
<p><strong>Vuex <span style="font-family: 宋体;">和单纯的全局对象有以下两点不同：</span></strong></p>
<p>Vuex<span style="font-family: 宋体;">的状态存储是响应式的。当 </span><span style="font-family: Consolas;">Vue </span><span style="font-family: 宋体;">组件从 </span><span style="font-family: Consolas;">store </span><span style="font-family: 宋体;">中读取状态的时候，若 </span><span style="font-family: Consolas;">store </span><span style="font-family: 宋体;">中的状态发生变化，那么相应的组件也会相应地得到高效更新变化。</span></p>
<p><span style="font-family: 宋体;">你不能直接改变</span>store<span style="font-family: 宋体;">中的状态。改变</span><span style="font-family: Consolas;">store</span><span style="font-family: 宋体;">中的状态的唯一途径就是通过</span><span style="font-family: Consolas;">commit</span><span style="font-family: 宋体;">提交</span><span style="font-family: Consolas;">mutation</span><span style="font-family: 宋体;">。这样使得我们可以方便地跟踪每一个状态的变化，从而让我们能够实现一些工具帮助我们更好地了解我们的应用。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">在</span>main.js<span style="font-family: 宋体;">创建一个全局仓库（</span><span style="font-family: Consolas;">store</span><span style="font-family: 宋体;">），让我们从一个简单的</span><span style="font-family: Consolas;">Vue</span><span style="font-family: 宋体;">计数器开始：</span></p>
<div class="cnblogs_code">
<pre><code>import Vue from 'vue'<span style="color: #000000;">;
<span style="color: #ff0000;">import Vuex from </span></span><span style="color: #ff0000;">'vuex'; //引入Vuex包</span>
import App from './App.vue'<span style="color: #000000;">;
<span style="color: #ff0000;">Vue.use(Vuex); </span></span><span style="color: #ff0000;">//将vuex安装到vue中</span>

<span style="color: #008000;">//</span><span style="color: #008000;">创建一个仓库，并且存放一些全局数据（存放四大天王选项）</span>
<span style="color: #ff0000;">const store = new Vuex.Store({
    state : {
        a : 100
    }
})

</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
    el : </span>"#app"<span style="color: #000000;">,
    <span style="color: #ff0000;">store, </span></span><span style="color: #008000;">//</span><span style="color: #008000;">将store注入到全局中</span>
    render : (h)=&gt;<span style="color: #000000;"> h(App)
})</span></pre>
</div>
<p><strong>Vuex<span style="font-family: 宋体;">通过</span><span style="font-family: Consolas;">store</span><span style="font-family: 宋体;">选项，提供了一种机制将状态从根组件&ldquo;注入&rdquo;到每一个子组件中（需要调用</span><span style="font-family: Consolas;">Vue.use(Vuex)</span><span style="font-family: 宋体;">）</span></strong></p>
<p><strong><span style="font-family: 宋体;">通过在根实例中注册</span>store<span style="font-family: 宋体;">选项，该</span><span style="font-family: Consolas;">store</span><span style="font-family: 宋体;">实例会注入到根组件下的所有子组件中，并且组件能通过</span><span style="font-family: Consolas;">this.$store</span><span style="font-family: 宋体;">访问。</span></strong></p>
<p><strong>&nbsp;</strong></p>
<p><span style="font-family: 宋体;">在</span>App.vue<span style="font-family: 宋体;">中的生命周期中输出</span><span style="font-family: Consolas;">this</span><span style="font-family: 宋体;">，能看到</span><span style="font-family: Consolas;">vue</span><span style="font-family: 宋体;">实例化对象的全局有</span><span style="font-family: Consolas;">$store</span><span style="font-family: 宋体;">这个对象</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">template</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>全局仓库state对象的a值：<span style="color: #ff0000;">{{$store.state.a}}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">template</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span><span style="background-color: #f5f5f5; color: #000000;">
    export </span><span style="background-color: #f5f5f5; color: #0000ff;">default</span><span style="background-color: #f5f5f5; color: #000000;"> {
        created(){
            <span style="color: #ff0000;">console.log(</span></span><span style="color: #ff0000;"><span style="background-color: #f5f5f5;">this</span><span style="background-color: #f5f5f5;">)
            console.log(</span><span style="background-color: #f5f5f5;">this</span></span><span style="background-color: #f5f5f5; color: #000000;"><span style="color: #ff0000;">.$store.state.a)</span>
        }
    }
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p><img src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识25.png" alt="" /></p>
<p><strong>之前做的日历组件将数据放到了</strong><strong>App.vue<span style="font-family: 宋体;">最大父组件上，并且还有</span><span style="font-family: Consolas;">:year</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">:month</span><span style="font-family: 宋体;">、：</span><span style="font-family: Consolas;">setYear</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">:setMonth</span><span style="font-family: 宋体;">等一系列的参数传递操作。</span></strong></p>
<p><strong><span style="font-family: 宋体;">但是</span>Vuex<span style="font-family: 宋体;">就是将数据放到了全局</span><span style="font-family: Consolas;">store</span><span style="font-family: 宋体;">中，注意：</span></strong></p>
<p><strong><span style="font-family: 宋体;">不管项目有多大，</span>store<span style="font-family: 宋体;">只有一个</span></strong></p>
<p><strong><span style="font-family: 宋体;">只要配置正确，组件内部可以使用</span>$store<span style="font-family: 宋体;">即可访问</span><span style="font-family: Consolas;">store</span><span style="font-family: 宋体;">的全局数据</span></strong></p>
<p><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">改变</span> store <span style="font-family: 宋体;">中的状态（数据）的唯一途径就是通过</span><span style="font-family: Consolas;">commit()</span><span style="font-family: 宋体;">函数提交 </span><span style="font-family: Consolas;">mutation</span><span style="font-family: 宋体;">。</span></strong></span></p>
<p align="justify">&nbsp;</p>
<p align="justify"><strong>以下的描述来自于官方：</strong><a href="https://vuex.vuejs.org/zh/guide/"><strong><span style="text-decoration: underline;">https://vuex.vuejs.org/zh/guide/</span></strong></a></p>
<blockquote>
<p><span style="font-family: 宋体;">再次强调，我们通过提交</span> mutation <span style="font-family: 宋体;">的方式，而非直接改变 </span><span style="font-family: Consolas;">store.state.a</span><span style="font-family: 宋体;">，是因为我们想要更明确地追踪到状态的变化。这个简单的约定能够让你的意图更加明显，这样你在阅读代码的时候能更容易地解读应用内部的状态改变。此外，这样也让我们有机会去实现一些能记录每次状态改变，保存状态快照的调试工具。有了它，我们甚至可以实现如时间穿梭般的调试体验。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">由于</span> store <span style="font-family: 宋体;">中的状态是响应式的，在组件中调用 </span><span style="font-family: Consolas;">store </span><span style="font-family: 宋体;">中的状态简单到仅需要在计算属性中返回即可。触发变化也仅仅是在组件的 </span><span style="font-family: Consolas;">methods </span><span style="font-family: 宋体;">中提交 </span><span style="font-family: Consolas;">mutation</span><span style="font-family: 宋体;">。</span></p>
</blockquote>
<hr />
<h2><strong>4.3 mutations</strong></h2>
<p><strong><span style="color: #ff0000;"><span style="font-family: 宋体;">更改</span> Vuex <span style="font-family: 宋体;">的 </span><span style="font-family: Consolas;">store </span><span style="font-family: 宋体;">中的状态的唯一方法是提交 </span><span style="font-family: Consolas;">mutation</span></span><span style="font-family: 宋体;">。</span></strong>Vuex<span style="font-family: 宋体;">中的</span><span style="font-family: Consolas;">mutation</span><span style="font-family: 宋体;">非常类似于事件：每个 </span><span style="font-family: Consolas;">mutation</span><span style="font-family: 宋体;">都有一个字符串的 </span><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">事件类型</span>(type)</strong>&nbsp;<span style="font-family: 宋体;">和一个</span><strong><span style="font-family: 宋体;">回调函数</span> (handler)</strong></span>。这个回调函数就是我们实际进行状态更改的地方，并且它会<strong><span style="color: #ff0000;"><span style="font-family: 宋体;">接受</span> state</span> </strong>作为第一个参数：</p>
<p><span style="font-family: 宋体;">你不能直接调用一个</span>mutation handler<span style="font-family: 宋体;">。这个选项更像是事件注册：当触发一个</span><span style="font-family: Consolas;">type</span><span style="font-family: 宋体;">类型为</span><span style="font-family: Consolas;">JIA</span><span style="font-family: 宋体;">的 </span><span style="font-family: Consolas;">mutation</span><span style="font-family: 宋体;">时，调用此函数。</span><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">要唤醒一个</span>mutation<span style="font-family: 宋体;">函数，你需要以相应的</span><span style="font-family: Consolas;">type</span><span style="font-family: 宋体;">调用</span><span style="font-family: Consolas;">store.commit()</span><span style="font-family: 宋体;">方法</span></strong></span>：</p>
<p>&nbsp;</p>
<p>main.js</p>
<div class="cnblogs_code">
<pre><code>import Vue from 'vue'<span style="color: #000000;">;
import Vuex from </span>'vuex'; <span style="color: #008000;">//</span><span style="color: #008000;">引入Vuex包</span>
import App from './App.vue'<span style="color: #000000;">;
Vue.use(Vuex); </span><span style="color: #008000;">//</span><span style="color: #008000;">将vuex安装到vue中</span>

<span style="color: #008000;">//</span><span style="color: #008000;">创建一个仓库，并且存放一些全局数据（存放四大选项）</span>
const store = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vuex.Store({
    state : {
        a : </span>100<span style="color: #000000;">
    },
    <span style="color: #ff0000;">mutations : {
        </span></span><span style="color: #ff0000;">// 这里的函数只能通过commit()触发，其他操作是无法影响的
        JIA(state){
            state.a++
        },
        MINUS(state){
            state.a--</span><span style="color: #000000;"><span style="color: #ff0000;">
        }
    }</span>
})</span></pre>
</div>
<p>&nbsp;</p>
<p>App.vue</p>
<div class="cnblogs_code">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;h1&gt;全局仓库state对象的a：<span style="color: #ff0000;">{{$store.state.a}}</span>&lt;/h1&gt;
        &lt;button @click="add()"&gt;+&lt;/button&gt;
        &lt;button @click="minus()"&gt;-&lt;/button&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
    methods:{
        add(){
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> this.$store.state.a++ //不允许直接改全局的state数据</span>
           <span style="color: #ff0000;"> this.$store.commit("JIA"</span><span style="color: #000000;"><span style="color: #ff0000;">);</span>
        },
        minus(){
            </span><span style="color: #ff0000;">this.$store.commit("MINUS"</span><span style="color: #000000;"><span style="color: #ff0000;">);</span>
        }
    }
};
</span>&lt;/script&gt;</pre>
</div>
<p>&nbsp;</p>
<p>Vuex<span style="font-family: 宋体;">自带一个日志插件（</span><span style="font-family: Consolas;">vue-logger</span><span style="font-family: 宋体;">）用于调试：</span></p>
<div class="cnblogs_code">
<pre><code>import createLogger from 'vuex/dist/logger'<span style="color: #000000;">

const store </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vuex.Store({
  plugins: [createLogger()]
})</span></pre>
</div>
<p>总结：</p>
<p><span style="font-family: 宋体;">只有</span>mutations<span style="font-family: 宋体;">中可以改变</span><span style="font-family: Consolas;">state</span><span style="font-family: 宋体;">，其他任何方式都不能改</span><span style="font-family: Consolas;">state</span><span style="font-family: 宋体;">的值</span></p>
<p><span style="font-family: 宋体;">组件想要改变</span>store<span style="font-family: 宋体;">中的</span><span style="font-family: Consolas;">state</span><span style="font-family: 宋体;">，只能通过</span><span style="font-family: Consolas;">commit()</span><span style="font-family: 宋体;">发出一条命令。</span></p>
<h3>&nbsp;</h3>
<hr />
<h3>&nbsp;</h3>
<h3><strong><span style="font-family: 宋体;">提交载荷（</span>Payload<span style="font-family: 宋体;">）</span></strong></h3>
<p><span style="font-family: 宋体;">你可以向</span> store.commit() <span style="font-family: 宋体;">传入额外的参数，即 </span><span style="font-family: Consolas;">mutation </span><span style="font-family: 宋体;">的 载荷（</span><span style="font-family: Consolas;">payload</span><span style="font-family: 宋体;">）</span><span style="font-family: Consolas;">,</span><span style="font-family: 宋体;">在大多数情况下，载荷应该是一个对象，这样可以包含多个字段并且记录的 </span><span style="font-family: Consolas;">mutation </span><span style="font-family: 宋体;">会更易读：</span></p>
<p>main.js</p>
<div class="cnblogs_code">
<pre><code>import Vue from 'vue'<span style="color: #000000;">;
import Vuex from </span>'vuex'; <span style="color: #008000;">//</span><span style="color: #008000;">引入Vuex包</span>
import App from './App.vue'<span style="color: #000000;">;
import createLogger from </span>'vuex/dist/logger'<span style="color: #000000;">;

Vue.use(Vuex); </span><span style="color: #008000;">//</span><span style="color: #008000;">将vuex安装到vue中</span>

<span style="color: #008000;">//</span><span style="color: #008000;">创建一个仓库，并且存放一些全局数据（存放四大选项）</span>
const store = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vuex.Store({
    state : {
        a : </span>100<span style="color: #000000;">
    },
    mutations : {
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 这里的函数只能通过commit()触发，其他操作是无法影响的</span>
<span style="color: #000000;">        JIA(state,payload){
           <span style="color: #ff0000;"> state.a </span></span><span style="color: #ff0000;">+=</span><span style="color: #000000;"><span style="color: #ff0000;"> payload.n</span>
        },
        MINUS(state, payload){
            <span style="color: #ff0000;">state.a </span></span><span style="color: #ff0000;">-=</span><span style="color: #000000;"><span style="color: #ff0000;"> payload.n</span>
        }
    },
    plugins: [createLogger()]
})</span></pre>
</div>
<p>&nbsp;</p>
<p>App.vue</p>
<div class="cnblogs_code">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;h1&gt;全局仓库state对象的a：{{$store.state.a}}&lt;/h1&gt;
        &lt;button @click="add()"&gt;+&lt;/button&gt;
        &lt;button @click="minus()"&gt;-&lt;/button&gt;
        &lt;button @click="<span style="color: #ff0000;">add(2)</span>"&gt;+&lt;/button&gt;
        &lt;input type="text" <span style="color: #ff0000;">ref="txt"</span>&gt;
        &lt;button @click="<span style="color: #ff0000;">addUser()</span>"&gt;加用户输入的数&lt;/button&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
    methods:{
        add(<span style="color: #ff0000;">n</span></span><span style="color: #ff0000;">=1</span><span style="color: #000000;">){
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> this.$store.state.a++ //不允许直接改全局的state数据</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> this.$store.commit("JIA", 8);</span>
            <span style="color: #ff0000;">this.$store.commit("JIA"</span><span style="color: #000000;"><span style="color: #ff0000;">, {n});</span>
        },
        minus(){
            </span><span style="color: #ff0000;">this.$store.commit("MINUS", {n : 10</span><span style="color: #000000;"><span style="color: #ff0000;">});</span>
        },
        addUser(){
            </span><span style="color: #ff0000;">this.$store.commit("JIA", {n : Number(this</span><span style="color: #000000;"><span style="color: #ff0000;">.$refs.txt.value)});</span>
        }
    }
};
</span>&lt;/script&gt;</pre>
</div>
<p align="center"><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">记住一条重要的原则：</span>mutations<span style="font-family: 宋体;">必须是同步函数</span></strong></span></p>
<hr />
<h2><strong>4.4 actions</strong></h2>
<p><span style="font-family: 宋体;">上面说过</span>mutation <span style="font-family: 宋体;">中不能写异步语句，为了处理异步操作，我们来看一看</span><span style="font-family: Consolas;">action </span></p>
<p>action <span style="font-family: 宋体;">类似于 </span><span style="font-family: Consolas;">mutation</span><span style="font-family: 宋体;">，不同在于：</span></p>
<p>action <span style="font-family: 宋体;">提交的是 </span><span style="font-family: Consolas;">mutation</span><span style="font-family: 宋体;">，而不是直接变更状态。</span></p>
<p>action <span style="font-family: 宋体;">可以包含任意异步操作。</span></p>
<p>action <span style="font-family: 宋体;">要通过 </span><span style="font-family: Consolas;">store.dispatch() </span><span style="font-family: 宋体;">方法触发</span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">注意：涉及到异步</span>Ajax<span style="font-family: 宋体;">请求数据，案例必须运行在服务器端（</span><span style="font-family: Consolas;">127.0.0.1</span><span style="font-family: 宋体;">）</span></strong></span></p>
<p><span style="font-family: 宋体;">新建一个</span>data<span style="font-family: 宋体;">文件夹，创建</span><span style="font-family: Consolas;">txt</span><span style="font-family: 宋体;">文件。使用</span><span style="font-family: Consolas;">ajax </span><span style="font-family: 宋体;">异步读取文本文件中数据：</span></p>
<p><strong>App.vue<span style="font-family: 宋体;">父组件：</span></strong></p>
<div class="cnblogs_code">
<pre><code>&lt;script&gt;<span style="color: #000000;">
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
        methods:{
            add(){
                </span><span style="color: #0000ff;">this</span>.$store<span style="color: #ff0000;">.dispatch("JIA"</span><span style="color: #000000;"><span style="color: #ff0000;">)</span>;
            }
        }
    }
</span>&lt;/script&gt;</pre>
</div>
<p>&nbsp;</p>
<p>main.js</p>
<div class="cnblogs_code">
<pre><code>const store = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vuex.Store({
    state : {
        a : </span>100<span style="color: #000000;">
    },
    mutations : {
        JIA(state,payload){
            console.log(</span>"只有commit命令能触发我"<span style="color: #000000;">)
            state.a </span>+=<span style="color: #000000;"> payload.n
        }
    },
    actions : {
        <span style="color: #ff0000;">async </span><span style="color: #0000ff;">JIA</span><span style="color: #ff0000;">({commit})</span>{
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> console.log("只有dispatch命令能触发我，这里可以写异步语句")</span>
            <span style="color: #ff0000;">var data = await fetch('../data/1.txt').then(data=&gt;data.json())
            </span><span style="color: #008000;">//</span><span style="color: #008000;">action提交的是mutation，而不是直接更改状态，</span>
            <span style="color: #008000;">//</span><span style="color: #008000;">请求成功返回的数据需要通过commit命令mutations去修改state中的数据</span><span style="color: #008000;">
　　　　　　　//</span><span style="color: #008000;"> context.commit("JIA", {n: data})</span>
            <span style="color: #008000;">//</span><span style="color: #008000;"> this.commit("JIA", {n: data})</span>
            <span style="color: #ff0000;">commit("JIA"</span><span style="color: #000000;"><span style="color: #ff0000;">, {n:data})</span>
        }
    },
    plugins: [createLogger()]
})</span></pre>
</div>
<p>actions<span style="font-family: 宋体;">中的函数，天生自带默认参数</span></p>
<p>&nbsp;<img src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识26.png" alt="" /></p>
<p><strong>一些概念：</strong></p>
<p>action <span style="font-family: 宋体;">函数接受一个与</span><span style="font-family: Consolas;">store</span><span style="font-family: 宋体;">实例具有相同方法和属性</span><span style="font-family: Consolas;">context</span><span style="font-family: 宋体;">对象，因此你可以调用 </span><span style="font-family: Consolas;">context.commit </span><span style="font-family: 宋体;">提交一个 </span><span style="font-family: Consolas;">mutation</span><span style="font-family: 宋体;">，或者通过 </span><span style="font-family: Consolas;">context.state </span><span style="font-family: 宋体;">和 </span><span style="font-family: Consolas;">context.getters </span><span style="font-family: 宋体;">来获取 </span><span style="font-family: Consolas;">state </span><span style="font-family: 宋体;">和 </span><span style="font-family: Consolas;">getters</span><span style="font-family: 宋体;">。当我们在之后介绍到 </span><span style="font-family: Consolas;">Modules </span><span style="font-family: 宋体;">时，你就知道 </span><span style="font-family: Consolas;">context </span><span style="font-family: 宋体;">对象为什么不是 </span><span style="font-family: Consolas;">store </span><span style="font-family: 宋体;">实例本身了。</span></p>
<p>&nbsp;</p>
<p><strong><span style="font-family: 宋体;">实践中，会经常用到</span>ES2015<span style="font-family: 宋体;">的 参数解构 来简化代码（特别是我们需要调用</span><span style="font-family: Consolas;">commit</span><span style="font-family: 宋体;">很多次的时候）：</span></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">actions:{
    async JIA(<span style="color: #ff0000;">{commit}</span>){
        </span><span style="color: #0000ff;">var</span> data = await fetch("../data/1.txt").then(data=&gt;<span style="color: #000000;">data.json());
        <span style="color: #ff0000;">commit(</span></span><span style="color: #ff0000;">"JIA"</span><span style="color: #000000;"><span style="color: #ff0000;">,data)</span>
    }
},</span></pre>
</div>
<p>&nbsp;</p>
<p>action <span style="font-family: 宋体;">通过 </span><span style="font-family: Consolas;">store.dispatch() </span><span style="font-family: 宋体;">方法触发：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">methods:{
    add(){
        </span><span style="color: #ff0000;">this.$store.dispatch("JIA"</span><span style="color: #000000;"><span style="color: #ff0000;">)</span>
    }
}</span></pre>
</div>
<p><span style="font-family: 宋体;">乍一眼看上去感觉多此一举，我们直接分发</span> mutation <span style="font-family: 宋体;">岂不更方便？实际上并非如此，还记得 </span><span style="font-family: Consolas;">mutation </span><span style="font-family: 宋体;">必须同步执行这个限制么？</span><span style="font-family: Consolas;">Action </span><span style="font-family: 宋体;">就不受约束！我们可以在 </span><span style="font-family: Consolas;">action </span><span style="font-family: 宋体;">内部执行异步操作：</span></p>
<p>actions<span style="font-family: 宋体;">支持同样的载荷方式和对象方式进行分发：</span></p>
<p><span style="color: #ff0000;"><strong>vuex<span style="font-family: 宋体;">单向数据流动的图示：</span></strong></span></p>
<p>&nbsp;<img src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识27.png" alt="" /></p>
<p><span style="font-family: 宋体;">使用</span> Vuex <span style="font-family: 宋体;">并不意味着你需要将所有的状态放入</span><span style="font-family: Consolas;">Vuex</span><span style="font-family: 宋体;">。虽然将所有的状态放到 </span><span style="font-family: Consolas;">Vuex </span><span style="font-family: 宋体;">会使状态变化更显式和易调试，但也会使代码变得冗长和不直观。如果有些状态严格属于单个组件，最好还是作为组件的局部状态。你应该根据你的应用开发需要进行权衡和确定。</span></p>
<hr />
<h2><strong>4.5 getters</strong></h2>
<p><span style="font-family: 宋体;">有时候我们需要从</span> store <span style="font-family: 宋体;">中的 </span><span style="font-family: Consolas;">state </span><span style="font-family: 宋体;">中派生出一些状态，例如对列表进行过滤并计数：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">computed: {
   arr() {
       </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span>.$store.state.todos.filter(todo =&gt;<span style="color: #000000;"> todo.done).length
   }
}</span></pre>
</div>
<p><span style="font-family: 宋体;">在</span>Vuex<span style="font-family: 宋体;">中，</span><span style="font-family: Consolas;">getter</span><span style="font-family: 宋体;">类似于组件中的</span><span style="font-family: Consolas;">computed</span><span style="font-family: 宋体;">，表示</span><span style="font-family: Consolas;">state</span><span style="font-family: 宋体;">的一些计算后的值。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">如果有多个组件需要用到此属性，我们要么复制这个函数，或者抽取到一个共享函数然后在多处导入它</span>&mdash;&mdash;无论哪种方式都不是很理想。</p>
<p>Vuex <span style="font-family: 宋体;">允许我们在 </span><span style="font-family: Consolas;">store </span><span style="font-family: 宋体;">中定义&ldquo;</span><span style="font-family: Consolas;">getter</span><span style="font-family: 宋体;">&rdquo;（可以认为是 </span><span style="font-family: Consolas;">store </span><span style="font-family: 宋体;">的计算属性）。就像</span><span style="font-family: Consolas;">computed</span><span style="font-family: 宋体;">计算属性一样，</span><span style="font-family: Consolas;">getter </span><span style="font-family: 宋体;">的返回值会根据它的依赖被缓存起来，且只有当它的依赖值发生了改变才会被重新计算。</span></p>
<p>&nbsp;</p>
<p>Getter <span style="font-family: 宋体;">接受 </span><span style="font-family: Consolas;">state </span><span style="font-family: 宋体;">作为其第一个参数：</span></p>
<p>main.js</p>
<div class="cnblogs_code">
<pre><code>import Vue from 'vue'<span style="color: #000000;">;
import Vuex from </span>'vuex'; <span style="color: #008000;">//</span><span style="color: #008000;">引入Vuex包</span>
import App from './App.vue'<span style="color: #000000;">;
import createLogger from </span>'vuex/dist/logger';  <span style="color: #008000;">//</span><span style="color: #008000;">调试工具</span>
<span style="color: #000000;">
Vue.use(Vuex);  </span><span style="color: #008000;">//</span><span style="color: #008000;">将Vuex安装到全局</span>

<span style="color: #008000;">//</span><span style="color: #008000;">创建一个仓库，并且存放以一些全局数据（存放四大选项）</span>
const store = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vuex.Store({
    state:{
        a:</span>100<span style="color: #000000;">,
        students:[
            {name:</span>"小明",sex:"男"<span style="color: #000000;">},
            {name:</span>"小红",sex:"女"<span style="color: #000000;">},
            {name:</span>"小刚",sex:"男"<span style="color: #000000;">},
            {name:</span>"小花",sex:"女"<span style="color: #000000;">},
            {name:</span>"小黑",sex:"男"<span style="color: #000000;">}
        ]
    },
    <span style="color: #ff0000;">getters</span>:{
        </span><span style="color: #008000;">//</span><span style="color: #008000;">得到所有男生</span>
<span style="color: #000000;">        nan(<span style="color: #ff0000;">state</span>){
            </span><span style="color: #0000ff;">return</span> state.students.filter((item)=&gt;<span style="color: #000000;">{
                </span><span style="color: #0000ff;">return</span> item.sex == '男'<span style="color: #000000;">;
            })
        },
        </span><span style="color: #008000;">//</span><span style="color: #008000;">得到所有女生</span>
<span style="color: #000000;">        nv(<span style="color: #ff0000;">state</span>){
            </span><span style="color: #0000ff;">return</span> state.students.filter((item)=&gt;<span style="color: #000000;">{
                </span><span style="color: #0000ff;">return</span> item.sex == '女'<span style="color: #000000;">;
            })
        },
        </span><span style="color: #008000;">//</span><span style="color: #008000;">得到男生和女生的个数，getter也可以接受getter作为第二个参数</span>
<span style="color: #000000;">        nanCount(<span style="color: #ff0000;">state</span>,getters){
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"><span style="color: #ff0000;"> getters</span>.nan.length;
        },
        nvCount(<span style="color: #ff0000;">state</span>,getters){
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"><span style="color: #ff0000;"> getters</span>.nv.length;
        }
    },
    plugins: [createLogger()]
})

</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
    el:</span>"#app"<span style="color: #000000;">,
    store,  </span><span style="color: #008000;">//</span><span style="color: #008000;">将store注入到全局</span>
    render:(h)=&gt;<span style="color: #000000;"> h(App)
})</span></pre>
</div>
<p>&nbsp;</p>
<p><strong>App.vue父组件：</strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">template</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>{{students}}<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h2</span><span style="color: #0000ff;">&gt;</span>男生：{{$store.<span style="color: #ff0000;">getters</span>.nanCount}}个<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h2</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h2</span><span style="color: #0000ff;">&gt;</span>女生：{{$store.<span style="color: #ff0000;">getters</span>.nvCount}}个<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h2</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">@click</span><span style="color: #0000ff;">="nan"</span><span style="color: #0000ff;">&gt;</span>查看男生<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">@click</span><span style="color: #0000ff;">="nv"</span><span style="color: #0000ff;">&gt;</span>查看女生<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">@click</span><span style="color: #0000ff;">="all"</span><span style="color: #0000ff;">&gt;</span>查看全部<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">template</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span><span style="background-color: #f5f5f5; color: #000000;">
export </span><span style="background-color: #f5f5f5; color: #0000ff;">default</span><span style="background-color: #f5f5f5; color: #000000;"> {
    data(){
        </span><span style="background-color: #f5f5f5; color: #0000ff;">return</span><span style="background-color: #f5f5f5; color: #000000;"> {
            isState:</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">all</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">
        }
    },
    computed:{
        students(){
            </span><span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;">(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.isState </span><span style="background-color: #f5f5f5; color: #000000;">==</span> <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">all</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">){
                </span><span style="background-color: #f5f5f5; color: #0000ff;">return</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.$store.state.students;
            }</span><span style="background-color: #f5f5f5; color: #0000ff;">else</span> <span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;">(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.isState </span><span style="background-color: #f5f5f5; color: #000000;">==</span> <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">nan</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">){
                </span><span style="background-color: #f5f5f5; color: #0000ff;">return</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.$store.<span style="color: #ff0000;">getters</span>.nan;
            }</span><span style="background-color: #f5f5f5; color: #0000ff;">else</span> <span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;">(</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.isState </span><span style="background-color: #f5f5f5; color: #000000;">==</span> <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">nv</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">){
                </span><span style="background-color: #f5f5f5; color: #0000ff;">return</span> <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.$store.<span style="color: #ff0000;">getters</span>.nv
            }
        }
    },
    methods:{
        nan(){
            </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.isState </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">nan</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">
        },
        nv(){
            </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.isState </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">nv</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">
        },
        all(){
            </span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.isState </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">all</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">
        }
    }

}
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p><span style="font-family: 宋体;">在介绍</span>state<span style="font-family: 宋体;">中我们了解到，在</span><span style="font-family: Consolas;">Store</span><span style="font-family: 宋体;">仓库里，</span><span style="font-family: Consolas;">state</span><span style="font-family: 宋体;">就是用来存放数据，若是对数据进行处理输出，比如数据要过滤，一般我们可以写到</span><span style="font-family: Consolas;">computed</span><span style="font-family: 宋体;">中。但是如果很多组件都使用这个过滤后的数据，比如饼状图组件和曲线图组件，我们是否可以把这个数据抽提出来共享？这就是</span><span style="font-family: Consolas;">getters</span><span style="font-family: 宋体;">存在的意义。</span><strong><span style="text-decoration: underline;"><span style="font-family: 宋体;">官网说的很清楚，</span>getters<span style="font-family: 宋体;">是</span><span style="font-family: Consolas;">store</span><span style="font-family: 宋体;">的计算属性。</span></span></strong></p>
<ol>
<li>getters <span style="font-family: 宋体;">可以对</span><span style="font-family: Consolas;">State</span><span style="font-family: 宋体;">进行计算操作。</span></li>
<li><span style="font-family: 宋体;">虽然在组件内也可以做，但是</span>getters<span style="font-family: 宋体;">可以在多组件之间复用</span></li>
<li><span style="font-family: 宋体;">如果一个状态只在一个组件内使用，是可以不用</span>getters</li>
</ol>
<p><strong><span style="text-decoration: underline;">getters<span style="font-family: 宋体;">上简单来说就是存放一些公共函数供组件调用。</span></span></strong>getters <span style="font-family: 宋体;">会暴露为 </span><span style="font-family: Consolas;">$store.getters </span><span style="font-family: 宋体;">对象，也就是说可以通过 </span><span style="font-family: Consolas;">$store.getters[</span><span style="font-family: 宋体;">属性</span><span style="font-family: Consolas;">]</span><span style="font-family: 宋体;">来进行相应的调用。</span></p>
<hr />
<p><strong><span style="font-size: 18pt;">4.6vuex的命名空间</span></strong></p>
<p>目录结构：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('6cd5fbb9-99e5-4687-8177-f883ae445648')"><img id="code_img_closed_6cd5fbb9-99e5-4687-8177-f883ae445648" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_6cd5fbb9-99e5-4687-8177-f883ae445648" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('6cd5fbb9-99e5-4687-8177-f883ae445648',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_6cd5fbb9-99e5-4687-8177-f883ae445648" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">│  package.json
│  webpack.config.js
│
└─www
    │  index.html
    │
    └─app
        │  App.vue
        │  main.js
        │
        ├─components
        └─store
            │  index.js
            │
            ├─counter
            │      store.js
            │
            └─taobao
                    store.js</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<h2 class="md-end-block md-heading md-focus"><span class="md-expand" style="font-size: 18px;">./package.json:</span></h2>
<div class="cnblogs_code" onclick="cnblogs_code_show('8eae4a03-126b-4d52-8b30-3ce13f040b3d')"><img id="code_img_closed_8eae4a03-126b-4d52-8b30-3ce13f040b3d" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_8eae4a03-126b-4d52-8b30-3ce13f040b3d" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('8eae4a03-126b-4d52-8b30-3ce13f040b3d',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_8eae4a03-126b-4d52-8b30-3ce13f040b3d" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">{
  </span>"name": "vue_study"<span style="color: #000000;">,
  </span>"version": "1.0.0"<span style="color: #000000;">,
  </span>"description": ""<span style="color: #000000;">,
  </span>"main": "webpack.config.js"<span style="color: #000000;">,
  </span>"scripts"<span style="color: #000000;">: {
    </span>"test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<span style="color: #000000;">,
    </span>"dev": "webpack-dev-server --content-base ./www --port 8080"<span style="color: #000000;">
  },
  </span>"keywords"<span style="color: #000000;">: [],
  </span>"author": ""<span style="color: #000000;">,
  </span>"license": "ISC"<span style="color: #000000;">,
  </span>"dependencies"<span style="color: #000000;">: {
    </span>"vue": "^2.5.17"<span style="color: #000000;">,
    </span>"vuex": "^3.0.1"<span style="color: #000000;">
  },
  </span>"devDependencies"<span style="color: #000000;">: {
    </span>"css-loader": "^1.0.1"<span style="color: #000000;">,
    </span>"style-loader": "^0.23.1"<span style="color: #000000;">,
    </span>"vue-loader": "^15.4.2"<span style="color: #000000;">,
    </span>"vue-style-loader": "^4.1.2"<span style="color: #000000;">,
    </span>"vue-template-compiler": "^2.5.17"<span style="color: #000000;">,
    </span>"webpack": "^4.9.1"<span style="color: #000000;">,
    </span>"webpack-cli": "^3.1.2"<span style="color: #000000;">
  }
}</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<h2 class="md-end-block md-heading md-focus"><span class="md-expand" style="font-size: 18px;">./webpack.config.js:</span></h2>
<div class="cnblogs_code" onclick="cnblogs_code_show('c36dba9a-474d-4f88-b7bc-3e8f42248c7b')"><img id="code_img_closed_c36dba9a-474d-4f88-b7bc-3e8f42248c7b" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_c36dba9a-474d-4f88-b7bc-3e8f42248c7b" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('c36dba9a-474d-4f88-b7bc-3e8f42248c7b',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_c36dba9a-474d-4f88-b7bc-3e8f42248c7b" class="cnblogs_code_hide">
<pre><code>const path = require('path'<span style="color: #000000;">);
const VueLoaderPlugin </span>= require('vue-loader/lib/plugin'<span style="color: #000000;">);

module.exports </span>=<span style="color: #000000;"> {
    </span><span style="color: #008000;">//</span><span style="color: #008000;">程序的入口文件</span>
    entry: "./www/app/main.js"<span style="color: #000000;">,

    </span><span style="color: #008000;">//</span><span style="color: #008000;">程序的出口（打包的文件）</span>
<span style="color: #000000;">    output: {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">打包文件输出的路径</span>
        path: path.resolve(__dirname, "./www/dist"<span style="color: #000000;">),
        </span><span style="color: #008000;">//</span><span style="color: #008000;">打包文件的名称</span>
        filename: 'all.js'<span style="color: #000000;">,
        publicPath: </span>"/public" <span style="color: #008000;">//</span><span style="color: #008000;">这是对webpack-dev-server的配置，配置虚拟路径</span>
<span style="color: #000000;">    },
    </span><span style="color: #008000;">//</span><span style="color: #008000;">监听文件的变化（自动打包）</span>
    watch: <span style="color: #0000ff;">true</span><span style="color: #000000;">,
    mode: </span>"development"<span style="color: #000000;">,
    </span><span style="color: #008000;">//</span><span style="color: #008000;">配置webpack模块插件</span>
<span style="color: #000000;">    module: {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">关于模块的配置规则</span>
<span style="color: #000000;">        rules: [{
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 模块规则（配置 loader、解析器等选项）</span>
                test: /\.js?$/, <span style="color: #008000;">//</span><span style="color: #008000;">解析的时候匹配js文件</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">翻译什么文件夹中的文件</span>
                include: [path.resolve(__dirname, "www/app"<span style="color: #000000;">)],
                </span><span style="color: #008000;">//</span><span style="color: #008000;">不翻译什么文件夹中的文件</span>
                exclude: [path.resolve(__dirname, "node_modules"<span style="color: #000000;">)],
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> loader:"babel-loader",</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">配置翻译语法</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> options:{</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">     presets:["es2015","es2016"]</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> }</span>
<span style="color: #000000;">            },
            {
                test: </span>/\.vue$/<span style="color: #000000;">,
                loader: </span>'vue-loader'<span style="color: #000000;">,
                include: [path.resolve(__dirname, </span>"www/app"<span style="color: #000000;">)],
                exclude: [path.resolve(__dirname, </span>"node_modules"<span style="color: #000000;">)],
                options: {
                    loaders: {
                        js: </span>'babel-loader!eslint-loader'<span style="color: #000000;">
                    }
                }
            },
            {
                test: </span>/\.css$/<span style="color: #000000;">,
                include: [path.resolve(__dirname, </span>"www/app"<span style="color: #000000;">)],
                exclude: [path.resolve(__dirname, </span>"node_modules"<span style="color: #000000;">)],
                use: [</span>'vue-style-loader', 'css-loader'<span style="color: #000000;">],
            },
            {
              test: </span>/\.styl(us)?$/<span style="color: #000000;">,
              use: [
                </span>'vue-style-loader'<span style="color: #000000;">,
                </span>'css-loader'<span style="color: #000000;">,
                </span>'stylus-loader'<span style="color: #000000;">
              ]
            }
        ]
    },
    resolve: {
        alias: {
            </span>'vue$': 'vue/dist/vue.esm.js' <span style="color: #008000;">//</span><span style="color: #008000;"> 用 webpack 1 时需用 'vue/dist/vue.common.js'</span>
<span style="color: #000000;">        }
    },
    </span><span style="color: #008000;">//</span><span style="color: #008000;">最新版webpack需要引入此插件</span>
<span style="color: #000000;">    plugins: [
        </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> VueLoaderPlugin()
    ],
    </span><span style="color: #008000;">//</span><span style="color: #008000;">webpack设置代理跨越</span>
<span style="color: #000000;">    devServer: {
        proxy: {
            </span>'/api'<span style="color: #000000;">: {
                target: </span>'http://127.0.0.1:3000', <span style="color: #008000;">//</span><span style="color: #008000;">设置你调用的接口域名和端口</span>
                <span style="color: #008000;">//</span><span style="color: #008000;">这里理解成/api代理target中的地址，后面组件中调用接口要使用/api代替</span>
                pathRewrite: { '^/api': ''<span style="color: #000000;"> }
            }
        }
    }
}</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<h2 class="md-end-block md-heading md-focus"><span class="md-expand" style="font-size: 18px;">./www/index.html:</span></h2>
<div class="cnblogs_code" onclick="cnblogs_code_show('b63ab053-93cb-494d-b974-bc7f7f503bad')"><img id="code_img_closed_b63ab053-93cb-494d-b974-bc7f7f503bad" class="code_img_closed" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识0.png" alt="" /><img id="code_img_opened_b63ab053-93cb-494d-b974-bc7f7f503bad" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('b63ab053-93cb-494d-b974-bc7f7f503bad',event)" src="./images/前端笔记之Vue（四）UI组件库&amp;Vuex&amp;虚拟服务器初识1.png" alt="" />
<div id="cnblogs_code_open_b63ab053-93cb-494d-b974-bc7f7f503bad" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">&lt;!</span><span style="color: #ff00ff;">DOCTYPE html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html </span><span style="color: #ff0000;">lang</span><span style="color: #0000ff;">="en"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">meta </span><span style="color: #ff0000;">charset</span><span style="color: #0000ff;">="UTF-8"</span> <span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>Document<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="app"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #ff0000;"> src</span><span style="color: #0000ff;">="public/all.js"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<h2 class="md-end-block md-heading md-focus"><span class="md-expand" style="font-size: 18px;">./www/app/App.vue:</span></h2>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">template</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>counter的{{$store.state.counterStore.a}}<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>taobao的{{$store.state.taobaoStore.a}}<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">@click</span><span style="color: #0000ff;">="add"</span><span style="color: #0000ff;">&gt;</span>触发<span style="color: #ff0000;">counter</span>的ADD<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">template</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span><span style="background-color: #f5f5f5; color: #000000;">
     export </span><span style="background-color: #f5f5f5; color: #0000ff;">default</span><span style="background-color: #f5f5f5; color: #000000;"> {
        methods:{
            add(){
                </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">根据命名空间发出异步</span>
                <span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.$store.dispatch(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #ff0000;">counterStore/ADD</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">)
            }
        }
     }
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<h2 class="md-end-block md-heading md-focus"><span class="md-expand" style="font-size: 18px;">./www/app/main.js:</span></h2>
<div class="cnblogs_code">
<pre><code>import Vue from "vue"<span style="color: #000000;">;
import App from </span>"./App.vue"<span style="color: #000000;">;
import store from </span>"./store"<span style="color: #000000;">;

</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
    el: </span>"#app"<span style="color: #000000;">,
    store,</span><span style="color: #008000;">//</span><span style="color: #008000;">引入store文件夹中的index.js</span>
    render: (h) =&gt;<span style="color: #000000;"> h(App)
})</span></pre>
</div>
<h2 class="md-end-block md-heading md-focus"><span class="md-expand" style="font-size: 18px;">./www/app/store/index.js:</span></h2>
<div class="cnblogs_code">
<pre><code>import Vue from "vue"<span style="color: #000000;">;
import Vuex from </span>"vuex"<span style="color: #000000;">;
import counterStore from </span>"./counter/store.js";<span style="color: #008000;">//</span><span style="color: #008000;">引入counter的store</span>
import taobaoStore from "./taobao/store.js";<span style="color: #008000;">//</span><span style="color: #008000;">引入taobao的store</span>
import createLogger from 'vuex/dist/logger'<span style="color: #000000;">;

Vue.use(Vuex);

export </span><span style="color: #0000ff;">default</span> <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vuex.Store({
    modules: {</span><span style="color: #008000;">//</span><span style="color: #008000;">放入modules</span>
<span style="color: #000000;">        counterStore,
        taobaoStore
    },
    plugins : [createLogger()]
})</span></pre>
</div>
<h2 class="md-end-block md-heading md-focus"><span class="md-expand" style="font-size: 18px;">./www/app/store/counter/store.js:</span></h2>
<div class="cnblogs_code">
<pre><code>export <span style="color: #0000ff;">default</span><span style="color: #000000;"> {
    <span style="color: #ff0000;">namespaced: </span></span><span style="color: #ff0000;">true,</span>  <span style="color: #008000;">//</span><span style="color: #008000;">命名空间</span>
<span style="color: #000000;">    state : {
        a:</span>100<span style="color: #000000;">
    },
    mutations : {
        ADD(state,payload){
            state.a</span>++<span style="color: #008000;">//</span><span style="color: #008000;">上面的state</span>
<span style="color: #000000;">        }
    },
    actions : {
        ADD({commit}){
            commit(</span>"ADD")<span style="color: #008000;">//</span><span style="color: #008000;">调用上面mutations的ADD</span>
<span style="color: #000000;">        }
    }
}</span></pre>
</div>
<h2 class="md-end-block md-heading md-focus"><span class="md-expand" style="font-size: 18px;">./www/app/store/taobao/store.js:</span></h2>
<div class="cnblogs_code">
<pre><code>export <span style="color: #0000ff;">default</span><span style="color: #000000;"> {
    <span style="color: #ff0000;">namespaced: </span></span><span style="color: #ff0000;">true,</span><span style="color: #008000;">//</span><span style="color: #008000;">开启命名空间跟上面一样的用法</span>
<span style="color: #000000;">    state : {
        a:</span>200<span style="color: #000000;">
    },
    mutations : {},
    actions : {}
}</span></pre>
</div>
<hr />
<h1><strong>五、配置虚拟服务器</strong></h1>
<p>一般情况下，一个应用的数据都需要等待后端接口人员开发完对应的接口才可以获取到，这样子的效率有点低。最好是我们可以自己模拟接口数据，进行页面的数据填充，打通所有关节，之后等接口开发好了，改下接口地址就好了。</p>
<p><span style="font-family: 宋体;">所以，作为前端和客户端开发人员，在后端还没有给出对应的</span>api<span style="font-family: 宋体;">接口时，我们无法做测试。 </span></p>
<p><span style="font-family: 宋体;">这时，我们可以使用</span>json-server<span style="font-family: 宋体;">快速搭建一个测试的</span><span style="font-family: Consolas;">api</span><span style="font-family: 宋体;">接口，能在几十秒之内搭建好。</span></p>
<p>json-server <span style="font-family: 宋体;">它能模拟&ldquo;数据库&rdquo;，提供了一套简单的</span><span style="font-family: Consolas;">API</span><span style="font-family: 宋体;">（</span><span style="font-family: Consolas;">RESTFUL</span><span style="font-family: 宋体;">）接口。</span></p>
<p><span style="font-family: 宋体;">在开发过程中，前后端不论是否分离，接口多半是滞后于页面开发的。所以建立一个</span>RESTFUL<span style="font-family: 宋体;">风格的</span><span style="font-family: Consolas;">API</span><span style="font-family: 宋体;">接口，给前端页面提供虚拟的数据，是非常有必要的。</span></p>
<p>&nbsp;</p>
<p>因为它足够简单，写少量数据，即可使用。</p>
<p><span style="font-family: 宋体;">也因为它足够强大，支持</span>CORS<span style="font-family: 宋体;">和</span><span style="font-family: Consolas;">JSONP</span><span style="font-family: 宋体;">跨域请求，支持</span><span style="font-family: Consolas;">GET, POST, PUT, PATCH </span><span style="font-family: 宋体;">和 </span><span style="font-family: Consolas;">DELETE </span><span style="font-family: 宋体;">方法，更提供了一系列的查询方法，如</span><span style="font-family: Consolas;">limit</span><span style="font-family: 宋体;">，</span><span style="font-family: Consolas;">order</span><span style="font-family: 宋体;">等。下面将详细介绍 </span><span style="font-family: Consolas;">json-server </span><span style="font-family: 宋体;">的使用。</span></p>
<p><span style="text-decoration: underline;"><a href="https://github.com/typicode/json-server">https://github.com/typicode/json-server</a></span></p>
<hr />
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>