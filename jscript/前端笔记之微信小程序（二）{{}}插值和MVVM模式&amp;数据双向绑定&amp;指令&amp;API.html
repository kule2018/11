<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API</center></div><div class='banquan'>原文出处:本文由博客园博主RopeHuo提供。<br/>
原文连接:https://www.cnblogs.com/rope/p/10750322.html</div><br>
    <h1><strong>一、双</strong><strong>花</strong><strong><span style="font-family: 宋体;">括号</span>{</strong><strong>{}}</strong><strong><span style="font-family: 宋体;">插值和</span>M</strong><strong>VV</strong><strong>M<span style="font-family: 宋体;">模式</span></strong></h1>
<h2><strong>1</strong><strong>.1 </strong><strong><span style="font-family: 宋体;">体会</span>{</strong><strong>{}</strong><strong>}<span style="font-family: 宋体;">插值</span></strong></h2>
<p>index.wxml<span style="font-family: 宋体;">的标签不是</span>html<span style="font-family: 宋体;">的那些标签，这里的</span><span style="font-family: Consolas;">view</span><span style="font-family: 宋体;">就是</span><span style="font-family: Consolas;">div</span><span style="font-family: 宋体;">。</span></p>
<p>{{}}这样的插值写法，叫做mustache语法。mustache<span style="font-family: 宋体;">是胡子的意思，因为</span>{{}}像胡子。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="container"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="title"</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
    我是首页 <span style="color: #ff0000;">{{1 + 1}}</span>
       <span style="color: #ff0000;"> {{a}}</span>年！
    </span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">要在同名</span>js<span style="font-family: 宋体;">文件下的</span><span style="font-family: Consolas;">data</span><span style="font-family: 宋体;">属性中定义：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">Page({
   <span style="color: #ff0000;"> data : {
        a : </span></span><span style="color: #ff0000;">100</span><span style="color: #000000;"><span style="color: #ff0000;">
    }</span>
});</span></pre>
</div>
<p><span style="font-family: 宋体;">所有的框架：</span>Angular<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">React</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">Vue</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">ReactNative</span><span style="font-family: 宋体;">、小程序都是这样的&ldquo;强耦合&rdquo;的。</span></p>
<p><span style="font-family: 宋体;">之前我们</span>js<span style="font-family: 宋体;">操作</span><span style="font-family: Consolas;">htm</span>l<span style="font-family: 宋体;">使用：</span>document.getElementById()<span style="font-family: 宋体;">这样的</span>&ldquo;不耦合&rdquo;的方式，但是反而编程麻烦。</p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">不仅仅</span>{{}}可以出现在文字的部分，还可以出现在属性值的双引号中：</p>
<div class="cnblogs_code">
<pre><code> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="box"</span><span style="color: #ff0000;"> style</span><span style="color: #0000ff;">="width:<span style="color: #ff0000;">{{a}}</span>px;height:<span style="color: #ff0000;">{{a}}</span>px"</span><span style="color: #0000ff;">&gt;</span>我是盒子<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<hr />
<h2><strong>1</strong><strong>.2 </strong><strong><span style="font-family: 宋体;">体会</span>MVVM<span style="font-family: 宋体;">模式</span></strong></h2>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">bindtap</span><span style="color: #ff0000;">='add'</span><span style="color: #0000ff;">&gt;</span>按我<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>监听直接写在标签上，bindtap表示绑定<strong><span style="text-decoration: underline;">轻触事件</span></strong>。</p>
<p><span style="font-family: 宋体;">注意，是</span>bindtap="add"而不是：<span style="text-decoration: line-through;">b</span><span style="text-decoration: line-through;">indtap="add()"</span></p>
<p>&nbsp;</p>
<p>'add'<span style="font-family: 宋体;">是一个函数，要定义在</span><span style="font-family: Consolas;">js</span><span style="font-family: 宋体;">文件中。</span></p>
<p>注意：改变数据不能直接改，<span style="font-family: 宋体;">如果这样写，</span>a<span style="font-family: 宋体;">的确会变化，但是视图不会跟着变化！</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">Page({
    data : {
        a : </span>100<span style="color: #000000;">
    },
    add(){
        </span><span style="text-decoration: line-through;"><span style="color: #0000ff; text-decoration: line-through;">this</span>.data.a++</span><span style="color: #000000;"><span style="text-decoration: line-through;">;</span>
    }
});</span></pre>
</div>
<p><span style="font-family: 宋体;">必须使用</span>this.setData()<span style="font-family: 宋体;">函数来改变</span>data<span style="font-family: 宋体;">值</span>，此时视图才能变化。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">Page({
    data : {
        a : </span>100<span style="color: #000000;">
    },
    <span style="color: #ff0000;">add(){
        </span></span><span style="color: #ff0000;">this.setData({
            a : this.data.a + 1</span><span style="color: #000000;"><span style="color: #ff0000;">
        });
    }</span>
});</span></pre>
</div>
<p align="center"><strong><span style="color: #ff0000;">数据变化了，视图会自动改变</span></strong></p>
<p><span style="font-family: 宋体;">我们学习的所有框架都是</span>MVVM<span style="font-family: 宋体;">模式的，只需要关心数据，不需要关心视图，视图会自动变化。</span></p>
<hr />
<h1><strong>二、</strong><strong>数据</strong><strong>双向绑定</strong></h1>
<h2><strong>2</strong><strong>.1 </strong><strong>调色板</strong></h2>
<p><span style="font-family: 宋体;">先说一个知识点，用户的屏幕是</span>750rpx<span style="font-family: 宋体;">。所以如果盒子</span>750rpx<span style="font-family: 宋体;">宽度，一定撑满的，</span>375rpx就是半屏。</p>
<p>&nbsp;<strong>slider</strong><strong>组件</strong><strong>：</strong></p>
<p><img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API0.png" alt="" /></p>
<p>&nbsp;</p>
<p>index.wxss</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('36ee1a72-19ff-455b-a326-19e13058aec5')"><img id="code_img_closed_36ee1a72-19ff-455b-a326-19e13058aec5" class="code_img_closed" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API1.png" alt="" /><img id="code_img_opened_36ee1a72-19ff-455b-a326-19e13058aec5" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('36ee1a72-19ff-455b-a326-19e13058aec5',event)" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API2.png" alt="" />
<div id="cnblogs_code_open_36ee1a72-19ff-455b-a326-19e13058aec5" class="cnblogs_code_hide">
<pre><code><span style="color: #800000;">.box</span>{<span style="color: #ff0000;">
    width</span>:<span style="color: #0000ff;">350rpx</span>;<span style="color: #ff0000;">
    height</span>:<span style="color: #0000ff;">350rpx</span>;<span style="color: #ff0000;">
    margin</span>:<span style="color: #0000ff;">10px auto</span>;
}</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>index.wxml<span style="font-family: 宋体;">：</span>style<span style="font-family: 宋体;">行内样式的插值</span>，实现双向<span style="font-family: 宋体;">数据绑定，就是</span>data<span style="font-family: 宋体;">中的数据能够成为组件的默认数据</span>。</p>
<p><span style="font-family: 宋体;">添加一个</span>bindchanging<span style="font-family: 宋体;">事件，这个事件从手册上查的。添加一个自定义属性，叫做</span>data-ys来区分谁是谁。</p>
<p><strong><span style="text-decoration: underline;"><span style="font-family: 宋体;">注意，自定义属性必须以</span>data</span></strong><strong><span style="text-decoration: underline;">-</span></strong><strong><span style="text-decoration: underline;">开头</span></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="container"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="box"</span><span style="color: #ff0000;"> style</span><span style="color: #ff0000;">="background-color:rgb(<span style="color: #339966; background-color: #99cc00;">{{r}}</span>,<span style="background-color: #ffff00;">{{g}}</span>,<span style="background-color: #0000ff;">{{b}}</span>)"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">slider </span><span style="color: #ff0000;">value</span><span style="color: #ff0000;">="{{r}}" bindchanging="changeColor" data-ys="r"</span><span style="color: #ff0000;"> max</span><span style="color: #0000ff;">="255"</span><span style="color: #ff0000;"> show-value block-size</span><span style="color: #0000ff;">="18"</span><span style="color: #0000ff;">/&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">slider </span><span style="color: #ff0000;">value</span><span style="color: #ff0000;">="{{g}}" bindchanging="changeColor" data-ys="g"</span><span style="color: #ff0000;"> max</span><span style="color: #0000ff;">="255"</span><span style="color: #ff0000;"> show-value block-size</span><span style="color: #0000ff;">="18"</span><span style="color: #0000ff;">/&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">slider </span><span style="color: #ff0000;">valu</span><span style="color: #ff0000;">e="{{b}}" bindchanging="changeColor" data-ys="b"</span><span style="color: #ff0000;"> max</span><span style="color: #0000ff;">="255"</span><span style="color: #ff0000;"> show-value block-size</span><span style="color: #0000ff;">="18"</span><span style="color: #0000ff;">/&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p>index.js 事件处理函数：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">Page({
    data : {
        r : </span>100<span style="color: #000000;">,
        g : </span>200<span style="color: #000000;">,
        b : </span>123<span style="color: #000000;">
    },
    changeColor(event){
        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.setData({
            <span style="color: #ff0000;">[event.target.dataset.ys] : event.detail.value</span>
        })
    }
});</span></pre>
</div>
<p>event.target.dataset.ys<span style="font-family: 宋体;">就是当前触发这个函数的组件身上的</span>ys<span style="font-family: 宋体;">标识。</span></p>
<p>event.detail.value就是当前触发这个函数的组件的值。</p>
<p>&nbsp;</p>
<p>也就是说，微信小程序的事件处理函数，一律不能传参！</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">bindtap</span><span style="color: #0000ff;">="add(5)"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>只能是：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">bindtap</span><span style="color: #0000ff;">="add"</span><span style="color: #ff0000;"> data-n</span><span style="color: #ff0000;">="5"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<hr />
<h2><strong>2</strong><strong>.2 </strong><strong>微博发布框</strong></h2>
<p>class<span style="font-family: 宋体;">的动态实现：</span><span style="font-family: Consolas;">{</span>{}}<span style="font-family: 宋体;">中不能出现复杂语句，比如不能有</span>for<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">if</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">while</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">var</span>，最复杂就是三元了。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="container"</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">textarea </span><span style="color: #ff0000;">value</span><span style="color: #ff0000;">="{{content}}" bindinput="inputHandler"</span><span style="color: #ff0000;"> placeholder</span><span style="color: #0000ff;">="默认"</span><span style="color: #ff0000;"> auto-focus </span><span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="<span style="color: #ff0000;">{{content.length &gt; 40 ? 'danger' : ''}}</span>"</span><span style="color: #0000ff;">&gt;</span>当前：<span style="color: #ff0000;">{{content.length}}</span>字/40字<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span>
    
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="row"</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">disabled</span><span style="color: #0000ff;">="<span style="color: #ff0000;">{{content.length == 0 || content.length &gt; 40}}</span>"</span><span style="color: #0000ff;">&gt;</span>发布<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">bindtap</span><span style="color: #0000ff;">="clear"</span><span style="color: #ff0000;"> disabled</span><span style="color: #0000ff;">="<span style="color: #ff0000;">{{content.length == 0}}</span>"</span><span style="color: #0000ff;">&gt;</span>清空<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>index.js</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('88910084-48ac-47ef-95dd-44dc59d504c9')"><img id="code_img_closed_88910084-48ac-47ef-95dd-44dc59d504c9" class="code_img_closed" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API1.png" alt="" /><img id="code_img_opened_88910084-48ac-47ef-95dd-44dc59d504c9" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('88910084-48ac-47ef-95dd-44dc59d504c9',event)" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API2.png" alt="" />
<div id="cnblogs_code_open_88910084-48ac-47ef-95dd-44dc59d504c9" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">Page({
    data : {
        content : </span>""<span style="color: #000000;">
    },
    </span><span style="color: #008000;">//</span><span style="color: #008000;">当用户输入文本的时候</span>
<span style="color: #000000;">    inputHandler(event){
        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.setData({
            content : event.detail.value
        });
    },
    </span><span style="color: #008000;">//</span><span style="color: #008000;">清空</span>
<span style="color: #000000;">    clear(){
        </span><span style="color: #0000ff;">this</span>.setData({ content: ""<span style="color: #000000;"> });
    }
});</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>index.wxss</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800000;">.danger</span>{<span style="color: #ff0000;">color</span>:<span style="color: #0000ff;">red</span>;<span style="color: #ff0000;">font-weight</span>:<span style="color: #0000ff;"> bold</span>;}<span style="color: #800000;">
.row</span>{<span style="color: #ff0000;">display</span>:<span style="color: #0000ff;"> flex</span>;}</pre>
</div>
<p><img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API5.png" alt="" /></p>
<hr />
<h1>三、<strong>指令</strong></h1>
<h2><strong>3</strong><strong>.</strong><strong>1</strong><strong>&nbsp;</strong><strong>w</strong><strong>x:if</strong><strong>指令</strong></h2>
<p>判定一个元素是否上树，而不是是否显示。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="container"</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">wx:if</span><span style="color: #ff0000;">="{{isAgree}}"</span><span style="color: #0000ff;">&gt;</span>注册<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">当这个变量是</span>true<span style="font-family: 宋体;">按钮上树，否则下树。</span></p>
<p>&nbsp;<img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API6.png" alt="" /></p>
<hr />
<h2><strong>3</strong><strong>.</strong><strong>2</strong><strong>&nbsp;wx:for</strong><strong>循环指令</strong></h2>
<p><span style="font-family: 宋体;">命令一个标签进行循环，使用</span>wx:for。</p>
<p>&nbsp;</p>
<p>index.js数据：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">Page({
    data : {
        arr: [</span>"白板","幺鸡","二万","三饼","四条"<span style="color: #000000;">]
    }
});</span></pre>
</div>
<p>&nbsp;</p>
<p>index.wxml<span style="font-family: 宋体;">：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="container"</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">wx:for</span><span style="color: #ff0000;">="{{arr}}" wx:key</span><span style="color: #0000ff;"><span style="color: #ff0000;">="{{index}}</span>"</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{{index}} - {{item}}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p class="15">&nbsp;wx:for的值必须是数组，不能是对象，此时会自动遍历这个数组。</p>
<p class="15">&nbsp;wx:for必须添加wx:key，表示循环这一项的标识，这个标识有什么用？连上服务器就有用了。增加效率</p>
<p class="15">&nbsp;{{index}}<span style="font-family: 宋体;">、</span>{{item}}是循环结构天生就有的，表示下标和项。</p>
<hr />
<h3><strong>3.2.1 九九</strong><strong>乘法表</strong></h3>
<p>因为空间太小，做五五乘法表：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="row"</span><span style="color: #ff0000;"> wx:for</span><span style="color: #0000ff;">="{{<span style="color: #ff0000;">[1,2,3,4,5]</span>}}"</span><span style="color: #ff0000;"> wx:key</span><span style="color: #0000ff;">="{{index}}"</span><span style="color: #ff0000;"> wx:for-item</span><span style="color: #ff0000;">="a"</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="col"</span><span style="color: #ff0000;"> wx:for</span><span style="color: #0000ff;">="{{<span style="color: #ff0000;">[1,2,3,4,5]</span>}}"</span><span style="color: #ff0000;"> wx:key</span><span style="color: #0000ff;">="{{index}}"</span><span style="color: #ff0000;"> wx:for-item</span><span style="color: #ff0000;">="b"</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">
        {{a}} * {{b}} = {{a * b}}
    </span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>index.wxss</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800000;">.row</span>{<span style="color: #ff0000;"> width</span>:<span style="color: #0000ff;">750rpx</span>;<span style="color: #ff0000;">display</span>:<span style="color: #0000ff;"> flex</span>;}<span style="color: #800000;">
.col</span>{<span style="color: #ff0000;"> flex</span>:<span style="color: #0000ff;">1</span>;<span style="color: #ff0000;"> text-align</span>:<span style="color: #0000ff;"> center</span>;<span style="color: #ff0000;"> font-size</span>:<span style="color: #0000ff;"> 12px</span>;<span style="color: #ff0000;">border</span>:<span style="color: #0000ff;">1px solid #3bb</span>; }</pre>
</div>
<p><img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API7.png" alt="" /></p>
<hr />
<h3><strong>3.2.2<span style="font-family: 宋体;">循环信息流</span></strong></h3>
<p>index.wxml</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="container"</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="mingxing"</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #ff0000;">&lt;view class="box" <span style="background-color: #ffff00;">wx:for="{{mingxing}}"</span> wx:key="{{index}}"&gt;
            &lt;view class="left"&gt;
                &lt;image src="{{item.picurl}}"&gt;&lt;/image&gt;
                {{item.name}}
            &lt;/view&gt;
            &lt;view class="right"&gt;
                {{item.info}}
            &lt;/view&gt;
        &lt;/view&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>index.wxss</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('5d3af5d8-ae0c-4277-9f1b-17219f726cdb')"><img id="code_img_closed_5d3af5d8-ae0c-4277-9f1b-17219f726cdb" class="code_img_closed" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API1.png" alt="" /><img id="code_img_opened_5d3af5d8-ae0c-4277-9f1b-17219f726cdb" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('5d3af5d8-ae0c-4277-9f1b-17219f726cdb',event)" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API2.png" alt="" />
<div id="cnblogs_code_open_5d3af5d8-ae0c-4277-9f1b-17219f726cdb" class="cnblogs_code_hide">
<pre><code><span style="color: #800000;">.box</span>{<span style="color: #ff0000;">
    width</span>:<span style="color: #0000ff;">720rpx</span>;<span style="color: #ff0000;">display</span>:<span style="color: #0000ff;"> flex</span>;<span style="color: #ff0000;"> border</span>:<span style="color: #0000ff;">1px solid #3bb</span>;<span style="color: #ff0000;"> margin</span>:<span style="color: #0000ff;">10px auto</span>;<span style="color: #ff0000;">font-size</span>:<span style="color: #0000ff;"> 13px</span>;<span style="color: #ff0000;">
    line-height</span>:<span style="color: #0000ff;"> 24px</span>;<span style="color: #ff0000;"> color</span>:<span style="color: #0000ff;">#333</span>;<span style="color: #ff0000;">padding</span>:<span style="color: #0000ff;">10px</span>;<span style="color: #ff0000;"> box-sizing</span>:<span style="color: #0000ff;"> border-box</span>;
}<span style="color: #800000;">
.left</span>{<span style="color: #ff0000;">flex</span>:<span style="color: #0000ff;">1</span>;}<span style="color: #800000;">
.left image</span>{<span style="color: #ff0000;">width</span>:<span style="color: #0000ff;">180rpx</span>;<span style="color: #ff0000;"> height</span>:<span style="color: #0000ff;">180rpx</span>;}<span style="color: #800000;">
.right</span>{<span style="color: #ff0000;">flex</span>:<span style="color: #0000ff;">3</span>;<span style="color: #ff0000;"> box-sizing</span>:<span style="color: #0000ff;"> border-box</span>;<span style="color: #ff0000;">padding-left</span>:<span style="color: #0000ff;">10px</span>;}</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>index.js</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('1b863afe-70d5-4f82-9049-f61d1bb1ebb7')"><img id="code_img_closed_1b863afe-70d5-4f82-9049-f61d1bb1ebb7" class="code_img_closed" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API1.png" alt="" /><img id="code_img_opened_1b863afe-70d5-4f82-9049-f61d1bb1ebb7" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('1b863afe-70d5-4f82-9049-f61d1bb1ebb7',event)" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API2.png" alt="" />
<div id="cnblogs_code_open_1b863afe-70d5-4f82-9049-f61d1bb1ebb7" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">Page({
data : {
        mingxing : [
            {
                </span>"name": "Angelababy"<span style="color: #000000;">,
                </span>"info": "Angelababy（杨颖），1989年2月28日出生于上海市"<span style="color: #000000;">,
                </span>"picurl": "/images/baby.png"<span style="color: #000000;">
            },
            {
                </span>"name": "迪丽热巴"<span style="color: #000000;">,
                </span>"info": "迪丽热巴（Dilraba），1992年6月3日出生于新疆乌鲁木齐市"<span style="color: #000000;">,
                </span>"picurl": "/images/dilireba.png"<span style="color: #000000;">
            }
        ]
    }
});</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p><img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API12.png" alt="" /></p>
<hr />
<h3><strong>3.2.3<span style="font-family: 宋体;">复选框</span><span style="font-family: Consolas;">-</span><span style="font-family: 宋体;">循环数组</span></strong></h3>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="container"</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
    你的爱好:
    </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">checkbox-group </span><span style="color: #0000ff;">bindchange</span><span style="color: #0000ff;">="checkboxChange"</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">label </span><span style="color: #0000ff;">wx:for="{{hobbys}}" wx:key</span><span style="color: #0000ff;">="{{index}}"</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">checkbox </span><span style="color: #ff0000;">value</span><span style="color: #ff0000;">="{{item}}" checked</span><span style="color: #0000ff;"><span style="color: #ff0000;">="{{false}}</span>"</span><span style="color: #0000ff;">/&gt;</span><span style="color: #ff0000;">
            {{item}}
        </span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">label</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">checkbox-group</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
        你的爱好是：<span style="color: #ff0000;">{{myhobbys}}
    </span></span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('19f52fdf-cde6-4530-99aa-a3e2a08b97ff')"><img id="code_img_closed_19f52fdf-cde6-4530-99aa-a3e2a08b97ff" class="code_img_closed" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API1.png" alt="" /><img id="code_img_opened_19f52fdf-cde6-4530-99aa-a3e2a08b97ff" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('19f52fdf-cde6-4530-99aa-a3e2a08b97ff',event)" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API2.png" alt="" />
<div id="cnblogs_code_open_19f52fdf-cde6-4530-99aa-a3e2a08b97ff" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">Page({
     data : {
        hobbys : [</span>"篮球" ,"足球","羽毛球"<span style="color: #000000;">],
        myhobbys : []
    },
    checkboxChange(event){
        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.setData({
            myhobbys: event.detail.value
        });
    }
});</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<hr />
<h3><strong>3.2.4<span style="font-family: 宋体;">操作数组</span><span style="font-family: Consolas;">-</span><span style="font-family: 宋体;">增删改查</span></strong></h3>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="container"</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">placeholder</span><span style="color: #0000ff;">="请填写学生名字"</span><span style="color: #ff0000;"> auto-focus<span style="color: #0000ff;"> bindinput</span></span><span style="color: #0000ff;">="inputHandler"</span><span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #0000ff;">bindtap</span><span style="color: #0000ff;">="addstudent"</span><span style="color: #0000ff;">&gt;</span>增加<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">wx:for</span><span style="color: #ff0000;">="{{student}}" wx:key="{{item.id}}"</span><span style="color: #ff0000;"> style</span><span style="color: #0000ff;">="display:flex;"</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span><span style="color: #ff0000;">{{item.name}}</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">data-id</span><span style="color: #ff0000;">="{{item.id}}"</span><span style="color: #0000ff;"> bindtap="delstudent"</span><span style="color: #0000ff;">&gt;</span>删除<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('e0cea1e1-9239-444a-ae23-e22f5d62046b')"><img id="code_img_closed_e0cea1e1-9239-444a-ae23-e22f5d62046b" class="code_img_closed" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API1.png" alt="" /><img id="code_img_opened_e0cea1e1-9239-444a-ae23-e22f5d62046b" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e0cea1e1-9239-444a-ae23-e22f5d62046b',event)" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API2.png" alt="" />
<div id="cnblogs_code_open_e0cea1e1-9239-444a-ae23-e22f5d62046b" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">Page({
    data : {
        student : [
            {</span>"id": 1, "name": "小明"<span style="color: #000000;">},
            {</span>"id": 2, "name": "小红"<span style="color: #000000;">},
            {</span>"id": 3, "name": "小刚"<span style="color: #000000;">}
        ],
        </span><span style="color: #008000;">//</span><span style="color: #008000;">将来被添加的学生名字</span>
        needAddStudentName : ""<span style="color: #000000;">
    },
    delstudent(event){
        const id </span>=<span style="color: #000000;"> event.target.dataset.id;
        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.setData({
            student: </span><span style="color: #0000ff;">this</span>.data.student.filter(item =&gt; item.id !=<span style="color: #000000;"> id)
        });
    },
    inputHandler(event){
        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.setData({
            needAddStudentName : event.detail.value
        });
    },
    addstudent(){
        const name </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.data.needAddStudentName;
        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.setData({
            student: [
                ...</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.data.student,
                {id : </span>~~(Math.random() * 100<span style="color: #000000;">), name }
            ]
        });
    }
});</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<hr />
<h1><strong>四</strong><strong><span style="font-family: 宋体;">、小程序</span>API</strong></h1>
<h2><strong>4</strong><strong>.1</strong><strong><span style="font-family: 宋体;">认识小程序的</span>API</strong></h2>
<p><span style="font-family: 宋体;">微信提供了非常多的</span>API<span style="font-family: 宋体;">，可以方便的调起微信提供的能力，如获取用户信息，本地存储，支付功能等。</span>原理<span style="font-family: 宋体;">就是将</span>JavaScript<span style="font-family: 宋体;">翻译为</span><span style="font-family: Consolas;">Java</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">OC</span><span style="font-family: 宋体;">语言。</span></p>
<p>&nbsp;<img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API17.png" alt="" /><img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API18.png" alt="" /></p>
<hr />
<h2><strong>4</strong><strong>.2</strong><strong>使用请求数据</strong><strong>的</strong><strong>API</strong></h2>
<p><strong><span style="text-decoration: underline;"><span style="font-family: 宋体;">微信小程序，域名只支持</span> http</span></strong><span style="color: #ff0000;"><strong><span style="text-decoration: underline;">s</span></strong></span><strong><span style="text-decoration: underline;">&nbsp;</span></strong>(request<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">uploadFile</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">downloadFile) </span><strong><span style="text-decoration: underline;"><span style="font-family: 宋体;">和</span> ws</span></strong><span style="color: #ff0000;"><strong><span style="text-decoration: underline;">s</span></strong></span><strong><span style="text-decoration: underline;">&nbsp;</span></strong>(connectSocket) <span style="font-family: 宋体;">协议；</span></p>
<p>s<span style="font-family: 宋体;">是</span>security<span style="font-family: 宋体;">安全的意思。微信小程序，只能用安全模式的</span>https<span style="font-family: 宋体;">和</span>wss<span style="font-family: 宋体;">协议。</span></p>
<p class="15">&nbsp;https<span style="font-family: 宋体;">就是</span><span style="font-family: Consolas;">http</span><span style="font-family: 宋体;">的安全版本，用来提供</span><span style="font-family: Consolas;">JSON</span><span style="font-family: 宋体;">数据等等；</span></p>
<p class="15">&nbsp;wss<span style="font-family: 宋体;">是</span><span style="font-family: Consolas;">websocket</span><span style="font-family: 宋体;">的安全版本，用来实时通信的。</span></p>
<p>&nbsp;</p>
<p><strong><span style="text-decoration: underline;"><span style="font-family: 宋体;">域名不能使用</span> IP <span style="font-family: 宋体;">地址或 </span><span style="font-family: Consolas;">localhost</span><span style="font-family: 宋体;">，且不能带端口号</span></span></strong><strong><span style="text-decoration: underline;">，而且</span></strong><strong><span style="text-decoration: underline;"><span style="font-family: 宋体;">域名必须经过</span> ICP <span style="font-family: 宋体;">备案；</span></span></strong></p>
<p>对初学者不友好的，想跑一个上线的小程序，还得在服务上花一些钱。但是，在开发时，可以禁止上面的要求。</p>
<p>&nbsp;<img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API19.png" alt="" /></p>
<p><span style="font-family: 宋体;">后端</span>app.js<span style="font-family: 宋体;">提供接口</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('6e58412c-6fe3-499e-baf8-f999ae2f8c0c')"><img id="code_img_closed_6e58412c-6fe3-499e-baf8-f999ae2f8c0c" class="code_img_closed" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API1.png" alt="" /><img id="code_img_opened_6e58412c-6fe3-499e-baf8-f999ae2f8c0c" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('6e58412c-6fe3-499e-baf8-f999ae2f8c0c',event)" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API2.png" alt="" />
<div id="cnblogs_code_open_6e58412c-6fe3-499e-baf8-f999ae2f8c0c" class="cnblogs_code_hide">
<pre><code>const express = require("express"<span style="color: #000000;">);
const app </span>=<span style="color: #000000;"> express();

</span><span style="color: #0000ff;">var</span> a = 10<span style="color: #000000;">;
app.get(</span>"/api", (req,res)=&gt;<span style="color: #000000;">{
    res.json({a})
})

app.get(</span>"/jia", (req,res)=&gt;<span style="color: #000000;">{
    a</span>++<span style="color: #000000;">;
    res.json({})
})

app.listen(</span>3000);</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('4a45b7eb-8992-4210-8de6-bb1d2f54cf05')"><img id="code_img_closed_4a45b7eb-8992-4210-8de6-bb1d2f54cf05" class="code_img_closed" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API1.png" alt="" /><img id="code_img_opened_4a45b7eb-8992-4210-8de6-bb1d2f54cf05" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('4a45b7eb-8992-4210-8de6-bb1d2f54cf05',event)" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API2.png" alt="" />
<div id="cnblogs_code_open_4a45b7eb-8992-4210-8de6-bb1d2f54cf05" class="cnblogs_code_hide">
<pre><code><span style="color: #008000;">&lt;!--</span><span style="color: #008000;">index.wxml</span><span style="color: #008000;">--&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="container"</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span>{{a}}<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">bindtap</span><span style="color: #0000ff;">="add"</span><span style="color: #0000ff;">&gt;</span>按我加服务器的数据<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">bindtap</span><span style="color: #0000ff;">="refresh"</span><span style="color: #0000ff;">&gt;</span>请求服务器上最新数据<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">view</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<span class="cnblogs_code_collapse">wxml示例代码</span></div>
<p>&nbsp;</p>
<p>小程会自动帮我们跨域，跨域的原理是代理跨域。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('1238f08c-5619-4a0f-b205-bbac907b1d5d')"><img id="code_img_closed_1238f08c-5619-4a0f-b205-bbac907b1d5d" class="code_img_closed" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API1.png" alt="" /><img id="code_img_opened_1238f08c-5619-4a0f-b205-bbac907b1d5d" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('1238f08c-5619-4a0f-b205-bbac907b1d5d',event)" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API2.png" alt="" />
<div id="cnblogs_code_open_1238f08c-5619-4a0f-b205-bbac907b1d5d" class="cnblogs_code_hide">
<pre><code>const baseURL = "http://127.0.0.1:3000"

<span style="color: #008000;">//</span><span style="color: #008000;">请求服务器的数据</span><span style="color: #008000;">
//</span><span style="color: #008000;">出了page()函数外，this是window</span>
const requireServer = <span style="color: #0000ff;">function</span><span style="color: #000000;">(){
    </span><span style="color: #0000ff;">var</span> self = <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    wx.request({
        url: `${baseURL}</span>/api`,
        success: <span style="color: #0000ff;">function</span><span style="color: #000000;"> ({ data }) {
            self.setData({
                a: data.a
            });
        }
    });
}

Page({
    data : {
        a : </span>0<span style="color: #000000;">
},
</span><span style="color: #008000;">//</span><span style="color: #008000;">页面显示/切入前台时触发</span>
<span style="color: #000000;">onShow(){ 
    </span><span style="color: #008000;">//</span><span style="color: #008000;">给函数绑定当前位置的this指向</span>
        requireServer.call(<span style="color: #0000ff;">this</span><span style="color: #000000;">);
    },
    add(){
        wx.request({
            url: `${baseURL}</span>/jia`
<span style="color: #000000;">        });
    },
    refresh(){
        requireServer.call(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">);
    }
});</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<hr />
<h2><strong>4.3<span style="font-family: 宋体;">模拟网络切换和监控</span></strong></h2>
<p><span style="font-family: 'Segoe UI';">在模拟器里切换网络类型，查看控制台的输出内容</span></p>
<p>&nbsp;<img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API26.png" alt="" /><img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API27.png" alt="" /></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">在调试器里，输入以下代码并按回车键，进行网络监听：</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('f94c7d8f-fb2e-40c5-b68a-1d6071ff74e5')"><img id="code_img_closed_f94c7d8f-fb2e-40c5-b68a-1d6071ff74e5" class="code_img_closed" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API1.png" alt="" /><img id="code_img_opened_f94c7d8f-fb2e-40c5-b68a-1d6071ff74e5" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('f94c7d8f-fb2e-40c5-b68a-1d6071ff74e5',event)" src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API2.png" alt="" />
<div id="cnblogs_code_open_f94c7d8f-fb2e-40c5-b68a-1d6071ff74e5" class="cnblogs_code_hide">
<pre><code>wx.onNetworkStatusChange(<span style="color: #0000ff;">function</span><span style="color: #000000;">(res) {
    console.log(</span>'网络连接：' +<span style="color: #000000;"> res.isConnected); 
    console.log(</span>'网络状态：' +<span style="color: #000000;"> res.networkType);
});</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p><img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API30.png" alt="" /></p>
<hr />
<h2><strong>4.4<span style="font-family: 宋体;">生命周期</span></strong></h2>
<p>&nbsp;<img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API31.png" alt="" /></p>
<hr />
<h2><strong>4.5</strong><strong>小程序编译及编译模式</strong></h2>
<p>&nbsp;<img src="./images/前端笔记之微信小程序（二）{{}}插值和MVVM模式&amp;数据双向绑定&amp;指令&amp;API32.png" alt="" /></p>
<hr />
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>