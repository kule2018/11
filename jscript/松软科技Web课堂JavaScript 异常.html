<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修松软科技Web课堂JavaScript 异常' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>松软科技Web课堂JavaScript 异常</center></div><div class='banquan'>原文出处:本文由博客园博主施少壮提供。<br/>
原文连接:https://www.cnblogs.com/sysoft/p/12052900.html</div><br>
    <h1>JavaScript 错误 - Throw 和 Try to Catch</h1>
<div id="tpn">&nbsp;
<p><strong><span class="code_marked">try&nbsp;语句使您能够测试代码块中的错误。</span></strong></p>
<p><strong><span class="code_marked">catch&nbsp;语句允许您处理错误。</span></strong></p>
<p><strong><span class="code_marked">throw&nbsp;语句允许您创建自定义错误。</span></strong></p>
<p><strong><span class="code_marked">finally&nbsp;使您能够执行代码，在 try 和 catch 之后，无论结果如何。</span></strong></p>
<div>
<h2>错误总会发生！</h2>
<p>当执行 JavaScript 代码时，会发生各种错误。</p>
<p>错误可能是程序员的编码错误，由错误输入引起的错误，或者由于其他不可预见的问题。</p>
<h3>实例</h3>
<p>在本例中，我们通过&nbsp;<span class="code_marked">adddlert&nbsp;编写警告代码来故意制造了一个错误：</span></p>
<div class="cnblogs_code">
<pre><code>&lt;p id="demo"&gt;&lt;/p&gt;

&lt;script&gt;
<span style="color: #0000ff;">try</span><span style="color: #000000;"> {
    adddlert(</span>"欢迎访问！"<span style="color: #000000;">);
}
</span><span style="color: #0000ff;">catch</span><span style="color: #000000;">(err) {
    document.getElementById(</span>"demo").innerHTML =<span style="color: #000000;"> err.message;
}
</span>&lt;/script&gt;</pre>
</div>
<p>&nbsp;</p>
<p>JavaScript 将 adddlert 捕获为一个错误，然后执行代码来处理该错误。</p>
</div>
<div>
<h2>JavaScript try 和 catch</h2>
<p><span class="code_marked">try&nbsp;语句允许您定义一个代码块，以便在执行时检测错误。</span></p>
<p><span class="code_marked">catch&nbsp;语句允许你定义一个要执行的代码块，如果 try 代码块中发生错误。</span></p>
<p>JavaScript 语句&nbsp;<span class="code_marked">try&nbsp;和&nbsp;<span class="code_marked">catch&nbsp;成对出现：</span></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
     供测试的代码块
}
 </span><span style="color: #0000ff;">catch</span><span style="color: #000000;">(err) {
     处理错误的代码块
} </span></pre>
</div>
<p>&nbsp;</p>
</div>
<div>
<h2>JavaScript 抛出错误</h2>
<p>当发生错误时，JavaScript 通常会停止并产生错误消息。</p>
<p>技术术语是这样描述的：JavaScript 将抛出异常（抛出错误）。</p>
<p>JavaScript 实际上会创建带有两个属性的&nbsp;Error 对象：<span class="code_marked">name&nbsp;和&nbsp;<span class="code_marked">message。</span></span></p>
</div>
<div>
<h2>throw 语句</h2>
<p><span class="code_marked">throw&nbsp;语句允许您创建自定义错误。</span></p>
<p>从技术上讲您能够抛出异常（抛出错误）。</p>
<p>异常可以是 JavaScript 字符串、数字、布尔或对象：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">throw</span> "Too big";    <span style="color: #008000;">//</span><span style="color: #008000;"> 抛出文本</span>
<span style="color: #0000ff;">throw</span> 500;          <span style="color: #008000;">//</span><span style="color: #008000;">抛出数字</span></pre>
</div>
<p>&nbsp;</p>
<p>如果把&nbsp;<span class="code_marked">throw&nbsp;与&nbsp;<span class="code_marked">try&nbsp;和&nbsp;<span class="code_marked">catch&nbsp;一同使用，就可以控制程序流并生成自定义错误消息。</span></span></span></p>
</div>
<div>
<h2>输入验证案例</h2>
<p>本例会检查输入。如果值是错误的，将抛出异常（err）。</p>
<p>该异常（err）被 catch 语句捕获并显示一条自定义的错误消息：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;!</span><span style="color: #ff00ff;">DOCTYPE html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>请输入 5 - 10 之间的数字：<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="demo"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="text"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="button"</span><span style="color: #ff0000;"> onclick</span><span style="color: #0000ff;">="myFunction()"</span><span style="color: #0000ff;">&gt;</span>测试输入<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="message"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> myFunction() {
    </span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> message, x;
    message </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> document.getElementById(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">message</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">);
    message.innerHTML </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">""</span><span style="background-color: #f5f5f5; color: #000000;">;
    x </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> document.getElementById(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">demo</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">).value;
    </span><span style="background-color: #f5f5f5; color: #0000ff;">try</span><span style="background-color: #f5f5f5; color: #000000;"> { 
        </span><span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;">(x </span><span style="background-color: #f5f5f5; color: #000000;">==</span> <span style="background-color: #f5f5f5; color: #000000;">""</span><span style="background-color: #f5f5f5; color: #000000;">) </span><span style="background-color: #f5f5f5; color: #0000ff;">throw</span> <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">空的</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">;
         </span><span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;">(isNaN(x)) </span><span style="background-color: #f5f5f5; color: #0000ff;">throw</span> <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">不是数字</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">;
         x </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Number(x);
        </span><span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;">(x </span><span style="background-color: #f5f5f5; color: #000000;">&lt;</span> <span style="background-color: #f5f5f5; color: #000000;">5</span><span style="background-color: #f5f5f5; color: #000000;">) </span><span style="background-color: #f5f5f5; color: #0000ff;">throw</span>  <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">太小</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">;
        </span><span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;">(x </span><span style="background-color: #f5f5f5; color: #000000;">&gt;</span> <span style="background-color: #f5f5f5; color: #000000;">10</span><span style="background-color: #f5f5f5; color: #000000;">) </span><span style="background-color: #f5f5f5; color: #0000ff;">throw</span> <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">太大</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">;
    }
    </span><span style="background-color: #f5f5f5; color: #0000ff;">catch</span><span style="background-color: #f5f5f5; color: #000000;">(err) {
        message.innerHTML </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">输入是 </span><span style="background-color: #f5f5f5; color: #000000;">"</span> <span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;"> err;
    }
}
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span> </pre>
</div>
<p>&nbsp;</p>
</div>
<div>
<h2>HTML 验证</h2>
<p>以上代码仅仅是一个例子。</p>
<p>现代浏览器通常会结合 JavaScript 与内置的 HTML 验证，通过使用在 HTML 属性中定义的预定义的验证规则：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="demo"</span><span style="color: #ff0000;"> type</span><span style="color: #0000ff;">="number"</span><span style="color: #ff0000;"> min</span><span style="color: #0000ff;">="5"</span><span style="color: #ff0000;"> max</span><span style="color: #0000ff;">="10"</span><span style="color: #ff0000;"> step</span><span style="color: #0000ff;">="1"</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p>您将在本教程稍后的章节学到更多有关表单验证的知识。</p>
</div>
<div>
<h2>finally 语句</h2>
<p><span class="code_marked">finally&nbsp;语句允许您在 try 和 catch 之后执行代码，无论结果：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
     供测试的代码块
}
 </span><span style="color: #0000ff;">catch</span><span style="color: #000000;">(err) {
     处理错误的代码块
} 
</span><span style="color: #0000ff;">finally</span><span style="color: #000000;"> {
     无论 </span><span style="color: #0000ff;">try</span> / <span style="color: #0000ff;">catch</span><span style="color: #000000;"> 结果如何都执行的代码块
}</span></pre>
</div>
<h3>实例</h3>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">function</span><span style="color: #000000;"> myFunction() {
    </span><span style="color: #0000ff;">var</span><span style="color: #000000;"> message, x;
    message </span>= document.getElementById("message"<span style="color: #000000;">);
    message.innerHTML </span>= ""<span style="color: #000000;">;
    x </span>= document.getElementById("demo"<span style="color: #000000;">).value;
    </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> { 
        </span><span style="color: #0000ff;">if</span>(x == "") <span style="color: #0000ff;">throw</span> "是空的"<span style="color: #000000;">;
        </span><span style="color: #0000ff;">if</span>(isNaN(x)) <span style="color: #0000ff;">throw</span> "不是数字"<span style="color: #000000;">;
         x </span>=<span style="color: #000000;"> Number(x);
        </span><span style="color: #0000ff;">if</span>(x &gt;  10) <span style="color: #0000ff;">throw</span> "太大"<span style="color: #000000;">;
        </span><span style="color: #0000ff;">if</span>(x &lt;  5) <span style="color: #0000ff;">throw</span> "太小"<span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">catch</span><span style="color: #000000;">(err) {
        message.innerHTML </span>= "错误：" + err + "."<span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">finally</span><span style="color: #000000;"> {
        document.getElementById(</span>"demo").value = ""<span style="color: #000000;">;
    }
}</span></pre>
</div>
<p>&nbsp;</p>
</div>
<div>
<h2>Error 对象</h2>
<p>JavaScript 拥有当错误发生时提供错误信息的内置 error 对象。</p>
<p>error 对象提供两个有用的属性：<span class="code_marked">name&nbsp;和&nbsp;<span class="code_marked">message。</span></span></p>
</div>
<div>
<h2>Error 对象属性</h2>
<table class="dataintable" style="height: 138px; width: 398px;">
<tbody>
<tr><th>属性</th><th>描述</th></tr>
<tr>
<td>name</td>
<td>设置或返回错误名</td>
</tr>
<tr>
<td>message</td>
<td>设置或返回错误消息（一条字符串）</td>
</tr>
</tbody>
</table>
</div>
<div>
<h2>Error Name Values</h2>
<p>error 的 name 属性可返回六个不同的值：</p>
<table class="dataintable" style="height: 203px; width: 526px;">
<tbody>
<tr><th>错误名</th><th>描述</th></tr>
<tr>
<td>EvalError</td>
<td>已在 eval() 函数中发生的错误</td>
</tr>
<tr>
<td>RangeError</td>
<td>已发生超出数字范围的错误</td>
</tr>
<tr>
<td>ReferenceError</td>
<td>已发生非法引用</td>
</tr>
<tr>
<td>SyntaxError</td>
<td>已发生语法错误</td>
</tr>
<tr>
<td>TypeError</td>
<td>已发生类型错误</td>
</tr>
<tr>
<td>URIError</td>
<td>在 encodeURI() 中已发生的错误</td>
</tr>
</tbody>
</table>
<p>下面为您详解这六个不同的值。</p>
</div>
<div>
<h2>Eval 错误</h2>
<p><span class="code_marked">EvalError&nbsp;指示 eval() 函数中的错误。</span></p>
<p>更新版本的 JavaScript 不会抛出任何&nbsp;<span class="code_marked">EvalError。请使用&nbsp;<span class="code_marked">SyntaxError&nbsp;代替。</span></span></p>
</div>
<div>
<h2>范围错误</h2>
<p><span class="code_marked">RangeError&nbsp;会在您使用了合法值的范围之外的数字时抛出。</span></p>
<p>例如：您不能将数字的有效位数设置为 500。</p>
<h3>实例</h3>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> num = 1<span style="color: #000000;">;
</span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
    num.toPrecision(</span>500);   <span style="color: #008000;">//</span><span style="color: #008000;"> 数无法拥有 500 个有效数</span>
<span style="color: #000000;"> }
</span><span style="color: #0000ff;">catch</span><span style="color: #000000;">(err) {
    document.getElementById(</span>"demo").innerHTML =<span style="color: #000000;"> err.name;
} </span></pre>
</div>
<p>&nbsp;</p>
</div>
<div>
<h2>引用错误</h2>
<p>假如您使用（引用）了尚未声明的变量，则&nbsp;<span class="code_marked">ReferenceError&nbsp;会被抛出：</span></p>
<h3>实例</h3>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span><span style="color: #000000;"> x;
</span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
    x </span>= y + 1;   <span style="color: #008000;">//</span><span style="color: #008000;"> y 无法被引用（使用）</span>
<span style="color: #000000;"> }
</span><span style="color: #0000ff;">catch</span><span style="color: #000000;">(err) {
    document.getElementById(</span>"demo").innerHTML =<span style="color: #000000;"> err.name;
} </span></pre>
</div>
<p class="tiy"><a href="https://www.w3school.com.cn/tiy/t.asp?f=js_error_referenceerror" target="_blank">&nbsp;</a></p>
</div>
<div>
<h2>语法错误</h2>
<p>假如您计算带语法错误的代码，会&nbsp;<span class="code_marked">SyntaxError&nbsp;被抛出：</span></p>
<h3>实例</h3>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
    eval(</span>"alert('Hello)");   <span style="color: #008000;">//</span><span style="color: #008000;"> 缺少 ' 会产生错误</span>
<span style="color: #000000;">}
</span><span style="color: #0000ff;">catch</span><span style="color: #000000;">(err) {
     document.getElementById(</span>"demo").innerHTML =<span style="color: #000000;"> err.name;
} </span></pre>
</div>
<p>&nbsp;</p>
</div>
<div>
<h2>类型错误</h2>
<p>假如您使用的值不在期望值的范围之内，则&nbsp;<span class="code_marked">TypeError&nbsp;被抛出：</span></p>
<h3>实例</h3>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> num = 1<span style="color: #000000;">;
</span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
    num.toUpperCase();   </span><span style="color: #008000;">//</span><span style="color: #008000;"> 您无法将数字转换为大写</span>
<span style="color: #000000;"> }
</span><span style="color: #0000ff;">catch</span><span style="color: #000000;">(err) {
    document.getElementById(</span>"demo").innerHTML = err.name;</pre>
</div>
<pre><code><span class="code_comment">&nbsp;</span></pre>
</div>
<div>
<h2>URI 错误</h2>
<p>假如您在 URI 函数中使用非法字符，则&nbsp;<span class="code_marked">URIError&nbsp;被抛出：</span></p>
<h3>实例</h3>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
    decodeURI(</span>"%%%");   <span style="color: #008000;">//</span><span style="color: #008000;"> 您无法对这些百分号进行 URI 编码</span>
<span style="color: #000000;"> }
</span><span style="color: #0000ff;">catch</span><span style="color: #000000;">(err) {
    document.getElementById(</span>"demo").innerHTML =<span style="color: #000000;"> err.name;
} </span></pre>
</div>
<p>&nbsp;</p>
</div>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>