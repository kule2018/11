<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修浅谈JS中 var let const 变量声明' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>浅谈JS中 var let const 变量声明</center></div><div class='banquan'>原文出处:本文由博客园博主ho~ho~提供。<br/>
原文连接:https://www.cnblogs.com/yongG/p/11831432.html</div><br>
    <p align="justify"><span style="font-size: 18px;"><strong>浅谈JS中 var let const 变量声明</strong></span></p>
<p align="justify"><span style="font-family: 宋体;">用</span>var<span style="font-family: 宋体;">来声明变量会出现的问题：</span></p>
<p align="justify">&nbsp;</p>
<p align="justify"><span style="color: #000000;">1.&nbsp;<span style="font-family: 宋体;">允许重复的变量声明：导致数据被覆盖</span></span></p>
<p align="justify"><span style="color: #000000;">2.&nbsp;<span style="font-family: 宋体;">变量提升：怪异的数据访问、闭包问题</span></span></p>
<p align="justify"><span style="color: #000000;">3.&nbsp;<span style="font-family: 宋体;">全局变量挂载到全局对象：全局对象成员污染问题</span></span></p>
<p align="justify">&nbsp;</p>
<p align="justify"><span style="font-family: 宋体;">例</span>1<span style="font-family: 宋体;">：</span></p>
<p align="justify">&nbsp;<img src="./images/浅谈JS中 var let const 变量声明0.png" alt="" /><img src="./images/浅谈JS中 var let const 变量声明1.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="justify"><span style="color: #ff0000;"><span style="font-family: 宋体;">用</span>var<span style="font-family: 宋体;">声明的变量会默认被提升到当前作用域的顶部</span></span></p>
<p align="justify">&nbsp;</p>
<p align="justify"><span style="font-family: 宋体;">例</span>2<span style="font-family: 宋体;">：</span></p>
<p align="justify"><span style="font-family: 宋体;"><img src="./images/浅谈JS中 var let const 变量声明2.png" alt="" /><img src="./images/浅谈JS中 var let const 变量声明3.png" alt="" /></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="justify">&nbsp;</p>
<p>&nbsp;</p>
<p align="justify">&nbsp;</p>
<p>&nbsp;</p>
<p align="justify"><strong><span style="color: #00ffff;">For<span style="font-family: 宋体;">循环内的</span><span style="font-family: Calibri;">i</span><span style="font-family: 宋体;">变量当前所处的环境是全局作用域（函数局部作用域同理，只不过声明之后不绑定在</span><span style="font-family: Calibri;">window</span><span style="font-family: 宋体;">上）。</span></span></strong></p>
<p align="justify"><strong><span style="color: #00ffff;"><span style="font-family: 宋体;">所以在最后点击事件触发的时候打印的</span>i<span style="font-family: 宋体;">都是当前作用域上的同一个</span><span style="font-family: Calibri;">i</span><span style="font-family: 宋体;">，也即是最后的</span><span style="font-family: Calibri;">11</span></span></strong></p>
<p align="justify"><strong><span style="color: #00ffff;">，这就产生了闭包，如下图</span></strong></p>
<p align="justify">&nbsp;<img src="./images/浅谈JS中 var let const 变量声明4.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="justify">&nbsp;</p>
<p align="justify"><strong>&nbsp;</strong></p>
<p align="justify"><strong>ES6 <span style="font-family: 宋体;">中引入</span><span style="font-family: Calibri;">let </span><span style="font-family: 宋体;">和 </span><span style="font-family: Calibri;">const</span><span style="font-family: 宋体;">，以及块级作用域来解决这个问题</span></strong></p>
<p align="justify"><strong>&nbsp;</strong></p>
<p align="justify"><strong>什么是块级作用域</strong></p>
<p align="justify"><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">块级作用域：代码执行时遇到花括号，会创建一个块级作用域，花括号结束，销毁块级作用域</span></strong></span></p>
<p align="justify">&nbsp;</p>
<p align="justify">let<span style="font-family: 宋体;">在全局作用域下定义变量不会挂在到顶层对象</span><span style="font-family: Calibri;">window</span><span style="font-family: 宋体;">上</span></p>
<p align="justify">let<span style="font-family: 宋体;">声明的变量，不允许当前作用域范围内重复声明，在块级作用域中用</span><span style="font-family: Calibri;">let</span><span style="font-family: 宋体;">定义的变量，在作用域外不能访问</span></p>
<p align="justify">let<span style="font-family: 宋体;">不会有变量提升，因此，不能在定义</span><span style="font-family: Calibri;">let</span><span style="font-family: 宋体;">变量之前使用它</span></p>
<p align="justify">&nbsp;</p>
<p align="justify"><span style="font-family: 宋体;">例</span>1<span style="font-family: 宋体;">（对比）：</span></p>
<p align="justify">&nbsp;<img src="./images/浅谈JS中 var let const 变量声明5.png" alt="" /><img src="./images/浅谈JS中 var let const 变量声明6.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="justify"><span style="color: #00ccff;">&nbsp;</span></p>
<p align="justify"><strong><span style="color: #00ccff;"><span style="font-family: 宋体;">为什么会出现</span>error<span style="font-family: 宋体;">，因为在</span><span style="font-family: Calibri;">let</span><span style="font-family: 宋体;">和</span><span style="font-family: Calibri;">const</span><span style="font-family: 宋体;">中引入了一个暂存该类变量的区域</span><span style="font-family: Calibri;">Temporal Dead Zone</span><span style="font-family: 宋体;">，简称</span><span style="font-family: Calibri;">TDZ</span><span style="font-family: 宋体;">。就是我们所说的临时死区。</span></span></strong></p>
<p align="justify"><strong><span style="color: #00ccff;"><span style="font-family: 宋体;">在</span>TDZ<span style="font-family: 宋体;">中的变量不能被访问，不然就会报错，只有在给该变量赋值的时候才会从死区内接触。</span></span></strong></p>
<p align="justify">&nbsp;</p>
<p align="justify"><span style="font-family: 宋体;">问题：</span>let<span style="font-family: 宋体;">和</span><span style="font-family: Calibri;">const</span><span style="font-family: 宋体;">申明的变量真的不被提升吗？</span></p>
<p align="justify"><span style="color: #ff0000;"><strong>let<span style="font-family: 宋体;">声明的变量实际上也会有提升，但是，提升后会将其放入到</span><span style="font-family: Calibri;">&ldquo;</span><span style="font-family: 宋体;">暂时性死区</span><span style="font-family: Calibri;">&rdquo;</span><span style="font-family: 宋体;">，如果访问的变量位于暂时性死区，则会报错：</span><span style="font-family: Calibri;">&ldquo;Cannot&nbsp;access&nbsp;'a'&nbsp;before&nbsp;initialization&rdquo;</span><span style="font-family: 宋体;">。当代码运行到该变量的声明语句时，会将其从暂时性死区中移除。</span></strong></span></p>
<p align="justify">&nbsp;</p>
<p align="justify"><span style="font-family: 宋体;">例</span>2<span style="font-family: 宋体;">（对比）：</span></p>
<p align="justify">&nbsp;<img src="./images/浅谈JS中 var let const 变量声明7.png" alt="" /><img src="./images/浅谈JS中 var let const 变量声明8.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="justify">轻松解决闭包问题</p>
<p align="justify">&nbsp;</p>
<p align="justify"><span style="color: #00ccff;"><span style="font-family: 宋体;">但是我们看到，此时</span>for<span style="font-family: 宋体;">循环内（）中的</span><span style="font-family: Calibri;">let i</span><span style="font-family: 宋体;">并不在块级作用域内，讲道理应该最后点击时，打印的应该是这个全局上的</span><span style="font-family: Calibri;">i</span><span style="font-family: 宋体;">。这个</span><span style="font-family: Calibri;">i</span><span style="font-family: 宋体;">最后是</span><span style="font-family: Calibri;">11</span><span style="font-family: 宋体;">，可是从结果上来看却不是这样。</span></span></p>
<p align="justify">&nbsp;</p>
<p align="justify"><strong><span style="font-family: 宋体;">在全局上打印这个</span>i</strong></p>
<p align="justify">&nbsp;<img src="./images/浅谈JS中 var let const 变量声明9.png" alt="" /><img src="./images/浅谈JS中 var let const 变量声明10.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="justify"><span style="color: #ff0000;"><span style="font-family: 宋体;">说明这个</span>for<span style="font-family: 宋体;">循环（）内的</span><span style="font-family: Calibri;">i</span><span style="font-family: 宋体;">并不是定义在全局作用域上的</span></span></p>
<p align="justify">&nbsp;</p>
<p align="justify"><strong>原因：</strong></p>
<p align="justify"><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">对于</span>for<span style="font-family: 宋体;">循环（）内</span><span style="font-family: Calibri;">let</span><span style="font-family: 宋体;">定义的变量，做了特殊的处理。此变量相当于默认声明在后面块级作用域内</span></strong></span></p>
<p align="justify"><strong>&nbsp;</strong></p>
<p align="justify"><strong>const </strong></p>
<p align="justify"><span style="color: #ff0000;">const <span style="font-family: 宋体;">和</span><span style="font-family: Calibri;">let</span><span style="font-family: 宋体;">特性相同，唯一不同的是，</span><span style="font-family: Calibri;">const</span><span style="font-family: 宋体;">一般指的都是常量，常量的定义是不可改变的变量，</span><span style="font-family: 宋体;">所以用</span>const <span style="font-family: 宋体;">申明的变量是不可变的，且只能在定义是进行赋值。</span></span></p>
<p align="justify">&nbsp;</p>
<p align="justify">&nbsp;</p>
<p align="justify"><span style="color: #ff0000;"><span style="font-family: 宋体;">值得注意的是</span>const<span style="font-family: 宋体;">声明的常量是指存入内存的内存空间不可变。这也就意味着，如果存的是引用值，改变引用值内的属性，</span><span style="font-family: Calibri;">const</span><span style="font-family: 宋体;">所对应的值就会改变</span></span></p>
<p align="justify">&nbsp;</p>
<p align="justify">&nbsp;<img src="./images/浅谈JS中 var let const 变量声明11.png" alt="" /></p>
<p align="justify">&nbsp;</p>
<p align="justify"><span style="color: #00ffff;"><strong><span style="font-family: 宋体;">通常在开发中能写</span>const<span style="font-family: 宋体;">就用</span><span style="font-family: Calibri;">const</span><span style="font-family: 宋体;">，不行就用</span><span style="font-family: Calibri;">let</span><span style="font-family: 宋体;">，这样出</span><span style="font-family: Calibri;">bug</span><span style="font-family: 宋体;">率小</span></strong></span></p>
<p align="justify">&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff9900;"><strong>每天学习每日进步，不断累积。大佬们说过，只会api的前端不是一个好的工程师。</strong></span></p>
<p align="justify"><img src="./images/浅谈JS中 var let const 变量声明12.png" alt="" width="348" height="348" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>