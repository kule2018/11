<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修自写一个ant-design-pro  AnimationList组件' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>自写一个ant-design-pro  AnimationList组件</center></div><div class='banquan'>原文出处:本文由博客园博主不老梦提供。<br/>
原文连接:https://www.cnblogs.com/chengpu/p/web1.html</div><br>
    <p>ant design蚂蚁金服基于react打造的一个服务于企业级产品的UI框架。而ant design pro呢?就是基于<code>Ant Design这个框架</code>搭建的中后台管理控制台的脚手架。</p>
<p>话不多说，今天给大家分享一个自己写的一个组件。</p>
<p><strong>源码如下：</strong></p>
<p>index.tsx文件：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">  1</span> import React,{Fragment} <span style="color: #0000ff;">from</span> <span style="color: #800000;">'</span><span style="color: #800000;">react</span><span style="color: #800000;">'</span><span style="color: #000000;">;
</span><span style="color: #008080;">  2</span> import styles <span style="color: #0000ff;">from</span> <span style="color: #800000;">'</span><span style="color: #800000;">./index.less</span><span style="color: #800000;">'</span><span style="color: #000000;">; 
</span><span style="color: #008080;">  3</span> import undefined <span style="color: #0000ff;">from</span> <span style="color: #800000;">'</span><span style="color: #800000;">@/e2e/__mocks__/antd-pro-merge-less</span><span style="color: #800000;">'</span><span style="color: #000000;">;
</span><span style="color: #008080;">  4</span> export <span style="color: #0000ff;">interface</span><span style="color: #000000;"> State {
</span><span style="color: #008080;">  5</span>     list:Array&lt;any&gt;<span style="color: #000000;">,
</span><span style="color: #008080;">  6</span>     cacheList:Array&lt;any&gt;<span style="color: #000000;">,
</span><span style="color: #008080;">  7</span> <span style="color: #000000;">    eventIF:boolean,
</span><span style="color: #008080;">  8</span> <span style="color: #000000;">}
</span><span style="color: #008080;">  9</span> export <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Props {
</span><span style="color: #008080;"> 10</span>      style?<span style="color: #000000;">:any,
</span><span style="color: #008080;"> 11</span>      styleSon?<span style="color: #000000;">:any,
</span><span style="color: #008080;"> 12</span>      val?<span style="color: #000000;">:valFrom,
</span><span style="color: #008080;"> 13</span>      dataSource?:Array&lt;dataSource&gt;<span style="color: #000000;">,
</span><span style="color: #008080;"> 14</span>      onClickSon?<span style="color: #000000;">:any,
</span><span style="color: #008080;"> 15</span>      onMouseEnterSon?<span style="color: #000000;">:any,
</span><span style="color: #008080;"> 16</span>      onMouseLeaveSon?<span style="color: #000000;">:any
</span><span style="color: #008080;"> 17</span> <span style="color: #000000;"> }
</span><span style="color: #008080;"> 18</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> valFrom{
</span><span style="color: #008080;"> 19</span>     type?:TYPE|<span style="color: #0000ff;">string</span>,<span style="color: #008000;">//</span><span style="color: #008000;">动画类型</span>
<span style="color: #008080;"> 20</span>     direction?:DIRECTION|<span style="color: #0000ff;">string</span>,<span style="color: #008000;">//</span><span style="color: #008000;">方向</span>
<span style="color: #008080;"> 21</span>     time?:number,<span style="color: #008000;">//</span><span style="color: #008000;">时间 单位s</span>
<span style="color: #008080;"> 22</span>     delay?:number,<span style="color: #008000;">//</span><span style="color: #008000;">动画执行前的延时时间 单位s</span>
<span style="color: #008080;"> 23</span>     sonDelay?:number<span style="color: #008000;">//</span><span style="color: #008000;">列表子项动画延时</span>
<span style="color: #008080;"> 24</span>     domId?:<span style="color: #0000ff;">string</span>,<span style="color: #008000;">//</span><span style="color: #008000;">事件绑定dom id</span>
<span style="color: #008080;"> 25</span>     <span style="color: #0000ff;">event</span>?:EVENT|<span style="color: #0000ff;">string</span>,<span style="color: #008000;">//</span><span style="color: #008000;">动画执行事件</span>
<span style="color: #008080;"> 26</span>     hideModel?:boolean<span style="color: #008000;">//</span><span style="color: #008000;">背景是否显示</span>
<span style="color: #008080;"> 27</span> 
<span style="color: #008080;"> 28</span> <span style="color: #000000;">} 
</span><span style="color: #008080;"> 29</span> export <span style="color: #0000ff;">const</span> <span style="color: #0000ff;">enum</span><span style="color: #000000;"> TYPE{FADEIN}
</span><span style="color: #008080;"> 30</span> export <span style="color: #0000ff;">const</span> <span style="color: #0000ff;">enum</span><span style="color: #000000;"> DIRECTION{TOP,BUTTOM,LEFT,REGIST,TOPLEFT,TOPREGIST,BUTTOMLEFT,BUTTOMREGIST}
</span><span style="color: #008080;"> 31</span> export <span style="color: #0000ff;">const</span> <span style="color: #0000ff;">enum</span><span style="color: #000000;"> EVENT{CLICK,MOUSEENTER}
</span><span style="color: #008080;"> 32</span> <span style="color: #0000ff;">interface</span> dataSource{keys:any,title:any,style?<span style="color: #000000;">:any}
</span><span style="color: #008080;"> 33</span> export <span style="color: #0000ff;">class</span> Father extends React.Component&lt;Props, State&gt;<span style="color: #000000;"> {
</span><span style="color: #008080;"> 34</span> <span style="color: #000000;">    constructor(props: Props) {
</span><span style="color: #008080;"> 35</span> <span style="color: #000000;">        super(props);
</span><span style="color: #008080;"> 36</span>         <span style="color: #0000ff;">this</span>.state =<span style="color: #000000;"> { 
</span><span style="color: #008080;"> 37</span>             list:[],<span style="color: #008000;">//</span><span style="color: #008000;">列表项</span>
<span style="color: #008080;"> 38</span>             cacheList:[],<span style="color: #008000;">//</span><span style="color: #008000;">暂时存储，观望是否绑定dom</span>
<span style="color: #008080;"> 39</span>             eventIF:<span style="color: #0000ff;">false</span>,<span style="color: #008000;">//</span><span style="color: #008000;">是否触发了event事件</span>
<span style="color: #008080;"> 40</span> <span style="color: #000000;">        };
</span><span style="color: #008080;"> 41</span>         <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.val !==<span style="color: #000000;"> undefined){
</span><span style="color: #008080;"> 42</span>             <span style="color: #0000ff;">const</span> val:valFrom = <span style="color: #0000ff;">this</span><span style="color: #000000;">.props.val;
</span><span style="color: #008080;"> 43</span>             <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.val.type != undefined &amp;&amp; !(val.type===TYPE.FADEIN || val.type===<span style="color: #800000;">"</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">"</span><span style="color: #000000;">)){
</span><span style="color: #008080;"> 44</span>                 <span style="color: #0000ff;">throw</span> Error(`type定义错误:错误值为 ${val.type},type取值为{<span style="color: #0000ff;">enum</span>:TYPE,<span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span><span style="color: #000000;">}`,);
</span><span style="color: #008080;"> 45</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 46</span>             <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.val.direction != undefined &amp;&amp; !(val.direction === DIRECTION.TOP || val.direction === DIRECTION.BUTTOM || 
<span style="color: #008080;"> 47</span>                 val.direction === DIRECTION.LEFT||val.direction === DIRECTION.REGIST || val.direction === DIRECTION.TOPLEFT ||
<span style="color: #008080;"> 48</span>                 val.direction === DIRECTION.TOPREGIST || val.direction === DIRECTION.BUTTOMLEFT || val.direction === DIRECTION.BUTTOMREGIST ||
<span style="color: #008080;"> 49</span>                 val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">top</span><span style="color: #800000;">'</span> || val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">buttom</span><span style="color: #800000;">'</span> || val.direction=== <span style="color: #800000;">'</span><span style="color: #800000;">left</span><span style="color: #800000;">'</span> || val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">regist</span><span style="color: #800000;">'</span> ||
<span style="color: #008080;"> 50</span>                 val.direction=== <span style="color: #800000;">'</span><span style="color: #800000;">topLeft</span><span style="color: #800000;">'</span> || val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">topRegist</span><span style="color: #800000;">'</span> || val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">buttomLeft</span><span style="color: #800000;">'</span> || val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">buttomRegist</span><span style="color: #800000;">'</span><span style="color: #000000;">)){
</span><span style="color: #008080;"> 51</span>                 <span style="color: #0000ff;">throw</span> Error(`direction定义错误:错误值为 ${val.direction},direction取值为{<span style="color: #0000ff;">enum</span>:DIRECTION,<span style="color: #800000;">'</span><span style="color: #800000;">top</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">buttom</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">left</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">regist</span><span style="color: #800000;">'</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 52</span>                 <span style="color: #800000;">'</span><span style="color: #800000;">topLeft</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">topRegist</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">buttomLeft</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">buttomRegist</span><span style="color: #800000;">'</span><span style="color: #000000;">}`);
</span><span style="color: #008080;"> 53</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 54</span>             window.onload =<span style="color: #000000;"> function(){
</span><span style="color: #008080;"> 55</span>                 <span style="color: #0000ff;">if</span>(val.domId !==<span style="color: #000000;"> undefined){    
</span><span style="color: #008080;"> 56</span>                     <span style="color: #0000ff;">if</span>(document.getElementById(val.domId)===undefined || document.getElementById(val.domId)===<span style="color: #0000ff;">null</span><span style="color: #000000;">){
</span><span style="color: #008080;"> 57</span>                         <span style="color: #0000ff;">throw</span><span style="color: #000000;"> Error(`指定id的DOM元素不存在！`,);
</span><span style="color: #008080;"> 58</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;"> 59</span>                     <span style="color: #0000ff;">if</span>(val.<span style="color: #0000ff;">event</span> ===<span style="color: #000000;"> undefined){
</span><span style="color: #008080;"> 60</span> <span style="color: #000000;">                        console.warn(`指定DOM元素情况下未指定绑定事件event！`);
</span><span style="color: #008080;"> 61</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;"> 62</span> <span style="color: #000000;">                }　
</span><span style="color: #008080;"> 63</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 64</span>             <span style="color: #0000ff;">if</span>(val.<span style="color: #0000ff;">event</span> !==<span style="color: #000000;"> undefined){
</span><span style="color: #008080;"> 65</span>                 <span style="color: #0000ff;">if</span>(!(val.<span style="color: #0000ff;">event</span> === EVENT.CLICK || val.<span style="color: #0000ff;">event</span> === EVENT.MOUSEENTER  || val.<span style="color: #0000ff;">event</span> === <span style="color: #800000;">'</span><span style="color: #800000;">click</span><span style="color: #800000;">'</span> ||
<span style="color: #008080;"> 66</span>                 val.<span style="color: #0000ff;">event</span> === <span style="color: #800000;">'</span><span style="color: #800000;">mouseEnter</span><span style="color: #800000;">'</span><span style="color: #000000;">)){
</span><span style="color: #008080;"> 67</span>                     <span style="color: #0000ff;">throw</span> Error(`event定义错误:错误值为 ${val.<span style="color: #0000ff;">event</span>},event取值为{<span style="color: #0000ff;">enum</span>:EVENT,<span style="color: #800000;">'</span><span style="color: #800000;">click</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">mouseEnter</span><span style="color: #800000;">'</span><span style="color: #000000;">}`,);
</span><span style="color: #008080;"> 68</span> <span style="color: #000000;">                }
</span><span style="color: #008080;"> 69</span>                 <span style="color: #0000ff;">if</span>(val.domId ===<span style="color: #000000;"> undefined){
</span><span style="color: #008080;"> 70</span> <span style="color: #000000;">                    console.warn(`绑定事件后未指定DOM元素！`);
</span><span style="color: #008080;"> 71</span> <span style="color: #000000;">                }
</span><span style="color: #008080;"> 72</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 73</span> <span style="color: #000000;">        }  
</span><span style="color: #008080;"> 74</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 75</span>     isWidth=(strs:Array&lt;any&gt;):number=&gt;<span style="color: #000000;">{
</span><span style="color: #008080;"> 76</span>         let str : Array&lt;<span style="color: #0000ff;">string</span>&gt; =<span style="color: #000000;"> [];
</span><span style="color: #008080;"> 77</span>         <span style="color: #0000ff;">for</span>(let i=<span style="color: #800080;">0</span>;i&lt;strs.length;i++<span style="color: #000000;">){
</span><span style="color: #008080;"> 78</span>             <span style="color: #0000ff;">if</span>(strs[i].type!==undefined &amp;&amp; strs[i].type===<span style="color: #000000;">Son){
</span><span style="color: #008080;"> 79</span> <span style="color: #000000;">                str.push(strs[i].props.children);
</span><span style="color: #008080;"> 80</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 81</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 82</span>         let max:number = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 83</span>         let reg:RegExp =  /[\u4E00-\u9FA5\uF900-\uFA2D]/<span style="color: #000000;">i;
</span><span style="color: #008080;"> 84</span>         str.forEach(element =&gt;<span style="color: #000000;"> {
</span><span style="color: #008080;"> 85</span>             let forMax = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 86</span>             <span style="color: #0000ff;">for</span>(let i=<span style="color: #800080;">0</span>;i&lt;element.length;i++<span style="color: #000000;">){
</span><span style="color: #008080;"> 87</span>                 <span style="color: #0000ff;">if</span><span style="color: #000000;">(reg.test(element.charAt(i))){
</span><span style="color: #008080;"> 88</span>                     forMax+=<span style="color: #800080;">2</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 89</span>                 }<span style="color: #0000ff;">else</span><span style="color: #000000;">{
</span><span style="color: #008080;"> 90</span>                     forMax++<span style="color: #000000;">;
</span><span style="color: #008080;"> 91</span> <span style="color: #000000;">                }
</span><span style="color: #008080;"> 92</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 93</span>             <span style="color: #0000ff;">if</span>(forMax &gt;<span style="color: #000000;"> max){
</span><span style="color: #008080;"> 94</span>                 max =<span style="color: #000000;"> forMax;
</span><span style="color: #008080;"> 95</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 96</span> <span style="color: #000000;">        });
</span><span style="color: #008080;"> 97</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> max;
</span><span style="color: #008080;"> 98</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 99</span>     isWidth1=(maxWidth:number,data:Array&lt;dataSource&gt;):number=&gt;<span style="color: #000000;">{
</span><span style="color: #008080;">100</span>         let max:number =<span style="color: #000000;"> maxWidth;
</span><span style="color: #008080;">101</span>         let reg:RegExp =  /[\u4E00-\u9FA5\uF900-\uFA2D]/<span style="color: #000000;">i;
</span><span style="color: #008080;">102</span>         data.forEach(element =&gt;<span style="color: #000000;"> {
</span><span style="color: #008080;">103</span>             let forMax = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">104</span>             <span style="color: #0000ff;">for</span>(let i=<span style="color: #800080;">0</span>;i&lt;element.title.length;i++<span style="color: #000000;">){
</span><span style="color: #008080;">105</span>                 <span style="color: #0000ff;">if</span><span style="color: #000000;">(reg.test(element.title.charAt(i))){
</span><span style="color: #008080;">106</span>                     forMax+=<span style="color: #800080;">2</span><span style="color: #000000;">;
</span><span style="color: #008080;">107</span>                 }<span style="color: #0000ff;">else</span><span style="color: #000000;">{
</span><span style="color: #008080;">108</span>                     forMax++<span style="color: #000000;">;
</span><span style="color: #008080;">109</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">110</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">111</span>             <span style="color: #0000ff;">if</span>(forMax &gt;<span style="color: #000000;"> max){
</span><span style="color: #008080;">112</span>                 max =<span style="color: #000000;"> forMax;
</span><span style="color: #008080;">113</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">114</span> <span style="color: #000000;">        });
</span><span style="color: #008080;">115</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> max;
</span><span style="color: #008080;">116</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">117</span>     setList=():<span style="color: #0000ff;">void</span>=&gt;<span style="color: #000000;">{
</span><span style="color: #008080;">118</span>         <span style="color: #008000;">//</span><span style="color: #008000;">清零</span>
<span style="color: #008080;">119</span>         <span style="color: #0000ff;">this</span>.state.list.length = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">120</span>         <span style="color: #0000ff;">const</span> list = [...<span style="color: #0000ff;">this</span><span style="color: #000000;">.state.cacheList];
</span><span style="color: #008080;">121</span>         <span style="color: #0000ff;">this</span>.setState({list,eventIF:<span style="color: #0000ff;">true</span><span style="color: #000000;">});
</span><span style="color: #008080;">122</span>         <span style="color: #008000;">//</span><span style="color: #008000;">解除绑定</span>
<span style="color: #008080;">123</span>         <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.val != undefined &amp;&amp; <span style="color: #0000ff;">this</span>.props.val.domId !=<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">124</span>             let dom:any = document.getElementById(<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.val.domId);
</span><span style="color: #008080;">125</span>             let <span style="color: #0000ff;">event</span>:<span style="color: #0000ff;">string</span> = <span style="color: #800000;">"</span><span style="color: #800000;">click</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">126</span>             <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.val.<span style="color: #0000ff;">event</span> ===<span style="color: #000000;"> EVENT.MOUSEENTER){
</span><span style="color: #008080;">127</span>                 <span style="color: #0000ff;">event</span> = <span style="color: #800000;">"</span><span style="color: #800000;">mouseenter</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">128</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">129</span>             dom.removeEventListener(<span style="color: #0000ff;">event</span>,<span style="color: #0000ff;">this</span><span style="color: #000000;">.setList);        
</span><span style="color: #008080;">130</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">131</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">132</span>     bindEvent=(val:any):<span style="color: #0000ff;">void</span>=&gt;<span style="color: #000000;">{
</span><span style="color: #008080;">133</span>         <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.val != undefined &amp;&amp; <span style="color: #0000ff;">this</span>.props.val.domId != undefined &amp;&amp; <span style="color: #0000ff;">this</span>.props.val.<span style="color: #0000ff;">event</span> !=<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">134</span>             <span style="color: #0000ff;">const</span> dom:any = document.getElementById(<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.val.domId);
</span><span style="color: #008080;">135</span>             let <span style="color: #0000ff;">event</span>:<span style="color: #0000ff;">string</span> = <span style="color: #800000;">"</span><span style="color: #800000;">click</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">136</span>             <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.val.<span style="color: #0000ff;">event</span> ===<span style="color: #000000;"> EVENT.MOUSEENTER){
</span><span style="color: #008080;">137</span>                 <span style="color: #0000ff;">event</span> = <span style="color: #800000;">"</span><span style="color: #800000;">mouseenter</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">138</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">139</span>             dom.addEventListener(<span style="color: #0000ff;">event</span>,<span style="color: #0000ff;">this</span><span style="color: #000000;">.setList);                
</span><span style="color: #008080;">140</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">141</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">142</span> <span style="color: #000000;">    render() { 
</span><span style="color: #008080;">143</span>         <span style="color: #008000;">//</span><span style="color: #008000;">默认动画效果</span>
<span style="color: #008080;">144</span>         <span style="color: #0000ff;">const</span> defVal:valFrom =<span style="color: #000000;"> {
</span><span style="color: #008080;">145</span> <span style="color: #000000;">            type:TYPE.FADEIN,
</span><span style="color: #008080;">146</span> <span style="color: #000000;">            direction:DIRECTION.LEFT,
</span><span style="color: #008080;">147</span>             time:.<span style="color: #800080;">5</span><span style="color: #000000;">,
</span><span style="color: #008080;">148</span>             sonDelay:.<span style="color: #800080;">1</span><span style="color: #000000;">,
</span><span style="color: #008080;">149</span>             delay:<span style="color: #800080;">0</span><span style="color: #000000;">,
</span><span style="color: #008080;">150</span> <span style="color: #000000;">        };
</span><span style="color: #008080;">151</span>         <span style="color: #0000ff;">const</span> defV = {...defVal,...<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.val}
</span><span style="color: #008080;">152</span>         <span style="color: #008000;">//</span><span style="color: #008000;">Son项数</span>
<span style="color: #008080;">153</span>         let index:number = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">154</span>         <span style="color: #008000;">//</span><span style="color: #008000;">最大文字占格</span>
<span style="color: #008080;">155</span>         let width:number=<span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">156</span>         <span style="color: #008000;">//</span><span style="color: #008000;">字体大小</span>
<span style="color: #008080;">157</span>         let fontSize:number = <span style="color: #800080;">13</span><span style="color: #000000;">;
</span><span style="color: #008080;">158</span>         <span style="color: #008000;">//</span><span style="color: #008000;">Son高度</span>
<span style="color: #008080;">159</span>         let formatHeight:number = <span style="color: #800080;">26</span><span style="color: #000000;">;
</span><span style="color: #008080;">160</span>         <span style="color: #008000;">//</span><span style="color: #008000;">Father及Son宽度</span>
<span style="color: #008080;">161</span>         let formatWidth:number = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">162</span>        
<span style="color: #008080;">163</span>         let sonStr:any = <span style="color: #0000ff;">this</span><span style="color: #000000;">.props.children;
</span><span style="color: #008080;">164</span>         <span style="color: #008000;">//</span> <span style="color: #008000;">//</span><span style="color: #008000;">宽高自适应</span>
<span style="color: #008080;">165</span>         <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.children !=<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">166</span>             width = <span style="color: #0000ff;">this</span><span style="color: #000000;">.isWidth(sonStr);
</span><span style="color: #008080;">167</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">168</span>         <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.dataSource !=<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">169</span>             width = <span style="color: #0000ff;">this</span>.isWidth1(width,<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.dataSource);
</span><span style="color: #008080;">170</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">171</span>         fontSize = <span style="color: #0000ff;">this</span>.props.style!==undefined &amp;&amp; <span style="color: #0000ff;">this</span>.props.style.fontSize!==undefined?Number.parseInt(<span style="color: #0000ff;">this</span>.props.style.fontSize):<span style="color: #800080;">13</span><span style="color: #000000;">;
</span><span style="color: #008080;">172</span>         formatHeight = fontSize*<span style="color: #800080;">2</span><span style="color: #000000;">;
</span><span style="color: #008080;">173</span>         formatWidth = fontSize*width*<span style="color: #800080;">0.6</span><span style="color: #000000;">;
</span><span style="color: #008080;">174</span>         
<span style="color: #008080;">175</span>         <span style="color: #008000;">//</span><span style="color: #008000;">绑定dom后是否隐藏模板</span>
<span style="color: #008080;">176</span>         let hideModel = <span style="color: #800000;">"</span><span style="color: #800000;">visible</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">177</span>         <span style="color: #0000ff;">if</span>(!<span style="color: #0000ff;">this</span><span style="color: #000000;">.state.eventIF){
</span><span style="color: #008080;">178</span>             <span style="color: #008000;">//</span><span style="color: #008000;">清零</span>
<span style="color: #008080;">179</span>             <span style="color: #0000ff;">this</span>.state.list.length = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">180</span>             <span style="color: #0000ff;">this</span>.state.cacheList.length = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">181</span>             <span style="color: #008000;">//</span><span style="color: #008000;">子项写入</span>
<span style="color: #008080;">182</span>             <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.children != <span style="color: #0000ff;">null</span> &amp;&amp; <span style="color: #0000ff;">this</span>.props.children !=<span style="color: #000000;"> undefined){  
</span><span style="color: #008080;">183</span>                 <span style="color: #0000ff;">for</span>(let i=<span style="color: #800080;">0</span>;i&lt;sonStr.length;i++<span style="color: #000000;">){
</span><span style="color: #008080;">184</span>                     <span style="color: #0000ff;">if</span>(sonStr[i].type!==undefined &amp;&amp; sonStr[i].type===<span style="color: #000000;">Son){
</span><span style="color: #008080;">185</span>                         <span style="color: #0000ff;">this</span>.state.cacheList.push(&lt;List title={sonStr[i].props.children} style={sonStr[i].props.style} styleSon={<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.styleSon}
</span><span style="color: #008080;">186</span>                         animation={defV} index={index++} formatHeight=<span style="color: #000000;">{formatHeight}
</span><span style="color: #008080;">187</span>                         formatWidth = {formatWidth} keys={<span style="color: #0000ff;">this</span>.props.children[i].props.keys !==undefined?
<span style="color: #008080;">188</span>                         <span style="color: #0000ff;">this</span>.props.children[i].props.keys:Number.MAX_VALUE-i} onClick={<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.children[i].props.onClick}
</span><span style="color: #008080;">189</span>                         onClickSon={<span style="color: #0000ff;">this</span>.props.onClickSon} onMouseEnter={<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.children[i].props.onMouseEnter}
</span><span style="color: #008080;">190</span>                         onMouseEnterSon={<span style="color: #0000ff;">this</span>.props.onMouseEnterSon} onMouseLeave={<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.children[i].props.onMouseLeave}
</span><span style="color: #008080;">191</span>                         onMouseLeaveSon={<span style="color: #0000ff;">this</span>.props.onMouseLeaveSon}/&gt;<span style="color: #000000;">);
</span><span style="color: #008080;">192</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">193</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">194</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">195</span>             <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.dataSource !==<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">196</span>                 <span style="color: #0000ff;">for</span>(let i=<span style="color: #800080;">0</span>;i&lt;<span style="color: #0000ff;">this</span>.props.dataSource.length;i++<span style="color: #000000;">){
</span><span style="color: #008080;">197</span>                     <span style="color: #0000ff;">this</span>.state.cacheList.push(&lt;List title={<span style="color: #0000ff;">this</span>.props.dataSource[i].title} style={<span style="color: #0000ff;">this</span>.props.dataSource[i].style} index={index++<span style="color: #000000;">}
</span><span style="color: #008080;">198</span>                     styleSon={<span style="color: #0000ff;">this</span>.props.styleSon} animation={defV} formatHeight={formatHeight} formatWidth = {formatWidth} keys=
<span style="color: #008080;">199</span>                     {<span style="color: #0000ff;">this</span>.props.dataSource[i].keys}/&gt;<span style="color: #000000;">);
</span><span style="color: #008080;">200</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">201</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">202</span>             <span style="color: #008000;">//</span><span style="color: #008000;">无dom绑定</span>
<span style="color: #008080;">203</span>             <span style="color: #0000ff;">if</span>(defV.domId ===undefined || defV.<span style="color: #0000ff;">event</span> ===<span style="color: #000000;">undefined){
</span><span style="color: #008080;">204</span>                 <span style="color: #0000ff;">for</span>(let i =<span style="color: #800080;">0</span>;i&lt;<span style="color: #0000ff;">this</span>.state.cacheList.length;i++<span style="color: #000000;">){
</span><span style="color: #008080;">205</span>                     <span style="color: #0000ff;">this</span>.state.list.push(<span style="color: #0000ff;">this</span><span style="color: #000000;">.state.cacheList[i]);
</span><span style="color: #008080;">206</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">207</span>                 
<span style="color: #008080;">208</span>             }<span style="color: #0000ff;">else</span><span style="color: #000000;">{
</span><span style="color: #008080;">209</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">有dom绑定</span>
<span style="color: #008080;">210</span>                 <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.val!=undefined &amp;&amp; <span style="color: #0000ff;">this</span><span style="color: #000000;">.props.val.hideModel){
</span><span style="color: #008080;">211</span>                     hideModel = <span style="color: #800000;">"</span><span style="color: #800000;">hidden</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">212</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">213</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">事件绑定</span>
<span style="color: #008080;">214</span>                 <span style="color: #0000ff;">const</span> _this  = <span style="color: #0000ff;">this</span><span style="color: #000000;">;
</span><span style="color: #008080;">215</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">切换菜单后window.onload不会执行，但dom已经重置</span>
<span style="color: #008080;">216</span>                 <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.val != undefined &amp;&amp; <span style="color: #0000ff;">this</span>.props.val.domId != undefined &amp;&amp; <span style="color: #0000ff;">this</span>.props.val.<span style="color: #0000ff;">event</span> != undefined &amp;&amp; 
<span style="color: #008080;">217</span>                 document.getElementById(<span style="color: #0000ff;">this</span>.props.val.domId)==<span style="color: #0000ff;">null</span><span style="color: #000000;">){
</span><span style="color: #008080;">218</span>                     let interval = window.setInterval(()=&gt;<span style="color: #000000;">{
</span><span style="color: #008080;">219</span>                         let dom:any = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;">220</span>                         <span style="color: #0000ff;">if</span>(_this.props.val!=undefined &amp;&amp; _this.props.val.domId !=<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">221</span>                             dom =<span style="color: #000000;"> document.getElementById(_this.props.val.domId);
</span><span style="color: #008080;">222</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">223</span>                         <span style="color: #0000ff;">if</span>(dom !== <span style="color: #0000ff;">null</span> &amp;&amp; dom !==undefined &amp;&amp; dom !==<span style="color: #800000;">"</span><span style="color: #800000;">null</span><span style="color: #800000;">"</span><span style="color: #000000;">){
</span><span style="color: #008080;">224</span> <span style="color: #000000;">                            _this.bindEvent(defV);
</span><span style="color: #008080;">225</span> 
<span style="color: #008080;">226</span> <span style="color: #000000;">                            window.clearInterval(interval); 
</span><span style="color: #008080;">227</span> <span style="color: #000000;">                        } 
</span><span style="color: #008080;">228</span>                     }, <span style="color: #800080;">100</span><span style="color: #000000;">);        
</span><span style="color: #008080;">229</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">230</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">231</span>         }<span style="color: #0000ff;">else</span><span style="color: #000000;"> {
</span><span style="color: #008080;">232</span>             index = <span style="color: #0000ff;">this</span><span style="color: #000000;">.state.list.length;
</span><span style="color: #008080;">233</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">234</span>         
<span style="color: #008080;">235</span>         <span style="color: #008000;">//</span><span style="color: #008000;">Father默认样式</span>
<span style="color: #008080;">236</span> 
<span style="color: #008080;">237</span>         <span style="color: #0000ff;">const</span> defFatherStyle:any =<span style="color: #000000;"> {
</span><span style="color: #008080;">238</span>             border:<span style="color: #800000;">"</span><span style="color: #800000;">1px solid #91D5FF</span><span style="color: #800000;">"</span><span style="color: #000000;">,
</span><span style="color: #008080;">239</span>             backgroundColor: <span style="color: #800000;">"</span><span style="color: #800000;">#E6F7FF</span><span style="color: #800000;">"</span><span style="color: #000000;">,
</span><span style="color: #008080;">240</span>             fontSize:<span style="color: #800000;">"</span><span style="color: #800000;">13px</span><span style="color: #800000;">"</span><span style="color: #000000;">,
</span><span style="color: #008080;">241</span>             color:<span style="color: #800000;">"</span><span style="color: #800000;">#000</span><span style="color: #800000;">"</span><span style="color: #000000;">,
</span><span style="color: #008080;">242</span> <span style="color: #000000;">            paddimg:`${fontSize}px`,
</span><span style="color: #008080;">243</span>             height: `${formatHeight*index+<span style="color: #800080;">2</span><span style="color: #000000;">}px`,
</span><span style="color: #008080;">244</span>             width:`${formatWidth+<span style="color: #800080;">2</span><span style="color: #000000;">}px`,
</span><span style="color: #008080;">245</span> <span style="color: #000000;">            visibility:`${hideModel}`
</span><span style="color: #008080;">246</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">247</span>         <span style="color: #0000ff;">const</span> style = {...defFatherStyle,...<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.style};
</span><span style="color: #008080;">248</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> (
</span><span style="color: #008080;">249</span>             &lt;Fragment&gt;
<span style="color: #008080;">250</span>                 &lt;div style={style} className={styles.fDiv}&gt;
<span style="color: #008080;">251</span>                     &lt;ul className={styles.ul}&gt;
<span style="color: #008080;">252</span>                         {<span style="color: #0000ff;">this</span><span style="color: #000000;">.state.list}
</span><span style="color: #008080;">253</span>                     &lt;/ul&gt;
<span style="color: #008080;">254</span>                 &lt;/div&gt;
<span style="color: #008080;">255</span>             &lt;/Fragment&gt;
<span style="color: #008080;">256</span> <span style="color: #000000;">         );
</span><span style="color: #008080;">257</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">258</span> <span style="color: #000000;">}
</span><span style="color: #008080;">259</span> export <span style="color: #0000ff;">class</span> Son extends React.Component&lt;{style?:any,keys?:any,onClick?:any,onMouseEnter?:any,onMouseLeave?:any}, {}&gt;<span style="color: #000000;"> {
</span><span style="color: #008080;">260</span> <span style="color: #000000;">}
</span><span style="color: #008080;">261</span> <span style="color: #0000ff;">class</span> List extends React.Component&lt;{title:<span style="color: #0000ff;">string</span>,style?:any,styleSon?<span style="color: #000000;">:any,animation:valFrom,keys:any,index:number,formatHeight:number,
</span><span style="color: #008080;">262</span>     formatWidth:number,onClick?:any,onClickSon?:any,onMouseEnter?:any,onMouseEnterSon?:any,onMouseLeave?:any,onMouseLeaveSon?:any},{}&gt;<span style="color: #000000;"> {
</span><span style="color: #008080;">263</span>     click = (key:any,title:any)=&gt;<span style="color: #000000;">{
</span><span style="color: #008080;">264</span>         <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.onClick !==<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">265</span>             <span style="color: #0000ff;">this</span><span style="color: #000000;">.props.onClick(key,title);
</span><span style="color: #008080;">266</span>         }<span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.onClickSon !==<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">267</span>             <span style="color: #0000ff;">this</span><span style="color: #000000;">.props.onClickSon(key,title);
</span><span style="color: #008080;">268</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">269</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">270</span>     mouseEnter = (key:any,title:any)=&gt;<span style="color: #000000;">{
</span><span style="color: #008080;">271</span>         <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.onMouseEnter !==<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">272</span>             <span style="color: #0000ff;">this</span><span style="color: #000000;">.props.onMouseEnter(key,title);
</span><span style="color: #008080;">273</span>         }<span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.onMouseEnterSon !==<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">274</span>             <span style="color: #0000ff;">this</span><span style="color: #000000;">.props.onMouseEnterSon(key,title);
</span><span style="color: #008080;">275</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">276</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">277</span>     mouseLeave = (key:any,title:any)=&gt;<span style="color: #000000;">{
</span><span style="color: #008080;">278</span>         <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.onMouseLeave !==<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">279</span>             <span style="color: #0000ff;">this</span><span style="color: #000000;">.props.onMouseLeave(key,title);
</span><span style="color: #008080;">280</span>         }<span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.props.onMouseLeaveSon !==<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">281</span>             <span style="color: #0000ff;">this</span><span style="color: #000000;">.props.onMouseLeaveSon(key,title);
</span><span style="color: #008080;">282</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">283</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">284</span> 
<span style="color: #008080;">285</span> 
<span style="color: #008080;">286</span> 
<span style="color: #008080;">287</span> <span style="color: #000000;">    render() {
</span><span style="color: #008080;">288</span>         <span style="color: #0000ff;">const</span> val:valFrom = <span style="color: #0000ff;">this</span><span style="color: #000000;">.props.animation;
</span><span style="color: #008080;">289</span>         <span style="color: #0000ff;">const</span> style = {animation:<span style="color: #800000;">''</span>,animationDelay:<span style="color: #800000;">'</span><span style="color: #800000;">0s</span><span style="color: #800000;">'</span><span style="color: #000000;">};
</span><span style="color: #008080;">290</span>         
<span style="color: #008080;">291</span>         <span style="color: #008000;">//</span><span style="color: #008000;">加载页面后直接执行</span>
<span style="color: #008080;">292</span>         <span style="color: #0000ff;">if</span>(val.type === TYPE.FADEIN &amp;&amp; val.direction === DIRECTION.TOP || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">top</span><span style="color: #800000;">'</span>
<span style="color: #008080;">293</span>         || val.type === TYPE.FADEIN &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">top</span><span style="color: #800000;">'</span> || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction ===<span style="color: #000000;"> DIRECTION.TOP){
</span><span style="color: #008080;">294</span>             style.animation=<span style="color: #000000;"> `${styles.fadeInTop} ${val.time}s forwards`;
</span><span style="color: #008080;">295</span>         }<span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(val.type === TYPE.FADEIN &amp;&amp; val.direction === DIRECTION.BUTTOM || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">buttom</span><span style="color: #800000;">'</span>
<span style="color: #008080;">296</span>         || val.type === TYPE.FADEIN &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">buttom</span><span style="color: #800000;">'</span> || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction ===<span style="color: #000000;"> DIRECTION.BUTTOM){
</span><span style="color: #008080;">297</span>             style.animation =<span style="color: #000000;"> `${styles.fadeInButtom} ${val.time}s forwards`;       
</span><span style="color: #008080;">298</span>         }<span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(val.type === TYPE.FADEIN &amp;&amp; val.direction === DIRECTION.LEFT || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">left</span><span style="color: #800000;">'</span>
<span style="color: #008080;">299</span>         || val.type === TYPE.FADEIN &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">left</span><span style="color: #800000;">'</span> || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction ===<span style="color: #000000;"> DIRECTION.LEFT){
</span><span style="color: #008080;">300</span>         style.animation =<span style="color: #000000;"> `${styles.fadeInLeft} ${val.time}s forwards`;
</span><span style="color: #008080;">301</span>         }<span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(val.type === TYPE.FADEIN &amp;&amp; val.direction === DIRECTION.REGIST || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">regist</span><span style="color: #800000;">'</span>
<span style="color: #008080;">302</span>         || val.type === TYPE.FADEIN &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">regist</span><span style="color: #800000;">'</span> || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction ===<span style="color: #000000;"> DIRECTION.REGIST){
</span><span style="color: #008080;">303</span>             style.animation =<span style="color: #000000;"> `${styles.fadeInRegist} ${val.time}s forwards`;
</span><span style="color: #008080;">304</span>         }<span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(val.type === TYPE.FADEIN &amp;&amp; val.direction === DIRECTION.TOPLEFT || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">topLeft</span><span style="color: #800000;">'</span>
<span style="color: #008080;">305</span>         || val.type === TYPE.FADEIN &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">topLeft</span><span style="color: #800000;">'</span> || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction ===<span style="color: #000000;"> DIRECTION.TOPLEFT){
</span><span style="color: #008080;">306</span>             style.animation =<span style="color: #000000;"> `${styles.fadeInTopLeft} ${val.time}s forwards`;
</span><span style="color: #008080;">307</span>         }<span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(val.type === TYPE.FADEIN &amp;&amp; val.direction === DIRECTION.TOPREGIST || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">topRegist</span><span style="color: #800000;">'</span>
<span style="color: #008080;">308</span>         || val.type === TYPE.FADEIN &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">topRegist</span><span style="color: #800000;">'</span> || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction ===<span style="color: #000000;"> DIRECTION.TOPREGIST){
</span><span style="color: #008080;">309</span>             style.animation =<span style="color: #000000;"> `${styles.fadeInTopRegist} ${val.time}s forwards`;
</span><span style="color: #008080;">310</span>         }<span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(val.type === TYPE.FADEIN &amp;&amp; val.direction === DIRECTION.BUTTOMLEFT || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">buttomLeft</span><span style="color: #800000;">'</span>
<span style="color: #008080;">311</span>         || val.type === TYPE.FADEIN &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">buttomLeft</span><span style="color: #800000;">'</span> || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction ===<span style="color: #000000;"> DIRECTION.BUTTOMLEFT){
</span><span style="color: #008080;">312</span>             style.animation =<span style="color: #000000;"> `${styles.fadeInButtomLeft} ${val.time}s forwards`;
</span><span style="color: #008080;">313</span>         }<span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(val.type === TYPE.FADEIN &amp;&amp; val.direction === DIRECTION.BUTTOMREGIST || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">buttomRegist</span><span style="color: #800000;">'</span>
<span style="color: #008080;">314</span>         || val.type === TYPE.FADEIN &amp;&amp; val.direction === <span style="color: #800000;">'</span><span style="color: #800000;">buttomRegist</span><span style="color: #800000;">'</span> || val.type === <span style="color: #800000;">'</span><span style="color: #800000;">fadeIn</span><span style="color: #800000;">'</span> &amp;&amp; val.direction ===<span style="color: #000000;"> DIRECTION.BUTTOMREGIST){
</span><span style="color: #008080;">315</span>             style.animation =<span style="color: #000000;"> `${styles.fadeInButtomRegist} ${val.time}s forwards`;
</span><span style="color: #008080;">316</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">317</span>         <span style="color: #0000ff;">if</span>(val.sonDelay !== undefined &amp;&amp; val.delay !==<span style="color: #000000;"> undefined){
</span><span style="color: #008080;">318</span>             style.animationDelay = `${<span style="color: #0000ff;">this</span>.props.index*val.sonDelay+<span style="color: #000000;">val.delay}s`;
</span><span style="color: #008080;">319</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">320</span>         <span style="color: #008000;">//</span><span style="color: #008000;">Son默认样式</span>
<span style="color: #008080;">321</span>         <span style="color: #0000ff;">const</span> defStyle:any =<span style="color: #000000;"> {
</span><span style="color: #008080;">322</span>             textAlign: <span style="color: #800000;">"</span><span style="color: #800000;">center</span><span style="color: #800000;">"</span><span style="color: #000000;">,
</span><span style="color: #008080;">323</span>             width:`${<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.formatWidth}px`,
</span><span style="color: #008080;">324</span>             height:`${<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.formatHeight}px`,
</span><span style="color: #008080;">325</span>             lineHeight:`${<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.formatHeight}px`,
</span><span style="color: #008080;">326</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">327</span>         <span style="color: #0000ff;">const</span> sty = {...defStyle,...<span style="color: #0000ff;">this</span>.props.styleSon,...<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.style,...style};
</span><span style="color: #008080;">328</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> ( 
</span><span style="color: #008080;">329</span>             &lt;li className={styles.li} style={sty} key={<span style="color: #0000ff;">this</span>.props.keys} onClick={<span style="color: #0000ff;">this</span>.click.bind(<span style="color: #0000ff;">this</span>,<span style="color: #0000ff;">this</span>.props.keys,<span style="color: #0000ff;">this</span><span style="color: #000000;">.props.title)}
</span><span style="color: #008080;">330</span>             onMouseEnter = {<span style="color: #0000ff;">this</span>.mouseEnter.bind(<span style="color: #0000ff;">this</span>,<span style="color: #0000ff;">this</span>.props.keys,<span style="color: #0000ff;">this</span>.props.title)} onMouseLeave=
<span style="color: #008080;">331</span>             {<span style="color: #0000ff;">this</span>.mouseLeave.bind(<span style="color: #0000ff;">this</span>,<span style="color: #0000ff;">this</span>.props.keys,<span style="color: #0000ff;">this</span>.props.title)}&gt;{<span style="color: #0000ff;">this</span>.props.title}&lt;/li&gt;
<span style="color: #008080;">332</span> <span style="color: #000000;">         );
</span><span style="color: #008080;">333</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">334</span> }</pre>
</div>
<p>index.less文件：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">  1</span> <span style="color: #000000;">@top:200px;
</span><span style="color: #008080;">  2</span> <span style="color: #000000;">@left:400px;
</span><span style="color: #008080;">  3</span> <span style="color: #000000;">.fDiv,.li,.ul,body,div{
</span><span style="color: #008080;">  4</span> <span style="color: #000000;">    padding: 0px;
</span><span style="color: #008080;">  5</span> <span style="color: #000000;">    margin: 0px;
</span><span style="color: #008080;">  6</span> <span style="color: #000000;">    border: 0px;
</span><span style="color: #008080;">  7</span> <span style="color: #000000;">}
</span><span style="color: #008080;">  8</span> <span style="color: #000000;">.fDiv{
</span><span style="color: #008080;">  9</span> <span style="color: #000000;">    position: relative;
</span><span style="color: #008080;"> 10</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 11</span> <span style="color: #000000;">.li{
</span><span style="color: #008080;"> 12</span>     list-<span style="color: #000000;">style:none;
</span><span style="color: #008080;"> 13</span> <span style="color: #000000;">    visibility:hidden;
</span><span style="color: #008080;"> 14</span> <span style="color: #000000;">    cursor: pointer; 
</span><span style="color: #008080;"> 15</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 16</span> <span style="color: #000000;">li:hover{
</span><span style="color: #008080;"> 17</span>     background-<span style="color: #000000;">color: #A1E5FF;
</span><span style="color: #008080;"> 18</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 19</span> <span style="color: #000000;">.ul{
</span><span style="color: #008080;"> 20</span> <span style="color: #000000;">    position: absolute;
</span><span style="color: #008080;"> 21</span>     z-index: <span style="color: #800080;">999</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 22</span>     display: inline-<span style="color: #000000;">block;
</span><span style="color: #008080;"> 23</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 24</span> <span style="color: #000000;">@keyframes fadeInTop{
</span><span style="color: #008080;"> 25</span>     <span style="color: #800080;">0</span>%<span style="color: #000000;">{
</span><span style="color: #008080;"> 26</span>         opacity: <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 27</span>         margin-<span style="color: #000000;">top: @top;
</span><span style="color: #008080;"> 28</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;"> 29</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 30</span>     <span style="color: #800080;">100</span>%<span style="color: #000000;">{
</span><span style="color: #008080;"> 31</span>         opacity: <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 32</span>         margin-<span style="color: #000000;">top: 0px;
</span><span style="color: #008080;"> 33</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;"> 34</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 35</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 36</span> <span style="color: #000000;">@keyframes fadeInButtom{
</span><span style="color: #008080;"> 37</span>     <span style="color: #800080;">0</span>%<span style="color: #000000;">{
</span><span style="color: #008080;"> 38</span>         opacity: <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 39</span>         margin-top: -<span style="color: #000000;">@top;
</span><span style="color: #008080;"> 40</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;"> 41</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 42</span>     <span style="color: #800080;">100</span>%<span style="color: #000000;">{
</span><span style="color: #008080;"> 43</span>         opacity: <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 44</span>         margin-<span style="color: #000000;">top: 0px;
</span><span style="color: #008080;"> 45</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;"> 46</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 47</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 48</span> <span style="color: #000000;">@keyframes fadeInLeft{
</span><span style="color: #008080;"> 49</span>     <span style="color: #800080;">0</span>%<span style="color: #000000;">{
</span><span style="color: #008080;"> 50</span>         opacity: <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 51</span>         margin-<span style="color: #000000;">left: @left;
</span><span style="color: #008080;"> 52</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;"> 53</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 54</span>     <span style="color: #800080;">100</span>%<span style="color: #000000;">{
</span><span style="color: #008080;"> 55</span>         opacity: <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 56</span>         margin-<span style="color: #000000;">left: 0px;
</span><span style="color: #008080;"> 57</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;"> 58</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 59</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 60</span> <span style="color: #000000;">@keyframes fadeInRegist{
</span><span style="color: #008080;"> 61</span>     <span style="color: #800080;">0</span>%<span style="color: #000000;">{
</span><span style="color: #008080;"> 62</span>         opacity: <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 63</span>         margin-left: -<span style="color: #000000;">@left;
</span><span style="color: #008080;"> 64</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;"> 65</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 66</span>     <span style="color: #800080;">100</span>%<span style="color: #000000;">{
</span><span style="color: #008080;"> 67</span>         opacity: <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 68</span>         margin-<span style="color: #000000;">left: 0px;
</span><span style="color: #008080;"> 69</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;"> 70</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 71</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 72</span> <span style="color: #000000;">@keyframes fadeInTopLeft{
</span><span style="color: #008080;"> 73</span>     <span style="color: #800080;">0</span>%<span style="color: #000000;">{
</span><span style="color: #008080;"> 74</span>         opacity: <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 75</span>         margin-<span style="color: #000000;">top: @top;
</span><span style="color: #008080;"> 76</span>         margin-<span style="color: #000000;">left: @left;
</span><span style="color: #008080;"> 77</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;"> 78</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 79</span>     <span style="color: #800080;">100</span>%<span style="color: #000000;">{
</span><span style="color: #008080;"> 80</span>         opacity: <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 81</span>         margin-<span style="color: #000000;">top: 0px;
</span><span style="color: #008080;"> 82</span>         margin-<span style="color: #000000;">left: 0px;
</span><span style="color: #008080;"> 83</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;"> 84</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 85</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 86</span> <span style="color: #000000;">@keyframes fadeInTopRegist{
</span><span style="color: #008080;"> 87</span>     <span style="color: #800080;">0</span>%<span style="color: #000000;">{
</span><span style="color: #008080;"> 88</span>         opacity: <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 89</span>         margin-<span style="color: #000000;">top: @top;
</span><span style="color: #008080;"> 90</span>         margin-left: -<span style="color: #000000;">@left;
</span><span style="color: #008080;"> 91</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;"> 92</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 93</span>     <span style="color: #800080;">100</span>%<span style="color: #000000;">{
</span><span style="color: #008080;"> 94</span>         opacity: <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 95</span>         margin-<span style="color: #000000;">top: 0px;
</span><span style="color: #008080;"> 96</span>         margin-<span style="color: #000000;">left: 0px;
</span><span style="color: #008080;"> 97</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;"> 98</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 99</span> <span style="color: #000000;">}
</span><span style="color: #008080;">100</span> <span style="color: #000000;">@keyframes fadeInButtomLeft{
</span><span style="color: #008080;">101</span>     <span style="color: #800080;">0</span>%<span style="color: #000000;">{
</span><span style="color: #008080;">102</span>         opacity: <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">103</span>         margin-top: -<span style="color: #000000;">@top;
</span><span style="color: #008080;">104</span>         margin-<span style="color: #000000;">left: @left;
</span><span style="color: #008080;">105</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;">106</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">107</span>     <span style="color: #800080;">100</span>%<span style="color: #000000;">{
</span><span style="color: #008080;">108</span>         opacity: <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">109</span>         margin-<span style="color: #000000;">top: 0px;
</span><span style="color: #008080;">110</span>         margin-<span style="color: #000000;">left: 0px;
</span><span style="color: #008080;">111</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;">112</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">113</span> <span style="color: #000000;">}
</span><span style="color: #008080;">114</span> <span style="color: #000000;">@keyframes fadeInButtomRegist{
</span><span style="color: #008080;">115</span>     <span style="color: #800080;">0</span>%<span style="color: #000000;">{
</span><span style="color: #008080;">116</span>         opacity: <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">117</span>         margin-top: -<span style="color: #000000;">@top;
</span><span style="color: #008080;">118</span>         margin-left: -<span style="color: #000000;">@left;
</span><span style="color: #008080;">119</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;">120</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">121</span>     <span style="color: #800080;">100</span>%<span style="color: #000000;">{
</span><span style="color: #008080;">122</span>         opacity: <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">123</span>         margin-<span style="color: #000000;">top: 0px;
</span><span style="color: #008080;">124</span>         margin-<span style="color: #000000;">left: 0px;
</span><span style="color: #008080;">125</span> <span style="color: #000000;">        visibility:visible;
</span><span style="color: #008080;">126</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">127</span> }</pre>
</div>
<p><strong>API如下：</strong></p>
<p><strong><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/自写一个ant-design-pro  AnimationList组件0.png" alt="" /></strong></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/自写一个ant-design-pro  AnimationList组件1.png" alt="" /></p>
<p><strong><span style="color: #ff0000;">注意：动画进入选择的类型目前只有fadeIn(渐入),有人可能会说这个可以不要，但是如果要继续拓展的话这个属性就必不可少了，比如拓展增强、轨迹、旋转、无效果等。这些拓展稍显有些麻烦，由于我只是当练习react与typescript来写就没有拓展，但不是不能拓展。</span></strong></p>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>