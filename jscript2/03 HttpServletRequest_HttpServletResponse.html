<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修03 HttpServletRequest_HttpServletResponse' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>03 HttpServletRequest_HttpServletResponse</center></div><div class='banquan'>原文出处:本文由博客园博主___mouM提供。<br/>
原文连接:https://www.cnblogs.com/aknife/p/10846819.html</div><br>
    <div id="2622-1557488637931" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">HttpServletRequest：一次来自客户端的请求的相关信息</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">请求行</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getMethod() 获取http请求方式</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getRequestURI() 获取统一资源标识符</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getRequestURL() 获取统一资源定位符</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getQueryString() 获取查询字符串</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getProcotol() 获取协议版本</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getScheme() 获取协议名</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">请求头</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getHeader() 获取请求头信息</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getHeaderNames() 获取所有请求头的名字</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">实体内容</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getParameter() 获取请求实体中的参数、或URL后的请求参数</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getInputStream() 获取请求参数，当表单提交的enctype="multipart/form-data"</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">网络相关信息</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getRemoteAddr() 获取客户端的IP地址</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getRemotePort() 获取客户端的端口号</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getLocalAddr() 获取服务器端的IP地址</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getLocalPort() 获取服务器端的端口号</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="6131-1557488656393" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">HttpServletResponse：一次发送给客户端的响应的相关信息</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">状态行</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">应答头</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">response.setHeader() 设置应答头</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">response.setContentType("text/html; charset=utf-8") 设置响应内容及字符集</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">响应实体</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">response.getWriter() 获取打印流，输出字符数据</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">response.getOutputStream() 获取字节输出流，输出二进制数据</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="4222-1557488682026" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">一、客户端请求服务器的数据有乱码</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.get方式请求</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">①修改tomcat/conf/server.xml，在&lt;Connector&gt; 标签中添加属性useBodyEncodingForURI="true"</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">②在获取请求数据之前，设置 request.setCharacterEncoding("utf-8");</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2.post方式请求</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">在获取请求数据之前，设置 request.setCharacterEncoding("utf-8");</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="4326-1557488683969" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">二、服务器返回给客户端的数据有乱码</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">response.setContentType("text/html; charset=utf-8");</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="7213-1557488682224" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">请求转发</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">request.getRequestDispathcer("path").forward(reqeust,response);</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="5383-1557488699577" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">请求转发的特点：</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.地址栏没有发生变化</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2.用户只发起了一次请求</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">3.请求转发只能转发本服务器以内的资源</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">4.由于请求是同一个对象，所以可以利用该request做servlet之间数据的传输</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="8087-1557488699577" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">重定向</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">response.sendRedirect("path")</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="2079-1557488699577" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">重定向的特点：</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.地址栏会发生改变</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2.用户发起了两次请求</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">3.重定向可以访问服务器以外的资源</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">4.重定向由于请求多次的，所以HttpServletRequest不是同一个对象，故不能使用它传递数据</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="6933-1557488682293" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="4652-1557488682323" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">一、分析</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.找出一个url中的项目名称</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">项目名称前面的&ldquo;/&rdquo;是服务器地址，例：http://127.0.0.1:8080/</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">项目名称后面的&ldquo;/&rdquo;是项目地址，例：http://127.0.0.1:8080/proejctname/</div>
<div id="8388-1557488726310" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">二、判断</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.判断一次请求行为是谁发出的</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">如果是浏览器行为，则表示项目名称前面的&ldquo;/&rdquo;，即服务器地址</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">如果是服务器内部行为，则表示项目名称后面的&ldquo;/&rdquo;，即项目地址</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.服务器内部行为：请求转发</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2.浏览器行为：重定向、页面中form提交、页面中a标签、js中通过location.href定位一个路径</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">Cookie：在浏览器中保存用户的信息</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">使用：由服务器创建，发送到浏览器保存，之后随着请求发回到服务器</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.创建cookie</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">Cookie cookie = new Cookie("name","value");</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2.发送cookie到浏览器</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">response.addCookie(cookie对象);</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">3.获取来自客户端的cookie</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">Cookie[] cookies = request.getCookies();</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="3774-1557488744669" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">使用注意：</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.cookie第一次是由servlet发送到浏览器中，第一次不能获取cookie</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2.不同的浏览器存放的cookie不是同一个</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">3.如果设置了cookie的maxage，则cookie会保存在浏览器所在电脑的硬盘上，如果没设置该属性，则保存在浏览器的内存中</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="9589-1557488744669" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">Session：在服务器中保存用户信息</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">使用：在服务器端创建Session，来保存当前访问服务器的用户的信息</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">1.获取session（如果已经创建了session，则返回当前session）或创建session：</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">HttpSession session = request.getSession();</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">2.设置session最大不活跃时间</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">session.setMaxInactiveInteval() //以秒为单位</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">3.使用session保存信息</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">session.setAttribute(String key,Object value);</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">session.getAttribute(String key);</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">4.立即销毁session</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">session.invalidate();</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div id="7620-1557488682486" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">HttpServletRequest:封装了一次来自客户端的Http的请求信息</div>
<div id="9481-1557536456035" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 28px; font-weight: bold;">请求消息包含几个部分？</span></div>
<div id="3830-1557488682552" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">1请求行</span></div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;
<div class="cnblogs_code">
<pre><code>private <span style="color: #0000ff;">void</span><span style="color: #000000;"> getRequestLine(HttpServletRequest request,
            HttpServletResponse response) {
</span><span style="color: #008000;">//</span><span style="color: #008000;">请求方式  </span>
         String method =<span style="color: #000000;"> request.getMethod();
        System.out.println(method);
</span><span style="color: #008000;">//</span><span style="color: #008000;">资源路径</span>
        String uri =<span style="color: #000000;">request.getRequestURI();
        String url</span>=<span style="color: #000000;">request.getRequestURL().toString();
        System.out.println(uri);
        System.out.println(url);
</span><span style="color: #008000;">//</span><span style="color: #008000;">请求参数字符串</span>
        String queryString =<span style="color: #000000;">request.getQueryString();
        System.out.println(queryString);
</span><span style="color: #008000;">//</span><span style="color: #008000;">协议及版本号</span>
        String protocol =<span style="color: #000000;"> request.getProtocol();
        System.out.println(protocol);
        String scheme </span>=<span style="color: #000000;"> request.getScheme();
        System.out.println(scheme);
        
        
    }</span></pre>
</div>
<p>&nbsp;</p>
<div id="2697-1557536258517" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">2请求头</span></div>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;
<div class="cnblogs_code">
<pre><code>private <span style="color: #0000ff;">void</span><span style="color: #000000;"> getRequestHead(HttpServletRequest request,
            HttpServletResponse response) {
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 根据header的key获取其value</span>
                String user_agent = request.getHeader("User-Agent"<span style="color: #000000;">);
                System.out.println(user_agent);
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 查询header所有的keyname</span>
                Enumeration&lt;String&gt; enu =<span style="color: #000000;"> request.getHeaderNames();
                </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (enu.hasMoreElements()) {
                    System.out.println(enu.nextElement());
                }
    }</span></pre>
</div>
<p>&nbsp;</p>
<div id="7262-1557536260463" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">3 实体内容</span></div>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;
<div class="cnblogs_code">
<pre><code>private <span style="color: #0000ff;">void</span><span style="color: #000000;"> getRequestBody(HttpServletRequest request,
            HttpServletResponse response) throws IOException {
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 获取请求实体中的数据</span>

                <span style="color: #008000;">//</span><span style="color: #008000;"> 请求实体中的数据有三种形式:</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> 1.application/x-www-form-urlencoded</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> 2.multipart/form-data</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> 3.text/plain</span>

                <span style="color: #008000;">//</span><span style="color: #008000;"> 对于1、3</span>
                <span style="color: #008000;">//</span><span style="color: #008000;"> getParameter() //无论post方式还是get方式都可以获取用户的请求数据</span>
        String value = request.getParameter("username"<span style="color: #000000;">);
        System.out.println(value);
        String coment </span>= request.getParameter("coment"<span style="color: #000000;">);
        System.out.println(coment);
        
        ServletInputStream </span><span style="color: #0000ff;">in</span>=<span style="color: #000000;"> request.getInputStream();
        FileOutputStream out </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> FileOutputStream(
                </span>"d:\\1.txt"<span style="color: #000000;">);
        </span><span style="color: #0000ff;">int</span> len = 0<span style="color: #000000;">;
        </span><span style="color: #0000ff;">byte</span>[] flush = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">byte</span>[1024<span style="color: #000000;">];
        </span><span style="color: #0000ff;">while</span> ((len = <span style="color: #0000ff;">in</span>.read(flush)) != -1<span style="color: #000000;">) {
            out.write(flush, </span>0<span style="color: #000000;">, len);
        }
        out.close();
        </span><span style="color: #0000ff;">in</span><span style="color: #000000;">.close();
    }</span></pre>
</div>
<p>&nbsp;</p>
<div id="6066-1557536260596" style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;"><span style="font-size: 20px; font-weight: bold;">4网络信息</span></div>
<div class="cnblogs_code">
<pre><code>    private <span style="color: #0000ff;">void</span><span style="color: #000000;"> getIntenetInfo(HttpServletRequest request,
            HttpServletResponse response) {
        System.out.println(</span>"访问服务器的地址为：" + request.getRemoteAddr() + ":"
                +<span style="color: #000000;"> request.getRemotePort());
        System.out.println(</span>"服务器的本地地址为：" + request.getLocalAddr() + ":"
                +<span style="color: #000000;"> request.getLocalPort());
    }

}</span></pre>
</div>
<p>&nbsp;</p>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">响应消息分为几步?</div>
<div class="cnblogs_code">
<pre><code>public <span style="color: #0000ff;">void</span><span style="color: #000000;"> doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 状态行</span>
        <span style="color: #008000;">//</span><span style="color: #008000;"> 协议版本 http状态码 htt状态描述</span>
        <span style="color: #008000;">//</span><span style="color: #008000;"> 应答头</span>
        <span style="color: #008000;">//</span><span style="color: #008000;"> 响应实体</span>

        <span style="color: #008000;">//</span><span style="color: #008000;"> 设置应答头</span>
        response.setHeader("content-type", "image/jpeg; charset=utf-8"<span style="color: #000000;">);

        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 向用户输出字符数据</span>
        <span style="color: #008000;">/*</span><span style="color: #008000;">
         * PrintWriter out = response.getWriter(); out.write("&lt;h1&gt;你好世界！&lt;/h1&gt;");
         * out.flush(); out.close();
         </span><span style="color: #008000;">*/</span>

        <span style="color: #008000;">//</span><span style="color: #008000;"> 我们只能打开一个流为用户输出数据</span>
        FileInputStream <span style="color: #0000ff;">in</span> = <span style="color: #0000ff;">new</span> FileInputStream("D:\\1.jpg"<span style="color: #000000;">);
        ServletOutputStream out </span>=<span style="color: #000000;"> response.getOutputStream();

        </span><span style="color: #0000ff;">int</span> len = 0<span style="color: #000000;">;
        </span><span style="color: #0000ff;">byte</span>[] flush = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">byte</span>[1024 * 1024<span style="color: #000000;">];
        </span><span style="color: #0000ff;">while</span> ((len = <span style="color: #0000ff;">in</span>.read(flush)) != -1<span style="color: #000000;">) {
            out.write(flush, </span>0<span style="color: #000000;">, len);
        }

        out.flush();
        out.close();
        </span><span style="color: #0000ff;">in</span><span style="color: #000000;">.close();

    }</span></pre>
</div>
<p>&nbsp;</p>
</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
<div style="white-space: pre-wrap; text-align: left; line-height: 1.75; font-size: 14px;">&nbsp;</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>