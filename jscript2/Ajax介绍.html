<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Ajax介绍' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Ajax介绍</center></div><div class='banquan'>原文出处:本文由博客园博主壹叶知秋提供。<br/>
原文连接:https://www.cnblogs.com/21-forever/p/10907342.html</div><br>
    <p>有关Ajax的理解：</p>
<p>　　它其实就是存在在客户端与服务器之间的一个东西，它可以使你向服务器调取数据的时候，只进行你想要的那部分的数据的刷新，其余的不刷新，很大程度上减少了数据的交互。这样就存在了一个问题是两种传递的区别需要多加注意（个人理解两种传递在时间上比的话，还是get传递好，因为POST还得先去和服务器打个招呼，然后再一次才进行传值）。理解了Ajax的工作原理，再进行其步骤的代码的操作就比较简单了。</p>
<p>一、Ajax含义：</p>
<div class="para">Ajax 即&ldquo;<strong>A</strong><em>synchronous </em><strong>J</strong><em>avascript <strong>A</strong>nd </em><strong>X</strong><em>ML</em>&rdquo;（异步 JavaScript 和 XML），用来和服务器进行数据的交互。
<p align="left">当向服务器<strong>提交少量数据</strong>时 ， 使用ajax实现，可以提高程序的执行效率 ， 提高用户体验 、 减少带宽。</p>
<p align="left">作用 ： 页面无刷新 (局部刷新)</p>
<p align="left">二、Ajax的工作原理：</p>
<p>　　页面发起请求，会将请求发送给浏览器内核中的Ajax引擎，Ajax引擎会提交请求到服务器端，在这段时间里，客户端可以任意进行任意操作，直到服务器端将数据返回给Ajax引擎后，会触发你设置的事件，从而执行自定义的js逻辑代码完成某种页面 功能。</p>
<p align="left"><img src="./images/Ajax介绍0.png" alt="" width="554" height="316" /></p>
<p align="left">三、异步与同步的区别：</p>
<p align="left">异步是指同时的分开执行的（现实生活中的同步），是非堵塞的模式的；</p>
<p align="left">同步是指按顺序执行的（现实生活中的异步），是堵塞模式的；</p>
<p align="left">四、Ajax的操作步骤：</p>
<p align="left">1、创建ajax对象&nbsp;</p>
<p align="left">&nbsp; &nbsp;</p>
<div class="cnblogs_code">
<pre><code> <span style="color: #0000ff;">var</span> xhr = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
      </span><span style="color: #0000ff;">if</span><span style="color: #000000;">( XMLHttpRequest ){
          xhr </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> XMLHttpRequest();
      }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
          xhr </span>= <span style="color: #0000ff;">new</span> ActiveXObject("Microsoft.XMLHTTP"<span style="color: #000000;">);
      }</span></pre>
</div>
<p>&nbsp;</p>
<p align="left">2、建立和服务器的连接</p>
<p align="left">open( "<strong>get</strong>/post" , 请求文件路径 url , 布尔值 )</p>
<p align="left">第三个参数 ： 表示同步&nbsp; / 异步 true 默认</p>
<p align="left"><span style="background-color: #ffff00;">get和post区别 ：&nbsp;</span></p>
<p align="left"><span style="background-color: #ffff00;">get &nbsp;&nbsp; 路径传值 &nbsp; &nbsp; &nbsp;&nbsp; 数据对用户是可见的 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 传递的数据量少 &nbsp; &nbsp; &nbsp; &nbsp; 安全性低 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 便于调试&nbsp; &nbsp;</span></p>
<p align="left"><span style="background-color: #ffff00;">post&nbsp; 非路径传值 &nbsp;&nbsp; 数据对用户是不可见的 &nbsp; &nbsp; &nbsp; 传递的数据量大 &nbsp; &nbsp; &nbsp; &nbsp; 安全性高&nbsp; &nbsp;</span></p>
<p align="left">3、发送请求&nbsp;</p>
<div class="cnblogs_code">
<pre><code>send() </pre>
</div>
<p>&nbsp;</p>
<p align="left">4、服务器响应客户端的结果&nbsp; （返回结果）</p>
<p align="left">使用状态改变事件 onreadystatechange&nbsp; 处理服务器返回的结果</p>
<p align="left">状态值 readyState&nbsp;</p>
<p align="left">0&nbsp; 请求还没有初始化&nbsp; 还没有open()</p>
<p align="left">1&nbsp; 请求已发送&nbsp; &nbsp;服务器还没有开始处理</p>
<p align="left">2&nbsp; &nbsp; 服务器接收请求后 没有处理数据</p>
<p align="left">3&nbsp; &nbsp; 开始处理请求 部分请求已完成</p>
<p align="left">4&nbsp; &nbsp; 所有请求全部完成</p>
<p align="left">&nbsp;</p>
<p align="left">状态码 ：status</p>
<p align="left">200&nbsp; 交易成功</p>
<p align="left">404&nbsp; 文件路径错误</p>
<p align="left">500&nbsp; 服务器错误</p>
<p align="left">400&nbsp; 服务器语法错误</p>
<p align="left">&nbsp;</p>
<div class="cnblogs_code">
<pre><code>&lt;script&gt;<span style="color: #000000;">
    btn.onclick </span>= <span style="color: #0000ff;">function</span><span style="color: #000000;">(){
        </span><span style="color: #008000;">//</span><span style="color: #008000;">第一步 ： 创建ajax对象</span>
        <span style="color: #008000;">//</span><span style="color: #008000;">var xhr = new XMLHttpRequest();</span>
        <span style="color: #008000;">//</span><span style="color: #008000;">var xhr = new ActiveXObject("Microsoft.XMLHTTP");</span>
        <span style="color: #0000ff;">var</span> xhr = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;">( window.XMLHttpRequest ){
            xhr </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> XMLHttpRequest();
        }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
            xhr </span>= <span style="color: #0000ff;">new</span> ActiveXObject("Microsoft.XMLHTTP"<span style="color: #000000;">);
        }
        </span><span style="color: #008000;">//</span><span style="color: #008000;">第二步 ： 建立和服务器的连接 </span>
        xhr.open( "GET" , "data.php?uname="+encodeURI("名字")+"&amp;upwd=123"<span style="color: #000000;"> );
        
        </span><span style="color: #008000;">//</span><span style="color: #008000;">第三步 ：发送请求</span>
<span style="color: #000000;">        xhr.send();
        
        </span><span style="color: #008000;">//</span><span style="color: #008000;">第四步 ： 服务器处理请求并返回结果</span>
        xhr.onreadystatechange = <span style="color: #0000ff;">function</span><span style="color: #000000;">(){
            </span><span style="color: #0000ff;">if</span>( xhr.readyState == 4 &amp;&amp; xhr.status == 200<span style="color: #000000;"> ){
                alert( xhr.responseText );
            }
        }
        </span><span style="color: #008000;">/*</span><span style="color: #008000;">setTimeout( function(){
            alert( xhr.responseText );
        },1000 )</span><span style="color: #008000;">*/</span><span style="color: #000000;">
    }
    
</span>&lt;/script&gt;</pre>
</div>
<p>&nbsp;</p>
<p align="left">服务器响应客户端请求时需要注意的两个问题 ：&nbsp;</p>
<p align="left">1、状态值判断</p>
<p align="left">2、状态码的判断</p>
<p>&nbsp;五、解决ie的中文编码 ：</p>
<p>　　　　 当向服务器传递中文时，需要通过 encodeURI()方法 对中文进行编码处理</p>
<p>六、ajax中的缓存：</p>
<p align="left">当多次请求服务器上的同一个文件时，如果路径不变，后面的多次请求直接从浏览器的缓存上获取数据，</p>
<p align="left">导致 ：当服务器的数据发生更改时，无法拿到服务器更新后的数据</p>
<p align="left">解决方案一 ：&nbsp;</p>
<p align="left">在路径上加一个可变的参数</p>
<div class="cnblogs_code">
<pre><code>url ? id =<span style="color: #000000;"> Math.random()
url </span>? id = <span style="color: #0000ff;">new</span> Date().getTime()</pre>
</div>
<p>&nbsp;</p>
<p align="left">解决方案二 ：&nbsp; 比较服务器上文件的最后修改时间</p>
<p align="left">当使用ajax请求服务器数据时，会将服务器文件最后一次的修改时间发送到服务器上</p>
<p align="left">比较服务器文件两次的修改时间</p>
<p align="left">如果相等&nbsp; 直接从浏览器的缓存上获取数据</p>
<p align="left">如果不相等， 先删除浏览器缓存的数据 在获取服务器上更新后的数据</p>
<p align="left">xhr.setRequestHeader("if-modified-since","0"); 设置文件修改时间</p>
<p align="left">七、 字符串和对象的转换问题</p>
<p align="left">原生ajax获取服务器的数据 是字符串</p>
<p align="left">字符串转对象 ： JSON.parse()</p>
<p align="left">对象转字符串 ： JSON.stringify()&nbsp; cookie中使用</p>
<p align="left">八、Jquery的ajax技术：</p>
<p>　　jquery是一个优秀的js框架，自然对js原生的ajax进行了封装，封装后的ajax的操作方法更简洁，功能更强大，与ajax操作相关的jquery方法有如下几种，但开发中&nbsp; 经常使用的有三种：</p>
<p>1、$.get(url, [data], [callback], [type])请求行</p>
<p>2、$.post(url, [data], [callback], [type])请求体</p>
<p>其中：</p>
<p>url：代表请求的服务器端地址</p>
<p>data：代表请求服务器端的数据、请求参数（可以是key=value形式也可以是json格式）</p>
<p>callback：表示服务器端成功响应所触发的回调函数（只有正常成功返回才执行）</p>
<p>type：表示服务器端回调函数返回的数据类型（jquery会根据指定的类型自动类型转换）</p>
<p>常用的返回类型：text、json、html等</p>
<p>3、<span style="background-color: #ffff00;">$.ajax( { option1:value1,option2:value2... } );&nbsp;</span></p>
<p>常用的option有如下：</p>
<p>async：是否异步，默认是true代表异步</p>
<p>data：发送到服务器的参数，建议使用json格式</p>
<p>dataType：服务器端返回的数据类型，常用text和json</p>
<p>success：成功响应执行的函数，对应的类型是function类型</p>
<p>type：请求方式，POST/GET</p>
<p>url：请求服务器端地址</p>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>