<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Ajax的学习' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Ajax的学习</center></div><div class='banquan'>原文出处:本文由博客园博主小李子不需要颜值提供。<br/>
原文连接:https://www.cnblogs.com/wx-1998/p/11737913.html</div><br>
    <h1 style="text-align: center;"><span style="color: #00ccff; font-family: 宋体;">AJAX的学习</span></h1>
<h2><span style="color: #000000; font-family: 宋体;">AJAX的简介</span></h2>
<p><span style="font-family: 宋体;"><span style="color: #000000;">　　</span>AJAX即&ldquo;Asynchronous Javascript And XML&rdquo;（异步JavaScript和XML），是指一种创建交互式网页应用的网页开发技术。</span></p>
<p><span style="font-family: 宋体;">　　AJAX = 异步 JavaScript和XML（标准通用标记语言的子集）。</span></p>
<p><span style="font-family: 宋体;">　　AJAX 是一种用于创建快速动态网页的技术。</span></p>
<h2><span style="font-family: 宋体;">AJAX的优缺点</span></h2>
<p><span style="color: #ff0000; font-family: 宋体;">　　优点：</span></p>
<p><span style="font-family: 宋体;">　　　　不需要插件支持</span></p>
<p><span style="font-family: 宋体;">　　　　用户体验极佳</span></p>
<p><span style="font-family: 宋体;">　　　　提升Web程序性能</span></p>
<p><span style="font-family: 宋体;">　　　　减轻服务器和宽带的负担</span></p>
<p><span style="font-family: 宋体;">　　<span style="color: #ff0000;">缺点：</span></span></p>
<p><span style="font-family: 宋体;">　　　　前进后退按钮被破坏</span></p>
<p><span style="font-family: 宋体;">　　　　搜索引擎的支持不够</span></p>
<p><span style="font-family: 宋体;">　　　　开发调试工具缺乏</span></p>
<h2><span style="font-family: 宋体;">XHR的创建与兼容</span></h2>
<p><span style="font-family: 宋体;">　　1.创建 XMLHttpRequest 对象的语法：</span></p>
<p><span style="font-family: 宋体;">&nbsp;　　　　<span class="cnblogs_code"><span style="color: #008080;">1</span> variable=<span style="color: #0000ff;">new</span> XMLHttpRequest();</span></span></p>
<p><span style="font-family: 宋体;">　　2.老版本的 Internet Explorer （IE5 和 IE6）使用 ActiveX 对象：</span></p>
<p><span style="font-family: 宋体;">　　　　&nbsp;<span class="cnblogs_code"><span style="color: #008080;">1</span> variable=<span style="color: #0000ff;">new</span> ActiveXObject("Microsoft.XMLHTTP");</span>&nbsp;</span></p>
<h2><span style="font-family: 宋体;">AJAX如何工作</span></h2>
<p><span style="font-family: 宋体;"><img style="margin-right: auto; margin-left: auto; display: block;" src="./images/Ajax的学习0.png" alt="" /></span></p>
<p><span style="font-family: 宋体;">　　正如您在上面的示例中所看到的，XMLHttpRequest对象起着重要作用。</span></p>
<ol>
<li style="list-style-type: none;"><ol>
<li><span style="font-family: 宋体;">用户从UI发送请求，JavaScript中调用XMLHttpRequest对象。</span></li>
<li><span style="font-family: 宋体;">HTTP请求由XMLHttpRequest对象发送到服务器。</span></li>
<li><span style="font-family: 宋体;">服务器使用JSP，PHP，Servlet，ASP.net等与数据库交互。</span></li>
<li><span style="font-family: 宋体;">检索数据。</span></li>
<li><span style="font-family: 宋体;">服务器将XML数据或JSON数据发送到XMLHttpRequest回调函数。</span></li>
<li><span style="font-family: 宋体;">HTML和CSS数据显示在浏览器上。</span></li>
</ol></li>
</ol>
<p>&nbsp;</p>
<h2><span style="font-family: 宋体;">AJAX的连接（封装过）</span></h2>
<p><span style="font-family: 宋体;">　　<span style="color: #ff0000;">POST和GET的区别：</span><br />&nbsp;&nbsp;&nbsp; 1.POST主要用来发送数据，GET主要用来接受数据；<br />&nbsp;&nbsp;&nbsp; 2.PSOT发送数据的安全性较好，而GET较差；<br />&nbsp;&nbsp;&nbsp; 3.POST发送数据不限制大小，而GET大小受限2~100k。<br />&nbsp;&nbsp;&nbsp; 什么时候用GET和POST：在数据获取时用GET方式，在操作数据时应使用POST方式。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">　　<span style="color: #ff0000;">1.GET连接</span></span></p>
<div class="cnblogs_code">
<pre><code><span style="font-family: 宋体;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> ajaxGet(url,cb,data){
</span><span style="color: #008080;"> 2</span>     data = data ||<span style="color: #000000;"> {};
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">var</span> str = ""<span style="color: #000000;">;
</span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">var</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> data){
</span><span style="color: #008080;"> 5</span>         str += `${i}=${data[i]}&amp;<span style="color: #000000;">`;
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">var</span> d = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date();
</span><span style="color: #008080;"> 8</span>     url = url + "?" + str + "__qft="+<span style="color: #000000;">d.getTime();
</span><span style="color: #008080;"> 9</span>     
<span style="color: #008080;">10</span>     <span style="color: #0000ff;">var</span> xhr = <span style="color: #0000ff;">new</span><span style="color: #000000;"> XMLHttpRequest();
</span><span style="color: #008080;">11</span>     xhr.open("get",url,<span style="color: #0000ff;">true</span><span style="color: #000000;">);
</span><span style="color: #008080;">12</span>     xhr.onreadystatechange = <span style="color: #0000ff;">function</span><span style="color: #000000;">(){
</span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">if</span>(xhr.readyState == 4 &amp;&amp; xhr.status == 200<span style="color: #000000;">){
</span><span style="color: #008080;">14</span> <span style="color: #000000;">            cb(xhr.responseText)
</span><span style="color: #008080;">15</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">16</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">17</span> <span style="color: #000000;">    xhr.send();
</span><span style="color: #008080;">18</span> }</span></pre>
</div>
<p><span style="font-family: 宋体;">　<span style="color: #ff0000;">　2.POST连接</span></span></p>
<div class="cnblogs_code">
<pre><code><span style="font-family: 宋体;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> ajaxPost(url,callback,data){
</span><span style="color: #008080;"> 2</span>     data = data ||<span style="color: #000000;"> {};
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">var</span> str = ""<span style="color: #000000;">;
</span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">var</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> data){
</span><span style="color: #008080;"> 5</span>         str += `${i}=${data[i]}&amp;<span style="color: #000000;">`;
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 7</span>     
<span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">var</span> xhr = <span style="color: #0000ff;">new</span><span style="color: #000000;"> XMLHttpRequest();
</span><span style="color: #008080;"> 9</span>     xhr.open("POST",url,<span style="color: #0000ff;">true</span><span style="color: #000000;">);
</span><span style="color: #008080;">10</span>     xhr.onreadystatechange = <span style="color: #0000ff;">function</span><span style="color: #000000;">(){
</span><span style="color: #008080;">11</span>         <span style="color: #0000ff;">if</span>(xhr.readyState == 4 &amp;&amp; xhr.status == 200<span style="color: #000000;">){
</span><span style="color: #008080;">12</span> <span style="color: #000000;">            callback(xhr.responseText);
</span><span style="color: #008080;">13</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">15</span>     xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"<span style="color: #000000;">);
</span><span style="color: #008080;">16</span> <span style="color: #000000;">    xhr.send(str);
</span><span style="color: #008080;">17</span> }</span></pre>
</div>
<h2><span style="font-family: 宋体;">拓展</span></h2>
<h3><span style="font-family: 宋体;">　　XHR　readyState</span></h3>
<h4><span style="font-family: 宋体;">　　　　AJAX - <span class="color_h1">onreadystatechange 事件</span></span></h4>
<p><span style="font-family: 宋体;">　　　　　　当发送一个请求后，客户端需要确定这个请求什么时候会完成，因此，XMLHttpRequest对象提供了<span style="color: #ff0000; background-color: #c0c0c0;"><code>onreadystatechange</code></span>事件机制来捕获请求的状态，继而实现响应。</span></p>
<p><span style="font-family: 宋体;">　　　　　　当请求被发送到服务器时，我们需要执行一些基于响应的任务。</span></p>
<p><span style="font-family: 宋体;">　　　　　　每当<span style="color: #ff0000; background-color: #c0c0c0;"><code>readyState</code></span>改变时，就会触发<span style="color: #ff0000; background-color: #c0c0c0;"><code>onreadystatechange</code></span>事件。</span></p>
<p><span style="font-family: 宋体;"><code>　　　　　　<span style="color: #ff0000; background-color: #c0c0c0;">readyState</span></code>属性存有 XMLHttpRequest 的状态信息。</span></p>
<h3><span style="font-family: 宋体;">　　回调函数</span></h3>
<p><span style="font-family: 宋体;">　　　　　　回调函数是一种以参数形式传递给另一个函数的函数。</span></p>
<p><span style="font-family: 宋体;">　　　　　　如果您的网站上存在多个 AJAX 任务，那么您应该为创建 XMLHttpRequest 对象编写一个<em>标准</em>的函数，并为每个 AJAX 任务调用该函数。</span></p>
<p><span style="font-family: 宋体;">　　　　　　该函数调用应该包含 URL 以及发生<span style="color: #ff0000; background-color: #c0c0c0;"><code>onreadystatechange</code></span>事件时执行的任务（每次调用可能不尽相同）</span></p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>