<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Bootstrap table 实现树形表格，实现联动选中，联动取消' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Bootstrap table 实现树形表格，实现联动选中，联动取消</center></div><div class='banquan'>原文出处:本文由博客园博主九九儿提供。<br/>
原文连接:https://www.cnblogs.com/jiajiamiao/p/11606782.html</div><br>
    <p>公司最近有需求要做树形式table。因为是前后端不分离项目，且之前已经引入了bootstrap&nbsp;table插件，现把实现方式分享一下：</p>
<div>
<div>&lt;!DOCTYPE&nbsp;HTML&gt;</div>
<div>&lt;html&nbsp;lang="zh-cn"&gt;</div>
<br />
<div>&lt;head&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset="utf-8"&nbsp;/&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv="X-UA-Compatible"&nbsp;content="IE=edge"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content="width=device-width,initial-scale=1.0"&nbsp;name="viewport"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content="yes"&nbsp;name="apple-mobile-web-app-capable"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content="black"&nbsp;name="apple-mobile-web-app-status-bar-style"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content="telephone=no"&nbsp;name="format-detection"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content="email=no"&nbsp;name="format-detection"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;系统管理&lt;/title&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;link&nbsp;href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"&nbsp;rel="stylesheet"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;link&nbsp;href="https://cdn.bootcss.com/bootstrap-table/1.11.1/bootstrap-table.min.css"&nbsp;rel="stylesheet"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;link&nbsp;rel="stylesheet"&nbsp;href="https://cdn.bootcss.com/jquery-treegrid/0.2.0/css/jquery.treegrid.min.css"&gt;</div>
<div>&lt;/head&gt;</div>





<br />
<div>&lt;body&gt;</div>
<div>&lt;div&nbsp;class="container"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;树形表格&nbsp;：&nbsp;Table&nbsp;Treegrid&lt;/h1&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&nbsp;id="table"&gt;&lt;/table&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;br/&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&lt;button&nbsp;onclick="test()"&gt;选择&lt;/button&gt;</div>
<div>&lt;/div&gt;</div>
<div>&lt;/body&gt;</div>
<div>&lt;script&nbsp;src="https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js"&gt;&lt;/script&gt;</div>
<div>&lt;script&nbsp;src="https://cdn.bootcss.com/bootstrap-table/1.12.1/bootstrap-table.min.js"&gt;&lt;/script&gt;</div>
<div>&lt;script&nbsp;src="https://cdn.bootcss.com/bootstrap-table/1.12.0/extensions/treegrid/bootstrap-table-treegrid.js"&gt;&lt;/script&gt;</div>
<div>&lt;script&nbsp;src="https://cdn.bootcss.com/jquery-treegrid/0.2.0/js/jquery.treegrid.min.js"&gt;&lt;/script&gt;</div>
<div>&lt;script&nbsp;type="text/javascript"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;$table&nbsp;=&nbsp;$('#table');</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data&nbsp;=&nbsp;[{0:&nbsp;undefined,&nbsp;id:&nbsp;94710,&nbsp;pid:&nbsp;0,&nbsp;mode:&nbsp;"系统管理",&nbsp;permissionTag:&nbsp;"*",&nbsp;permissionMark:&nbsp;"所有权限",&nbsp;}</div>
<div>,{0:&nbsp;undefined,&nbsp;id:&nbsp;94711,&nbsp;pid:&nbsp;94710,&nbsp;mode:&nbsp;"营销中心管理",&nbsp;permissionTag:&nbsp;"*",&nbsp;permissionMark:&nbsp;"所有权限",}</div>
<div>,{0:&nbsp;undefined,&nbsp;id:&nbsp;471104,&nbsp;pid:&nbsp;94711,&nbsp;mode:&nbsp;"营销中心管理",&nbsp;permissionTag:&nbsp;"search",&nbsp;permissionMark:&nbsp;"查询",}</div>
<div>,{0:&nbsp;undefined,&nbsp;id:&nbsp;94721,&nbsp;pid:&nbsp;94710,&nbsp;mode:&nbsp;"工厂管理",&nbsp;permissionTag:&nbsp;"*",&nbsp;permissionMark:&nbsp;"所有权限",&nbsp;}</div>
<div>,{0:&nbsp;undefined,&nbsp;id:&nbsp;472104,&nbsp;pid:&nbsp;94721,&nbsp;mode:&nbsp;"工厂管理",&nbsp;permissionTag:&nbsp;"search",&nbsp;permissionMark:&nbsp;"查询",&nbsp;}</div>
<div>,{0:&nbsp;undefined,&nbsp;id:&nbsp;94731,&nbsp;pid:&nbsp;94710,&nbsp;mode:&nbsp;"经销商管理",&nbsp;permissionTag:&nbsp;"*",&nbsp;permissionMark:&nbsp;"所有权限",&nbsp;}</div>
<div>,{0:&nbsp;undefined,&nbsp;id:&nbsp;473104,&nbsp;pid:&nbsp;94731,&nbsp;mode:&nbsp;"经销商管理",&nbsp;permissionTag:&nbsp;"search",&nbsp;permissionMark:&nbsp;"查询",&nbsp;}</div>
<div>,{0:&nbsp;undefined,&nbsp;id:&nbsp;94732,&nbsp;pid:&nbsp;94710,&nbsp;mode:&nbsp;"产品管理",&nbsp;permissionTag:&nbsp;"*",&nbsp;permissionMark:&nbsp;"所有权限",&nbsp;}</div>
<div>,{0:&nbsp;undefined,&nbsp;id:&nbsp;473201,&nbsp;pid:&nbsp;94732,&nbsp;mode:&nbsp;"产品管理",&nbsp;permissionTag:&nbsp;"insert",&nbsp;permissionMark:&nbsp;"添加",&nbsp;}</div>
<div>,{0:&nbsp;undefined,&nbsp;id:&nbsp;473202,&nbsp;pid:&nbsp;94732,&nbsp;mode:&nbsp;"产品管理",&nbsp;permissionTag:&nbsp;"update",&nbsp;permissionMark:&nbsp;"修改",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;473203,&nbsp;pid:&nbsp;94732,&nbsp;mode:&nbsp;"产品管理",&nbsp;permissionTag:&nbsp;"delete",&nbsp;permissionMark:&nbsp;"删除",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;473204,&nbsp;pid:&nbsp;94732,&nbsp;mode:&nbsp;"产品管理",&nbsp;permissionTag:&nbsp;"search",&nbsp;permissionMark:&nbsp;"查询",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;94741,&nbsp;pid:&nbsp;94710,&nbsp;mode:&nbsp;"用户账号",&nbsp;permissionTag:&nbsp;"*",&nbsp;permissionMark:&nbsp;"所有权限",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;474101,&nbsp;pid:&nbsp;94741,&nbsp;mode:&nbsp;"用户账号",&nbsp;permissionTag:&nbsp;"insert",&nbsp;permissionMark:&nbsp;"添加",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;474102,&nbsp;pid:&nbsp;94741,&nbsp;mode:&nbsp;"用户账号",&nbsp;permissionTag:&nbsp;"update",&nbsp;permissionMark:&nbsp;"修改",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;474103,&nbsp;pid:&nbsp;94741,&nbsp;mode:&nbsp;"用户账号",&nbsp;permissionTag:&nbsp;"delete",&nbsp;permissionMark:&nbsp;"删除",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;474104,&nbsp;pid:&nbsp;94741,&nbsp;mode:&nbsp;"用户账号",&nbsp;permissionTag:&nbsp;"search",&nbsp;permissionMark:&nbsp;"查询",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;474105,&nbsp;pid:&nbsp;94741,&nbsp;mode:&nbsp;"用户账号",&nbsp;permissionTag:&nbsp;"resetPwd",&nbsp;permissionMark:&nbsp;"重置密码",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;94742,&nbsp;pid:&nbsp;94710,&nbsp;mode:&nbsp;"角色权限管理",&nbsp;permissionTag:&nbsp;"*",&nbsp;permissionMark:&nbsp;"所有权限",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;474201,&nbsp;pid:&nbsp;94742,&nbsp;mode:&nbsp;"角色权限管理",&nbsp;permissionTag:&nbsp;"insert",&nbsp;permissionMark:&nbsp;"添加",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;474202,&nbsp;pid:&nbsp;94742,&nbsp;mode:&nbsp;"角色权限管理",&nbsp;permissionTag:&nbsp;"update",&nbsp;permissionMark:&nbsp;"修改",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;474203,&nbsp;pid:&nbsp;94742,&nbsp;mode:&nbsp;"角色权限管理",&nbsp;permissionTag:&nbsp;"delete",&nbsp;permissionMark:&nbsp;"删除",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;474204,&nbsp;pid:&nbsp;94742,&nbsp;mode:&nbsp;"角色权限管理",&nbsp;permissionTag:&nbsp;"search",&nbsp;permissionMark:&nbsp;"查询",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;94760,&nbsp;pid:&nbsp;0,&nbsp;mode:&nbsp;"运营中心",&nbsp;permissionTag:&nbsp;"*",&nbsp;permissionMark:&nbsp;"所有权限",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;94770,&nbsp;pid:&nbsp;94760,&nbsp;mode:&nbsp;"跨区域调拨单",&nbsp;permissionTag:&nbsp;"*",&nbsp;permissionMark:&nbsp;"所有权限",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;476104,&nbsp;pid:&nbsp;94770,&nbsp;mode:&nbsp;"跨区域调拨单",&nbsp;permissionTag:&nbsp;"search",&nbsp;permissionMark:&nbsp;"查询",&nbsp;}</div>
<div>,&nbsp;{0:&nbsp;undefined,&nbsp;id:&nbsp;476105,&nbsp;pid:&nbsp;94770,&nbsp;mode:&nbsp;"跨区域调拨单",&nbsp;permissionTag:&nbsp;"download",&nbsp;permissionMark:&nbsp;"下载",&nbsp;}]</div>





<br />
<div>&nbsp;&nbsp;&nbsp;&nbsp;$(function()&nbsp;{</div>





<br />
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//控制台输出一下数据</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(data);</div>





<br />
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table.bootstrapTable({</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:data,</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idField:&nbsp;'id',</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataType:'jsonp',</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;columns:&nbsp;[</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;field:&nbsp;'check',&nbsp;&nbsp;checkbox:&nbsp;true,&nbsp;formatter:&nbsp;function&nbsp;(value,&nbsp;row,&nbsp;index)&nbsp;{</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(row.check&nbsp;==&nbsp;true)&nbsp;{</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;console.log(row.serverName);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//设置选中</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{&nbsp;&nbsp;checked:&nbsp;true&nbsp;};</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;field:&nbsp;'mode',&nbsp;&nbsp;title:&nbsp;'名称'&nbsp;},</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;field:&nbsp;'permissionTag',&nbsp;&nbsp;title:&nbsp;'状态',&nbsp;&nbsp;},</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;field:&nbsp;'permissionMark',&nbsp;title:&nbsp;'权限值'&nbsp;&nbsp;},</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;bootstrap-table-treegrid.js&nbsp;插件配置&nbsp;--&nbsp;start</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//在哪一列展开树形</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;treeShowField:&nbsp;'mode',</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//指定父id列</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parentIdField:&nbsp;'pid',</div>





<br />
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onResetView:&nbsp;function(data)&nbsp;{</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//console.log('load');</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table.treegrid({</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;initialState:&nbsp;'collapsed',//&nbsp;所有节点都折叠</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initialState:&nbsp;'expanded',//&nbsp;所有节点都展开，默认展开</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;treeColumn:&nbsp;1,</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;expanderExpandedClass:&nbsp;'glyphicon&nbsp;glyphicon-minus',&nbsp;&nbsp;//图标样式</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;expanderCollapsedClass:&nbsp;'glyphicon&nbsp;glyphicon-plus',</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onChange:&nbsp;function()&nbsp;{</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table.bootstrapTable('resetWidth');</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//只展开树形的第一级节点</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table.treegrid('getRootNodes').treegrid('expand');</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onCheck:function(row){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event.preventDefault()</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;datas&nbsp;=&nbsp;$table.bootstrapTable('getData');</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(datas)</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row.check&nbsp;=&nbsp;true</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;勾选子类</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectChilds(datas,row,"id","pid",true);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;勾选父类</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectParentChecked(datas,row,"id","pid")</div>





<br />
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;刷新数据</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table.bootstrapTable('load',&nbsp;datas);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>





<br />
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onUncheck:function(row){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event.preventDefault()</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row.check&nbsp;=&nbsp;false</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;datas&nbsp;=&nbsp;$table.bootstrapTable('getData');</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectChilds(datas,row,"id","pid",false);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//取消选中最后一个子元素时时查找对应父元素取消</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectParentUnchecked(datas,row,"id","pid")</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table.bootstrapTable('load',&nbsp;datas);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;bootstrap-table-treetreegrid.js&nbsp;插件配置&nbsp;--&nbsp;end</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;});</div>





<br />
<div>&nbsp;&nbsp;&nbsp;</div>
<div>&lt;/script&gt;</div>
<div>&lt;script&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;/**</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;选中父项时，同时选中子项</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;datas&nbsp;所有的数据</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;row&nbsp;当前数据</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;id&nbsp;id&nbsp;字段名</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;pid&nbsp;父id字段名</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;selectChilds(datas,row,id,pid,checked)&nbsp;{</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log("zi",datas,'row',row,'check',checked)</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var&nbsp;i&nbsp;in&nbsp;datas){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(datas[i][pid]&nbsp;==&nbsp;row[id]){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;datas[i].check=checked;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectChilds(datas,datas[i],id,pid,checked);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>





<br />
<div>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;selectParentUnchecked(datas,row,id,pid){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log("fu--Uncheck",datas,'row',row,)</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;key&nbsp;=&nbsp;0;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var&nbsp;i&nbsp;in&nbsp;datas){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(datas[i].pid&nbsp;==&nbsp;row.pid&nbsp;&amp;&amp;&nbsp;datas[i].check&nbsp;==&nbsp;true){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key++</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(key)</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(key&nbsp;==&nbsp;0&nbsp;){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var&nbsp;i&nbsp;in&nbsp;datas){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(datas[i][id]&nbsp;==&nbsp;row[pid]){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;datas[i].check=false;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectParentUnchecked(datas,datas[i],id,pid);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>





<br />
<div>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;selectParentChecked(datas,row,id,pid){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var&nbsp;i&nbsp;in&nbsp;datas){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(datas[i][id]&nbsp;==&nbsp;row[pid]){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;datas[i].check=true;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectParentChecked(datas,datas[i],id,pid);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>





<br />
<div>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test()&nbsp;{</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;selRows&nbsp;=&nbsp;$table.bootstrapTable("getSelections");</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(selRows.length&nbsp;==&nbsp;0){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert("请至少选择一行");</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;postData&nbsp;=&nbsp;"";</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$.each(selRows,function(i)&nbsp;{</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postData&nbsp;+=&nbsp;&nbsp;this.id;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(i&nbsp;&lt;&nbsp;selRows.length&nbsp;-&nbsp;1)&nbsp;{</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postData&nbsp;+=&nbsp;"，&nbsp;";</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert("你选中行的&nbsp;id&nbsp;为："+postData);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&lt;/script&gt;</div>
<div>&lt;/html&gt;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>实现的效果图为：<img src="./images/Bootstrap table 实现树形表格，实现联动选中，联动取消0.png" alt="" /></div>





</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>