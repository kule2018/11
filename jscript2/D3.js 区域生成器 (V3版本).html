<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修D3.js 区域生成器 (V3版本)' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>D3.js 区域生成器 (V3版本)</center></div><div class='banquan'>原文出处:本文由博客园博主溢杨年华提供。<br/>
原文连接:https://www.cnblogs.com/littleSpill/p/10854021.html</div><br>
    <div><strong><span style="font-size: 14pt;">区域生成器(Area Generator)</span></strong></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><strong>区域生成器(Area Generator)</strong>用于生成一块区域，使用方法与线段生成器类似。线段生成器地址:数据访问器有x()、x0()、x1()、y()、y0()、y1()六个，数量很多，但不许要全部使用。举个例子:</span></div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span>  　　　　<span style="color: #0000ff;">var</span> width = 600;            <span style="color: #008000;">//</span><span style="color: #008000;">SVG绘制区域的宽度</span>
<span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> height = 500;           <span style="color: #008000;">//</span><span style="color: #008000;">SVG绘制区域的高度</span>
<span style="color: #008080;"> 3</span>        
<span style="color: #008080;"> 4</span>         <span style="color: #008000;">//</span><span style="color: #008000;">定义画图区域svg</span>
<span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 6</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 7</span>                     .attr("width"<span style="color: #000000;">,width)
</span><span style="color: #008080;"> 8</span>                     .attr("height"<span style="color: #000000;">,height)
</span><span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span>         <span style="color: #008000;">//</span><span style="color: #008000;">定义数据</span>
<span style="color: #008080;">11</span>         <span style="color: #0000ff;">var</span> dataList = [80,120,130,70,60,90<span style="color: #000000;">]
</span><span style="color: #008080;">12</span>         <span style="color: #008000;">//</span><span style="color: #008000;">创建一个区域生成器</span>
<span style="color: #008080;">13</span>         <span style="color: #0000ff;">var</span> areaPath =<span style="color: #000000;"> d3.svg.area()
</span><span style="color: #008080;">14</span>                         .x(<span style="color: #0000ff;">function</span>(d,i){<span style="color: #0000ff;">return</span> 50 + i * 80<span style="color: #000000;">})
</span><span style="color: #008080;">15</span>                         .y0(<span style="color: #0000ff;">function</span>(d,i){<span style="color: #0000ff;">return</span> height/2})
<span style="color: #008080;">16</span>                         .y1(<span style="color: #0000ff;">function</span>(d,i){<span style="color: #0000ff;">return</span> height/2 - d})
<span style="color: #008080;">17</span> 
<span style="color: #008080;">18</span>       
<span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span>         <span style="color: #008000;">//</span><span style="color: #008000;">添加路径</span>
<span style="color: #008080;">21</span>         svg.append("path"<span style="color: #000000;">)
</span><span style="color: #008080;">22</span>             .attr("d",areaPath(dataList))       <span style="color: #008000;">//</span><span style="color: #008000;">使用了区域生成器</span>
<span style="color: #008080;">23</span>             .attr("stroke","black")             <span style="color: #008000;">//</span><span style="color: #008000;">线段的颜色</span>
<span style="color: #008080;">24</span>             .attr("stroke-width","3px")         <span style="color: #008000;">//</span><span style="color: #008000;">线段的宽度</span>
<span style="color: #008080;">25</span>             .attr("fill","yellow")              <span style="color: #008000;">//</span><span style="color: #008000;">填充的颜色</span></span></pre>
</div>
<p>&nbsp;</p>
</div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">上面代码定义了一个数组dataList和一个区域生成器areaPath。此区域生成器定制了三个访问器:<strong>x()</strong>、<strong>y0()</strong>、<strong>y1()</strong>。将areaPath当中函数使用，<strong>areaPath(dataList)</strong>返回的字符串直接作为&lt;path&gt;元素的d的值使用。结果如图:&nbsp;</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js 区域生成器 (V3版本)0.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>
<div>
<div><span style="font-size: 18px;">上图中，上边界的折现是数组dataList中各值得反映。根据访问器的设定，可得到以下数值(height的值是500)</span></div>
<div><span style="font-size: 18px;">当d = 80,i = 0 时，x等于50, y0等于250, y1等于170。</span></div>
<div><span style="font-size: 18px;">当d = 120,i = 1 时，x等于50 + 1 * 80, y0等于250, y1等于130。</span></div>
<div><span style="font-size: 18px;">以此类推。</span></div>
</div>
</div>
</div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">下图展示了各访问器的意义，x是各段的x坐标，y0是区域的下限坐标，y1是区域的上限坐标。如果不定制访问器，默认是:</span></div>
<div><span style="font-size: 18px;">x为d[0]，y0为0，y1为d[1]。此外还有<strong>x0()</strong>、<strong>x1()</strong>、<strong>y()</strong>三个访问器，意义类似，如果需要制作上图的横向图需要用到。</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js 区域生成器 (V3版本)1.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">与线段生成器类似，区域生成器也有<strong>interpolate()</strong>、<strong>tension()</strong>、<strong>defined()</strong>这些方法，意义相同。通过设定<strong>interpolate</strong>，</span><span style="font-size: 18px;">两点之间的插值会发生相应变化，规则与线段生成器一样。但是，某些模式是区域生成器里没有的，如<strong>linear-closed</strong>。因为区域本身</span><span style="font-size: 18px;">就是闭合的，所以不需要了。接下来给大家展示一下<strong>step</strong>和<strong>basis</strong>两种插值模式:</span></div>
<div>&nbsp;</div>
<div>
<div><strong><span style="font-size: 14pt;">step插值模式 :</span></strong></div>
</div>
</div>
</div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> 　　　　 <span style="color: #0000ff;">var</span> width = 600;            <span style="color: #008000;">//</span><span style="color: #008000;">SVG绘制区域的宽度</span>
<span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> height = 500;           <span style="color: #008000;">//</span><span style="color: #008000;">SVG绘制区域的高度</span>
<span style="color: #008080;"> 3</span>        
<span style="color: #008080;"> 4</span>         <span style="color: #008000;">//</span><span style="color: #008000;">定义画图区域svg</span>
<span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 6</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 7</span>                     .attr("width"<span style="color: #000000;">,width)
</span><span style="color: #008080;"> 8</span>                     .attr("height"<span style="color: #000000;">,height)
</span><span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span>         <span style="color: #008000;">//</span><span style="color: #008000;">定义数据</span>
<span style="color: #008080;">11</span>         <span style="color: #0000ff;">var</span> dataList = [80,120,130,70,60,90<span style="color: #000000;">]
</span><span style="color: #008080;">12</span>       
<span style="color: #008080;">13</span>         <span style="color: #008000;">//</span><span style="color: #008000;">step插值模式</span>
<span style="color: #008080;">14</span>         <span style="color: #0000ff;">var</span> areaPath =<span style="color: #000000;"> d3.svg.area()
</span><span style="color: #008080;">15</span>                         .interpolate("step"<span style="color: #000000;">)
</span><span style="color: #008080;">16</span>                         .x(<span style="color: #0000ff;">function</span>(d,i){<span style="color: #0000ff;">return</span> 50 + i * 80<span style="color: #000000;">})
</span><span style="color: #008080;">17</span>                         .y0(<span style="color: #0000ff;">function</span>(d,i){<span style="color: #0000ff;">return</span> height/2})
<span style="color: #008080;">18</span>                         .y1(<span style="color: #0000ff;">function</span>(d,i){<span style="color: #0000ff;">return</span> height/2-d})
<span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span> 
<span style="color: #008080;">21</span>         <span style="color: #008000;">//</span><span style="color: #008000;">添加路径</span>
<span style="color: #008080;">22</span>         svg.append("path"<span style="color: #000000;">)
</span><span style="color: #008080;">23</span>             .attr("d",areaPath(dataList))       <span style="color: #008000;">//</span><span style="color: #008000;">使用了区域生成器</span>
<span style="color: #008080;">24</span>             .attr("stroke","black")             <span style="color: #008000;">//</span><span style="color: #008000;">线段的颜色</span>
<span style="color: #008080;">25</span>             .attr("stroke-width","3px")         <span style="color: #008000;">//</span><span style="color: #008000;">线段的宽度</span></span>
<span style="color: #008080;">26</span>             .attr("fill","yellow")              <span style="color: #008000;">//</span><span style="color: #008000;">填充的颜色</span></pre>
</div>
<p>&nbsp;</p>
</div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;">效果图 :</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js 区域生成器 (V3版本)2.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>
<div><strong><span style="font-size: 14pt;">basis插值模式 :</span></strong></div>
</div>
<div>&nbsp;</div>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span>   　　　 <span style="color: #0000ff;">var</span> width = 600;            <span style="color: #008000;">//</span><span style="color: #008000;">SVG绘制区域的宽度</span>
<span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">var</span> height = 500;           <span style="color: #008000;">//</span><span style="color: #008000;">SVG绘制区域的高度</span>
<span style="color: #008080;"> 3</span>        
<span style="color: #008080;"> 4</span>         <span style="color: #008000;">//</span><span style="color: #008000;">定义画图区域svg</span>
<span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">var</span> svg = d3.select("#body"<span style="color: #000000;">)
</span><span style="color: #008080;"> 6</span>                     .append("svg"<span style="color: #000000;">)
</span><span style="color: #008080;"> 7</span>                     .attr("width"<span style="color: #000000;">,width)
</span><span style="color: #008080;"> 8</span>                     .attr("height"<span style="color: #000000;">,height)
</span><span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span>         <span style="color: #008000;">//</span><span style="color: #008000;">定义数据</span>
<span style="color: #008080;">11</span>         <span style="color: #0000ff;">var</span> dataList = [80,120,130,70,60,90<span style="color: #000000;">]
</span><span style="color: #008080;">12</span>       
<span style="color: #008080;">13</span>         <span style="color: #008000;">//</span><span style="color: #008000;">basis插值模式</span>
<span style="color: #008080;">14</span>         <span style="color: #0000ff;">var</span> areaPath =<span style="color: #000000;"> d3.svg.area()
</span><span style="color: #008080;">15</span>                         .interpolate("basis"<span style="color: #000000;">)
</span><span style="color: #008080;">16</span>                         .x(<span style="color: #0000ff;">function</span>(d,i){<span style="color: #0000ff;">return</span> 50 + i * 80<span style="color: #000000;">})
</span><span style="color: #008080;">17</span>                         .y0(<span style="color: #0000ff;">function</span>(d,i){<span style="color: #0000ff;">return</span> height/2})
<span style="color: #008080;">18</span>                         .y1(<span style="color: #0000ff;">function</span>(d,i){<span style="color: #0000ff;">return</span> height/2 - d})
<span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span>         <span style="color: #008000;">//</span><span style="color: #008000;">添加路径</span>
<span style="color: #008080;">21</span>         svg.append("path"<span style="color: #000000;">)
</span><span style="color: #008080;">22</span>             .attr("d",areaPath(dataList))       <span style="color: #008000;">//</span><span style="color: #008000;">使用了区域生成器</span>
<span style="color: #008080;">23</span>             .attr("stroke","black")             <span style="color: #008000;">//</span><span style="color: #008000;">线段的颜色</span>
<span style="color: #008080;">24</span>             .attr("stroke-width","3px")         <span style="color: #008000;">//</span><span style="color: #008000;">线段的宽度</span>
<span style="color: #008080;">25</span>             .attr("fill","yellow")              <span style="color: #008000;">//</span><span style="color: #008000;">填充的颜色</span></span></pre>
</div>
<p>&nbsp;</p>
</div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;">效果图 :</span></div>
<div>&nbsp;</div>
<div><span style="font-size: 18px;"><img src="./images/D3.js 区域生成器 (V3版本)3.png" alt="" /></span></div>
<div>&nbsp;</div>
<div>
<div><span style="font-size: 18px;">在需要生成折现或曲线下方的面积的时候，可以考虑使用区域生成器。</span></div>
</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>