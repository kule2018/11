<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修FullCalendar Timeline View 使用' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>FullCalendar Timeline View 使用</center></div><div class='banquan'>原文出处:本文由博客园博主Linon提供。<br/>
原文连接:https://www.cnblogs.com/bzhy/p/10784879.html</div><br>
    <p>FullCalendar&nbsp; Timeline View(v4)</p>
<p>The&nbsp;<a href="https://fullcalendar.io/scheduler">Scheduler add-on</a>&nbsp;provides a new view called &ldquo;timeline view&rdquo; with a customizable horizontal time-axis and resources as rows.</p>
<p>1. 先安装fullcalendar和用到的插件</p>
<div class="cnblogs_code">
<pre><code>npm install --save @fullcalendar/core @fullcalendar/resource-timeline @fullcalendar/interaction</pre>
</div>
<p>2.在使用时导入</p>
<div class="cnblogs_code">
<pre><code>import {Calendar} from '@fullcalendar/core'<span style="color: #000000;">;
import resourceTimelinePlugin from </span>'@fullcalendar/resource-timeline'<span style="color: #000000;">;
import interactionPlugin from </span>'@fullcalendar/interaction'<span style="color: #000000;">;
import </span>'@fullcalendar/core/main.css'<span style="color: #000000;">;
import </span>'@fullcalendar/timeline/main.css'<span style="color: #000000;">;
import </span>'@fullcalendar/resource-timeline/main.css';</pre>
</div>
<p>3. 初始化Calendar时,添加使用的插件</p>
<div class="cnblogs_code">
<pre><code> plugins: [interactionPlugin, resourceTimelinePlugin],</pre>
</div>
<p>4.最终实现资源/事件的添加删除.</p>
<p>&nbsp;<img src="./images/FullCalendar Timeline View 使用0.png" alt="" /></p>
<p>&nbsp;</p>
<p>上代码.</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('eb157a27-585b-4876-b740-b1d48ac3ed74')"><img id="code_img_closed_eb157a27-585b-4876-b740-b1d48ac3ed74" class="code_img_closed" src="./images/FullCalendar Timeline View 使用1.png" alt="" /><img id="code_img_opened_eb157a27-585b-4876-b740-b1d48ac3ed74" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('eb157a27-585b-4876-b740-b1d48ac3ed74',event)" src="./images/FullCalendar Timeline View 使用2.png" alt="" />
<div id="cnblogs_code_open_eb157a27-585b-4876-b740-b1d48ac3ed74" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;">  1</span> import {Calendar} from '@fullcalendar/core'<span style="color: #000000;">;
</span><span style="color: #008080;">  2</span> import resourceTimelinePlugin from '@fullcalendar/resource-timeline'<span style="color: #000000;">;
</span><span style="color: #008080;">  3</span> import interactionPlugin from '@fullcalendar/interaction'<span style="color: #000000;">;
</span><span style="color: #008080;">  4</span> import '@fullcalendar/core/main.css'<span style="color: #000000;">;
</span><span style="color: #008080;">  5</span> import '@fullcalendar/timeline/main.css'<span style="color: #000000;">;
</span><span style="color: #008080;">  6</span> import '@fullcalendar/resource-timeline/main.css'<span style="color: #000000;">;
</span><span style="color: #008080;">  7</span> 
<span style="color: #008080;">  8</span> <span style="color: #008000;">//</span><span style="color: #008000;"> import zh_cn from '@fullcalendar/core/locales/zh-cn';</span>
<span style="color: #008080;">  9</span> let option =<span style="color: #000000;"> {
</span><span style="color: #008080;"> 10</span>     schedulerLicenseKey: 'GPL-My-Project-Is-Open-Source'<span style="color: #000000;">,
</span><span style="color: #008080;"> 11</span> <span style="color: #000000;">    plugins: [interactionPlugin, resourceTimelinePlugin],
</span><span style="color: #008080;"> 12</span>     defaultView: 'resourceTimeline'<span style="color: #000000;">,
</span><span style="color: #008080;"> 13</span>     now: '2019-03-07'<span style="color: #000000;">,
</span><span style="color: #008080;"> 14</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> locale: zh_cn,</span>
<span style="color: #008080;"> 15</span>     selectable: <span style="color: #0000ff;">true</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 16</span>     selectHelper: <span style="color: #0000ff;">true</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 17</span>     editable: <span style="color: #0000ff;">true</span>, <span style="color: #008000;">//</span><span style="color: #008000;"> enable draggable events</span>
<span style="color: #008080;"> 18</span>     eventResourceEditable: <span style="color: #0000ff;">false</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 19</span>     aspectRatio: 1<span style="color: #000000;">,
</span><span style="color: #008080;"> 20</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> height: 440,</span>
<span style="color: #008080;"> 21</span>     contentHeight: 440<span style="color: #000000;">,
</span><span style="color: #008080;"> 22</span>     resourceAreaWidth: '120px'<span style="color: #000000;">,
</span><span style="color: #008080;"> 23</span>     eventOverlap: <span style="color: #0000ff;">false</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 24</span>     selectOverlap: <span style="color: #0000ff;">false</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 25</span>     eventTextColor: '#fff'<span style="color: #000000;">,
</span><span style="color: #008080;"> 26</span>     displayEventTime: <span style="color: #0000ff;">true</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 27</span>     displayEventEnd: <span style="color: #0000ff;">true</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 28</span> <span style="color: #000000;">    slotLabelFormat: {
</span><span style="color: #008080;"> 29</span>         hour: 'numeric'<span style="color: #000000;">,
</span><span style="color: #008080;"> 30</span>         minute: '2-digit'<span style="color: #000000;">,
</span><span style="color: #008080;"> 31</span>         omitZeroMinute: <span style="color: #0000ff;">true</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 32</span>         meridiem: 'short'<span style="color: #000000;">,
</span><span style="color: #008080;"> 33</span>         hour12: <span style="color: #0000ff;">false</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 34</span> <span style="color: #000000;">    },
</span><span style="color: #008080;"> 35</span> <span style="color: #000000;">    eventTimeFormat: {
</span><span style="color: #008080;"> 36</span>         hour: 'numeric'<span style="color: #000000;">,
</span><span style="color: #008080;"> 37</span>         minute: '2-digit'<span style="color: #000000;">,
</span><span style="color: #008080;"> 38</span>         meridiem: 'narrow'<span style="color: #000000;">,
</span><span style="color: #008080;"> 39</span>         hour12: <span style="color: #0000ff;">false</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 40</span> <span style="color: #000000;">    },
</span><span style="color: #008080;"> 41</span> <span style="color: #000000;">    header: {
</span><span style="color: #008080;"> 42</span>         left: ''<span style="color: #000000;">,
</span><span style="color: #008080;"> 43</span>         center: ''<span style="color: #000000;">,
</span><span style="color: #008080;"> 44</span>         right: ''<span style="color: #000000;">,
</span><span style="color: #008080;"> 45</span> <span style="color: #000000;">    },
</span><span style="color: #008080;"> 46</span>     resourceLabelText: '姓名'<span style="color: #000000;">,
</span><span style="color: #008080;"> 47</span> <span style="color: #000000;">    resources: [],
</span><span style="color: #008080;"> 48</span> <span style="color: #000000;">    events: [],
</span><span style="color: #008080;"> 49</span> <span style="color: #000000;">};
</span><span style="color: #008080;"> 50</span> <span style="color: #008000;">/*</span><span style="color: #008000;">*
</span><span style="color: #008080;"> 51</span> <span style="color: #008000;"> * {Object} option , onSelect: function onEventClick: function ,
</span><span style="color: #008080;"> 52</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 53</span> 
<span style="color: #008080;"> 54</span> <span style="color: #000000;">class Timeline {
</span><span style="color: #008080;"> 55</span>     constructor(el, opt = {}, callBack = () =&gt;<span style="color: #000000;"> {}) {
</span><span style="color: #008080;"> 56</span>         <span style="color: #0000ff;">this</span>.callBack =<span style="color: #000000;"> callBack;
</span><span style="color: #008080;"> 57</span>         console.log('timeline -init'<span style="color: #000000;">);
</span><span style="color: #008080;"> 58</span>         <span style="color: #0000ff;">this</span>._option =<span style="color: #000000;"> Object.assign(
</span><span style="color: #008080;"> 59</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 60</span>                 select: info =&gt; <span style="color: #0000ff;">this</span><span style="color: #000000;">.select(info),
</span><span style="color: #008080;"> 61</span>                 dateClick: info =&gt; <span style="color: #0000ff;">this</span><span style="color: #000000;">.dateClick(info),
</span><span style="color: #008080;"> 62</span>                 eventClick: info =&gt; <span style="color: #0000ff;">this</span><span style="color: #000000;">.eventClick(info),
</span><span style="color: #008080;"> 63</span>                 eventMouseEnter: info =&gt; <span style="color: #0000ff;">this</span><span style="color: #000000;">.eventMouseEnter(info),
</span><span style="color: #008080;"> 64</span>                 eventMouseLeave: info =&gt; <span style="color: #0000ff;">this</span><span style="color: #000000;">.eventMouseLeave(info),
</span><span style="color: #008080;"> 65</span>                 eventResize: info =&gt; <span style="color: #0000ff;">this</span><span style="color: #000000;">.eventResize(info),
</span><span style="color: #008080;"> 66</span>                 eventDrop: info =&gt; <span style="color: #0000ff;">this</span><span style="color: #000000;">.eventDrop(info),
</span><span style="color: #008080;"> 67</span>                 resourceRender: info =&gt; <span style="color: #0000ff;">this</span><span style="color: #000000;">.resourceRender(info),
</span><span style="color: #008080;"> 68</span>                 eventRender: info =&gt; <span style="color: #0000ff;">this</span><span style="color: #000000;">.eventRender(info),
</span><span style="color: #008080;"> 69</span>                 eventDestroy: info =&gt; <span style="color: #0000ff;">this</span><span style="color: #000000;">.eventDestroy(info),
</span><span style="color: #008080;"> 70</span> <span style="color: #000000;">            },
</span><span style="color: #008080;"> 71</span> <span style="color: #000000;">            option,
</span><span style="color: #008080;"> 72</span> <span style="color: #000000;">            opt
</span><span style="color: #008080;"> 73</span> <span style="color: #000000;">        );
</span><span style="color: #008080;"> 74</span>         console.log('timeline-option==&gt;&gt;', <span style="color: #0000ff;">this</span><span style="color: #000000;">._option);
</span><span style="color: #008080;"> 75</span>         <span style="color: #0000ff;">this</span>.calendar = <span style="color: #0000ff;">new</span> Calendar(el, <span style="color: #0000ff;">this</span><span style="color: #000000;">._option);
</span><span style="color: #008080;"> 76</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.render();
</span><span style="color: #008080;"> 77</span> 
<span style="color: #008080;"> 78</span>         let currentDate = <span style="color: #0000ff;">new</span> Date(<span style="color: #0000ff;">this</span><span style="color: #000000;">._option.now);
</span><span style="color: #008080;"> 79</span>         let end = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date().setDate(currentDate.getDate());
</span><span style="color: #008080;"> 80</span>         <span style="color: #0000ff;">if</span> (currentDate.getHours() !== 0<span style="color: #000000;">) {
</span><span style="color: #008080;"> 81</span>             end = <span style="color: #0000ff;">new</span> Date().setDate(currentDate.getDate() + 1<span style="color: #000000;">);
</span><span style="color: #008080;"> 82</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 83</span>         console.table('start, end', currentDate, <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(end));
</span><span style="color: #008080;"> 84</span>         <span style="color: #0000ff;">this</span>.setOption('visibleRange'<span style="color: #000000;">, {
</span><span style="color: #008080;"> 85</span> <span style="color: #000000;">            start: currentDate,
</span><span style="color: #008080;"> 86</span> <span style="color: #000000;">            end: end,
</span><span style="color: #008080;"> 87</span> <span style="color: #000000;">        });
</span><span style="color: #008080;"> 88</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 89</span> 
<span style="color: #008080;"> 90</span>     <span style="color: #008000;">/*</span><span style="color: #008000;">*
</span><span style="color: #008080;"> 91</span> <span style="color: #008000;">     * @param {Object} value
</span><span style="color: #008080;"> 92</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 93</span> <span style="color: #000000;">    setOption(key, value) {
</span><span style="color: #008080;"> 94</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.calendar.setOption(key, value);
</span><span style="color: #008080;"> 95</span>         <span style="color: #0000ff;">this</span>._option[key] =<span style="color: #000000;"> value;
</span><span style="color: #008080;"> 96</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 97</span> 
<span style="color: #008080;"> 98</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> methods</span>
<span style="color: #008080;"> 99</span> <span style="color: #000000;">    render() {
</span><span style="color: #008080;">100</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.calendar.render();
</span><span style="color: #008080;">101</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">102</span> <span style="color: #000000;">    addResource(resource) {
</span><span style="color: #008080;">103</span>         <span style="color: #0000ff;">if</span> (!<span style="color: #000000;">resource) {
</span><span style="color: #008080;">104</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">105</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">106</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.calendar.addResource(resource);
</span><span style="color: #008080;">107</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">108</span> <span style="color: #000000;">    removeResource(resource, e) {
</span><span style="color: #008080;">109</span>         <span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">this</span><span style="color: #000000;">._option.editable) {
</span><span style="color: #008080;">110</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">111</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">112</span>         <span style="color: #0000ff;">this</span>._option.onRemoveResource &amp;&amp; <span style="color: #0000ff;">this</span><span style="color: #000000;">._option.onRemoveResource(resource);
</span><span style="color: #008080;">113</span>         let events =<span style="color: #000000;"> resource.getEvents();
</span><span style="color: #008080;">114</span>         events.forEach(event =&gt;<span style="color: #000000;"> {
</span><span style="color: #008080;">115</span> <span style="color: #000000;">            event.remove();
</span><span style="color: #008080;">116</span> <span style="color: #000000;">        });
</span><span style="color: #008080;">117</span> <span style="color: #000000;">        resource.remove();
</span><span style="color: #008080;">118</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.getResult();
</span><span style="color: #008080;">119</span> 
<span style="color: #008080;">120</span>         e.target.removeEventListener('click', <span style="color: #0000ff;">this</span><span style="color: #000000;">.removeResource);
</span><span style="color: #008080;">121</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">122</span> <span style="color: #000000;">    addEvent(event) {
</span><span style="color: #008080;">123</span>         <span style="color: #0000ff;">if</span> (!<span style="color: #000000;">event) {
</span><span style="color: #008080;">124</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">125</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">126</span>         let tmp = <span style="color: #0000ff;">this</span><span style="color: #000000;">.calendar.getEventById(event.id);
</span><span style="color: #008080;">127</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp) {
</span><span style="color: #008080;">128</span>             <span style="color: #0000ff;">for</span> (let key <span style="color: #0000ff;">in</span><span style="color: #000000;"> event) {
</span><span style="color: #008080;">129</span>                 <span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp.extendedProps[key]) {
</span><span style="color: #008080;">130</span> <span style="color: #000000;">                    tmp.setExtendedProp(key, event[key]);
</span><span style="color: #008080;">131</span>                     <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">132</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">133</span>                 <span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp[key]) {
</span><span style="color: #008080;">134</span> <span style="color: #000000;">                    tmp.setProp(key, event[key]);
</span><span style="color: #008080;">135</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">136</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">137</span>         } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
</span><span style="color: #008080;">138</span>             <span style="color: #0000ff;">this</span><span style="color: #000000;">.calendar.addEvent(event);
</span><span style="color: #008080;">139</span>             console.log('addd'<span style="color: #000000;">, event);
</span><span style="color: #008080;">140</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">141</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">142</span> <span style="color: #000000;">    removeEvent(eventId) {
</span><span style="color: #008080;">143</span>         let event = <span style="color: #0000ff;">this</span><span style="color: #000000;">.calendar.getEventById(eventId);
</span><span style="color: #008080;">144</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;"> (event) {
</span><span style="color: #008080;">145</span> <span style="color: #000000;">            event.remove();
</span><span style="color: #008080;">146</span>             <span style="color: #0000ff;">this</span><span style="color: #000000;">.getResult();
</span><span style="color: #008080;">147</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">148</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">149</span> 
<span style="color: #008080;">150</span> <span style="color: #000000;">    destroy() {
</span><span style="color: #008080;">151</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.calendar.destroy();
</span><span style="color: #008080;">152</span>         console.log('timeline destroy &gt;&gt;&gt;&gt;&gt;&gt;&gt;'<span style="color: #000000;">);
</span><span style="color: #008080;">153</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">154</span> <span style="color: #000000;">    getResult() {
</span><span style="color: #008080;">155</span>         let resources = <span style="color: #0000ff;">this</span><span style="color: #000000;">.calendar.getResources();
</span><span style="color: #008080;">156</span>         let result =<span style="color: #000000;"> [];
</span><span style="color: #008080;">157</span>         resources.map(item =&gt;<span style="color: #000000;"> {
</span><span style="color: #008080;">158</span>             let tmp =<span style="color: #000000;"> {
</span><span style="color: #008080;">159</span> <span style="color: #000000;">                resource: item,
</span><span style="color: #008080;">160</span> <span style="color: #000000;">                events: item.getEvents(),
</span><span style="color: #008080;">161</span> <span style="color: #000000;">            };
</span><span style="color: #008080;">162</span> <span style="color: #000000;">            result.push(tmp);
</span><span style="color: #008080;">163</span> <span style="color: #000000;">        });
</span><span style="color: #008080;">164</span> 
<span style="color: #008080;">165</span>         <span style="color: #0000ff;">this</span>.callBack &amp;&amp; <span style="color: #0000ff;">this</span><span style="color: #000000;">.callBack(result);
</span><span style="color: #008080;">166</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">167</span> <span style="color: #000000;">    isValid(event) {
</span><span style="color: #008080;">168</span>         let now = <span style="color: #0000ff;">this</span><span style="color: #000000;">._option.now;
</span><span style="color: #008080;">169</span>         let start = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(event.start).getTime();
</span><span style="color: #008080;">170</span>         let end = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(event.end).getTime();
</span><span style="color: #008080;">171</span>         let startH = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(now).getHours();
</span><span style="color: #008080;">172</span>         let startD = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(now).getDate();
</span><span style="color: #008080;">173</span>         let crossDate = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(now);
</span><span style="color: #008080;">174</span> <span style="color: #000000;">        crossDate.setDate(startD);
</span><span style="color: #008080;">175</span>         crossDate.setHours(23<span style="color: #000000;">);
</span><span style="color: #008080;">176</span>         let endPoint =<span style="color: #000000;"> crossDate.getTime();
</span><span style="color: #008080;">177</span>         <span style="color: #0000ff;">if</span> (startH !== 0<span style="color: #000000;">) {
</span><span style="color: #008080;">178</span>             crossDate.setDate(startD + 1<span style="color: #000000;">);
</span><span style="color: #008080;">179</span> <span style="color: #000000;">            crossDate.setHours(startH);
</span><span style="color: #008080;">180</span>             endPoint =<span style="color: #000000;"> crossDate.getTime();
</span><span style="color: #008080;">181</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">182</span>         <span style="color: #0000ff;">if</span> (start &lt; now || end &lt; now || start &gt; endPoint || end &gt;<span style="color: #000000;"> endPoint) {
</span><span style="color: #008080;">183</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">184</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">185</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">186</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">187</span>     <span style="color: #008000;">/*</span><span style="color: #008000;">*
</span><span style="color: #008080;">188</span> <span style="color: #008000;">        callbacks 
</span><span style="color: #008080;">189</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">190</span> <span style="color: #000000;">    select(info) {
</span><span style="color: #008080;">191</span>         <span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">this</span><span style="color: #000000;">.isValid({start: info.start, end: info.end})) {
</span><span style="color: #008080;">192</span>             <span style="color: #008000;">//</span><span style="color: #008000;"> info.revert();</span>
<span style="color: #008080;">193</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">194</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">195</span>         <span style="color: #0000ff;">this</span>._option.onSelect &amp;&amp; <span style="color: #0000ff;">this</span><span style="color: #000000;">._option.onSelect(info);
</span><span style="color: #008080;">196</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">197</span> <span style="color: #000000;">    dateClick(arg) {
</span><span style="color: #008080;">198</span>         console.log('dateClick', arg.date, arg.resource ? arg.resource.id : '(no resource)'<span style="color: #000000;">);
</span><span style="color: #008080;">199</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">200</span> <span style="color: #000000;">    eventClick(info) {
</span><span style="color: #008080;">201</span>         <span style="color: #0000ff;">this</span>._option.onEventClick &amp;&amp; <span style="color: #0000ff;">this</span><span style="color: #000000;">._option.onEventClick(info);
</span><span style="color: #008080;">202</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">203</span> <span style="color: #000000;">    eventMouseEnter(info) {
</span><span style="color: #008080;">204</span>         <span style="color: #0000ff;">this</span>._option.onEventMouseEnter &amp;&amp; <span style="color: #0000ff;">this</span><span style="color: #000000;">._option.onEventMouseEnter(info);
</span><span style="color: #008080;">205</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">206</span> <span style="color: #000000;">    eventMouseLeave(info) {
</span><span style="color: #008080;">207</span>         <span style="color: #0000ff;">this</span>._option.onEventMouseLeave &amp;&amp; <span style="color: #0000ff;">this</span><span style="color: #000000;">._option.onEventMouseLeave(info);
</span><span style="color: #008080;">208</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">209</span> <span style="color: #000000;">    eventResize(info) {
</span><span style="color: #008080;">210</span>         <span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">this</span><span style="color: #000000;">.isValid(info.event)) {
</span><span style="color: #008080;">211</span> <span style="color: #000000;">            info.revert();
</span><span style="color: #008080;">212</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">213</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> this.getResult();</span>
<span style="color: #008080;">214</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">215</span> <span style="color: #000000;">    eventDrop(info) {
</span><span style="color: #008080;">216</span>         <span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">this</span><span style="color: #000000;">.isValid(info.event)) {
</span><span style="color: #008080;">217</span> <span style="color: #000000;">            info.revert();
</span><span style="color: #008080;">218</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">219</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> this.getResult();</span>
<span style="color: #008080;">220</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">221</span> <span style="color: #000000;">    resourceRender(info) {
</span><span style="color: #008080;">222</span>         let dom =<span style="color: #000000;"> info.el;
</span><span style="color: #008080;">223</span>         dom.style = dom.style + ';position:relative;'<span style="color: #000000;">;
</span><span style="color: #008080;">224</span>         let close = document.createElement('i'<span style="color: #000000;">);
</span><span style="color: #008080;">225</span>         close.classList.add('iconfont', 'icon-c'<span style="color: #000000;">);
</span><span style="color: #008080;">226</span>         close.style = 'position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size: 10px;'<span style="color: #000000;">;
</span><span style="color: #008080;">227</span>         close.addEventListener('click', e =&gt; <span style="color: #0000ff;">this</span><span style="color: #000000;">.removeResource(info.resource, e));
</span><span style="color: #008080;">228</span> <span style="color: #000000;">        dom.appendChild(close);
</span><span style="color: #008080;">229</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">230</span> <span style="color: #000000;">    eventRender(info) {
</span><span style="color: #008080;">231</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.getResult();
</span><span style="color: #008080;">232</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">233</span> 
<span style="color: #008080;">234</span> <span style="color: #000000;">    eventDestroy(info) {
</span><span style="color: #008080;">235</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> this.getResult();</span>
<span style="color: #008080;">236</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> console.log('eventDestroy', info);</span>
<span style="color: #008080;">237</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">238</span> <span style="color: #000000;">}
</span><span style="color: #008080;">239</span> 
<span style="color: #008080;">240</span> export <span style="color: #0000ff;">default</span> Timeline;</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;使用(示例)</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('885c8009-8ea5-49a2-8f18-5a039c9aca41')"><img id="code_img_closed_885c8009-8ea5-49a2-8f18-5a039c9aca41" class="code_img_closed" src="./images/FullCalendar Timeline View 使用1.png" alt="" /><img id="code_img_opened_885c8009-8ea5-49a2-8f18-5a039c9aca41" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('885c8009-8ea5-49a2-8f18-5a039c9aca41',event)" src="./images/FullCalendar Timeline View 使用2.png" alt="" />
<div id="cnblogs_code_open_885c8009-8ea5-49a2-8f18-5a039c9aca41" class="cnblogs_code_hide">
<pre><code> let timelineView = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Timeline(
     document.querySelector(</span>'#time-line-day'<span style="color: #000000;">), {
         now: </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(),
         onSelect: info </span>=&gt;<span style="color: #000000;"> {
             let event </span>=<span style="color: #000000;"> {
                 id: </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.eventId,
                 title: </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.eventId,
                 resourceId: info.resource.id,
                 start: info.start,
                 end: info.end,
             };
             timelineView.addEvent(event);

         },
         onRemoveResource: info </span>=&gt;<span style="color: #000000;"> {

         },
         onEventClick: info </span>=&gt;<span style="color: #000000;"> {
             let event </span>=<span style="color: #000000;"> {
                 id: info.event.id,
                 title: info.event.title,
                 resourceId: info.event.getResources()[</span>0<span style="color: #000000;">].id,
                 start: info.event.start,
                 end: info.event.end,
             };
             let resourceId </span>= info.event.getResources()[0<span style="color: #000000;">].id;

         },
     },
     result </span>=&gt;<span style="color: #000000;"> {

     }
 );</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;FullCalendar插件&nbsp;<a href="https://fullcalendar.io/docs/plugin-index">plug-index</a></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>