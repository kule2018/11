<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修JavaScript BOM Cookie 的用法' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>JavaScript BOM Cookie 的用法</center></div><div class='banquan'>原文出处:本文由博客园博主web小哥提供。<br/>
原文连接:https://www.cnblogs.com/jc2182/p/11286652.html</div><br>
    <h2>JavaScript Cookie</h2>
<p>Cookie是计算机上存储在小文本文件中的数据。当Web服务器将网页发送到浏览器时，连接将关闭，服务器将忘记用户的所有内容。发明Cookie是为了解决&ldquo;如何记住用户信息&rdquo;的问题：<br />当用户访问网页时，他/她的名字可以存储在cookie中。<br />下次用户访问该页面时，cookie会&ldquo;记住&rdquo;他/她的名字。<br />Cookie以键值对形式保存，如：</p>
<div class="cnblogs_code">
<pre><code>username = John Doe</pre>
</div>
<p>当浏览器从服务器请求网页时，属于该页面的cookie将添加到请求中。这样，服务器获取必要的数据以&ldquo;记住&rdquo;有关用户的信息。<br />如果您的浏览器已关闭本地Cookie支持，则以下示例均无效。</p>
<h2>使用JavaScript创建Cookie</h2>
<p>JavaScript可以使用document.cookie属性创建，读取和删除cookie。使用JavaScript，可以像这样创建一个cookie：</p>
<div class="cnblogs_code">
<pre><code>document.cookie = "username=John Doe";</pre>
</div>
<p>您还可以添加到期日期（以UTC时间为单位）。默认情况下，在浏览器关闭时删除cookie：</p>
<div class="cnblogs_code">
<pre><code>document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC";</pre>
</div>
<p>使用path参数，您可以告诉浏览器cookie属于哪个路径。默认情况下，cookie属于当前页面。</p>
<div class="cnblogs_code">
<pre><code>document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";</pre>
</div>
<h2>使用JavaScript阅读Cookie</h2>
<p>使用JavaScript，cookie可以像这样读取：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> x = document.cookie;</pre>
</div>
<p>document.cookie将返回一个字符串中的所有cookie，如：cookie1 = value; cookie2 =值; cookie3 =值;</p>
<h2>使用JavaScript更改Cookie</h2>
<p>使用JavaScript，您可以像创建cookie一样更改cookie：</p>
<div class="cnblogs_code">
<pre><code>document.cookie = "username=John Smith; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";</pre>
</div>
<p>旧cookie被覆盖。</p>
<h2>使用JavaScript删除Cookie</h2>
<p>删除cookie非常简单。删除cookie时，不必指定cookie值。只需将expires参数设置为传递日期：</p>
<div class="cnblogs_code">
<pre><code>document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";</pre>
</div>
<p>您应该定义cookie路径以确保删除正确的cookie。如果您未指定路径，某些浏览器将不允许您删除cookie。</p>
<h2>Cookie字符串</h2>
<p>document.cookie属性看起来像普通的文本字符串。但事实并非如此。即使你将一个完整的cookie字符串写入document.cookie，当你再次读出它时，你只能看到它的名称 - 值对。如果您设置了新cookie，则不会覆盖较旧的cookie。新的cookie被添加到document.cookie，所以如果你再次阅读document.cookie，你会得到类似的东西：cookie1 = value; cookie2 = value;<br />如果要查找一个指定cookie的值，则必须编写一个JavaScript函数来搜索cookie字符串中的cookie值。</p>
<h2>JavaScript Cookie示例</h2>
<p>在下面的示例中，我们将创建一个存储访客姓名的cookie。访问者第一次到达网页时，将要求他/她填写他/她的姓名。然后将名称存储在cookie中。下次访问者到达同一页面时，他/她将收到欢迎信息。在这个例子中，我们将创建3个JavaScript函数：</p>
<ol>
<li>用于设置cookie值的函数</li>
<li>获取cookie值的函数</li>
<li>用于检查cookie值的函数</li>
<li>设置Cookie的功能</li>


</ol>
<p>首先，我们创建一个函数将访问者的名称存储在cookie变量中：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">function</span><span style="color: #000000;"> setCookie(cname, cvalue, exdays) {
  </span><span style="color: #0000ff;">var</span> d = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date();
  d.setTime(d.getTime() </span>+ (exdays*24*60*60*1000<span style="color: #000000;">));
  </span><span style="color: #0000ff;">var</span> expires = "expires="+<span style="color: #000000;"> d.toUTCString();
  document.cookie </span>= cname + "=" + cvalue + ";" + expires + ";path=/"<span style="color: #000000;">;
}</span></pre>
</div>
<p>示例说明：<br />上述函数的参数是cookie的名称（cname），cookie的值（cvalue）以及cookie到期之前的天数（exdays）。该函数通过将cookiename，cookie值和expires字符串相加来设置cookie。<br />获取Cookie的功能<br />然后，我们创建一个function返回指定cookie的值：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">function</span><span style="color: #000000;"> getCookie(cname) {
  </span><span style="color: #0000ff;">var</span> name = cname + "="<span style="color: #000000;">;
  </span><span style="color: #0000ff;">var</span> decodedCookie =<span style="color: #000000;"> decodeURIComponent(document.cookie);
  </span><span style="color: #0000ff;">var</span> ca = decodedCookie.split(';'<span style="color: #000000;">);
  </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">var</span> i = 0; i &lt; ca.length; i++<span style="color: #000000;">) {
    </span><span style="color: #0000ff;">var</span> c =<span style="color: #000000;"> ca[i];
    </span><span style="color: #0000ff;">while</span> (c.charAt(0) == ' '<span style="color: #000000;">) {
      c </span>= c.substring(1<span style="color: #000000;">);
    }
    </span><span style="color: #0000ff;">if</span> (c.indexOf(name) == 0<span style="color: #000000;">) {
      </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> c.substring(name.length, c.length);
    }
  }
  </span><span style="color: #0000ff;">return</span> ""<span style="color: #000000;">;
}</span></pre>
</div>
<p>功能说明：<br />将cookiename作为参数（cname）。使用要搜索的文本（cname +&ldquo;=&rdquo;）创建变量（名称）。解码cookie字符串，处理带有特殊字符的cookie，例如'$'将分号上的document.cookie拆分为名为ca的数组（ca = decodingCookie.split（';'））。循环通过ca数组（i = 0; i &lt; ca.length; i ++），并读出每个值c = ca [i]）。如果找到cookie（c.indexOf（name）== 0），则返回cookie的值（c.substring（name.length，c.length））。如果找不到cookie，则返回&ldquo;&rdquo;。<br />检查Cookie的功能<br />最后，我们创建一个函数来检查是否设置了cookie。如果设置了cookie，它将显示问候语。如果未设置cookie，它将显示一个提示框，询问用户的名称，并通过调用setCookie函数将用户名cookie存储365天：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">function</span><span style="color: #000000;"> checkCookie() {
  </span><span style="color: #0000ff;">var</span> username = getCookie("username"<span style="color: #000000;">);
  </span><span style="color: #0000ff;">if</span> (username != ""<span style="color: #000000;">) {
   alert(</span>"Welcome again " +<span style="color: #000000;"> username);
  } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
    username </span>= prompt("Please enter your name:", ""<span style="color: #000000;">);
    </span><span style="color: #0000ff;">if</span> (username != "" &amp;&amp; username != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
      setCookie(</span>"username", username, 365<span style="color: #000000;">);
    }
  }
}</span></pre>
</div>
<p>所有代码都在一起实现</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">function</span><span style="color: #000000;"> setCookie(cname, cvalue, exdays) {
  </span><span style="color: #0000ff;">var</span> d = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date();
  d.setTime(d.getTime() </span>+ (exdays * 24 * 60 * 60 * 1000<span style="color: #000000;">));
  </span><span style="color: #0000ff;">var</span> expires = "expires="+<span style="color: #000000;">d.toUTCString();
  document.cookie </span>= cname + "=" + cvalue + ";" + expires + ";path=/"<span style="color: #000000;">;
}
</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> getCookie(cname) {
  </span><span style="color: #0000ff;">var</span> name = cname + "="<span style="color: #000000;">;
  </span><span style="color: #0000ff;">var</span> ca = document.cookie.split(';'<span style="color: #000000;">);
  </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">var</span> i = 0; i &lt; ca.length; i++<span style="color: #000000;">) {
    </span><span style="color: #0000ff;">var</span> c =<span style="color: #000000;"> ca[i];
    </span><span style="color: #0000ff;">while</span> (c.charAt(0) == ' '<span style="color: #000000;">) {
      c </span>= c.substring(1<span style="color: #000000;">);
    }
    </span><span style="color: #0000ff;">if</span> (c.indexOf(name) == 0<span style="color: #000000;">) {
      </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> c.substring(name.length, c.length);
    }
  }
  </span><span style="color: #0000ff;">return</span> ""<span style="color: #000000;">;
}
</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> checkCookie() {
  </span><span style="color: #0000ff;">var</span> user = getCookie("username"<span style="color: #000000;">);
  </span><span style="color: #0000ff;">if</span> (user != ""<span style="color: #000000;">) {
    alert(</span>"Welcome again " +<span style="color: #000000;"> user);
  } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
    user </span>= prompt("Please enter your name:", ""<span style="color: #000000;">);
    </span><span style="color: #0000ff;">if</span> (user != "" &amp;&amp; user != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
      setCookie(</span>"username", user, 365<span style="color: #000000;">);
    }
  }
}</span></pre>
</div>
<p>上面的示例checkCookie()在页面加载时运行该函数。<br /><a href="https://www.jc2182.com/javascript-bom-cookie/1675.html">更详情的Cookie技术文章</a></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>