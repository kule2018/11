<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修JavaScript实现返回顶部效果' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>JavaScript实现返回顶部效果</center></div><div class='banquan'>原文出处:本文由博客园博主#SY提供。<br/>
原文连接:https://www.cnblogs.com/sunyan-blog/p/11938954.html</div><br>
    <p><span style="font-family: 'Microsoft YaHei'; font-size: 16px;">仿淘宝回到顶部效果</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">需求：当滚动条到一定位置时侧边栏固定在某个位置，再往下滑动到某一位置时显示回到顶部按钮。点击按钮后页面会动态滑到顶部，速度由快到慢向上滑。</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">思路：</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">1、页面加载完毕才能执行js代码</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">　　可以将js代码写在最下边（本次回顶示例是用的这种）</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">　　想写在上边可以用下边这两种：</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">　　&nbsp; &nbsp;&nbsp;①window.onload = function() {...}</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">　　　②window.addEventListener('load', function() {...})</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">2、获取需要用到的元素</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">3、绑定滚动事件 scroll</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">　　当用户滚到banner模块时使侧边栏变为固定状态</span></p>
<div class="cnblogs_code">
<pre><code><span style="font-size: 14px; font-family: 'courier new', courier;"><span style="color: #008080;">1</span> <span style="color: #0000ff;">if</span>(window.pageYOffset &gt;= bannerTop) {    <span style="color: #008000;">//</span><span style="color: #008000;"> window.pageYOffset 屏幕被滚上去的距离</span>
<span style="color: #008080;">2</span>     sliderbar.style.position = 'fixed';   <span style="color: #008000;">//</span><span style="color: #008000;"> 当用户滚到banner模块时使侧边栏变为固定状态</span>
<span style="color: #008080;">3</span>     sliderbar.style.top = sliderbarTop + 'px'<span style="color: #000000;">; 
</span><span style="color: #008080;">4</span> } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
</span><span style="color: #008080;">5</span>     sliderbar.style.position = 'absolute'<span style="color: #000000;">;
</span><span style="color: #008080;">6</span>     sliderbar.style.top = '300px'<span style="color: #000000;">;
</span><span style="color: #008080;">7</span> }</span></pre>
</div>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">　　当用户滚到main模块时显示返回顶部按钮</span></p>
<div class="cnblogs_code">
<pre><code><span style="font-size: 14px; font-family: 'courier new', courier;"><span style="color: #008080;">1</span> <span style="color: #0000ff;">if</span>(window.pageYOffset &gt;= mainTop) {    <span style="color: #008000;">//</span><span style="color: #008000;"> 当用户滚到main模块时显示返回顶部按钮</span>
<span style="color: #008080;">2</span>     goBack.style.display = 'block'<span style="color: #000000;">;
</span><span style="color: #008080;">3</span> } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
</span><span style="color: #008080;">4</span>     goBack.style.display = 'none'<span style="color: #000000;">;
</span><span style="color: #008080;">5</span> }</span></pre>
</div>
<div>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">4、绑定点击事件 click</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">　　点击返回顶部按钮后页面会动态滑到顶部，速度由快到慢向上滑动</span></p>
<div class="cnblogs_code">
<pre><code><span style="font-size: 14px; font-family: 'courier new', courier;"><span style="color: #008080;">1</span> sliderbar.addEventListener('click', <span style="color: #0000ff;">function</span><span style="color: #000000;">() {
</span><span style="color: #008080;">2</span>     animate(window, 0<span style="color: #000000;">);
</span><span style="color: #008080;">3</span> })</span></pre>
</div>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">5、关于动画函数&nbsp;animate(obj,&nbsp;target,&nbsp;callback)&nbsp; </span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">　　这里obj对象即是window；target目标位置即是0；callback是回调函数，没传参的话就可以忽略</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">　　设置一个定时器&nbsp;&nbsp;setInterval();</span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">　　声明一个step作为步长值，值为顶部位置到当前滚动条位置之差除以10（step会越来越小，滚动速度也就越来越慢，实现了滚动条的速度由快到慢的滑上去）</span></p>
<div class="cnblogs_code">
<pre><code><span style="font-size: 14px; font-family: 'courier new', courier;"><span style="color: #0000ff;">var</span> step = (target - window.pageYOffset) / 10;</span></pre>
</div>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">　　然而step并不总是整数，当step不是整数时可以让滚动条再往前走一丢丢。滚动条可以上下滑动，所以step可能大于零也可能小于零。大于零向上取整,小于零向下取整</span></p>
<div class="cnblogs_code">
<pre><code><span style="font-size: 14px; font-family: 'courier new', courier;">step = step &gt; 0 ? Math.ceil(step) : Math.floor(step);</span></pre>
</div>
<p><span style="font-size: 15px; font-family: 'Microsoft YaHei';">　　window.scroll(x,&nbsp;y)&nbsp;滚动到文档特定位置，</span><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">定时器每次调用函数都会往上滑一点</span></p>
<div class="cnblogs_code">
<pre><code><span style="font-size: 14px; font-family: 'courier new', courier;">window.scroll(0, window.pageYOffset + step);</span></pre>
</div>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">　　判断动画是否执行完毕，如果执行完毕则关闭定时器&nbsp; clearInterval();</span></p>
<div class="cnblogs_code">
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><span style="color: #008080;">1</span> <span style="color: #0000ff;">if</span>(window.pageYOffset == target) {  <span style="color: #008000;">//</span><span style="color: #008000;"> 当页面回到顶部后(即动画执行完) 清除定时器</span>
<span style="color: #008080;">2</span> <span style="color: #000000;">    clearInterval(obj.timer);
</span><span style="color: #008080;">3</span>     <span style="color: #008000;">//</span><span style="color: #008000;">  判断是否传了回调函数</span>
<span style="color: #008080;">4</span>     <span style="color: #008000;">/*</span><span style="color: #008000;"> if(callback) { 
</span><span style="color: #008080;">5</span> <span style="color: #008000;">        callback();
</span><span style="color: #008080;">6</span> <span style="color: #008000;">    } </span><span style="color: #008000;">*/</span>
<span style="color: #008080;">7</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 可以简写为下边这种。 &amp;&amp;是短路运算符，存在callback（即第一个式子为true）时才会继续执行callback()</span>
<span style="color: #008080;">8</span>     callback &amp;&amp;<span style="color: #000000;"> callback();
</span><span style="color: #008080;">9</span> }</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 15px;">详细代码如下：</span></p>
<div>
<div class="cnblogs_code">
<pre><code><span style="font-size: 14px; font-family: 'courier new', courier;"><span style="color: #008080;">  1</span> &lt;!DOCTYPE html&gt;
<span style="color: #008080;">  2</span> &lt;html lang="en"&gt;
<span style="color: #008080;">  3</span> &lt;head&gt;
<span style="color: #008080;">  4</span>     &lt;meta charset="UTF-8"&gt;
<span style="color: #008080;">  5</span>     &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
<span style="color: #008080;">  6</span>     &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
<span style="color: #008080;">  7</span>     &lt;title&gt;返回顶部效果&lt;/title&gt;
<span style="color: #008080;">  8</span>     &lt;style&gt;
<span style="color: #008080;">  9</span>         .slider-<span style="color: #000000;">bar {
</span><span style="color: #008080;"> 10</span> <span style="color: #000000;">            position: absolute;
</span><span style="color: #008080;"> 11</span>             left: 47%<span style="color: #000000;">;
</span><span style="color: #008080;"> 12</span> <span style="color: #000000;">            top: 300px;
</span><span style="color: #008080;"> 13</span>             margin-<span style="color: #000000;">left: 600px;
</span><span style="color: #008080;"> 14</span> <span style="color: #000000;">            width: 45px;
</span><span style="color: #008080;"> 15</span> <span style="color: #000000;">            height: 130px;
</span><span style="color: #008080;"> 16</span>             background-<span style="color: #000000;">color: pink;
</span><span style="color: #008080;"> 17</span> <span style="color: #000000;">            cursor: pointer;
</span><span style="color: #008080;"> 18</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 19</span> <span style="color: #000000;">        .w {
</span><span style="color: #008080;"> 20</span> <span style="color: #000000;">            width: 1100px;
</span><span style="color: #008080;"> 21</span> <span style="color: #000000;">            margin: 10px auto;
</span><span style="color: #008080;"> 22</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 23</span> <span style="color: #000000;">        .header {
</span><span style="color: #008080;"> 24</span> <span style="color: #000000;">            height: 150px;
</span><span style="color: #008080;"> 25</span>             background-<span style="color: #000000;">color: purple;
</span><span style="color: #008080;"> 26</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 27</span> <span style="color: #000000;">        .banner {
</span><span style="color: #008080;"> 28</span> <span style="color: #000000;">            height: 250px;
</span><span style="color: #008080;"> 29</span>             background-<span style="color: #000000;">color: skyblue;
</span><span style="color: #008080;"> 30</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 31</span> <span style="color: #000000;">        .main {
</span><span style="color: #008080;"> 32</span> <span style="color: #000000;">            height: 1000px;
</span><span style="color: #008080;"> 33</span>             background-<span style="color: #000000;">color: yellowgreen;
</span><span style="color: #008080;"> 34</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 35</span> <span style="color: #000000;">        span {
</span><span style="color: #008080;"> 36</span> <span style="color: #000000;">            display: none;
</span><span style="color: #008080;"> 37</span> <span style="color: #000000;">            position: absolute;
</span><span style="color: #008080;"> 38</span>             bottom: 0<span style="color: #000000;">;
</span><span style="color: #008080;"> 39</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 40</span>     &lt;/style&gt;
<span style="color: #008080;"> 41</span> &lt;/head&gt;
<span style="color: #008080;"> 42</span> &lt;body&gt;
<span style="color: #008080;"> 43</span>     &lt;div class="slider-bar"&gt;
<span style="color: #008080;"> 44</span>         &lt;span class="goBack"&gt;返回顶部&lt;/span&gt;
<span style="color: #008080;"> 45</span>     &lt;/div&gt;
<span style="color: #008080;"> 46</span>     &lt;div class="header w"&gt;头部区域&lt;/div&gt;
<span style="color: #008080;"> 47</span>     &lt;div class="banner w"&gt;banner区域&lt;/div&gt;
<span style="color: #008080;"> 48</span>     &lt;div class="main w"&gt;主体部分&lt;/div&gt;
<span style="color: #008080;"> 49</span> 
<span style="color: #008080;"> 50</span>     &lt;script&gt;
<span style="color: #008080;"> 51</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> querySelector() 方法返回匹配指定选择器（）的第一个元素，传的必须是字符串</span>
<span style="color: #008080;"> 52</span>         <span style="color: #0000ff;">var</span> sliderbar = document.querySelector('.slider-bar'<span style="color: #000000;">);
</span><span style="color: #008080;"> 53</span>         <span style="color: #0000ff;">var</span> banner = document.querySelector('.banner'<span style="color: #000000;">);
</span><span style="color: #008080;"> 54</span>         <span style="color: #0000ff;">var</span> bannerTop = banner.offsetTop; <span style="color: #008000;">//</span><span style="color: #008000;"> banner模块距离顶部的长度</span>
<span style="color: #008080;"> 55</span>         <span style="color: #0000ff;">var</span> sliderbarTop = sliderbar.offsetTop - bannerTop; <span style="color: #008000;">//</span><span style="color: #008000;"> 侧边栏固定后距离顶部的长度</span>
<span style="color: #008080;"> 56</span> 
<span style="color: #008080;"> 57</span>         <span style="color: #0000ff;">var</span> main = document.querySelector('.main'<span style="color: #000000;">);
</span><span style="color: #008080;"> 58</span>         <span style="color: #0000ff;">var</span> goBack = document.querySelector('.goBack'<span style="color: #000000;">);
</span><span style="color: #008080;"> 59</span>         <span style="color: #0000ff;">var</span> mainTop = main.offsetTop;  <span style="color: #008000;">//</span><span style="color: #008000;"> main模块距离顶部的长度</span>
<span style="color: #008080;"> 60</span>         
<span style="color: #008080;"> 61</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> scroll 屏幕发生滚动事件时执行</span>
<span style="color: #008080;"> 62</span>         document.addEventListener('scroll', <span style="color: #0000ff;">function</span><span style="color: #000000;">() {
</span><span style="color: #008080;"> 63</span>             <span style="color: #0000ff;">if</span>(window.pageYOffset &gt;= bannerTop) {    <span style="color: #008000;">//</span><span style="color: #008000;"> window.pageYOffset 屏幕被滚上去的距离</span>
<span style="color: #008080;"> 64</span>                 sliderbar.style.position = 'fixed';   <span style="color: #008000;">//</span><span style="color: #008000;"> 当用户滚到banner模块时使侧边栏变为固定状态</span>
<span style="color: #008080;"> 65</span>                 sliderbar.style.top = sliderbarTop + 'px'<span style="color: #000000;">; 
</span><span style="color: #008080;"> 66</span>             } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
</span><span style="color: #008080;"> 67</span>                 sliderbar.style.position = 'absolute'<span style="color: #000000;">;
</span><span style="color: #008080;"> 68</span>                 sliderbar.style.top = '300px'<span style="color: #000000;">;
</span><span style="color: #008080;"> 69</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 70</span>             
<span style="color: #008080;"> 71</span>             <span style="color: #0000ff;">if</span>(window.pageYOffset &gt;= mainTop) {    <span style="color: #008000;">//</span><span style="color: #008000;"> 当用户滚到main模块时显示返回顶部按钮</span>
<span style="color: #008080;"> 72</span>                 goBack.style.display = 'block'<span style="color: #000000;">;
</span><span style="color: #008080;"> 73</span>             } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
</span><span style="color: #008080;"> 74</span>                 goBack.style.display = 'none'<span style="color: #000000;">;
</span><span style="color: #008080;"> 75</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 76</span>             
<span style="color: #008080;"> 77</span> <span style="color: #000000;">        });
</span><span style="color: #008080;"> 78</span>         sliderbar.addEventListener('click', <span style="color: #0000ff;">function</span><span style="color: #000000;">() {
</span><span style="color: #008080;"> 79</span>             animate(window, 0<span style="color: #000000;">);
</span><span style="color: #008080;"> 80</span> <span style="color: #000000;">        })
</span><span style="color: #008080;"> 81</span> 
<span style="color: #008080;"> 82</span>         <span style="color: #008000;">/*</span><span style="color: #008000;"> 动画函数：
</span><span style="color: #008080;"> 83</span> <span style="color: #008000;">         *  obj 做动画的对象（这里就是指window）
</span><span style="color: #008080;"> 84</span> <span style="color: #008000;">         *  target 目标位置（顶部）
</span><span style="color: #008080;"> 85</span> <span style="color: #008000;">         *  callback 回调函数（没有传参的话就不执行）
</span><span style="color: #008080;"> 86</span>          <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 87</span>         <span style="color: #0000ff;">function</span><span style="color: #000000;"> animate(obj, target, callback) {
</span><span style="color: #008080;"> 88</span>             clearInterval(obj.timer);  <span style="color: #008000;">//</span><span style="color: #008000;"> 先清除定时器，保证只有一个定时器在执行，以免出现bug</span>
<span style="color: #008080;"> 89</span>             obj.timer = setInterval(<span style="color: #0000ff;">function</span><span style="color: #000000;">() {
</span><span style="color: #008080;"> 90</span>                 <span style="color: #008000;">//</span><span style="color: #008000;"> window.pageYOffset距离顶部的距离（是负的）</span>
<span style="color: #008080;"> 91</span>                 <span style="color: #0000ff;">var</span> step = (target - window.pageYOffset) / 10;  <span style="color: #008000;">//</span><span style="color: #008000;"> step步长（让页面速度逐渐变慢的滑动上去）</span>
<span style="color: #008080;"> 92</span>                 step = step &gt; 0 ? Math.ceil(step) : Math.floor(step); <span style="color: #008000;">//</span><span style="color: #008000;"> step并不总是整数。大于零向上取整,小于零向下取整</span>
<span style="color: #008080;"> 93</span>                 <span style="color: #0000ff;">if</span>(window.pageYOffset == target) {  <span style="color: #008000;">//</span><span style="color: #008000;"> 当页面回到顶部后(即动画执行完) 清除定时器</span>
<span style="color: #008080;"> 94</span> <span style="color: #000000;">                    clearInterval(obj.timer);
</span><span style="color: #008080;"> 95</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">  判断是否传了回调函数</span>
<span style="color: #008080;"> 96</span>                     <span style="color: #008000;">/*</span><span style="color: #008000;"> if(callback) { 
</span><span style="color: #008080;"> 97</span> <span style="color: #008000;">                        callback();
</span><span style="color: #008080;"> 98</span> <span style="color: #008000;">                    } </span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 99</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> 可以简写为下边这种。 &amp;&amp;是短路运算符，存在callback（即第一个式子为true）时才会继续执行callback()</span>
<span style="color: #008080;">100</span>                     callback &amp;&amp;<span style="color: #000000;"> callback();
</span><span style="color: #008080;">101</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">102</span>                 <span style="color: #008000;">//</span><span style="color: #008000;"> window.scroll(x, y) 滚动到文档特定位置</span>
<span style="color: #008080;">103</span>                 window.scroll(0, window.pageYOffset +<span style="color: #000000;"> step);
</span><span style="color: #008080;">104</span>             }, 15<span style="color: #000000;">);
</span><span style="color: #008080;">105</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">106</span>     &lt;/script&gt;
<span style="color: #008080;">107</span> &lt;/body&gt;
<span style="color: #008080;">108</span> &lt;/html&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>