<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Node JS爬虫： 阮老师网站背景图' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Node JS爬虫： 阮老师网站背景图</center></div><div class='banquan'>原文出处:本文由博客园博主周明杰提供。<br/>
原文连接:https://www.cnblogs.com/zhoumingjie/p/11950322.html</div><br>
    <blockquote>
<p>小白，轻喷，本文教你三分钟入门爬虫</p>
</blockquote>
<h3 id="前言">前言</h3>
<p>有一天发现，阮一峰老师的博客图片很好看，想收藏一下，因为几百张，一张张下载太慢，朋友推荐了个谷歌插件（Fatkun）确实挺好用的，这之后就对爬虫有了兴趣，这个项目会整理一些简单切实用的爬虫代码 <strong><a href="https://github.com/mingjiezhou/crawler-img">crawler-img</a></strong>，都是基于 Node 实现。</p>
<p>使用：</p>
<ol>
<li>npm install</li>
<li>部分需求直接用 node 指令执行相应的 js 文件就可以实现</li>
</ol>
<h3 id="简单案例爬取阮老师网站背景图并保存本地">简单案例：爬取阮老师网站背景图并保存本地</h3>
<p><strong>一句话介绍</strong>：request 模块可以简化 Node 环境下的 http 请求操作，fs 是node 自带的模块，用来读写文件</p>
<p>安装依赖：</p>
<pre><code><code>npm install request --save</code></pre>
<p>引入</p>
<pre class="javascript"><code>let request = require(&#39;request&#39;);
let fs = require(&#39;fs&#39;);</code></pre>
<p>核心代码（其实总共也就这么多~）：</p>
<pre class="javascript"><code>for (let i=1; i&lt; 20; i++) {
    request(`http://www.ruanyifeng.com/images_pub/pub_${i}.jpg`).pipe(fs.createWriteStream(`img/${i}.png`))
}</code></pre>
<p>要注意控制并发量，对调用频率做个限制，改进如下</p>
<pre><code><code>function getImg(i, times){
  return new Promise(function(resolve, reject){
    setTimeout(function(){
      request(`http://www.ruanyifeng.com/images_pub/pub_${i}.jpg`).pipe(fs.createWriteStream(`img/${i}.png`))
      resolve();
    },times)
  })
  
}
async function loop() {
  for (let i=1; i&lt;356; i++) {
    await getImg(i, 300); //每秒调用三次
  }
}
loop();</code></pre>
<h3 id="效果图">效果图</h3>
<p><img src="./images/Node JS爬虫： 阮老师网站背景图0.png" /></p>
<h3 id="总结">总结</h3>
<p>爬虫入门是不是很简单又好玩，你学会了吗？</p>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>