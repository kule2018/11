<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Vue学习系列(四)——理解生命周期和钩子' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Vue学习系列(四)——理解生命周期和钩子</center></div><div class='banquan'>原文出处:本文由博客园博主艾三元提供。<br/>
原文连接:https://www.cnblogs.com/i3yuan/p/11779714.html</div><br>
    <h1><span style="color: #2d94de;">&nbsp;前言</span></h1>
<p>&nbsp; &nbsp; 在<a href="https://www.cnblogs.com/i3yuan/p/11747017.html" target="_blank">上一篇</a>中，我们对平时进行vue开发中遇到的常用指令进行归类说明讲解，大概已经学会了怎么去实现数据绑定，以及实现动态的实现数据展示功能，运用指令，可以更好更快的进行开发。而在这一篇中，我们将通过实例，探究vue的生命周期。</p>
<p>&nbsp; &nbsp; 万物皆有灵，世间万物都拥有灵魂，小到山河湖海，花草树木，蚂蚁到人类，以及所有的动植物，大到地球星空和宇宙，都拥有灵魂，可以说他们都是有生命的，只是他们的生命形态是我们人类所不能理解的存在。在生产中，生命周期通俗来讲，就是从自然中来回到自然中去的全过程，也就是从采集材料设计，到加工生产后流通使用的过程，以及产品报废，进而回归大自然的过程，这整个过程就是一个完整的生命周期。因此，在开发应用项目的中，从启动页面的加载，页面渲染到销毁，也算是生命周期。Vue把整个生命周期划分为创建、挂载、更新、销毁等阶段，每个阶段都会给一些&ldquo;钩子&rdquo;让我们来做一些我们想实现的动作。这里的&ldquo;钩子&rdquo;可以这么理解，就是在每一个阶段用钩子钩住，并进行响应的操作。&nbsp;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="./images/Vue学习系列(四)——理解生命周期和钩子0.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp; &nbsp; &nbsp;学习生命周期，可以使我们更好的理解Vue的生命机制，通过了解每个阶段的钩子，可以更好的实现我们的业务代码，处理更加复杂的业务逻辑。</p>
<h1><span style="color: #2d94de;">&nbsp;内容</span></h1>
<p>&nbsp; &nbsp; Vue每一个组件都有属于自己的生命周期，从开始创建、初始化数据、编译模板、挂载Dom、渲染&rarr;更新&rarr;渲染、卸载等这就是一个组件的生命周期。</p>
<p>&nbsp; &nbsp; 在整个生命周期内，总共分为8个阶段创建前/后，载入前/后，更新前/后，销毁前/后。</p>
<p><img src="./images/Vue学习系列(四)——理解生命周期和钩子1.png" alt="" /></p>
<h1><span style="color: #2d94de;">&nbsp;执行顺序</span></h1>
<p><img src="./images/Vue学习系列(四)——理解生命周期和钩子2.png" alt="" /></p>
<p>&nbsp; &nbsp; *图片来自<a href="https://cn.vuejs.org/v2/guide/instance.html#%E5%AE%9E%E4%BE%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90" target="_blank">官网</a>，只要你理解了这张图，也就对Vue的生命周期有了一个大致的了解。</p>
<p>&nbsp; &nbsp; 在谈到Vue的生命周期的时候，我们首先需要创建一个实例：</p>
<h1><span style="color: #2d94de;">&nbsp;开始</span></h1>
<h2><span style="font-family: 楷体; font-size: 14pt;">一、</span><span style="font-family: 楷体;">创建前/后</span>：</h2>
<p>1.<span style="font-size: 14pt; background-color: #ffff00;">beforeCreate</span>-创建前 ：实例创建前：这个阶段实例的data、methods是读不到的（el 和 data 并未初始化）</p>
<div class="cnblogs_code">
<pre><code>  <span style="color: #0000ff;">var</span> app = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
      el: </span><span style="color: #800000;">'</span><span style="color: #800000;">#app</span><span style="color: #800000;">'</span><span style="color: #000000;">,
      data: {
          message : </span><span style="color: #800000;">"</span><span style="color: #800000;">这是艾三元的主页</span><span style="color: #800000;">"</span><span style="color: #000000;"> 
      },
       beforeCreate: function () {
                console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">beforeCreate 组件刚刚被创建,组件属性计算前状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
               console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span> , <span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$el); <span style="color: #008000;">//</span><span style="color: #008000;">undefined</span>
               console.log(<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$data); <span style="color: #008000;">//</span><span style="color: #008000;">undefined </span>
               console.log(<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.message)  <span style="color: #008000;">//</span><span style="color: #008000;">undefined</span>
<span style="color: #000000;">        },
})</span></pre>
</div>
<p><img src="./images/Vue学习系列(四)——理解生命周期和钩子3.png" alt="" /></p>
<p><span style="font-size: 14pt;">2.<span style="background-color: #ffff00;">created</span></span>-创建完成 ：实例创建后：这个阶段已经完成了数据观测<span lang="EN-US">(data observer)，属性和方法的运算，<span lang="EN-US"> watch/event 事件回调。<span lang="EN-US">mount挂载阶段还没开始，<span lang="EN-US">$el 属性目前不可见，数据并没有在<span lang="EN-US">DOM元素上进行渲染（完成了data数据的初始化，el没有）</span></span></span></span></span></p>
<div class="cnblogs_code">
<pre><code> <span style="color: #0000ff;">var</span> app = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
      el: </span><span style="color: #800000;">'</span><span style="color: #800000;">#app</span><span style="color: #800000;">'</span><span style="color: #000000;">,
      data: {
          message : </span><span style="color: #800000;">"</span><span style="color: #800000;">这是艾三元的主页</span><span style="color: #800000;">"</span><span style="color: #000000;"> 
      },
        created: function () {
            console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">created 组件创建完毕,属性已经绑定但dom还未生成的状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$el); <span style="color: #008000;">//</span><span style="color: #008000;">undefined</span>
               console.log(<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$data); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化 </span>
               console.log(<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.message); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化</span>
<span style="color: #000000;">        },
})</span></pre>
</div>
<p><img src="./images/Vue学习系列(四)——理解生命周期和钩子4.png" alt="" /></p>
<h2><span style="font-family: 楷体; font-size: 14pt;">&nbsp;二、载入前/后</span></h2>
<p><span style="font-size: 14pt;">1.<span style="background-color: #ffff00;">beforeMount&nbsp;</span>：</span>准备载入&mdash;&mdash;在挂载开始之前被调用：相关的 render 函数首次被调用。程序运行，控制台看输出 （完成了虚拟el和data初始化）</p>
<div class="cnblogs_code">
<pre><code>  <span style="color: #0000ff;">var</span> app = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
      el: </span><span style="color: #800000;">'</span><span style="color: #800000;">#app</span><span style="color: #800000;">'</span><span style="color: #000000;">,
      data: {
          message : </span><span style="color: #800000;">"</span><span style="color: #800000;">这是艾三元的主页</span><span style="color: #800000;">"</span><span style="color: #000000;"> 
      }, 
        beforeMount: function () {
            console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">beforeMount 模板挂载前状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + (<span style="color: #0000ff;">this</span>.$el)); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化</span>
            console.log(<span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
               console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$data); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化  </span>
               console.log(<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.message); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化  </span>
<span style="color: #000000;">        },
})</span></pre>
</div>
<p><img src="./images/Vue学习系列(四)——理解生命周期和钩子5.png" alt="" /></p>
<p><span style="font-size: 14pt;">&nbsp;2.<span style="background-color: #ffff00;">mounted&nbsp;</span>：</span>挂载完成&mdash;&mdash;<span lang="EN-US">el选项的<span lang="EN-US">DOM节点 被新创建的<span lang="EN-US"> vm.$el 替换，并挂载到实例上去之后调用此生命周期函数。此时实例的数据在<span lang="EN-US">DOM节点上进行渲染（完成了真实el和data初始化）</span></span></span></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> app = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
      el: </span><span style="color: #800000;">'</span><span style="color: #800000;">#app</span><span style="color: #800000;">'</span><span style="color: #000000;">,
      data: {
          message : </span><span style="color: #800000;">"</span><span style="color: #800000;">这是艾三元的主页</span><span style="color: #800000;">"</span><span style="color: #000000;"> 
      },
        mounted: function () {
            console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">mounted 模板挂载结束状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$el); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化</span>
            console.log(<span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);    
               console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$data); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化</span>
               console.log(<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.message); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化 </span>
<span style="color: #000000;">        },
})</span></pre>
</div>
<p><img src="./images/Vue学习系列(四)——理解生命周期和钩子6.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;这个时候，页面渲染的四个阶段已经完成了，我们看看流程：（刚开始的时候<span lang="EN-US">beforeCreate阶段，数据和页面都没有渲染，但是页面的静态数据已经被加载出来，然后一步一步，先<span lang="EN-US">vue实例，然后挂载，到最后页面渲染完成）</span></span></p>
<h2><span style="font-family: 楷体; font-size: 14pt;">三、更新前/后</span></h2>
<p><span style="font-size: 14pt;">1.<span style="background-color: #ffff00;">beforeUpdate&nbsp;</span>：</span>更新Data之前&mdash;&mdash;数据更新时调用，但不进行DOM重新渲染，在数据更新时DOM没渲染前可以在这个生命函数里进行状态处理</p>
<p>当修改vue实例的data时，vue就会自动帮我们更新渲染视图，在这个过程中，vue提供了beforeUpdate的钩子给我们，在检测到我们要修改数据的时候，更新渲染视图之前就会触发钩子beforeUpdate。</p>
<div class="cnblogs_code">
<pre><code>  <span style="color: #0000ff;">var</span> app = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
      el: </span><span style="color: #800000;">'</span><span style="color: #800000;">#app</span><span style="color: #800000;">'</span><span style="color: #000000;">,
      data: {
          message : </span><span style="color: #800000;">"</span><span style="color: #800000;">这是艾三元的主页</span><span style="color: #800000;">"</span><span style="color: #000000;"> 
      },
        beforeUpdate: function () {
            console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">beforeUpdate 更新前状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
            console.log(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);   
               console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$data); 
               console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.message); 
        },
})</span></pre>
</div>
<p><strong>控制台输入</strong><strong> app.message = '艾三元'</strong></p>
<p><strong><img src="./images/Vue学习系列(四)——理解生命周期和钩子7.png" alt="" /></strong></p>
<p>由图看来，我们的 Data 数据已经更新了，但是页面里还没有更新</p>
<p><span style="font-size: 14pt;">2.<span style="background-color: #ffff00;">update</span></span> ：这个状态下数据更新并且<span lang="EN-US">DOM重新渲染，当这个生命周期函数被调用时，组件<span lang="EN-US"> DOM 已经更新，所以你现在可以执行依赖于<span lang="EN-US"> DOM 的操作。当实例每次进行数据更新时<span lang="EN-US">updated都会执行</span></span></span></span></p>
<div class="cnblogs_code">
<pre><code> <span style="color: #0000ff;">var</span> app = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
      el: </span><span style="color: #800000;">'</span><span style="color: #800000;">#app</span><span style="color: #800000;">'</span><span style="color: #000000;">,
      data: {
          message : </span><span style="color: #800000;">"</span><span style="color: #800000;">这是艾三元的主页</span><span style="color: #800000;">"</span><span style="color: #000000;"> 
      }, 
        updated: function () {
            console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">updated 更新完成状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
            console.log(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.$el); 
               console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$data); 
               console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.message);
        },
})</span></pre>
</div>
<p><img src="./images/Vue学习系列(四)——理解生命周期和钩子8.png" alt="" /></p>
<h2><span style="font-family: 楷体; font-size: 14pt;">四、销毁前/后</span></h2>
<p><span style="font-size: 14pt;">1.<span style="background-color: #ffff00;">beforeDestroy</span></span> ：页面销毁前&mdash;&mdash;实例销毁之前调用。调用实例的<code>destroy( )</code>方法可以销毁当前的组件，在销毁前，会触发beforeDestroy钩子。</p>
<div class="cnblogs_code">
<pre><code>  <span style="color: #0000ff;">var</span> app = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
      el: </span><span style="color: #800000;">'</span><span style="color: #800000;">#app</span><span style="color: #800000;">'</span><span style="color: #000000;">,
      data: {
          message : </span><span style="color: #800000;">"</span><span style="color: #800000;">这是艾三元的主页</span><span style="color: #800000;">"</span><span style="color: #000000;"> 
      },
        beforeDestroy: function () {
            console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">beforeDestroy 销毁前状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
            console.log(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);    
               console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$data); 
               console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.message); 
        },
})</span></pre>
</div>
<p><strong>控制台输入</strong><strong> app.$destroy()</strong></p>
<p><strong><img src="./images/Vue学习系列(四)——理解生命周期和钩子9.png" alt="" /></strong></p>
<p><span style="font-size: 14pt;">&nbsp;2.<span style="background-color: #ffff00;">destroyed</span></span> ：销毁完成&mdash;&mdash;Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> app = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
      el: </span><span style="color: #800000;">'</span><span style="color: #800000;">#app</span><span style="color: #800000;">'</span><span style="color: #000000;">,
      data: {
          message : </span><span style="color: #800000;">"</span><span style="color: #800000;">这是艾三元的主页</span><span style="color: #800000;">"</span><span style="color: #000000;"> 
      },
        destroyed: function () {
            console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">destroyed 销毁完成状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
            console.log(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);  
               console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$data); 
               console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.message)
        }
})</span></pre>
</div>
<p>&nbsp;<img src="./images/Vue学习系列(四)——理解生命周期和钩子10.png" alt="" /></p>
<p>这个时候我们可以看到，vue 实例被销毁后，再修改 Data 页面也已经不能修改页面 DOM 了。</p>
<h1><span style="color: #2d94de;">&nbsp;源码</span></h1>
<div class="cnblogs_code" onclick="cnblogs_code_show('e7a23664-16fb-4fce-aedb-2b96d640a222')"><img id="code_img_closed_e7a23664-16fb-4fce-aedb-2b96d640a222" class="code_img_closed" src="./images/Vue学习系列(四)——理解生命周期和钩子11.png" alt="" /><img id="code_img_opened_e7a23664-16fb-4fce-aedb-2b96d640a222" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e7a23664-16fb-4fce-aedb-2b96d640a222',event)" src="./images/Vue学习系列(四)——理解生命周期和钩子12.png" alt="" />
<div id="cnblogs_code_open_e7a23664-16fb-4fce-aedb-2b96d640a222" class="cnblogs_code_hide">
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;script type=<span style="color: #800000;">"</span><span style="color: #800000;">text/javascript</span><span style="color: #800000;">"</span> src=<span style="color: #800000;">"</span><span style="color: #800000;">https://cdn.jsdelivr.net/vue/2.1.3/vue.js</span><span style="color: #800000;">"</span>&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div id=<span style="color: #800000;">"</span><span style="color: #800000;">app</span><span style="color: #800000;">"</span>&gt;
     &lt;p&gt;{{ message }}&lt;/p&gt;
&lt;/div&gt;

&lt;script type=<span style="color: #800000;">"</span><span style="color: #800000;">text/javascript</span><span style="color: #800000;">"</span>&gt;
    
  <span style="color: #0000ff;">var</span> app = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
      el: </span><span style="color: #800000;">'</span><span style="color: #800000;">#app</span><span style="color: #800000;">'</span><span style="color: #000000;">,
      data: {
          message : </span><span style="color: #800000;">"</span><span style="color: #800000;">这是艾三元的主页</span><span style="color: #800000;">"</span><span style="color: #000000;"> 
      },
        beforeCreate: function () {
           console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">beforeCreate 组件刚刚被创建,组件属性计算前状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
           console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span> , <span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$el); <span style="color: #008000;">//</span><span style="color: #008000;">undefined</span>
           console.log(<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$data); <span style="color: #008000;">//</span><span style="color: #008000;">undefined </span>
           console.log(<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.message)  <span style="color: #008000;">//</span><span style="color: #008000;">undefined</span>
<span style="color: #000000;">        },
        created: function () {
           console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">created 组件创建完毕,属性已经绑定但dom还未生成的状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
           console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$el); <span style="color: #008000;">//</span><span style="color: #008000;">undefined</span>
           console.log(<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$data); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化 </span>
           console.log(<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.message); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化</span>
<span style="color: #000000;">        },
        beforeMount: function () {
           console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">beforeMount 模板挂载前状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
           console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + (<span style="color: #0000ff;">this</span>.$el)); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化</span>
           console.log(<span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
           console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$data); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化  </span>
           console.log(<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.message); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化  </span>
<span style="color: #000000;">        },
        mounted: function () {
            console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">mounted 模板挂载结束状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$el); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化</span>
            console.log(<span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);    
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.$data); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化</span>
            console.log(<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span>.message); <span style="color: #008000;">//</span><span style="color: #008000;">已被初始化 </span>
<span style="color: #000000;">        },
        beforeUpdate: function () {
            console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">beforeUpdate 更新前状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
            console.log(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);   
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$data); 
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.message); 
        },
        updated: function () {
            console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">updated 更新完成状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
            console.log(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.$el); 
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$data); 
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.message);
        },
        beforeDestroy: function () {
            console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">beforeDestroy 销毁前状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
            console.log(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);    
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$data); 
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.message); 
        },
        destroyed: function () {
            console.group(</span><span style="color: #800000;">'</span><span style="color: #800000;">destroyed 销毁完成状态===============》</span><span style="color: #800000;">'</span><span style="color: #000000;">);
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">el     : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
            console.log(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);  
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">data   : </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$data); 
            console.log(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">color:red</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">message: </span><span style="color: #800000;">"</span> + <span style="color: #0000ff;">this</span><span style="color: #000000;">.message)
        }
    })
</span>&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p class="note" style="background: #fff4cc; border-left: 5px solid #ffe070; color: #2f4f4f; font-family: 'Hiragino Sans GB', 'Helvetica Neue', Helvetica, 'Segoe UI', 'Micrsoft YaHei', '微软雅黑', 'WenQuanYi Micro Hei', Tahoma, Arial, sans-serif; font-size: 16px;">附加说明</p>
<p><span style="color: #333333;">1.说说钩子是什么时候触发的？</span></p>
<p><span style="color: #333333;">Vue文档源码：在实例化的时候</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">function Vue(opt){    

    </span><span style="color: #0000ff;">this</span><span style="color: #000000;">._init(opt)

}
Vue.prototype._init(opt){
    ... 合并选项
    ... 设置初始值 ，事件 等数据
    initLifecycle(vm)
    callHook(vm, </span><span style="color: #800000;">'</span><span style="color: #800000;">beforeCreate</span><span style="color: #800000;">'</span><span style="color: #000000;">);
    ... 初始化选项等数据
    callHook(vm, </span><span style="color: #800000;">'</span><span style="color: #800000;">created</span><span style="color: #800000;">'</span><span style="color: #000000;">);
    ...获取挂载的DOM 父节点
    callHook(vm, </span><span style="color: #800000;">'</span><span style="color: #800000;">beforeMount</span><span style="color: #800000;">'</span><span style="color: #000000;">);
    ...解析模板成渲染函数，并执行渲染函数，生成DOM插入页面
    vm._isMounted </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
    callHook(vm, </span><span style="color: #800000;">'</span><span style="color: #800000;">mounted</span><span style="color: #800000;">'</span><span style="color: #000000;">);
}
</span><span style="color: #008000;">//</span><span style="color: #008000;"> 组件更新时会调用这个函数</span><span style="color: #000000;">
Vue.prototype._update </span>=<span style="color: #000000;"> function(

    vnode, hydrating

) {    

    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (vm._isMounted) {

        callHook(vm, </span><span style="color: #800000;">'</span><span style="color: #800000;">beforeUpdate</span><span style="color: #800000;">'</span><span style="color: #000000;">);
    }
    ...重新调用渲染函数，对比旧节点和新节点，得到最小差异，然后只更新这部分页面
    callHook(vm, </span><span style="color: #800000;">'</span><span style="color: #800000;">updated</span><span style="color: #800000;">'</span><span style="color: #000000;">);
}
</span><span style="color: #008000;">//</span><span style="color: #008000;"> 节点被移除时会调用这个函数</span><span style="color: #000000;">
Vue.prototype.$destroy </span>=<span style="color: #000000;"> function() {
    callHook(vm, </span><span style="color: #800000;">'</span><span style="color: #800000;">beforeDestroy</span><span style="color: #800000;">'</span><span style="color: #000000;">);
    vm._isBeingDestroyed </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
    ...实例被消除，移除所有 watcher
    vm._isDestroyed </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
    ...DOM被移除
    callHook(vm, </span><span style="color: #800000;">'</span><span style="color: #800000;">destroyed</span><span style="color: #800000;">'</span><span style="color: #000000;">);
}</span></pre>
</div>
<p>&nbsp;在执行钩子的时候，会触发这个函数，遍历执行，绑定上下文</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">function callHook(vm, hook) {    

    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 是自己传入的 created 等回调</span>

    <span style="color: #0000ff;">var</span> handlers =<span style="color: #000000;"> vm.$options[hook];    

    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (handlers) {        

    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> i = <span style="color: #800080;">0</span>,j = handlers.length; i &lt; j; i++<span style="color: #000000;">) {

            handlers[i].call(vm);
        }
    }
}</span></pre>
</div>
<h1><span style="color: #2d94de;">总结</span></h1>
<p>1.通过简单了解 Vue&nbsp;生命周期的八个阶段，可以应用在之后的开发中，针对不同的阶段的钩子采取不同的操作，更好的实现我们的业务代码，处理更加复杂的业务逻辑。</p>
<p>2.参考资料<a href="https://cn.vuejs.org/v2/guide/instance.html" target="_blank">Vue官网</a></p>
<p>3.下一篇开始创建项目应用</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>