<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修bootstrap-fileinput详细说明与使用' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>bootstrap-fileinput详细说明与使用</center></div><div class='banquan'>原文出处:本文由博客园博主Angelasp提供。<br/>
原文连接:https://www.cnblogs.com/angelasp/p/12098899.html</div><br>
    <h1>介绍</h1>
<p align="left">bootstrap-fileinput是一款非常优秀的HTML5文件上传插件，支持文件预览、多文件上传等一系列特性。</p>
<p align="left">一款非常优秀的HTML5文件上传插件，支持bootstrap 3.x 和4.x版本，具有非常多的特性:多文件类型上传。这个插件能最简单的帮你完成文件上传功能，且使用bootstrap样式。还支持多种文件的预览，images, text, html, video, audio, flash。另外还支持ajax方式上传文件，可以看到上传进度。支持拖拽的方式添加和删除文件。</p>
<h1>插件特性</h1>
<p><strong>注意</strong></p>
<p>这个插件的最新版本是v4.4.0（开发中）。 有关详细信息，请参阅更改日志。 插件特性主要有两方面：</p>
<h2>文件输入特性</h2>
<p align="left">1、&nbsp; 该插件将一个简单的HTML文件输入转换为高级文件选择器的控件。在不支持JQuery或Javascript的浏览器中将帮助回退到普通HTML文件输入。</p>
<p align="left">2、&nbsp; 文件输入由以下三个部分组成，每个部分都包含用于控制显示的选项和模板：</p>
<ul>
<li>文件标题部分：显示所选文件的简要信息。</li>
<li>文件操作按钮部分：浏览，删除和上传文件。</li>
<li>文件预览部分：在客户端上显示所选文件进行预览（支持预览图像，文本，Flash和视频文件类型）。其他文件类型将显示为默认的缩略图。</li>
</ul>
<p align="left">3、&nbsp; 如果设置<code>&lt;input&gt;</code>标签的<code>class</code>属性为<code>file</code>，该插件将自动将它转换为<code>type</code>属性为<code>file</code>的高级文件输入选择器。高级文件输入选择器的所有参数都可以通过<code>HTML5</code>的<code>data-*</code>属性传递。</p>
<p align="left">4、&nbsp; 能够选择和预览多个文件。使用HTML5文件阅读器API来读取和预览文件。在选择多个文件的情况下显示正在加载到预览区域的每个文件的进度。</p>
<p align="left">5、&nbsp; 提供预定义的模板和CSS类，可以根据您的需要更改您的文件输入显示风格。</p>
<p align="left">6、&nbsp; 能够配置插件初始化具有初始标题的<code>images/files</code>类型文件预览 （对于记录更新场景很有用）。<code>initialPreview</code>、&nbsp;<code>initialPreviewConfig</code>&nbsp;和<code>initialCaption</code>&nbsp;属性来配置它。</p>
<p align="left">7、&nbsp; 能够将简要预览内容缩放为详细预览。在预览中查看缩放内容的幻灯片，最大限度地实现无边界或全屏预览。</p>
<p align="left">8、&nbsp; 能够通过拖放操作在初始预览中对内容进行排序/重排。</p>
<p align="left">9、&nbsp; 能够完全主题化控件，并控制样式和布局。</p>
<p align="left">10、 通过语言/翻译支持同一页面上的多语言控件。</p>
<p align="left">11、 显示/隐藏任何或所有以下内容的选项：</p>
<p align="left">12、自定义显示整个插件，标题容器，标题文本，预览容器，预览图像和预览状态的目标容器元素的位置。</p>
<p align="left">13、 对于文本文件预览，将文本自动缩隐为缩略图宽度，并显示一个缩略指示器链接，以便在悬停时显示完整的文本。您可以自定义缩略符（默认为...）。</p>
<p align="left">14、 自定义预览，进度和所选文件的消息。</p>
<p align="left">15、上传操作默认为表单提交。支持用于自定义基于ajax的上传的route/server上传动作参数。</p>
<p align="left">16、 触发JQuery事件进行高级开发。目前可用的事件有<code>filereset</code>、<code>fileclear</code>、<code>filecleared</code>、<code>fileloaded</code>，和<code>fileerror</code>。</p>
<p align="left">17、 支持输入禁用文件和只读文件。</p>
<p align="left">18、 动态自动调整文件名长度超过容器宽度的文件标题。</p>
<p align="left">19、 当预览容器上完全载入图像后，触发的新的<code>fileimageuploaded</code>事件。</p>
<p align="left">20、 当预览图超过预览容器的大小时自动调整预览图像。</p>
<p align="left">21、 完全模板化和可扩展，允许开发人员以自己想要的方式配置文件输入。</p>
<p align="left">22、 基于各种文件预览类型智能化预览。内置的文件支持类型分类为<code>image</code>、<code>text</code>、<code>html</code>、<code>video</code>、<code>audio</code>、<code>flash</code>、<code>object</code>和<code>other</code>。</p>
<p align="left">23、<code>allowedPreviewTypes:</code>你可以配置哪些文件类型被允许预览显示。默认值为<code>['image', 'html', 'text', 'video', 'audio', 'flash', 'object']</code>。因此，默认情况下，所有文件类型都将被视为要预览的对象。 举个例子，如果只想展示图像和视频的预览，就将这个参数设置为<code>['image', 'video']</code>。如果要禁用所有文件类型的内容预览，并用预览图标代替缩略图，请将其设置为<code>null</code>、<code>empty</code>或<code>false</code>。</p>
<p align="left">24、<code>allowedPreviewMimeTypes:</code>除了参数<code>allowedPreviewTypes</code>，你还可以控制哪些互联网媒体类型可以预览。它的默认值为<code>null</code>，表示支持所有互联网媒体类型。<strong>请注意：</strong>&nbsp;使用版本2.5.0，你可以通过设置<code>allowedFileTypes</code>和<code>allowedFileExtensions</code>参数来控制允许上传的文件类型或扩展功能。</p>
<p align="left">25、&nbsp;<code>layoutTemplates:</code>允许你通过一个属性来配置所有布局模板设置。可配置的布局对象有：<code>main1</code>、<code>main2</code>、<code>preview</code>、<code>caption</code>和&nbsp;<code>modal</code>。</p>
<p align="left">26、&nbsp;<code>previewTemplates:</code>所有用于每个预览类型的预览模板已被组合成一个属性，而不是单独用于图像，文本等内容的模板。表示格式的键为<code>allowedPreviewTypes</code>，值表示预览模板。下面是每个预览文件类型（<code>generic</code>、<code>image</code>、<code>text</code>、<code>html</code>、<code>video</code>、<code>audio</code>、<code>flash</code>,&nbsp;<code>object</code>和<code>other</code>）。<code>generic</code>模板仅用于使用直接的标签来展示<code>initialPreview</code>内容。</p>
<p align="left">27、<code>previewSettings:</code>允许你为每个预览图像类型配置宽度和高度。该插件对每个类型都具有默认的宽度和高度预定义，这些类型有<code>image</code>、<code>text</code>、&nbsp;<code>html</code>、<code>video</code>、<code>audio</code>、<code>flash</code>和&nbsp;<code>object</code>。</p>
<p align="left">28、&nbsp;<code>fileTypeSettings:</code>允许你使用回调函数配置和识别每个预览文件类型。该插件有默认的回调函数预定义来识别不同类型，这些类型有<code>image</code>、<code>text</code>、&nbsp;<code>html</code>、<code>video</code>、<code>audio</code>、<code>flash</code>和&nbsp;<code>object</code>。</p>
<p align="left">29、使用模板替换标签已被增强。使用此版本，它将自动检查每个多次出现的标签替换的为模板字符串。</p>
<p align="left">30、操作事件，并轻松地在任何中止上传的事件返回的输出中添加您自己的自定义验证消息。</p>
<p align="left">31、支持翻译和语言环境。</p>
<p><span style="background-color: #ff6600;"><strong>注意</strong></span></p>
<p>Flash预览需要安装<code>Shockwave flash</code>并且客户端浏览器支持它。Flash预览目前只能与webkit浏览器成功运作。支持HTML5 <code>video/audio</code>标签的所有现代浏览器都支持视频和音频格式预览。请注意，浏览器的HTML5视频元素支持的视频/音频格式数量有限（例如mp4，webm，ogg，mp3，wav）。视频文件推荐使用小视频（通过maxFileSize 属性进行控制），这样不会不影响预览效果。你可以从插件库的examples目录下复制几个文件，来测试一些Flash和视频文件的示例。</p>
<h2>文件上传特性</h2>
<p>伴随着版本4.0.0，插件现在也包括内置AJAX上传支持和有选择地添加或删除文件。AJAX上传功能基于HTML5&nbsp;<code>FormData</code>和<code>XMLHttpRequest Level 2</code>标准。大多数现代浏览器都支持此标准，但插件在不支持的浏览器中将自动降级为正常格式提交。</p>
<ol>
<li>添加AJAX功能，基于<code>HTML5 FormData</code>大多数现代浏览器支持）上传方式。如果不支持，将降级到正常的基于表单的文件提交。</li>
<li>要使用AJAX上传，必须设置<code>uploadUrl</code>属性。</li>
<li>增强插件，现在允许添加，附加，删除文件（基于许多的反馈）。因此，可以附加文件到预览。</li>
<li>可以通过<code>DRAG &amp; DROP</code>区域来拖放和附加文件。New DRAG &amp; DROP zone available in preview to drag and drop files and append.</li>
<li>逐个或批量删除、上传文件。</li>
<li>如果<code>showPreview</code>设置为<code>false</code>，或者未设置<code>uploadUrl</code>，插件将降级到基于正常的<code>form</code>形式上传。</li>
<li>可配置指示灯来同步文件等待上传，文件成功上传，文件上传错误状态。</li>
<li>能够添加额外的表单数据到基于ajax的上传中。</li>
<li>上传进度条和单个缩略图的上传标识。</li>
<li>能够取消和中止正在进行的AJAX上传。</li>
<li>建立初始预览内容（例如保存的图像库）。您可以设置初始预览操作（预定义支持预先预览删除）。也可以设置其他自定义操作按钮初始化预览缩略图。</li>
<li>确保插件仍然尺寸精简，并最佳地利用<code>HTML5</code>和<code>jquery</code>功能优化上述功能的性能。</li>
<li>一旦ajax上传完成，就自动从服务器上刷新预览内容。</li>
</ol>
<h1>安装</h1>
<p>可以使用以下方法之一自动或手动安装该插件：</p>
<h2>Bower包管理器</h2>
<p>通过bower包管理器进行安装，运行下面简单的指令：</p>
<p><code>$ bower install bootstrap-fileinput</code></p>
<h2>Composer包管理器</h2>
<p>通过Composer包管理器进行安装，运行指令：</p>
<p><code>$ php composer.phar require kartik-v/bootstrap-fileinput "dev-master"</code></p>
<p>或者添加：</p>
<p><code>"kartik-v/bootstrap-fileinput": "dev-master"</code></p>
<p>到你的<code>composer.json</code>文件中。</p>
<p align="left"><strong>依赖项</strong></p>
<ol>
<li><a href="http://www.bootcss.com/" target="_blank">Bootstrap 3.X</a>。但是，可以使用任何CSS框架模板来定制插件。</li>
<li>最新的JQuery</li>
<li>大多数支持HTML5文件输入和FileReader API的现代浏览器，包括对CSS3和JQuery的支持。</li>
<li>为了正常使用文件预览功能，浏览器必须支持HTML5 FileReaderAPI，否则插件会自动降级到普通的表单文件输入。对于Internet Explorer，必须使用IE 10及更高版本。IE9及以下版本将作为普通文件输入，并且不支持多个文件选择和HTML5 FileReader API。</li>
<li>版本4.0支持AJAX上传。AJAX上传要求浏览器支持HTML5 FormData和XHR2（XMLHttpRequest 2）。大多数现代浏览器支持FormData和XHR2。该插件在不支持AJAX上传的浏览器中将自动降级到正常表单提交。</li>
</ol>
<h1>浏览器支持</h1>
<p>该插件使用HTML5功能来实现各种功能。大多数现代浏览器支持这些功能。但是，要知道你的浏览器是否支持这些功能，你必须在下面运行这些检查。以下是检测浏览器是否支持</p>
<table style="width: 561px;" border="0" cellspacing="0" cellpadding="0" align="left">
<thead>
<tr>
<td width="112">
<p align="center"><strong>功能</strong></p>
</td>
<td width="336">
<p align="center"><strong>描述</strong></p>
</td>
<td width="113">
<p align="center"><strong>支持</strong></p>
</td>
</tr>
</thead>
<tbody>
<tr>
<td width="112">
<p align="center">文件输入多个</p>
</td>
<td width="336">
<p align="center">允许用户使用本机HTML文件输入选择多个文件</p>
</td>
<td width="113">
<p align="center"><a href="http://caniuse.com/#search=multiple%20file" target="_blank">浏览器</a></p>
</td>
</tr>
<tr>
<td width="112">
<p align="center">HTML5文件API</p>
</td>
<td width="336">
<p align="center">允许使用插件在预览窗格上阅读和预览文件</p>
</td>
<td width="113">
<p align="center"><a href="http://caniuse.com/#search=fileapi" target="_blank">浏览器</a></p>
</td>
</tr>
<tr>
<td width="112">
<p align="center">HTML5 XHR2和FormData</p>
</td>
<td width="336">
<p align="center">允许使用ajax上传功能来附加/删除文件并使用进度条进行跟踪。</p>
</td>
<td width="113">
<p align="center"><a href="http://caniuse.com/#search=xhr2" target="_blank">浏览器</a></p>
</td>
</tr>
<tr>
<td width="112">
<p align="center">HTML5拖放</p>
</td>
<td width="336">
<p align="center">能够将文件拖放到一个Dropzone（仅适用于使用HTML5 XHR2的ajax上传）</p>
</td>
<td width="113">
<p align="center"><a href="http://caniuse.com/#search=drag" target="_blank">浏览器</a></p>
</td>
</tr>
<tr>
<td width="112">
<p align="center">HTML5画布</p>
</td>
<td width="336">
<p align="center">通过JavaScript管理图像文件。如果你希望在上传之前调整图像文件的大小，则必需支持此功能。</p>
</td>
<td width="113">
<p align="center"><a href="http://caniuse.com/#search=canvas" target="_blank">浏览器</a></p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h1>&nbsp;</h1>
<h1>&nbsp;</h1>
<h1>&nbsp;</h1>
<h1>&nbsp;</h1>
<h1>&nbsp;</h1>
<h1>&nbsp;</h1>
<h1>&nbsp;</h1>
<h1>&nbsp;</h1>
<h1>&nbsp;</h1>
<h1>&nbsp;</h1>
<h1><br />使用模式</h1>
<p>大多数情况下，该插件可以配置为以下两种不同的模式之一进行上传。</p>
<p><strong>重要信息</strong>：不要尝试组合下列模式来接收文件数据，因为您将收到不一致和/或错误的输出。</p>
<p>1、表单提交：在此模式下，您不能设置<code>uploadUrl</code>属性。该插件将使用本地文件输入来存储文件，并且可以在正常的<code>from</code>提交后读取文件（您必须在<code>form</code>中包含类型为<code>file</code>的<code>input</code>标签）。这对于单个文件上传或简单的场景多个文件上传是有用的。配置非常简单，你可以从本机表单提交中读取<code>POSTED</code>的所有数据。但是，请注意，本地文件输入是只读的，不能被外部代码修改或更新。特别是对于多个文件输入选择，无法将单个文件增加到已选择的文件列表。如果尝试在已选择的文件输入按钮上再选择文件，它将覆盖并清除之前选择的文件。同样，在此模式下，无法选择移去/删除上传之前添加的文件。</p>
<p>2、Ajax提交：在此模式下，你必须将<code>uploadUrl</code>属性设置为有效的<code>ajax</code>处理服务器<code>action/URL</code>。如果uploadUrl设置了，那么该插件会自动为该场景使用ajax上传。该插件提供了ajax提交的高级功能，这是表单提交提供不了的。如拖放文件，在预览区域中添加/删除文件，获取上传的进度条等功能只有在此模式下才可以实现。您的浏览器必须支持<code>HTML5 FormData/XHR2</code>才能正常工作，并且处理ajax调用的服务器代码必须返回有效的JSON响应。</p>
<p><strong>注意</strong>&nbsp;作为高级场景，插件允许你处理ajax上传，即使没有选择文件，但是使用有效的<code>uploadExtraData</code>也会得到ajax响应。这些事件<code>filebatchpreupload</code>、<code>filebatchuploadsuccess</code>、<code>filebatchuploadcomplete</code>或&nbsp;<code>filebatchuploaderror</code>将在这种情况下触发。即使没有任何的文件数据，它将允许发送额外的数据。</p>
<table style="width: 544px;" border="0" cellspacing="0" cellpadding="0" align="left">
<tbody>
<tr>
<td width="194">
<p align="center"><strong>功能</strong><strong>/</strong><strong>要求</strong></p>

</td>
<td width="175">
<p align="center"><strong>表格提交</strong></p>

</td>
<td width="175">
<p align="center"><strong>Ajax</strong><strong>提交</strong></p>

</td>

</tr>
<tr>
<td width="194">
<p>支持单个和多个文件上传</p>

</td>
<td>
<p>支持</p>

</td>
<td>
<p>支持</p>

</td>

</tr>
<tr>
<td width="194">
<p>使用HTML 5 FileAPI预览文件</p>

</td>
<td>
<p>支持</p>

</td>
<td>
<p>支持</p>

</td>

</tr>
<tr>
<td width="194">
<p>通过表单提交直接读取文件</p>

</td>
<td>
<p>支持</p>

</td>
<td>
<p>不支持</p>

</td>

</tr>
<tr>
<td width="194">
<p>每个预览缩略图的单个文件删除图标</p>

</td>
<td>
<p>支持&nbsp;<sup><a title="" href="http://www.bootstrap-fileinput.com/model.html#footnote">1</a></sup></p>

</td>
<td>
<p>支持<sup><a href="http://www.bootstrap-fileinput.com/model.html#footnote">2</a></sup></p>

</td>

</tr>
<tr>
<td width="194">
<p>每个预览缩略图的个人文件上传图标</p>

</td>
<td>
<p>不支持</p>

</td>
<td>
<p>支持</p>

</td>

</tr>
<tr>
<td width="194">
<p>需要从服务器返回有效的JSON响应</p>

</td>
<td>
<p>不支持</p>

</td>
<td>
<p>支持</p>

</td>

</tr>
<tr>
<td width="194">
<p>需要浏览器支持HTML5 FormData / XHR2</p>

</td>
<td>
<p>不支持</p>

</td>
<td>
<p>支持</p>

</td>

</tr>
<tr>
<td width="194">
<p>服务器代码来处理ajax并发送JSON Response</p>

</td>
<td>
<p>不支持</p>

</td>
<td>
<p>支持</p>

</td>

</tr>
<tr>
<td width="194">
<p>使用放置区拖放文件</p>

</td>
<td>
<p>不支持</p>

</td>
<td>
<p>支持</p>

</td>

</tr>
<tr>
<td width="194">
<p>能够将文件附加到已选择的列表</p>

</td>
<td>
<p>不支持</p>

</td>
<td>
<p>支持</p>

</td>

</tr>
<tr>
<td width="194">
<p>能够将文件删除到已选择的列表</p>

</td>
<td>
<p>支持&nbsp;<sup><a href="http://www.bootstrap-fileinput.com/model.html#footnote">1</a></sup></p>

</td>
<td>
<p>支持</p>

</td>

</tr>
<tr>
<td width="194">
<p>上传进度栏</p>

</td>
<td>
<p>不支持</p>

</td>
<td>
<p>支持</p>

</td>

</tr>
<tr>
<td width="194">
<p>阅读其他表单数据</p>

</td>
<td>
<p>直接通过表单提交</p>

</td>
<td>
<p>通过&nbsp;<code>uploadExtraData</code></p>

</td>

</tr>

</tbody>

</table>
<h2>&nbsp;</h2>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>模式比较</h2>
<ul>
<li>1 -通过<code>initialPreviewConfig</code>（仅适用于服务器上传的文件）。</li>
<li>2 - 在运行环境中对服务器上传的文件（通过<code>initialPreviewConfig</code>）和客户端选择的文件。</li>

</ul>
<h1>用法</h1>
<p><strong>注意</strong></p>
<p>如果你将一个<code>css</code>&nbsp;<code>class='file'</code>属性赋予<code>input</code>标签，插件将自动把字段<code>[input type="file"]</code>转换为文件输入控件。但是，如果你想通过<code>javascript</code>单独初始化插件，那么请勿将<code>css</code>&nbsp;<code>class='file'</code>属性附加到'input'上（因为这将导致重复的初始化，并且JavaScript代码可能会被跳过不执行）。</p>
<h2>步骤1</h2>
<p>在网页头部加入链接。</p>
<pre><code>&lt;link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"&gt;<code></code></pre>
<pre><code>&lt;link href="path/to/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" /&gt;<code></code></pre>
<pre><code>&lt;script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"&gt;&lt;/script&gt;<code></code></pre>
<pre><code>&lt;!-- 如果你想在上传之前修改图片大小需要加入canvas-to-blob.min.js&nbsp; 它必须在fileinput.min.js之前引入 --&gt;<code></code></pre>
<pre><code>&lt;script src="path/to/js/plugins/canvas-to-blob.min.js" type="text/javascript"&gt;&lt;/script&gt;<code></code></pre>
<pre><code>&lt;!-- 如果你想在最初的预览中排序/重新排列需要引入sortable.min.js&nbsp; 它必须在fileinput.min.js之前引入 --&gt;<code></code></pre>
<pre><code>&lt;script src="path/to/js/plugins/sortable.min.js" type="text/javascript"&gt;&lt;/script&gt;<code></code></pre>
<pre><code>&lt;!-- 如果你想在HTML文件预览中净化HTML内容则要引入purify.min.js is&nbsp;&nbsp; 它必须在fileinput.min.js之前引入 --&gt;<code></code></pre>
<pre><code>&lt;script src="path/to/js/plugins/purify.min.js" type="text/javascript"&gt;&lt;/script&gt;<code></code></pre>
<pre><code>&lt;!-- 主要的 fileinput 插件库 --&gt;<code></code></pre>
<pre><code>&lt;script src="path/to/js/fileinput.min.js"&gt;&lt;/script&gt;<code></code></pre>
<pre><code>&lt;!-- 如果你想在放大的模态页面中查看文件详细信息需要引入bootstrap.js --&gt;<code></code></pre>
<pre><code>&lt;script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"&gt;&lt;/script&gt;<code></code></pre>
<pre><code>&lt;!-- 可选，如果你需要像font awesome 这样的主题，就像下面的代码一样引入它 --&gt;<code></code></pre>
<pre><code>&lt;script src="path/to/js/fa.js"&gt;&lt;/script&gt;<code></code></pre>
<pre><code>&lt;!-- 可选，如果你需要转换语言或翻译，就包含这个库 --&gt;<code></code></pre>
<pre><code>&lt;script src="path/to/js/&lt;lang&gt;.js"&gt;&lt;/script&gt;<code></code></pre>
<p>你可能注意到了，除了<code>fileinput.min.css</code>和<code>fileinput.min.js</code>外，你必须要加载<code>jquery.min.js</code>和<code>bootstrap.min.css</code>。可选择加入<code>fa.js</code>主题文件来使用<code>font awesome</code>图标样式。</p>
<p><strong>GitHub </strong><strong>地址：</strong><a href="https://github.com/kartik-v/bootstrap-fileinput">https://github.com/kartik-v/bootstrap-fileinput</a></p>
<p>&nbsp;</p>
<p><strong>可选的依赖插件</strong></p>
<ul>
<li>canvas-to-blob.min.js文件：是<a href="https://github.com/blueimp/JavaScript-Canvas-to-Blob" target="_blank">blueimp的JavaScript-Canvas-to-Blob插件</a>的源代码。如果你想在上传之前修改图片大小,在fileinput.min.js之前需要先加载它。</li>
<li>sortable.min.js文件：是<a href="https://github.com/blueimp/JavaScript-Canvas-to-Blob" target="_blank">rubaxa可排序插件</a>的源代码。如果你希望在初始预览中对缩略图进行排序，则需要先加载它。</li>
<li>purify.min.js文件：是<a href="https://github.com/cure53/DOMPurify" target="_blank">cure53的DomPurify插件</a>的源代码。如果你希望净化预览的HTML内容，则需要加载它。</li>
<li>中文需要引用js/locales/zh.js</li>
<li>如下引入文件：</li>
</ul>
<p align="left">&lt;script src="~/Scripts/bootstrap-fileinput-master/js/fileinput.min.js"&gt;&lt;/script&gt;</p>
<p align="left">&lt;script src="~/Scripts/bootstrap-fileinput-master/themes/explorer/theme.js"&gt;&lt;/script&gt;</p>
<p align="left">&lt;script src="~/Scripts/bootstrap-fileinput-master/js/locales/zh.js"&gt;&lt;/script&gt;</p>
<h2>步骤2</h2>
<p>在你的页面中初始化这个插件，像下面的样例代码一样： JavaScript // 使用默认参数初始化插件 $("#input-id").fileinput();</p>
<p>$fileinput.fileinput({</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; language: 'zh', //设置语言</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //theme: "explorer",</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; uploadUrl: "/api/datareportapi/upload",</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allowedFileExtensions: ['xlsx','txt','zip','rar'],//接收的文件后缀</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; uploadClass: "btn btn-sm btn-success",</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; removeClass: "btn btn-sm btn-danger",</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cancelClass: "btn btn-sm btn-default",</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; browseClass: "btn btn-sm btn-primary", //按钮样式&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enctype: 'multipart/form-data',</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minFileCount: 1,</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //maxFileCount: 5,</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; overwriteInitial: false,</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; previewFileIcon: '&lt;i class="fa fa-file"&gt;&lt;/i&gt;',</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; uploadExtraData: function (previewId, index) {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return { batch: _configMap.batch, type: _configMap.type };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; preferIconicPreview: true, // this will force thumbnails to display icons for following file extensions</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; previewFileIconSettings: { // configure your icon file extensions</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'xls': '&lt;i class="fa fa-file-excel-o text-success"&gt;&lt;/i&gt;',</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'xlsx': '&lt;i class="fa fa-file-excel-o text-success"&gt;&lt;/i&gt;'</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; previewFileExtSettings: { // configure the logic for determining icon file extensions</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'xls': function (ext) {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return ext.match(/(xls|xlsx)$/i);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; })</p>
<p>// 使用插件参数初始化 $("#input-id").fileinput({'showUpload':false, 'previewFileType':'any'});</p>
<pre><code><code>`#input-id`</code><code>是你页面中</code><code>`input`</code><code>标签（即，</code><code>`type=file`</code><code>）的</code><code>id</code><code>值，通过插件初始化这个标签会自动隐藏。</code><code></code></pre>
<pre><code><code>## </code><code>步骤</code><code> 2</code></pre>
<pre><code><code>或者，你可以直接将插件选项设置为任何输入，通过</code><code>HTML5</code><code>的</code><code>`data-*`</code><code>属性到你的输入域。</code><code></code></pre>
<pre><code><code>```html</code></pre>
<pre><code><code>&lt;input id="input-id" type="file" class="file" data-preview-file-type="text"&gt;</code><a href="http://www.bootstrap-fileinput.com/model.html"><br />
</a></pre>
<p>最后呈现效果图如下:</p>
<p>&nbsp;<img src="./images/bootstrap-fileinput详细说明与使用0.png" alt="" /></p>
<h1>Ajax上传</h1>
<p>你需要设置服务器方法通过AJAX来解析并返回正确的响应。你可以按异步或同步模式设置上传，如下所述。</p>
<ul>
<li><a href="http://www.bootstrap-fileinput.com/ajaxupload.html#%E5%BC%82%E6%AD%A5%E4%B8%8A%E4%BC%A0">异步上传</a></li>
<li><a href="http://www.bootstrap-fileinput.com/ajaxupload.html#%E5%90%8C%E6%AD%A5%E4%B8%8A%E4%BC%A0">同步上传</a></li>
</ul>
<h2>异步上传</h2>
<p>这是默认模式，也就是说<code>uploadAsync</code>属性设置为<code>true</code>。当上传多个文件时，异步模式允许触发并行调用服务器方法接受每个上传文件。您可以通过设置<code>maxFileCount</code>属性来控制一次允许上传的最大文件数。在异步模式下，预览中每个缩略图的进度被验证和更新。</p>
<h3>接收数据（在服务器上）</h3>
<p>你设置的服务器方法（<code>uploadUrl</code>）从插件接收以下数据:</p>
<p><strong>文件数据</strong>:以与<code>form</code>文件输入非常相似的格式将这些数据发送到服务器。例如，在PHP中，你可以使用代码<code>$_FILES['input-name']</code>读取文件数据，<code>input-name</code>是你的<code>input</code>标签的<code>name</code>属性。如果你没有为<code>input</code>标签设置<code>name</code>属性，则它的名称默认为<code>file_data</code>。请注意，多个文件上传需要你为<code>input</code>标签设置<code>multiple</code>属性为<code>true</code>。这样在PHP中你会收到文件数据<code>$_FILES['file_data']</code>。（<code>servlet</code>中使用<code>request.getParts()</code>获取多个文件数据，使用<code>request.getParts("input-name")</code>获取单个文件）</p>
<p><strong>额外的数据</strong>：该插件可以向你的服务器方法发送附加数据。这可以通过将<code>uploadExtraData</code>设置为键值对关联数组对象来完成。所以如果你设置<code>uploadExtraData={id:'kv-1'}</code>，在PHP中你可以以<code>$_POST['id']</code>的方式读取这些数据。</p>
<p><strong>注意</strong></p>
<p>在异步模式下，你会经常在处理ajax上传的服务端接收到单个的文件数据。基本上，这个插件对每个上传的文件都会触发并行的ajax调用方法。你需要相应地编写服务器上传逻辑，以便您始终读取和上传单个文件。同样，在下面的发送数据部分中，你必须返回一个<code>initialPreview</code>，它反映收到的单个文件的数据。</p>
<h3>发送数据（从服务器）</h3>
<p>你的服务器方法（<code>uploadUrl</code>）必须返回一个json编码对象数据。在这种情况下，您可以发送这4个信息。请注意，在异步模式下，您会始终从服务器收到一个文件的记录 - 因此你也要相应地调整前端JS代码。</p>
<p><em><strong>error</strong></em>：string类型，它是整个批量上传的错误消息，并将帮助插件识别文件上传中的错误。例如，来自服务器的响应像<code>{error: 'You are not allowed to upload such a file.'}</code>这样。注意：插件将自动验证并显示ajax异常错误。</p>
<p><em><strong>initialPreview</strong></em>：数组，图像文件列表或任何指向你上传文件的HTML标记。你会经常发送此队列中的一行，因为你在异步方式会一直收到上传的单个文件。如果设置了此属性，插件会在每个文件上传成功后动态地在预览内容中替换文件。这个配置类似于<a href="http://plugins.krajee.com/file-input#option-initialpreviewconfig" target="_blank"><code>initialPreview</code>选项设置</a>。例如：</p>
<pre><code><code>initialPreview: [</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>"&lt;img src='/images/desert.jpg' class='file-preview-image' alt='Desert' title='Desert'&gt;"<code>,</code></pre>
<pre><code><code>],</code></pre>
<p><em><strong>initialPreviewConfig</strong></em>：数组，用于标识<code>initialPreview</code>条目（即<code>initialPreview</code>的一部分）中每个文件标记的属性的配置。你会始终发送这个队列中一行，因为你始终以异步方式收到上传的一个文件。如果设置了此属性，插件会在每个文件上传成功后自动在预览内容中替换文件。这个配置类似于<a href="http://plugins.krajee.com/file-input#option-initialpreviewconfig" target="_blank">initialPreviewConfig选项设置</a>。例如：</p>
<pre><code><code>initialPreviewConfig </code><code>：</code><code>[ </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>标题</code><code>:</code>'desert.jpg'<code> </code><code>，</code><code>&nbsp; </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width:</code>'120px'<code> </code><code>，</code><code>&nbsp; </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:</code>'http://localhost/avatar/delete'<code> </code><code>，</code>//服务器删除操作&nbsp; <code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>关键</code><code>:</code>100<code> </code><code>，</code><code>&nbsp; </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extra:{id:</code>100<code>}&nbsp; </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code></pre>
<pre><code><code>]</code></pre>
<p><em><strong>initialPreviewThumbTags</strong></em>：数组，每个初始预览缩略图相对应的替换标签对象数组。通过initialPreview设置的初始预览缩略图会读取此配置为替换标签。</p>
<pre><code>//更改缩略图页脚模板<code></code></pre>
<pre><code>//设置初始预览模板标签<code></code></pre>
<pre><code><code>initialPreviewThumbTags </code><code>：</code><code>[</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; {</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code>'{CUSTOM_TAG_NEW}'<code>:</code>''<code>, </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>'{CUSTOM_TAG_INIT}'<code>:</code>'&lt;span class = \'custom-css\'&gt;CUSTOM MARKUP&lt;/span&gt; '<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; }</code></pre>
<pre><code><code>];</code></pre>
<p><em><strong>append</strong></em>：boolean类型，如果你已经在INIT中设置了<code>initialPreview</code>是否将内容插入<code>initialPreview</code>。如果未设置，则默认为true。如果设置false，插件将覆盖initialPreview内容。</p>
<p><strong>重要</strong></p>
<ul>
<li>你必须从服务器发送有效的JSON响应，否则上传过程将失败。即使您没有遇到任何错误，您至少必须从服务器发送一个空的JSON对象{}。</li>
<li>要捕获并显示验证错误，你的JSON响应数据必须包含该error键，其值将是要显示的错误HTML标记。如上所述那样设置。</li>
<li>你还可以使用JSON响应发送附加的密钥或数据，以便使用诸如<code>fileuploaded</code>此类的事件对高级案例进行处理</li>
</ul>
<h1>同步上传</h1>
<p>在此模式下，<code>uploadAsync</code>属性设置为<code>false</code>。它只会触发一次批量上传到服务器的方法，并将文件以对象数组的方式从客户端发送到服务器。尽管在此模式下，你可以通过设置<code>maxFileCount</code>属性来控制一次允许上传的最大文件数。然而，在同步模式下，进度只会是对于整体水平的一个标量。预览中每个缩略图的进度未被精确计算和更新。但是，该插件为你提供了识别每个文件上传错误的方法。</p>
<h2>接收数据</h2>
<p>你设置的<code>uploadUrl</code>服务器方法从插件接收以下数据:</p>
<p><strong>文件数据</strong>：以与表单输入格式非常相似的格式将该数据发送到服务器。例如，在PHP中，您可以将该数据读取为<code>$_FILES['input-name']</code>，<code>input-name</code>是你的输入标签的<code>name</code>属性。和之前的异步模式相同，如果你没有为输入标签设置名称属性，则该名称将默认为<code>file_data</code>。除了将<code>multiple</code>属性设置为<code>true</code>之外，你必须将输入标签的<code>name</code>属性设置为<a href="http://webtips.krajee.com/read-html5-multiple-file-input-php/" target="_blank">网页提示</a>中提到的数组格式。如果你不将输入名称设置为数组格式，那么你只能在服务器上收到第一个文件。在PHP中，你将收到文件数据<code>$_FILES['input-name']</code>，它将是一组文件对象。</p>
<p><strong>额外的数据</strong>：该插件可以向你的服务器方法发送附加数据。这可以通过设置<code>uploadExtraData</code>为键值对关联数组对象来完成。所以如果你有设置<code>uploadExtraData={id:'kv-1'}</code>，在PHP中你可以像<code>$_POST['id']</code>这样读取这些数据。</p>
<h2>发送数据</h2>
<p>在同步模式下，<code>uploadUrl</code>必须发送<code>json</code>编码对象数据作为响应。在这种情况下，你需要发送这5条信息。</p>
<p><em><strong>error</strong></em>：字符串类型，它是整个批量上传的错误消息，并将帮助插件识别文件上传中的错误。</p>
<p><em><strong>errorkeys</strong></em>：数组类型，已经出错的文件的键值（接收的文件数据的基于零的索引）。根据这些数据，插件会自动设置缩略图和每个预览文件的错误。</p>
<p><em><strong>initialPreview</strong></em>：数组类型，图像文件列表或任何指向你上传文件的HTML标记。如果设置了此属性，插件会在上传成功后自动在预览内容中替换文件。这个配置类似于initialPreview选项设置。例如：</p>
<pre><code><code>initialPreview: [</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>'&lt;img src='<code>/images/desert.jpg</code>' class='<code>file-preview-image</code>' alt='<code>Desert</code>' title='<code>Desert</code>'&gt;'<code>,</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>'&lt;img src='<code>/images/jellyfish.jpg</code>' class='<code>file-preview-image</code>' alt='<code>Jelly Fish</code>' title='<code>Jelly Fish</code>'&gt;'<code>,</code></pre>
<pre><code><code>],</code></pre>
<p><em><strong>initialPreviewConfig</strong></em>：数组类型，用于标识<code>initialPreview</code>条目中每个文件标记（即作为<code>initialPreview</code>的一部分进行设置）的属性的配置。如果设置了此属性，插件会在上传成功后自动在预览内容中替换文件。这个配置类似于<code>initialPreviewConfig</code>选项设置。例如：</p>
<pre><code><code>initialPreviewConfig: [</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; {</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; caption: </code>'desert.jpg'<code>, </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width: </code>'120px'<code>, </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url: </code>'http://localhost/avatar/delete'<code>, </code>// 服务器删除行为<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; key: </code>100<code>, </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extra: {id: </code>100<code>}</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; },</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; {</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; caption: </code>'jellyfish.jpg'<code>, </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width: </code>'120px'<code>, </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url: </code>'http://localhost/avatar/delete'<code>, </code>// 服务器删除行为<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; key: </code>101<code>, </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extra: </code>function() <code>{ </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>return<code> {id: $(</code>'#id'<code>).val()};</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; }</code></pre>
<pre><code><code>]</code></pre>
<p><em><strong>initialPreviewThumbTags</strong></em>：数组类型，对应于每个初始预览缩略图中替换标签的对象数组。通过设置<code>initialPreview</code>的初始预览缩略图将读取此配置以替换标签。</p>
<pre><code>//更改缩略图页脚模板<code></code></pre>
<pre><code>//设置初始预览模板标签<code></code></pre>
<pre><code><code>initialPreviewThumbTags:[</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; {</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code>'{CUSTOM_TAG_NEW}'<code>: </code>' '<code>,</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code>'{CUSTOM_TAG_INIT}'<code>: </code>'&lt;span class=\'custom-css\'&gt;CUSTOM MARKUP 1&lt;/span&gt;'<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; },</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; {</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code>'{CUSTOM_TAG_NEW}'<code>: </code>' '<code>,</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code>'{CUSTOM_TAG_INIT}'<code>: </code>'&lt;span class=\'custom-css\'&gt;CUSTOM MARKUP 2&lt;/span&gt;'<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; }</code></pre>
<pre><code><code>];</code></pre>
<p><em><strong>append</strong></em>：布尔类型，如果你在初始化时设置了<code>initialPreview</code>，是否将新的内容附加到<code>initialPreview</code>中。如果未设置，则默认为<code>true</code>。如果设置为<code>false</code>，插件将覆盖<code>initialPreview</code>内容。</p>
<p>例如，来自服务器的响应将发送<code>{error: 'You have faced errors in 4 files.', errorkeys: [0, 3, 4, 5]}</code>作为响应。注意：插件将自动验证并显示ajax异常错误。</p>
<p><em><strong>重要</strong></em></p>
<p>你必须从服务器发送有效的JSON响应，否则上传过程将失败。即使您没有遇到任何错误，您至少必须从服务器发送一个空的JSON对象。</p>
<p>要捕获并显示验证错误，你的JSON响应数据必须包含该error键，其值将是要显示的错误HTML标记。另外，您还必须发送errorkeys同步模式来识别面临错误的文件的密钥。这将如上所述设置。</p>
<p>你还可以使用JSON响应发送附加的密钥或数据，以便使用如filebatchuploadsuccess事件对高级案例进行处理</p>
<h1>方法</h1>
<p>这个插件支持如下方法。查看插件各种方法的演示，请<a href="http://plugins.krajee.com/site/file-plugin-methods-demo" target="_blank">点击这里</a>。</p>
<p>下面的许多方法支持链式调用其他方法，因为它们将文件输入元素作为jQuery对象返回。</p>
<h2>disable</h2>
<p>禁用文件输入控件。此方法将文件输入元素作为jQuery对象返回，因此可以链式调用其他方法。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'disable'<code>);</code></pre>
<pre><code><code>&nbsp;</code></pre>
<pre><code>// 链式调用启用输入控件<code></code></pre>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'disable'<code>).fileinput(</code>'enable'<code>);</code></pre>
<h2>enable</h2>
<p>启用文件输入控件。此方法将文件输入元素作为jQuery对象返回，因此可以链式调用其他方法。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'enable'<code>);</code></pre>
<pre><code><code>&nbsp;</code></pre>
<pre><code>// 链式调用禁用输入控件<code></code></pre>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'enable'<code>).fileinput(</code>'disable'<code>);</code></pre>
<h2>reset</h2>
<p>重置文件输入控件。此方法将文件输入元素作为jQuery对象返回，可以链式调用其他方法。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'reset'<code>);</code></pre>
<pre><code><code>&nbsp;</code></pre>
<pre><code>// 链式调用<code></code></pre>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'reset'<code>).trigger(</code>'custom-event'<code>);</code></pre>
<h2>destroy</h2>
<p>销毁文件输入控件并恢复到普通的本地文件输入。此方法将文件输入元素作为jQuery对象返回，因此可以链式调用其他方法。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'destroy'<code>);</code></pre>
<pre><code><code>&nbsp;</code></pre>
<pre><code>// 链式方法<code></code></pre>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'destroy'<code>).fileinput(</code>'disable'<code>);</code></pre>
<h2>refresh</h2>
<p>根据提供的参数刷新文件输入控件。你可以提供一组控件选项作为参数。此方法将文件输入元素作为jQuery对象返回，因此可以链式调用其他方法。</p>
<pre><code>// 例1（在运行时禁用）<code></code></pre>
<pre><code><code>$(</code>'#input-id'<code>).attr(</code>'disabled'<code>, </code>'disabled'<code>);</code></pre>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'refresh'<code>);</code></pre>
<pre><code>// 例2（在运行时修改插件参数）example 2 (modify plugin options at runtime)<code></code></pre>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'refresh'<code>, {browseLabel: </code>'Select...'<code>, removeLabel: </code>'Delete'<code>});</code></pre>
<pre><code>// 链式方法<code></code></pre>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'refresh'<code>, {showCaption: </code>false<code>}).fileinput(</code>'disable'<code>);</code></pre>
<h2>clear</h2>
<p>清理文件输入控件。此方法将文件输入元素作为jQuery对象返回，因此可以链式调用其他方法。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'clear'<code>);</code></pre>
<pre><code>// 方法链<code></code></pre>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'clear'<code>).fileinput(</code>'disable'<code>);</code></pre>
<h2>upload</h2>
<p>触发所选文件的ajax上传。仅适用于<code>uploadUrl</code>已设置的情况。此方法将文件输入元素作为jQuery对象返回，因此可以链式调用其他方法。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'upload'<code>);</code></pre>
<pre><code>// 方法链<code></code></pre>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'upload'<code>).fileinput(</code>'disable'<code>);</code></pre>
<h2>cancel</h2>
<p>取消正在进行的ajax文件上传。此方法将文件输入元素作为jQuery对象返回，因此可以链式调用其他方法。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'cancel'<code>);</code></pre>
<pre><code>// 方法链<code></code></pre>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'cancel'<code>).fileinput(</code>'disable'<code>);</code></pre>
<h2>lock</h2>
<p>锁定文件输入控件，禁用除取消按钮（中止正在进行的AJAX请求）之外的所有操作/按钮。（仅适用于ajax上传）此方法将文件输入元素作为jQuery对象返回，因此可以链式调用其他方法。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'lock'<code>);</code></pre>
<pre><code>// 方法链<code></code></pre>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'lock'<code>).fileinput(</code>'disable'<code>);</code></pre>
<h2>unlock</h2>
<p>通过反转<code>lock</code>动作的结果解锁并重新启动文件输入控件。此方法将文件输入元素作为jQuery对象返回，因此可以链式调用其他方法。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'unlock'<code>);</code></pre>
<pre><code>// 方法链<code></code></pre>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'unlock'<code>).fileinput(</code>'disable'<code>);</code></pre>
<h2>addToStack</h2>
<p>此方法将文件对象推入（追加）到用来上传的缓存文件堆栈数组。你必须传入一个文件对象作为参数。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'addToStack'<code>, fileObj); </code>// `fileObj`是文件blob对象实例<code></code></pre>
<h2>updateStack</h2>
<p>此方法用指定的数组索引更新/重载一个缓存文件堆栈数组中的文件对象，以指定数组索引。你必须传入数组索引数和文件对象作为参数。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'updateStack'<code>, index, fileObj); </code></pre>
<pre><code>// `index`是你要更新/重载的`fileObj`的缓存文件数组索引。<code></code></pre>
<h2>clearStack</h2>
<p>此方法清除整个文件上传数组堆栈。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'clearStack'<code>);</code></pre>
<h2>getFileStack</h2>
<p>这个方法返回已选择选择文件对象数组（只有当<code>uploadurl</code>被设置且进行ajax上传时适用。）这个方法不会返回验证失败或者已经上传的文件。</p>
<pre><code>var<code> files = $(</code>'#input-id'<code>).fileinput(</code>'getFileStack'<code>); </code>// 返回选中的文件队列<code></code></pre>
<p>如上所述，请注意，此方法仅对于为ajax上传获取文件对象非常有用。对于正常的基于表单的提交，你可以通过直接读取输入值来获取选定的文件。例如<code>$('#input-id').val()</code>。</p>
<h2>getFilesCount</h2>
<p>此方法返回所有待上传的文件和已上传的文件（基于初始预览）的计数。计数将包括从客户端（未上传）中选择的文件加上传到服务器并通过初始预览显示的文件。<a href="http://plugins.krajee.com/file-input#option-validateinitialcount" target="_blank">validateInitialCount</a>将用于检查是否使用初始预览计数。当设置<code>uploadUrl</code>时，此方法将返回正常表单提交以及ajax上传的文件数。</p>
<pre><code>var<code> filesCount = $(</code>'#input-id'<code>).fileinput(</code>'getFilesCount'<code>); </code>// 返回文件（已经上传和等待上传）计数<code></code></pre>
<h2>zoom</h2>
<p>放大缩小传入帧ID参数的详细预览内容。</p>
<pre><code><code>$(</code>'#input-id'<code>).fileinput(</code>'zoom'<code>, </code>'preview-123882'<code>); </code>// 传入缩略图框架的HTML id。<code></code></pre>
<h2>getPreview</h2>
<p>返回初始预览内容，初始预览配置和初始预览缩略图标签。作为下列格式的对象（关联数组）返回结果：</p>
<pre><code><code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; content: [</code>'content1'<code>, </code>'content2'<code>],</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; config: [</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>// content1 的初始化预览配置<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>// content2 的初始化预览配置<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</code></pre>
<pre><code><code>&nbsp;</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; ],</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; tags: [</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>// content1 的初始化预览标签<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { </code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>// content2 的初始化预览标签<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; ]</code></pre>
<pre><code><code>}</code></pre>
<p>使用范例：</p>
<pre><code>console<code>.log($(</code>'#input-id'<code>).fileinput(</code>'getPreview'<code>));</code></pre>
<h1>事件</h1>
<p>该插件支持各种事件，并允许高级功能，如返回事件结果来验证和动态操作文件上传。该部分分为文件事件，异常事件和事件处理。</p>
<ul>
<li><a href="http://www.bootstrap-fileinput.com/events.html#%E6%96%87%E4%BB%B6%E4%BA%8B%E4%BB%B6">文件事件</a></li>
<li><a href="http://www.bootstrap-fileinput.com/events.html#%E5%BC%82%E5%B8%B8%E4%BA%8B%E4%BB%B6">异常事件</a></li>
<li><a href="http://www.bootstrap-fileinput.com/events.html#%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86">事件处理</a></li>
</ul>
<h2>文件事件</h2>
<p>可用于文件管理和文件操作的事件。</p>
<h3>change</h3>
<p>只要通过文件浏览按钮在文件输入控件中选择单个文件或多个文件，就会触发此事件。</p>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>&nbsp;&nbsp;&nbsp; $(</code>'#input-id'<code>).on(</code>'change'<code>, </code>function(event) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>"change"<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; });</code></pre>
<h3>fileselect</h3>
<p>通过文件浏览按钮在文件输入中选择文件后触发此事件。这与<code>change</code>事件稍有不同，即使文件浏览对话框被取消，它也会被触发。</p>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>&nbsp;&nbsp;&nbsp; $(</code>'#input-id'<code>).on(</code>'fileselect'<code>, </code>function(event, numFiles, label) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>"fileselect"<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; });</code></pre>
<h3>fileclear</h3>
<p>当文件输入删除按钮或预览窗口关闭图标被按下以清除文件预览时触发此事件。</p>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>&nbsp;&nbsp;&nbsp; $(</code>'#input-id'<code>).on(</code>'fileclear'<code>, </code>function(event) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>"fileclear"<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; });</code></pre>
<h3>filecleared</h3>
<p>在预览中的文件被清除后触发此事件。</p>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>&nbsp;&nbsp;&nbsp; $(</code>'#input-id'<code>).on(</code>'filecleared'<code>, </code>function(event) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>"filecleared"<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; });</code></pre>
<h3>fileloaded</h3>
<p>在预览中加载文件后触发此事件。附加参数有：</p>
<ul>
<li><code>file</code>：文件对象实例</li>
<li><code>previewId</code>：预览文件容器的标识符（id）</li>
<li><code>index</code>：预览列表中加载的文件的基于0的顺序索引</li>
<li><code>reader</code>：:FileReader实例，如果浏览器支持它</li>
</ul>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'fileloaded'<code>, </code>function(event, file, previewId, index, reader) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>"fileloaded"<code>);</code></pre>
<pre><code><code>});</code></pre>
<h3>filereset</h3>
<p>当文件输入被重置为初始值时触发此事件。</p>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>&nbsp;&nbsp;&nbsp; $(</code>'#input-id'<code>).on(</code>'filereset'<code>, </code>function(event) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>"filereset"<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; });</code></pre>
<h3>fileimageloaded</h3>
<p>每个图像文件在预览窗口中完全加载时触发此事件。它只适用于图像文件预览且<code>showPreview</code>设置为<code>true</code>的情况。附加参数有：</p>
<ul>
<li><code>previewId</code>：预览文件容器的id。</li>
</ul>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>&nbsp;&nbsp;&nbsp; $(</code>'#input-id'<code>).on(</code>'fileimageloaded'<code>, </code>function(event, previewId) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>"fileimageloaded"<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; });</code></pre>
<h3>fileimagesloaded</h3>
<p>所有图像文件在预览窗口中完全加载时触发此事件。它只适用于图像文件预览且<code>showPreview</code>设置为<code>true</code>的情况。</p>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>&nbsp;&nbsp;&nbsp; $(</code>'#input-id'<code>).on(</code>'fileimagesloaded'<code>, </code>function(event) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>"fileimagesloaded"<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; });</code></pre>
<h3>fileimageresized</h3>
<p>当一个预览的图像文件由于<code>resizeImage</code>或者<code>maxImageWidth/maxImageHeight</code>设置而发生调整时触发这个事件。它只适用于图像文件预览且<code>showPreview</code>设置为<code>true</code>的情况。附加参数如下：</p>
<ul>
<li><code>previewId</code>：预览文件容器的标识符（id）</li>
<li><code>index</code>：预览列表中加载的文件的基于0的顺序索引</li>
</ul>
<p>当预览中所有图像文件都发生调整后，上述事件将再次触发，无任何上述参数（即，<code>previewId</code>和<code>index</code>&nbsp;值为&nbsp;<code>undefined</code>）。</p>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'fileimageresized'<code>, </code>function(event, previewId, index) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>"fileimageresized"<code>);</code></pre>
<pre><code><code>});</code></pre>
<h3>fileimagesresized</h3>
<p>当所有预览的图像文件由于<code>resizeImage</code>或者<code>maxImageWidth/maxImageHeight</code>设置都发生调整时触发这个事件。它只适用于图像文件预览且<code>showPreview</code>设置为<code>true</code>的情况。</p>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'fileimagesresized'<code>, </code>function(event) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>"fileimagesresized"<code>);</code></pre>
<pre><code><code>});</code></pre>
<h3>filebrowse</h3>
<p>单击文件浏览按钮以打开文件选择对话框时触发此事件。</p>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'filebrowse'<code>, </code>function(event) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>"File browse triggered."<code>);</code></pre>
<pre><code><code>});</code></pre>
<h3>filebatchselected</h3>
<p>在预览中选择并显示一批文件后触发此事件。附加参数有：</p>
<ul>
<li><code>files</code>：文件对象实例（如果<code>FileReader</code>不可用，则为空对象）。</li>
</ul>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'filebatchselected'<code>, </code>function(event, files) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>'File batch selected triggered'<code>);</code></pre>
<pre><code><code>});</code></pre>
<h3>fileselectnone</h3>
<p>当用户由于重复选择场景（即，在已经包含先前选择的文件的文件输入）而没有选择任何文件时，触发此事件。此事件更适用于Google Chrome等浏览器，当文件选择对话框被取消时，它清除文件输入。对于其他浏览器，此事件通常仅在复位表单或清除文件输入（使用删除按钮）时才会触发。</p>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'fileselectnone'<code>, </code>function(event) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>"Huh! No files were selected."<code>);</code></pre>
<pre><code><code>});</code></pre>
<h3>filelock</h3>
<p>当通过点击上传按钮启动上传过程时触发此事件，并且整个小部件被锁定（禁用），直到上传被处理。当文件输入被锁定时，只有取消按钮被启用。附加参数有：</p>
<ul>
<li><code>filestack</code>：已选择的文件对象数组。</li>
<li><code>uploadExtraData</code>：这个插件的<code>uploadExtraData</code>设置（如果没设置，则返回空对象）。</li>
</ul>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;$(</code>'#input-id'<code>).on(</code>'filelock'<code>, </code>function(event, filestack, extraData) <code>{</code></pre>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>var<code> fstack = filestack.filter(</code>function(n)<code>{ </code>return<code> n != </code>undefined<code> });</code></pre>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>console<code>.log(</code>'Files selected - '<code> + fstack.length);</code></pre>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;});</code></pre>
<h3>fileunlock</h3>
<p>当上传过程完成（成功或有错误）时触发此事件。整个小部件被解锁（启用）并恢复到初始状态。附加参数有：</p>
<ul>
<li><code>filestack</code>：已选择的文件对象数组。</li>
<li><code>uploadExtraData</code>：这个插件的<code>uploadExtraData</code>设置（如果没设置，则返回空对象）。</li>
</ul>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'fileunlock'<code>, </code>function(event, filestack, extraData) <code>{</code></pre>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>var<code> fstack = filestack.filter(</code>function(n)<code>{ </code>return<code> n != </code>undefined<code> });</code></pre>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>console<code>.log(</code>'Files selected - '<code> + fstack.length);</code></pre>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>filepredelete</h3>
<p>在删除<code>initialPreview</code>内容集中的每个缩略图文件之前触发此事件。附加参数有：</p>
<ul>
<li><code>key</code>：要删除的已选文件在<code>initialPreviewConfig</code>中传入的关键字。</li>
<li><code>jqXHR</code>：用于此事务的<code>jQuery XMLHttpRequest</code>对象（如果可用）。</li>
<li><code>data</code>：输出<code>deleteExtraData</code>对象。</li>
</ul>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'filepredelete'<code>, </code>function(event, key) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>'Key = '<code> + key);</code></pre>
<pre><code><code>});</code></pre>
<h3>filedeleted</h3>
<p>在删除<code>initialPreview</code>内容集中的每个缩略图文件之后触发此事件。附加参数有：</p>
<ul>
<li><code>key</code>：要删除的已选文件在<code>initialPreviewConfig</code>中传入的关键字。</li>
<li><code>jqXHR</code>：用于此事务的<code>jQuery XMLHttpRequest</code>对象（如果可用）。</li>
<li><code>data</code>：输出<code>deleteExtraData</code>对象。</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'filedeleted'<code>, </code>function(event, key) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>console<code>.log(</code>'Key = '<code> + key);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>filepreajax</h3>
<p>此事件在提交ajax请求上传之前触发。你可以在ajax提交之前使用此事件操纵<code>uploadExtraData</code>。只有通过每个缩略图上传按钮触发上传时，才可以使用以下附加参数：</p>
<ul>
<li><code>previewId</code>：预览窗口中每个文件的缩略图div父节点的id。</li>
<li><code>index</code>：预览列表中加载的文件的基于0的顺序索引</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'filepreajax'<code>, </code>function(event, previewId, index) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>console<code>.log(</code>'File pre ajax triggered'<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>filepreupload</h3>
<p>此事件仅在ajax上传且上载每个缩略图文件之前触发。此事件在<code>filepreajax</code>之后伴随ajax的<code>beforeSend</code>事件触发。附加参数有：</p>
<ul>
<li><code>data</code>：这是一个数据对象（关联数组），它发送以下信息，其关键字是：</li>
<li><code>form</code>：<em>FormData</em>，通过XHR2传递的对象（如果不可用，则为空对象）。</li>
<li><code>files</code>:&nbsp;<em>数组</em>，文件栈数组（如果不可用，则为空对象）。</li>
<li><code>filenames</code>：<em>数组</em>，堆栈数组中每个文件的客户端文件名（如果不可用，则为空对象）。</li>
<li><code>filescount</code>:&nbsp;<em>int</em>，所选文件的计数包括已经上传的文件（基本上返回<code>getFilesCount</code>方法的输出）。</li>
<li><code>extra</code>：该插件的<code>uploadExtraData</code>设置（如果不可用，则为空对象）。</li>
<li><code>response</code>：通过ajax响应发送的数据（如果不可用，则为空对象）。</li>
<li><code>reader</code>：<code>FileReader</code>实例，如果可用。</li>
<li><code>jqXHR</code>：用于此事务的<code>jQuery XMLHttpRequest</code>对象（如果可用）。</li>
<li><code>previewId</code>：预览窗口中每个文件的缩略图div父节点的id。</li>
<li><code>index</code>：预览列表中加载的文件的基于0的顺序索引</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'filepreupload'<code>, </code>function(event, data, previewId, index) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>var<code> form = data.form, files = data.files, extra = data.extra,</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response = data.response, reader = data.reader;</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>console<code>.log(</code>'File pre upload triggered'<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>fileuploaded</h3>
<p>此事件仅在ajax上传且上载每个缩略图文件之后触发。此事件只有是AJAX上传并在以下场景才会触发：</p>
<ul>
<li>当单击每个预览缩略图中的上传图标并且文件上传成功时，或者</li>
<li>当你将<code>uploadAsync</code>设置为<code>true</code>并且已触发批量上传时。在这种情况下，<code>fileuploaded</code>事件在每个单独的选定文件成功上传之后被触发。</li>
</ul>
<p>此事件可用的其他参数：</p>
<ul>
<li><code>data</code>：这是一个数据对象（关联数组），它发送以下信息，其关键字是：</li>
<li><code>form</code>：<em>FormData</em>，通过XHR2传递的对象（如果不可用，则为空对象）。</li>
<li><code>files</code>:&nbsp;<em>数组</em>，文件栈数组（如果不可用，则为空对象）。</li>
<li><code>filenames</code>：<em>数组</em>，堆栈数组中每个文件的客户端文件名（如果不可用，则为空对象）。</li>
<li><code>filescount</code>:&nbsp;<em>int</em>，所选文件的计数包括已经上传的文件（基本上返回<code>getFilesCount</code>方法的输出）。</li>
<li><code>extra</code>：该插件的<code>uploadExtraData</code>设置（如果不可用，则为空对象）。</li>
<li><code>response</code>：通过ajax响应发送的数据（如果不可用，则为空对象）。</li>
<li><code>reader</code>：<code>FileReader</code>实例，如果可用。</li>
<li><code>jqXHR</code>：用于此事务的<code>jQuery XMLHttpRequest</code>对象（如果可用）。</li>
<li><code>previewId</code>：预览窗口中每个文件的缩略图div父节点的id。</li>
<li><code>index</code>：预览列表中加载的文件的基于0的顺序索引</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'fileuploaded'<code>, </code>function(event, data, previewId, index) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>var<code> form = data.form, files = data.files, extra = data.extra,</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response = data.response, reader = data.reader;</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>console<code>.log(</code>'File uploaded triggered'<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>filebatchpreupload</h3>
<p>此事件仅对于ajax上传的上传按钮被单击之后且批量上传开始之前才会触发（同步和异步上传）。附加参数有：</p>
<ul>
<li><code>data</code>：这是一个数据对象（关联数组），它发送以下信息，其关键字是：</li>
<li><code>form</code>：<em>FormData</em>，通过XHR2传递的对象（如果不可用，则为空对象）。</li>
<li><code>files</code>:&nbsp;<em>数组</em>，文件栈数组（如果不可用，则为空对象）。</li>
<li><code>filenames</code>：<em>数组</em>，堆栈数组中每个文件的客户端文件名（如果不可用，则为空对象）。</li>
<li><code>filescount</code>:&nbsp;<em>int</em>，所选文件的计数包括已经上传的文件（基本上返回<code>getFilesCount</code>方法的输出）。</li>
<li><code>extra</code>：该插件的<code>uploadExtraData</code>设置（如果不可用，则为空对象）。</li>
<li><code>response</code>：通过ajax响应发送的数据（如果不可用，则为空对象）。</li>
<li><code>reader</code>：<code>FileReader</code>实例，如果可用。</li>
<li><code>jqXHR</code>：用于此事务的<code>jQuery XMLHttpRequest</code>对象（如果可用）。</li>
</ul>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'filebatchpreupload'<code>, </code>function(event, data, previewId, index) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>var<code> form = data.form, files = data.files, extra = data.extra,</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;response = data.response, reader = data.reader;</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>'File batch pre upload'<code>);</code></pre>
<pre><code><code>});</code></pre>
<h3>filebatchuploadsuccess</h3>
<p>此事件仅在ajax上传且文件批量上传成功之后触发。此事件只有是AJAX上传并在以下场景才会触发：</p>
<ol>
<li>当你将<code>uploadAsync</code>设置为<code>false</code>并且已经触发了批量上传时。 在这种情况下，在所以文件成功上传后会触发<code>filebatchuploadsuccess</code>事件 。</li>
</ol>
<p>附加参数有：</p>
<ul>
<li><code>data</code>：这是一个数据对象（关联数组），它发送以下信息，其关键字是：</li>
<li><code>form</code>：<em>FormData</em>，通过XHR2传递的对象（如果不可用，则为空对象）。</li>
<li><code>files</code>：&nbsp;<em>数组</em>，文件栈数组（如果不可用，则为空对象）。</li>
<li><code>filenames</code>：<em>数组</em>，堆栈数组中每个文件的客户端文件名（如果不可用，则为空对象）。</li>
<li><code>filescount</code>：<em>int</em>，所选文件的计数包括已经上传的文件（基本上返回<code>getFilesCount</code>方法的输出）。</li>
<li><code>extra</code>：该插件的<code>uploadExtraData</code>设置（如果不可用，则为空对象）。</li>
<li><code>response</code>：通过ajax响应发送的数据（如果不可用，则为空对象）。</li>
<li><code>reader</code>：<code>FileReader</code>实例，如果可用。</li>
<li><code>jqXHR</code>：用于此事务的<code>jQuery XMLHttpRequest</code>对象（如果可用）。</li>
</ul>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'filebatchuploadsuccess'<code>, </code>function(event, data, previewId, index) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>var<code> form = data.form, files = data.files, extra = data.extra,</code></pre>
<pre><code><code>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response = data.response, reader = data.reader;</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>'File batch upload success'<code>);</code></pre>
<pre><code><code>});</code></pre>
<h3>filebatchuploadcomplete</h3>
<p>此事件仅对于ajax上传且完成同步或异步ajax批量上传后触发。附加参数有：</p>
<ul>
<li><code>files</code>：<em>数组</em>，文件栈数组（如果不可用，则为空对象）。</li>
<li><code>extra</code>：该插件的<code>uploadExtraData</code>设置（如果不可用，则为空对象）。</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'filebatchuploadcomplete'<code>, </code>function(event, files, extra) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>console<code>.log(</code>'File batch upload complete'<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>filesuccessremove</h3>
<p>使用缩略图删除按钮删除成功上传的缩略图后，会触发此事件。当<code>showUploadedThumbs</code>设置为<code>true</code>时，这通常是适用的。附加参数有：</p>
<ul>
<li><code>id</code>：缩略图<code>HTML</code>容器节点的<code>id</code>属性。</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'filesuccessremove'<code>, </code>function(event, id) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>if<code> (some_processing_function(id)) {</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>console<code>.log(</code>'Uploaded thumbnail successfully removed'<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;} </code>else<code> {</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>return<code> </code>false<code>; </code>// 缩略图删除中断<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;}</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>filedisabled</h3>
<p>当使用<code>disable</code>方法禁用文件输入小部件（防止任何修改）时触发此事件。</p>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'filedisabled'<code>, </code>function(event) <code>{</code></pre>
<pre><code><code>&nbsp; </code>console<code>.log(</code>'File disabled'<code>);</code></pre>
<pre><code><code>});</code></pre>
<h3>fileenabled</h3>
<p>当使用&middot;enable&middot;方法启用文件输入小部件（允许修改）时触发此事件。</p>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'fileenabled'<code>, </code>function(event) <code>{</code></pre>
<pre><code><code>&nbsp; </code>console<code>.log(</code>'File enabled'<code>);</code></pre>
<pre><code><code>});</code></pre>
<h3>filesorted</h3>
<p>当通过初始预览中的拖放来对文件进行排序/重新排列时，会触发此事件。以下参数将作为JSON对象关键字另外发送：</p>
<ul>
<li><code>previewId</code>：预览缩略图<code>HTML</code>容器节点的<code>id</code>属性。</li>
<li><code>oldIndex</code>：<code>initialPreview</code>中缩略图得旧索引</li>
<li><code>newIndex</code>：<code>initialPreview</code>中缩略图得新索引</li>
<li><code>stack</code>：排序后修改的<code>initialPreviewConfig</code></li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'filesorted'<code>, </code>function(event, params) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>console<code>.log(</code>'File sorted '<code>, params.previewId, params.oldIndex, params.newIndex, params.stack);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>filezoomshow</h3>
<p>单击缩放按钮（在模态对话框中显示内容详细预览）时触发此事件。以下参数将作为JSON对象关键字另外发送：</p>
<ul>
<li><code>sourceEvent</code>：<em>事件</em>，模态对话框源事件<code>show.bs.modal</code>。</li>
<li><code>previewId</code>：<em>字符串</em>，预览缩略图<code>HTML</code>容器节点的<code>id</code>属性。</li>
<li><code>modal</code>：<em>jQuery</em><em>对象</em>，模态框对象</li>
</ul>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'filezoomshow'<code>, </code>function(event, params) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>'File zoom show '<code>, params.sourceEvent, params.previewId, params.modal);</code></pre>
<pre><code><code>});</code></pre>
<h3>filezoomshown</h3>
<p>在模态框已被用户看到之后触发此事件（将等待CSS转换完成）​​。以下参数将作为JSON对象关键字另外发送：</p>
<ul>
<li><code>sourceEvent</code>：<em>事件</em>，模态对话框源事件<code>show.bs.modal</code>。</li>
<li><code>previewId</code>：<em>字符串</em>，预览缩略图<code>HTML</code>容器节点的<code>id</code>属性。</li>
<li><code>modal</code>：<em>jQuery</em><em>对象</em>，模态框对象</li>
</ul>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'filezoomshown'<code>, </code>function(event, params) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>'File zoom shown '<code>, params.sourceEvent, params.previewId, params.modal);</code></pre>
<pre><code><code>});</code></pre>
<h3>filezoomhide</h3>
<p>通过关闭对话框按钮隐藏模态框后触发此事件。以下参数将作为JSON对象关键字另外发送：</p>
<ul>
<li><code>sourceEvent</code>：<em>事件</em>，模态对话框源事件<code>show.bs.modal</code>。</li>
<li><code>previewId</code>：<em>字符串</em>，预览缩略图<code>HTML</code>容器节点的<code>id</code>属性。</li>
<li><code>modal</code>：<em>jQuery</em><em>对象</em>，模态框对象</li>
</ul>
<p>$('#input-id').on('filezoomhide', function(event, params) { console.log('File zoom hide ', params.sourceEvent, params.previewId, params.modal); });</p>
<h3>filezoomhidden</h3>
<p>在模态从用户眼中隐藏完成之后触发此事件（将等待CSS转换完成）​​。以下参数将作为JSON对象关键字另外发送：</p>
<ul>
<li><code>sourceEvent</code>：<em>事件</em>，模态对话框源事件<code>show.bs.modal</code>。</li>
<li><code>previewId</code>：<em>字符串</em>，预览缩略图<code>HTML</code>容器节点的<code>id</code>属性。</li>
<li><code>modal</code>：<em>jQuery</em><em>对象</em>，模态框对象</li>
</ul>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'filezoomhidden'<code>, </code>function(event, params) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>'File zoom hidden '<code>, params.sourceEvent, params.previewId, params.modal);</code></pre>
<pre><code><code>});</code></pre>
<h3>filezoomloaded</h3>
<p>在使用<code>remote</code>选项加载模态框内容之后触发此事件。以下参数将作为JSON对象关键字另外发送：</p>
<ul>
<li><code>sourceEvent</code>：<em>事件</em>，模态对话框源事件<code>show.bs.modal</code>。</li>
<li><code>previewId</code>：<em>字符串</em>，预览缩略图<code>HTML</code>容器节点的<code>id</code>属性。</li>
<li><code>modal</code>：<em>jQuery</em><em>对象</em>，模态框对象</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'filezoomloaded'<code>, </code>function(event, params) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>console<code>.log(</code>'File zoom loaded '<code>, params.sourceEvent, params.previewId, params.modal);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>filezoomprev</h3>
<p>在缩放预览模式下触发此事件，当单击查看上一个导航按钮时（也是在缩放模式下按下键盘左箭头时触发）。</p>
<ul>
<li><code>previewId</code>：<em>字符串</em>，预览缩略图<code>HTML</code>容器节点的<code>id</code>属性。</li>
<li><code>modal</code>：<em>jQuery</em><em>对象</em>，模态框对象</li>
</ul>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'filezoomprev'<code>, </code>function(event, params) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>'File zoom previous '<code>, params.previewId, params.modal);</code></pre>
<pre><code><code>});</code></pre>
<h3>filezoomnext</h3>
<p>在缩放预览模式下触发此事件，当查看下一个导航按钮被点击时（当在缩放模式下按下键盘右箭头时也会触发此事件）。</p>
<ul>
<li><code>previewId</code>：<em>字符串</em>，预览缩略图<code>HTML</code>容器节点的<code>id</code>属性。</li>
<li><code>modal</code>：<em>jQuery</em><em>对象</em>，模态框对象</li>
</ul>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'filezoomnext'<code>, </code>function(event, params) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp; </code>console<code>.log(</code>'File zoom next '<code>, params.previewId, params.modal);</code></pre>
<pre><code><code>});</code></pre>
<h2>异常事件</h2>
<p>用于文件验证错误的事件。</p>
<h3>fileerror</h3>
<p>当上传文件客户端验证错误时，会触发此事件。它允许传入对象<code>data</code>作为参数。</p>
<ul>
<li><code>data</code>：包含下面关键字的对象/关联数组。</li>
<li><code>id</code>：预览缩略图标识符id（如果不可用，则为<code>undefined</code>）</li>
<li><code>index</code>：文件索引或者预览缩略图索引（如果不可用，则为<code>undefined</code>）</li>
<li><code>file</code>：文件对象（如果不可用，则为<code>undefined</code>）</li>
<li><code>reader</code>：文件读取器实例（如果不可用，则为<code>undefined</code>）</li>
<li><code>files</code>：文件堆数组（如果不可用，则为<code>undefined</code>）</li>
<li><code>msg</code>：<em>字符串</em>，生成的错误信息</li>
</ul>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'fileerror'<code>, </code>function(event, data, msg) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp; </code>console<code>.log(data.id);</code></pre>
<pre><code><code>&nbsp;&nbsp; </code>console<code>.log(data.index);</code></pre>
<pre><code><code>&nbsp;&nbsp; </code>console<code>.log(data.file);</code></pre>
<pre><code><code>&nbsp;&nbsp; </code>console<code>.log(data.reader);</code></pre>
<pre><code><code>&nbsp;&nbsp; </code>console<code>.log(data.files);</code></pre>
<pre><code><code>&nbsp; &nbsp;</code>// 获取信息<code></code></pre>
<pre><code><code>&nbsp;&nbsp; alert(msg);</code></pre>
<pre><code><code>});</code></pre>
<h3>fileimageresizeerror</h3>
<p>当调整图像大小遇到错误或异常时，会触发此事件（请参见<a href="http://plugins.krajee.com/file-input#option-resizeimage" target="_blank">resizeImage</a>属性）。附加参数有：</p>
<ul>
<li><code>data</code>：包含下面关键字的对象/关联数组。</li>
<li><code>id</code>：预览缩略图标识符id（如果不可用，则为<code>undefined</code>）</li>
<li><code>index</code>：文件索引或者预览缩略图索引（如果不可用，则为<code>undefined</code>）</li>
<li><code>msg</code>：<em>字符串</em>，生成的错误信息</li>
</ul>
<p><em><strong>范例</strong></em>：</p>
<pre><code><code>$(</code>'#input-id'<code>).on(</code>'fileimageresizeerror'<code>, </code>function(event, data, msg) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp; </code>console<code>.log(data.id);</code></pre>
<pre><code><code>&nbsp;&nbsp; </code>console<code>.log(data.index);</code></pre>
<pre><code><code>&nbsp;&nbsp; </code>// get message<code></code></pre>
<pre><code><code>&nbsp;&nbsp; alert(msg);</code></pre>
<pre><code><code>});</code></pre>
<h3>fileuploaderror</h3>
<p>此事件仅在ajax上传时触发，并且主要针对ajax上传时遇到上载或文件输入验证错误。此事件仅针对ajax上传并在以下情况下触发：</p>
<ol>
<li>当每个预览缩略图中的上传图标被点击并且文件面临上传中的验证错误时，或者</li>
<li>当你将<code>uploadAsync</code>设置为<code>true</code>并且已触发批量上传时。在这种情况下，在任何所选文件面临上传验证错误后，会触发<code>fileuploaderror</code>事件。</li>
</ol>
<p>此事件可用的附加参数有：</p>
<ul>
<li><code>data</code>：这是一个数据对象（关联数组），它发送以下信息，其关键字是：</li>
<li><code>id</code>：预览缩略图的标识符（如果不可用，则为空对象）。</li>
<li><code>index</code>：文件索引或者预览缩略图索引（如果不可用，则为空对象）。</li>
<li><code>form</code>：<em>FormData</em>，通过XHR2传递的对象（如果不可用，则为空对象）。</li>
<li><code>files</code>：&nbsp;<em>数组</em>，文件栈数组（如果不可用，则为空对象）。</li>
<li><code>filenames</code>：<em>数组</em>，堆栈数组中每个文件的客户端文件名（如果不可用，则为空对象）。</li>
<li><code>filescount</code>：<em>int</em>，所选文件的计数包括已经上传的文件（基本上返回<code>getFilesCount</code>方法的输出）。</li>
<li><code>extra</code>：该插件的<code>uploadExtraData</code>设置（如果不可用，则为空对象）。</li>
<li><code>response</code>：通过ajax响应发送的数据（如果不可用，则为空对象）。</li>
<li><code>reader</code>：<code>FileReader</code>实例，如果可用。</li>
<li><code>jqXHR</code>：用于此事务的<code>jQuery XMLHttpRequest</code>对象（如果可用）。</li>
<li><code>msg</code>：<em>字符串</em>，生成的错误信息。</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'fileuploaderror'<code>, </code>function(event, data, msg) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>var<code> form = data.form, files = data.files, extra = data.extra,</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response = data.response, reader = data.reader;</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>console<code>.log(</code>'File upload error'<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;</code>// 获取信息<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;alert(msg);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>filebatchuploaderror</h3>
<p>此事件仅在ajax上传时触发，并且同步批量上传面临上传验证错误之后。此事件仅针对ajax上传并在以下情况下触发：</p>
<ul>
<li>当您将<code>uploadAsync</code>设置为<code>false</code>并且已触发批量上传时。在这种情况下，在任何文件面临上载错误或者你通过服务器操作JSON响应返回错误后触发<code>filebatchuploaderror</code>事件。</li>
</ul>
<p>此事件可用的附加参数有：</p>
<ul>
<li><code>data</code>：这是一个数据对象（关联数组），它发送以下信息，其关键字是：</li>
<li><code>form</code>：<em>FormData</em>，通过XHR2传递的对象（如果不可用，则为空对象）。</li>
<li><code>files</code>：&nbsp;<em>数组</em>，文件栈数组（如果不可用，则为空对象）。</li>
<li><code>filenames</code>：<em>数组</em>，堆栈数组中每个文件的客户端文件名（如果不可用，则为空对象）。</li>
<li><code>filescount</code>：<em>int</em>，所选文件的计数包括已经上传的文件（基本上返回<code>getFilesCount</code>方法的输出）。</li>
<li><code>extra</code>：该插件的<code>uploadExtraData</code>设置（如果不可用，则为空对象）。</li>
<li><code>response</code>：通过ajax响应发送的数据（如果不可用，则为空对象）。</li>
<li><code>reader</code>：<code>FileReader</code>实例，如果可用。</li>
<li><code>jqXHR</code>：用于此事务的<code>jQuery XMLHttpRequest</code>对象（如果可用）。</li>
<li><code>msg</code>：<em>字符串</em>，生成的错误信息。</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'filebatchuploaderror'<code>, </code>function(event, data, msg) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>var<code> form = data.form, files = data.files, extra = data.extra,</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response = data.response, reader = data.reader;</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>console<code>.log(</code>'File batch upload error'<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;</code>// 获取信息<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;alert(msg);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>filedeleteerror</h3>
<p>当在<code>initialPreview</code>内容集中删除每个缩略图文件出现错误时触发此事件。附加参数有：</p>
<ul>
<li><code>data</code>：这是一个数据对象（关联数组），它发送以下信息，其关键字是：</li>
<li><code>id</code>：预览缩略图的标识符（如果不可用，则为空对象）。</li>
<li><code>index</code>：文件索引或者预览缩略图索引（如果不可用，则为空对象）。</li>
<li><code>extra</code>：该插件的<code>uploadExtraData</code>设置（如果不可用，则为空对象）。</li>
<li><code>response</code>：通过ajax响应发送的数据（如果不可用，则为空对象）。</li>
<li><code>jqXHR</code>：用于此事务的<code>jQuery XMLHttpRequest</code>对象（如果可用）。</li>
<li><code>msg</code>：<em>字符串</em>，生成的错误信息。</li>
</ul>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'filedeleteerror'<code>, </code>function(event, data, msg) <code>{</code></pre>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>console<code>.log(</code>'File delete error'<code>);</code></pre>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;</code>// get message<code></code></pre>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;alert(msg);</code></pre>
<pre><code><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>filefoldererror</h3>
<p>当文件夹或多个文件夹被拖放到文件预览放置区时，会触发此事件。附加参数有：</p>
<ul>
<li><code>folders</code>：<em>整数</em>，拖拽的文件夹数量。</li>
<li><code>msg</code>：<em>字符串</em>，生成的错误信息。</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input-id'<code>).on(</code>'filefoldererror'<code>, </code>function(event, folders, msg) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;</code>console<code>.log(</code>'File folder dropped error'<code>);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;</code>// 获取信息<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;alert(msg);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h3>filecustomerror</h3>
<p>通过从源事件返回错误异常对象，用户从其他事件之一手动触发此事件。参考<a href="http://www.bootstrap-fileinput.com/events.html#%E4%BA%8B%E4%BB%B6%E6%93%8D%E4%BD%9C">事件操作部分</a>了解详情。附加参数有：</p>
<ul>
<li><code>data</code>：这是一个数据对象（关联数组），它发送以下信息，其关键字是：</li>
<li><code>form</code>：<em>FormData</em>，通过XHR2传递的对象（如果不可用，则为空对象）。</li>
<li><code>files</code>：&nbsp;<em>数组</em>，文件栈数组（如果不可用，则为空对象）。</li>
<li><code>filenames</code>：<em>数组</em>，堆栈数组中每个文件的客户端文件名（如果不可用，则为空对象）。</li>
<li><code>filescount</code>：<em>int</em>，所选文件的计数包括已经上传的文件（基本上返回<code>getFilesCount</code>方法的输出）。</li>
<li><code>extra</code>：该插件的<code>uploadExtraData</code>设置（如果不可用，则为空对象）。</li>
<li><code>response</code>：通过ajax响应发送的数据（如果不可用，则为空对象）。</li>
<li><code>reader</code>：<code>FileReader</code>实例，如果可用。</li>
<li><code>jqXHR</code>：用于此事务的<code>jQuery XMLHttpRequest</code>对象（如果可用）。</li>
<li><code>msg</code>：<em>字符串</em>，生成的错误信息。</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>"#input"<code>).on(</code>'filecustomerror'<code>, </code>function(event, params, msg) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;</code>console<code>.log(params.id);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;</code>console<code>.log(params.index);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;</code>console<code>.log(params.data);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;</code>// 获取信息<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;alert(msg);</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<h2>事件处理</h2>
<p>从版本v4.1.8开始，你可以操作事件并通过其他事件添加自定义验证，通过返回大多数事件的数据并将其用于高级处理。除了以下事件之外，事件部分中列出的大多数事件都支持此功能。</p>
<ul>
<li><code>fileclear</code></li>
<li><code>filecleared</code></li>
<li><code>filereset</code></li>
<li><code>fileerror</code></li>
<li><code>fileuploaderror</code></li>
<li><code>filebatchuploaderror</code></li>
<li><code>filedeleteerror</code></li>
<li><code>filefoldererror</code></li>
<li><code>filecustomerror</code></li>
<li><code>fileuploaded</code></li>
<li><code>filebatchuploadcomplete</code></li>
<li><code>filebatchuploadsuccess</code></li>
</ul>
<p>对于除上述之外的所有事件，你可以设置自定义验证错误，这将在启动上传之前触发。</p>
<p>这将使你能够添加其他自定义验证来增强文件输入控件适用于更多场景。它允许使用任何<code>fileinput</code>事件（除上述事件之外）返回关联对象，例如，<code>change</code>、<code>fileselect</code>、<code>filepreupload</code>、<code>filebatchpreupload</code>等等。</p>
<p>该对象可以返回以下关键字：</p>
<ul>
<li><code>message</code>：<em>字符串</em>，在上传之前显示是的验证错误消息。如果设置了它，插件会在调用时自动中止上传，并将其显示为错误消息。你可以使用此属性来读取文件并执行自己的自定义验证。</li>
<li><code>data</code>：<em>对象</em>，一个中止时可选的额外数据关联数组，你可以给它传值，稍后使用它。</li>
</ul>
<p><em><strong>范例</strong></em>：</p>
<ul>
<li><strong>步骤</strong><strong>1</strong>： 你可以触发一个从<code>filepreupload</code>中止的异常。</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;$(</code>'#input'<code>).on(</code>'filepreupload'<code>, </code>function(event, data, previewId, index, jqXHR) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>// 进行自定义验证并返回如下所示的错误<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>if<code> (customValidationFailed) {</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>return<code> {</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message: </code>'You are not allowed to do that'<code>,</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: {key1: </code>'Key 1'<code>, detail1: </code>'Detail 1'<code>}</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;&nbsp;});</code></pre>
<p>上传中断将在AJAX上传或表单提交（非AJAX上传）时触发。</p>
<ul>
<li><strong>步骤</strong><strong>2</strong>：通过捕获<code>filecustomerror</code>中止事件来读取额外的数据。</li>
</ul>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>$(</code>'#input'<code>).on(</code>'filecustomerror'<code>, </code>function(event, params) <code>{</code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;</code>// `params.abortData`包含额外传出的数据<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>&nbsp;</code>// `params.abortMessage`包含传出的错误中断信息<code></code></pre>
<pre><code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>});</code></pre>
<p>如前所述，在以下事件中不支持使用<code>filecustomerror</code>的上述功能：</p>
<ul>
<li><code>fileclear</code></li>
<li><code>filecleared</code></li>
<li><code>filereset</code></li>
<li><code>fileerror</code></li>
<li><code>fileuploaderror</code></li>
<li><code>filebatchuploaderror</code></li>
<li><code>filedeleteerror</code></li>
<li><code>filecustomerror</code></li>
<li><code>fileuploaded</code></li>
<li><code>filebatchuploadcomplete</code></li>
<li><code>&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code>filebatchuploadsuccess</code><code></code></li>
</ul>
<h1>样例代码</h1>
<p align="left"><strong>AJAX</strong><strong>上传实例</strong></p>
<p align="left">具有拖拽功能，基于AJAX 异步/同步的上传。只需要设置uploadurl数据属性，把multiple属性设置为true。请注意，多个上传的文件输入name属性应设置为数组格式。你可以修改上传之前选择的文件，例如增加或删除。对于下面的示例，你可以在服务器上读取上传的name属性为kartik-input-700文件。</p>
<p><strong><span style="font-size: 18px;">例1</span></strong><br />    &lt;input id="input-700" name="kartik-input-700[]" type="file" multiple class="file-loading"&gt;</p>
<p>    &lt;script&gt;</p>
<p>        $("#input-700").fileinput({</p>
<p>            uploadUrl: "http://localhost/file-upload-single/1", // 服务器端上传处理程序</p>
<p>            uploadAsync: true,  //异步上传</p>
<p>            maxFileCount: 5     //最大上传文件数为5</p>
<p>        });</p>
<p>    &lt;/script&gt;</p>
<p><strong><span style="font-size: 18px;">例2</span></strong><br />    &lt;input id="input-701" name="kartik-input-701[]" type="file" multiple=true class="file-loading"&gt;</p>
<p>    &lt;script&gt;</p>
<p>        $("#input-701").fileinput({</p>
<p>            uploadUrl: "http://localhost/file-upload-batch/1", // 服务器端上传处理程序</p>
<p>            uploadAsync: true,</p>
<p>            maxFileCount: 5</p>
<p>        });</p>
<p>&lt;/script&gt;</p>
<p><span style="font-size: 18px;"><strong>例3</strong></span><br /> &lt;input id="input-702" name="kartik-input-702[]" type="file" multiple=true class="file-loading"&gt;<br /> &lt;script&gt;<br />     $("#input-702").fileinput({<br />         uploadUrl: "http://localhost/file-upload-single/1", // 服务器端上传处理程序<br />         uploadAsync: true,  //异步上传<br />         minFileCount: 1,    //最小上传文件数： 1<br />         maxFileCount: 5,    //最大上传文件数： 5<br />         overwriteInitial: false,  //不能重载初始预览<br />        initialPreview: [         //初始预览数据<br />             "http://lorempixel.com/800/460/people/1",<br />              "http://lorempixel.com/800/460/people/2"<br />         ],<br />          initialPreviewAsData: true,      // 确定传入预览数据，而不是原生标记语言<br />         initialPreviewFileType: 'image', // 默认为`image`，可以在下面配置中被覆盖<br />        initialPreviewConfig: [          //初始预览配置<br />              {caption: "People-1.jpg", size: 576237, width: "120px", url: "/site/file-delete", key: 1},<br />              {caption: "People-2.jpg", size: 932882, width: "120px", url: "/site/file-delete", key: 2},<br />          ],<br />          uploadExtraData: {    //上传额外数据<br />              img_key: "1000",<br />              img_keywords: "happy, places",<br />         }<br />      });<br />  &lt;/script&gt;<br /> <strong><span style="font-size: 18px;">例4</span></strong><br />  PHP的写法如下：<br />  &lt;input id="input-703" name="kartik-input-703[]" type="file" multiple class="file-loading"&gt;<br />  &lt;script&gt;<br />      $("#input-703").fileinput({<br />         uploadUrl: "http://localhost/file-upload-single/2",<br />          uploadAsync: true,   //异步上传<br />         minFileCount: 1,<br />          maxFileCount: 5,<br />         uploadExtraData: function(previewId, index) {<br />              return {key: index};<br />         },<br />          overwriteInitial: false,<br />          initialPreviewAsData: true // 确定你是仅发送预览数据，而不是标记<br />      });<br />  &lt;/script&gt;<br />  &lt;?php<br />  // ...<br />  // 处理ajax上传并返回JSON响应的服务器代码。<br />  // 你的服务器方法必须返回一个包含`initialPreview`、`initialPreviewConfig`和`append`的JSON对象。<br />  // 一个PHP服务器代码示例如下：<br />  // ...<br />  $key = '&lt;解析图像关键字的代码&gt;';<br />  $url = '&lt;你删除这个文件的服务器方法URL&gt;';<br />   echo json_encode([<br />      'initialPreview' =&gt; [<br />         "http://path.to.uploaded.file/{$key}.jpg"<br />      ],<br />     'initialPreviewConfig' =&gt; [<br />          ['caption' =&gt; "Sports-{$key}.jpg", 'size' =&gt; 627392, 'width' =&gt; '120px', 'url' =&gt; $url, 'key' =&gt; $key],<br />      ],<br />     'append' =&gt; true // 是否把这些配置加入`initialPreview`。<br />                       // 如果设置为`false`，它会重载初始预览。<br />                       // 如果设置为`true`，它会加入初始预览之中。<br />                       // 如果这个属性没有被设置或者没有传出，它会默认为`true`。<br />  ]);<br />  ?&gt;</p>
<p><span style="font-size: 18px;"><strong> 例5</strong></span></p>
<p>  &lt;input id="input-704" name="kartik-input-704[]" type="file" multiple=true class="file-loading"&gt;<br />  &lt;script&gt;<br />      $("#input-704").fileinput({<br />          uploadUrl: "http://localhost/file-upload-batch/2", // 服务器上传接收方法<br />         uploadAsync: false,    //同步上传<br />          minFileCount: 1,<br />         maxFileCount: 5,<br />         initialPreviewAsData: true<br />      });<br />  &lt;/script&gt;<br />  &lt;?php<br />  // ...<br />  // 处理ajax上传并返回JSON响应的服务器代码。<br />  // 你的服务器方法必须返回一个包含`initialPreview`、`initialPreviewConfig`和`append`的JSON对象。<br />  // 一个PHP服务器代码示例如下：<br />  // ...<br />  $p1 = $p2 = [];<br />  if (empty($_FILES['kartik-input-704']['name'])) {<br />      echo '{}';<br />      return;<br />  }<br />  for ($i = 0; $i &lt; count($_FILES['kartik-input-704']['name']); $i++) {<br />      $j = $i + 1;<br />      $key = '&lt;获取图像关键字的代码&gt;';<br />      $url = '&lt;你的服务器上删除这个图像的服务地址&gt;';<br />      $p1[$i] = "http://path.to.uploaded.file/{$key}.jpg"; // 发送的数据<br />      $p2[$i] = ['caption' =&gt; "Animal-{$j}.jpg", 'size' =&gt; 732762, 'width' =&gt; '120px', 'url' =&gt; $url, 'key' =&gt; $key];<br />  }<br />  echo json_encode([<br />      'initialPreview' =&gt; $p1,<br />     'initialPreviewConfig' =&gt; $p2,  <br />      'append' =&gt; true // 是否把这些配置加入`initialPreview`。<br />                       // 如果设置为`false`，它会重载初始预览。<br />                       // 如果设置为`true`，它会加入初始预览之中。<br />                       // 如果这个属性没有被设置或者没有传出，它会默认为`true`。<br />  ]);<br />  ?&gt;</p>
<p><span style="font-size: 18px;"><strong>例6</strong></span></p>
<p> &lt;input id="input-705" name="kartik-input-705[]" type="file" multiple class="file-loading"&gt;<br /> &lt;script&gt;<br />     var $input = $("#input-705");<br />     $input.fileinput({<br />         uploadUrl: "http://localhost/file-upload-batch/2", // 服务器接收上传文件的方法<br />         uploadAsync: false,<br />         showUpload: false, // 隐藏上传按钮<br />         showRemove: false, // 隐藏移除按钮<br />         minFileCount: 1,<br />         maxFileCount: 5<br />     }).on("filebatchselected", function(event, files) {<br />         // 选择文件后立即触发上传方法<br />         $input.fileinput("upload");<br />     });<br /> &lt;/script&gt;<br /><span style="font-size: 18px;"><strong>例7</strong></span><br /> &lt;input id="input-706" name="kartik-input-706[]" type="file" multiple=true class="file-loading"&gt;<br /> &lt;style&gt;<br />     .krajee-default .file-thumb-progress {<br />         top: 55px<br />     }<br /> &lt;/style&gt; &lt;!-- 样式重载 --&gt;<br /> &lt;script&gt;<br />     var $el2 = $("#input-706");<br /> <br />     // 这个场景的自定义页脚模板<br />     // 自定义标签在大括号里<br /> <br />     var footerTemplate = '&lt;div class="file-thumbnail-footer" style ="height:94px"&gt;\n' +<br />     '   &lt;div style="margin:5px 0"&gt;\n' +<br />     '       &lt;input class="kv-input kv-new form-control input-sm text-center {TAG_CSS_NEW}" value="{caption}"         placeholder="Enter caption..."&gt;\n' +<br />     '       &lt;input class="kv-input kv-init form-control input-sm text-center {TAG_CSS_INIT}" value="{TAG_VALUE}" placeholder="Enter caption..."&gt;\n' +<br />     '   &lt;/div&gt;\n' +<br />     '   {size} {progress} {actions}\n' +<br />     '&lt;/div&gt;';<br /> <br />     $el2.fileinput({<br />         uploadUrl: '/file-upload-batch/2',<br />         uploadAsync: false,<br />         maxFileCount: 5,<br />         overwriteInitial: false,<br />         layoutTemplates: {footer: footerTemplate, size: '&lt;samp&gt;&lt;small&gt;({sizeText})&lt;/small&gt;&lt;/samp&gt;'},<br />         previewThumbTags: {<br />             '{TAG_VALUE}': '',        // 无值<br />             '{TAG_CSS_NEW}': '',      // 新的缩略图输入<br />             '{TAG_CSS_INIT}': 'hide'  // 隐藏初始输入<br />         },<br />         initialPreview: [<br />             "&lt;img style='height:160px' src='http://angelasp.com/800/460/city/1'&gt;",<br />             "&lt;img style='height:160px' src='http://angelasp.com/800/460/city/2'&gt;",<br />         ],<br />         initialPreviewConfig: [<br />             {caption: "City-1.jpg", size: 327892, width: "120px", url: "/site/file-delete", key: 1},<br />             {caption: "City-2.jpg", size: 438828, width: "120px", url: "/site/file-delete", key: 2},<br />         ],<br />         initialPreviewThumbTags: [<br />             {'{TAG_VALUE}': 'City-1.jpg', '{TAG_CSS_NEW}': 'hide', '{TAG_CSS_INIT}': ''},<br />             {<br />                 '{TAG_VALUE}': function() { // 回调示例<br />                     return 'City-2.jpg';<br />                 },<br />                 '{TAG_CSS_NEW}': 'hide',<br />                 '{TAG_CSS_INIT}': ''<br />             }<br />         ],<br />         uploadExtraData: function() {  // 回调示例<br />             var out = {}, key, i = 0;<br />             $('.kv-input:visible').each(function() {<br />                 $el = $(this);<br />                 key = $el.hasClass('kv-new') ? 'new_' + i : 'init_' + i;<br />                 out[key] = $el.val();<br />                 i++;<br />             });<br />             return out;<br />         }<br />     });<br /> &lt;/script&gt;<br /><span style="font-size: 18px;"><strong>例8</strong></span><br /> &lt;input id="input-707" name="kartik-input-707[]" type="file" multiple=true class="file-loading"&gt;<br /> &lt;script&gt;<br /> $("#input-707").fileinput({<br />     uploadUrl: "/file-upload-batch/1",<br />     uploadAsync: false,<br />     minFileCount: 2,<br />     maxFileCount: 5,<br />     overwriteInitial: false,<br />     initialPreview: [<br />         "&lt;img style='height:160px' src='http://angelasp.com/800/460/nature/1'&gt;",<br />         "&lt;img style='height:160px' src='http://angelasp.com/800/460/nature/2'&gt;",<br />         "&lt;img style='height:160px' src='http://angelasp.com/800/460/nature/3'&gt;",<br />     ],<br />     initialPreviewConfig: [<br />         {caption: "Food-1.jpg", size: 329892, width: "120px", url: "/site/file-delete", key: 1},<br />         {caption: "Food-2.jpg", size: 872378, width: "120px", url: "/site/file-delete", key: 2},<br />         {caption: "Food-3.jpg", size: 632762, width: "120px", url: "/site/file-delete", key: 3},<br />     ],<br />     uploadExtraData: {<br />         img_key: "1000",<br />         img_keywords: "happy, nature",<br />     }<br /> });<br /> $("#input-707").on("filepredelete", function(jqXHR) {<br />     var abort = true;<br />     if (confirm("Are you sure you want to delete this image?")) {<br />         abort = false;<br />     }<br />     return abort; // 你也可以发送任何数据/对象，只要你可以在`filecustomerror`事件接收。<br /> });<br /> &lt;script&gt;<br /><span style="font-size: 18px;"><strong>例9</strong></span><br /> &lt;input id="input-708" name="kartik-input-708[]" type="file" multiple=true class="file-loading"&gt;<br /> &lt;script&gt;<br />     $("#input-708").fileinput({<br />         uploadUrl: "http://localhost/file-upload-batch/1", // 服务器接收上传文件方法<br />         uploadAsync: false,<br />         maxFileCount: 5<br />     }).on('filebatchpreupload', function(event, data) {<br />         var n = data.files.length, files = n &gt; 1 ? n + ' files' : 'one file';<br />         if (!window.confirm("你确定要上传 " + files + "？")) {<br />             return {<br />                 message: "上传中断！", // 上传异常信息<br />                 data:{} // 要发送的任何其他数据，可以在`filecustomerror`中引用<br />             };<br />         }<br />     });<br /> &lt;/script&gt;<br /><span style="font-size: 18px;"><strong>例10</strong></span><br />&lt;input id="input-709" name="kartik-input-709[]" type="file" multiple class="file-loading"&gt;<br />&lt;div id="kv-error-1" style="margin-top:10px;display:none"&gt;&lt;/div&gt;<br />&lt;div id="kv-success-1" class="alert alert-success fade in" style="margin-top:10px;display:none"&gt;&lt;/div&gt;<br />&lt;script&gt;<br />    $("#input-709").fileinput({<br />        uploadUrl: "http://localhost/file-upload-single/1", // 服务器接收上传文件方法<br />        uploadAsync: true,<br />        showPreview: false,<br />        allowedFileExtensions: ['jpg', 'png', 'gif'],<br />        maxFileCount: 5,<br />        elErrorContainer: '#kv-error-1'<br />    }).on('filebatchpreupload', function(event, data, id, index) {<br />        $('#kv-success-1').html('&lt;h4&gt;上传状态&lt;/h4&gt;&lt;ul&gt;&lt;/ul&gt;').hide();<br />    }).on('fileuploaded', function(event, data, id, index) {<br />        var fname = data.files[index].name,<br />            out = '&lt;li&gt;' + 'U上传文件 # ' + (index + 1) + ' - '  + <br />                fname + ' 成功' + '&lt;/li&gt;';<br />        $('#kv-success-1 ul').append(out);<br />        $('#kv-success-1').fadeIn('slow');<br />    });<br />&lt;/script&gt;<br /><span style="font-size: 18px;"><strong>例11</strong></span><br />&lt;input id="input-710" name="kartik-input-710[]" type="file" multiple class="file-loading"&gt;<br />&lt;div id="kv-error-2" style="margin-top:10px;display:none"&gt;&lt;/div&gt;<br />&lt;script&gt;<br />    &lt;div id="kv-success-2" class="alert alert-success fade in" style="margin-top:10px;display:none"&gt;&lt;/div&gt;<br />    $("#input-700").fileinput({<br />        uploadUrl: "http://localhost/file-upload-batch/1", // 服务器接收上传文件方法<br />        uploadAsync: false,<br />        showPreview: false,<br />        allowedFileExtensions: ['jpg', 'png', 'gif'],<br />        maxFileCount: 5,<br />        elErrorContainer: '#kv-error-2'<br />    }).on('filebatchpreupload', function(event, data, id, index) {<br />        $('#kv-success-2').html('&lt;h4&gt;上传状态&lt;/h4&gt;&lt;ul&gt;&lt;/ul&gt;').hide();<br />    }).on('filebatchuploadsuccess', function(event, data) {<br />        var out = '';<br />        $.each(data.files, function(key, file) {<br />            var fname = file.name;<br />            out = out + '&lt;li&gt;' + '上传文件 # ' + (key + 1) + ' - '  +  fname + ' 成功。' + '&lt;/li&gt;';<br />        });<br />        $('#kv-success-2 ul').append(out);<br />        $('#kv-success-2').fadeIn('slow');<br />    });<br />&lt;/script&gt;<br /><span style="font-size: 18px;"><strong>例12</strong></span><br />&lt;input id="input-711" name="kartik-input-711[]" type="file" multiple class="file-loading"&gt;<br />&lt;script&gt;<br />    $("#input-711").fileinput({<br />        uploadUrl: "http://localhost/file-upload-single/1", // 服务器接收上传文件方法<br />        uploadAsync: true,<br />        maxFileCount: 5,<br />        showBrowse: false,<br />        browseOnZoneClick: true<br />    });<br />&lt;/script&gt;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>