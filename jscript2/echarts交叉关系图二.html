<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修echarts交叉关系图二' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>echarts交叉关系图二</center></div><div class='banquan'>原文出处:本文由博客园博主永远飞翔的心提供。<br/>
原文连接:https://www.cnblogs.com/lcyxfei/p/10844114.html</div><br>
    <p>echarts关系图表，此图是坐标关系图，此图用的随机坐标，此图可以拖拽，更方便整理关系，</p>
<p>引入echarts.js就可以实现</p>
<p><img src="./images/echarts交叉关系图二0.png" alt="" /></p>
<p>代码：</p>
<pre><code>var graph={  //这是数据项目中一般都是获取到的<br />    nodes:[<br />        {"id":"0","name":"河北XX设计有限公司","attributes":{"modularity_class":0}},<br />        {"id":"1","name":"石家庄XX设计有限公司","attributes":{"modularity_class":0}},<br />        {"id":"2","name":"河北XX创业发展有限公司","attributes":{"modularity_class":0}},<br />        {"id":"3","name":"河北XX置业发展有限公司","attributes":{"modularity_class":0}},<br />        {"id":"4","name":"石家庄XX传媒有限公司","attributes":{"modularity_class":0}},<br />        {"id":"5","name":"河北XX实业发展有限公司","attributes":{"modularity_class":0}},<br /><br />        {"id":"6","name":"赵敏雅","attributes":{"modularity_class":1}},<br />        {"id":"7","name":"范军","attributes":{"modularity_class":1}},<br />        {"id":"8","name":"孙海","attributes":{"modularity_class":1}},<br />        {"id":"9","name":"李博","attributes":{"modularity_class":1}},<br /><br />        {"id":"10","name":"主要人员","attributes":{"modularity_class":2}},<br />        {"id":"11","name":"投资人","attributes":{"modularity_class":2}},<br />        {"id":"12","name":"法定代表人","attributes":{"modularity_class":2}},<br /><br />        {"id":"13","name":"河北XX实业有限公司","attributes":{"modularity_class":3}}<br />    ],<br />    links:[<br />        {"id":"0","source":"0","target":"6"},<br />        {"id":"1","source":"1","target":"6"},<br />        {"id":"2","source":"2","target":"6"},<br />        {"id":"3","source":"2","target":"7"},<br />        {"id":"4","source":"3","target":"8"},<br />        {"id":"5","source":"4","target":"7"},<br />        {"id":"6","source":"5","target":"7"},<br />        {"id":"7","source":"6","target":"10"},<br />        {"id":"8","source":"7","target":"10"},<br />        {"id":"9","source":"6","target":"11"},<br />        {"id":"10","source":"7","target":"11"},<br />        {"id":"11","source":"8","target":"11"},<br />        {"id":"12","source":"8","target":"12"},<br />        {"id":"13","source":"9","target":"11"},<br />        {"id":"14","source":"10","target":"13"},<br />        {"id":"15","source":"11","target":"13"},<br />        {"id":"16","source":"12","target":"13"}<br />    ]<br />};<br />var myChart = echarts.init(document.getElementById('guanxitu'));<br />var categories=[<br />    {<br />        id:0,<br />        name: '公司',<br />        itemStyle:{normal:{color:'#c23531'}},<br />        symbolSize:[42,42]<br />    },<br />    {<br />        id:1,<br />        name: '主要成员',<br />        itemStyle:{normal:{color:'#61a0a8'}},<br />        symbolSize:[42,42]<br />    },<br />    {<br />        id:2,<br />        name:'自然人',<br />        itemStyle:{normal:{color:'#749f83'}},<br />        symbolSize:[42,42]<br />    },<br />    {<br />        id:3,<br />        name:'实业公司',<br />        itemStyle:{normal:{color:'#d48265'}},<br />        symbolSize:[42,42]<br />    }<br />];<br />var winWidth=document.body.clientWidth;<br />var winHeight=document.body.clientHeight;<br />graph.nodes.forEach(function (node) {<br />    node.x=parseInt(Math.random()*800);  //这里是最重要的如果数据中有返回节点x,y位置这里就不用设置，如果没有这里一定要设置node.x和node.y，不然无法定位节点 也实现不了拖拽了；<br />    node.y=parseInt(Math.random()*800);<br />    if(node.attributes.modularity_class != 0){<br />        node.symbolSize=[42,42];<br />        node.sizeFlag=[42,42];<br />    }else{<br />        node.symbolSize=[64,64];<br />        node.sizeFlag=[64,64];<br />    }<br />    node.category = node.attributes.modularity_class;<br />    node.label={<br />        normal:{<br />            show:true<br />        }<br />    }<br />});<br />var option = {    //这里是option配置<br />    legend: [{    //图例组件<br />        data: categories.map(function (a) {<br />            return a.name;<br />        }),<br />        top:0,<br />        left:(winWidth-1200)/2,         //这里是图例组件定位使用的，自定义<br />        itemGap:26,<br />        textStyle:{<br />            padding:[0,12]<br />        },<br />        backgroundColor:'#f5f5f5'<br />    }],<br />    animationDurationUpdate: 1500,<br />    animationEasingUpdate: 'quinticInOut',<br />    series : [<br />        {<br />            type: 'graph',<br />            layout: 'none',           //因为节点的位置已经有了就不用在这里使用布局了<br />            circular:{rotateLabel:true},<br />            animation: false,<br />            data: graph.nodes,<br />            links: graph.links,<br />            categories: categories,   //节点分类的类目<br />            roam: true,   //添加缩放和移动<br />            draggable: false,   //注意这里设置为false，不然拖拽鼠标和节点有偏移<br />            label: {<br />                normal: {<br />                    position: 'bottom',<br />                    rich:{<br />                        bg:{<br />                            backgroundColor: '#f5f5f5'<br />                        }<br />                    }<br />                }<br />            }<br />        }<br />    ]<br />};<br />myChart.setOption(option);<br />initInvisibleGraphic() ;<br />function initInvisibleGraphic() {<br />    // Add shadow circles (which is not visible) to enable drag.<br />    myChart.setOption({<br />        graphic: echarts.util.map(option.series[0].data, function (item, dataIndex) {<br />            //使用图形元素组件在节点上划出一个隐形的图形覆盖住节点<br />            var tmpPos=myChart.convertToPixel({'seriesIndex': 0},[item.x,item.y]);<br />            return {<br />                type: 'circle',<br />                id:dataIndex,<br />                position: tmpPos,<br />                shape: {<br />                    cx: 0,<br />                    cy: 0,<br />                    r: 20<br />                },<br />                // silent:true,<br />                invisible: true,<br />                draggable: true,<br />                ondrag: echarts.util.curry(onPointDragging, dataIndex),<br />                z: 100              //使图层在最高层<br />            };<br />        })<br />    });<br />    window.addEventListener('resize', updatePosition);<br />    myChart.on('dataZoom', updatePosition);<br />}<br />myChart.on('graphRoam', updatePosition);<br />function updatePosition() {    //更新节点定位的函数<br />    myChart.setOption({<br />        graphic: echarts.util.map(option.series[0].data, function (item, dataIndex) {<br />            var tmpPos=myChart.convertToPixel({'seriesIndex': 0},[item.x,item.y]);<br />            return {<br />                position: tmpPos<br />            };<br />        })<br />    });<br /><br />}<br />function onPointDragging(dataIndex) {      //节点上图层拖拽执行的函数<br />    var tmpPos=myChart.convertFromPixel({'seriesIndex': 0},this.position);<br />    option.series[0].data[dataIndex].x = tmpPos[0];<br />    option.series[0].data[dataIndex].y = tmpPos[1];<br />    myChart.setOption(option);<br />    updatePosition();<br />}</pre>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>