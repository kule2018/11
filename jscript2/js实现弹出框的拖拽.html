<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修js实现弹出框的拖拽' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>js实现弹出框的拖拽</center></div><div class='banquan'>原文出处:本文由博客园博主筱颖Daisy提供。<br/>
原文连接:https://www.cnblogs.com/yingDaisy/p/10711484.html</div><br>
    <div>//HTML部分</div>
<div>
<p>&lt;div class="wrap"&gt;&lt;/div&gt;</p>
<p>&lt;div class="popUpBox"&gt;<br />　　&lt;div class="layer-head"&gt;&lt;div class="layer-head-text"&gt;弹出框&lt;/div&gt;&lt;div class="layer-close"&gt;&lt;/div&gt;&lt;/div&gt;<br />　　&lt;div class="layer-body"&gt;&lt;/div&gt;<br />    　　&lt;div class="layer-footer"&gt;<br />            　　　　&lt;div class="layer-footer-button-group"&gt;<br />            　　　　　　&lt;div class="layer-footer-button layer-sure"&gt;确定&lt;/div&gt;<br />            　　　　　　&lt;div class="layer-footer-button layer-cancel"&gt;取消&lt;/div&gt;<br />        　　　　&lt;/div&gt;<br />    　　&lt;/div&gt;<br />&lt;/div&gt;</p>
</div>
<div>//CSS部分</div>
<div>
<div>
<div>.wrap {</div>
<div>position: fixed;</div>
<div>left: 0;</div>
<div>top: 0;</div>
<div>background-color: #000;</div>
<div>z-index: 10000;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;opacity: 0.3;</div>
<div>}</div>
</div>
</div>
<div>
<div>
<div>.popUpBox {</div>
<div>　　height: 400px;</div>
<div>　　width: 700px;</div>
<div>　　position: absolute;</div>
<div>　　overflow: hidden;</div>
<div>　　box-sizing: border-box;</div>
<div>　　z-index: 10000;</div>
<div>　　background-color: #fff;</div>
<div>　　border-radius: 2px;</div>
<div>　　box-shadow: 1px 1px 50px rgba(0,0,0,.3);</div>
<div>}</div>
<div>
<div>
<div>.layer-head {</div>
<div>　　width: 100%;</div>
<div>　　height: 35px;</div>
<div>　　border-bottom: 1px solid #eee;</div>
<div>　　box-sizing: border-box;</div>
<div>　　background-color: #f8f8f8;</div>
<div>　　border-radius: 4px 4px 0 0;</div>
<div>　　cursor: move;</div>
<div>}</div>
<div><br />
<div>.layer-head-text {</div>
<div>　　padding-left: 20px;</div>
<div>　　font-size: 14px;</div>
<div>　　color: #333;</div>
<div>　　height: 35px;</div>
<div>　　line-height: 34px;</div>
<div>　　float: left;</div>
<div>}</div>
<div>.layer-close {</div>
<div>　　float: right;</div>
<div>　　width: 16px;</div>
<div>　　height: 16px;</div>
<div>　　background-image: url(../images/close_hover.png);</div>
<div>　　background-repeat:no-repeat;</div>
<div>　　background-size:100% 100%;</div>
<div>　　position: absolute;</div>
<div>　　top: 10px;</div>
<div>　　right: 12px;</div>
<div>　　cursor: pointer;</div>
<div>}</div>
<div>.layer-body {</div>
<div>　　width: 100%;</div>
<div>　　height: calc(100% - 73px);</div>
<div>}</div>
<div>
<div>.layer-footer {</div>
<div>　　width: 100%;</div>
<div>　　height: 38px;</div>
<div>　　border-top: 1px solid #eee;</div>
<div>　　box-sizing: border-box;</div>
<div>　　background-color: #f8f8f8;</div>
<div>　　border-radius: 0 0 4px 4px;</div>
<div>}</div>
<div>.layer-footer-button-group {</div>
<div>　　padding: 5px 0 5px 576px;</div>
<div>　　height: 28px;</div>
<div>}</div>
<div>.layer-footer-button {</div>
<div>　　width: 56px;</div>
<div>　　height: 28px;</div>
<div>　　line-height: 28px;</div>
<div>　　margin-right: 6px;</div>
<div>　　box-sizing: border-box;</div>
<div>　　font-size: 12px;</div>
<div>　　float: left;</div>
<div>　　text-align: center;</div>
<div>　　cursor: pointer;</div>
<div>}</div>
<div>.layer-sure {</div>
<div>　　border: 1px solid #4898d5;</div>
<div>　　background-color: #2e8ded;</div>
<div>　　color: #fff;</div>
<div>}</div>
<div>.layer-cancel {</div>
<div>　　border: 1px solid #dedede;</div>
<div>　　background-color: #f1f1f1;</div>
<div>　　color: #333;</div>
<div>}</div>

</div>
</div>
</div>
</div>
</div>
</div>
<div>&nbsp;</div>
<div>//点击某物体时，用drag对象即可，move和up是全局区域，也就是整个文档通用，应该使用document对象而不是drag对象(否则，采用drag对象时物体只能往右方或下方移动)</div>
<div>$(document).on('mousedown', '.layer-head', function(e) {</div>
<div>　　e = e || window.event; //兼容ie浏览器</div>
<div>　　var drag = $(this).parent();</div>
<div>　　$('body').addClass('select'); //webkit内核和火狐禁止文字被选中</div>
<div>　　document.body.onselectstart = document.body.ondrag = function() { //ie浏览器禁止文字选中</div>
<div>　　return false;</div>
<div>}</div>
<div>if ($(e.target).hasClass('layer-close')) { //点关闭按钮不能拖拽模态框</div>
<div>　　return;</div>
<div>}</div>
<div>　　var diffX = e.clientX - drag.offset().left; //鼠标点击物体那一刻相对于物体左侧边框的距离=点击时的位置相对于浏览器最左边的距离-物体左边框相对于浏览器最左边的距离</div>
<div>　　var diffY = e.clientY - drag.offset().top;</div>
<div>            　　$(document).on('mousemove', function(e) {</div>
<div>                　　　　e = e || window.event; //兼容ie浏览器 </div>
<div>                　　　　var left = e.clientX - diffX; </div>
<div>                　　　　var top = e.clientY - diffY;</div>
<div>                　　　　if (left &lt; 0) { </div>
<div>                    　　　　　　left = 0; </div>
<div>                　　　　} else if (left &gt; window.innerWidth - drag.width()) { </div>
<div>                    　　　　　　left = window.innerWidth - drag.width(); </div>
<div>                　　　　}</div>
<div>                　　　　if (top &lt; 0) { </div>
<div>                    　　　　　　top = 0; </div>
<div>                　　　　} else if (top &gt; window.innerHeight - drag.height()){ </div>
<div>                    　　　　　　top = window.innerHeight - drag.height(); </div>
<div>                　　　　}</div>
<div>                　　　　//移动时重新得到物体的距离，解决拖动时出现晃动的现象</div>
<div>                　　　　drag.css({</div>
<div>                    　　　　　　'left': left + 'px',</div>
<div>                    　　　　　　'top': top + 'px'</div>
<div>                　　　　});</div>
<div>            　　});</div>
<div>            　　$(document).on('mouseup', function(e) { //当鼠标弹起来的时候不再移动 </div>
<div>                　　　　$(document).unbind("mousemove");</div>
<div>                　　　　$(document).unbind("mouseup");</div>
<div>            　　});</div>
<div>        });</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>