<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修node中使用log4js4.x版本记录' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>node中使用log4js4.x版本记录</center></div><div class='banquan'>原文出处:本文由博客园博主我是萝卜啊提供。<br/>
原文连接:https://www.cnblogs.com/xuyuanlong/p/11379323.html</div><br>
    <div class="cnblogs_code">
<pre><code>const log4js = require('log4js'<span style="color: #000000;">);
log4js.configure({
    appenders: {
        logFile: {   </span><span style="color: #008000;">//</span><span style="color: #008000;">文件形式打印日志</span>
            type: "dateFile"<span style="color: #000000;">,
            filename: </span>'../logs/project',<span style="color: #008000;">//</span><span style="color: #008000;">写入日志文件的路径</span>
            alwaysIncludePattern: <span style="color: #0000ff;">true</span>,<span style="color: #008000;">//</span><span style="color: #008000;">（默认为false） - 将模式包含在当前日志文件的名称以及备份中</span>
            <span style="color: #008000;">//</span><span style="color: #008000;">compress: true,//（默认为false） - 在滚动期间压缩备份文件（备份文件将具有.gz扩展名）</span>
            pattern: "-yyyy-MM-dd.log",<span style="color: #008000;">//</span><span style="color: #008000;">（可选，默认为.yyyy-MM-dd） - 用于确定何时滚动日志的模式。格式:.yyyy-MM-dd-hh:mm:ss.log</span>
            encoding: 'utf-8',<span style="color: #008000;">//</span><span style="color: #008000;">default "utf-8"，文件的编码</span>
            maxLogSize: 1024*1024, <span style="color: #008000;">//</span><span style="color: #008000;">文件最大存储空间，当文件内容超过文件存储空间会自动生成一个文件xxx.log.1的序列自增长的文件</span>
            backups: 3<span style="color: #000000;">,
          },
        logConsole: {   </span><span style="color: #008000;">//</span><span style="color: #008000;">控制台打印日志</span>
            type: 'console'<span style="color: #000000;">
        }
    },
    categories: {
        </span><span style="color: #0000ff;">default</span>: {   <span style="color: #008000;">//</span><span style="color: #008000;">默认使用打印日志的方式</span>
            appenders: ['logFile'],  <span style="color: #008000;">//</span><span style="color: #008000;"> 指定为上面定义的appender，如果不指定，无法写入</span>
            level: 'all'             <span style="color: #008000;">//</span><span style="color: #008000;">打印日志的级别</span>
<span style="color: #000000;">        },
        logFile: {
            appenders: [</span>'logFile'<span style="color: #000000;">],
            level: </span>'all'<span style="color: #000000;">
        },
        logConsole: {
            appenders: [</span>'logConsole'<span style="color: #000000;">],
            level: log4js.levels.ALL
        }
    }
});<br /><br /></span></pre>
<pre><code>module.exports = log4js.getLogger('logFile');   //使用文件输出方式打印日志</pre>
</div>
<p>使用方式如下</p>
<div class="cnblogs_code">
<pre><code>const logger = require('../models/logger');  <span style="color: #008000;">//</span><span style="color: #008000;">上面配置的log4js地址</span>
logger.info('hello word')</pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>