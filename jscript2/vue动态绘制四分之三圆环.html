<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修vue动态绘制四分之三圆环' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>vue动态绘制四分之三圆环</center></div><div class='banquan'>原文出处:本文由博客园博主如若菇凉提供。<br/>
原文连接:https://www.cnblogs.com/ruruo/p/11451366.html</div><br>
    <p>参照网上的一个案例&ldquo;参照的为绘制的是一个动态的圆环&rdquo;，现在我的需求是改编成四分之三的圆环<br />实现效果：</p>
<p><img src="./images/vue动态绘制四分之三圆环0.png" alt="" /></p>
<p>样式展示 canvas绘图基本操作设置就可以<br />参考源代码链接：原文：https://blog.csdn.net/qq_21058391/article/details/76691047</p>
<p><br /><span style="background-color: #ffcc99;">&gt; 引用的上文源代码进行修改，注意几点</span><br />       <br /><span style="background-color: #ffcc99;">        1. 理解绘制圆环的原理，是根据弧度进行绘制</span><br /><span style="background-color: #ffcc99;">        2. 弧度的计算公式</span><br /><span style="background-color: #ffcc99;">        3. 每一角度转换成弧度</span><br /><span style="background-color: #ffcc99;">        4. 起点和终点的坐标</span></p>
<p><span style="background-color: #ffcc99;">&gt; 自己画个图，方便理解!</span><br /><img src="./images/vue动态绘制四分之三圆环1.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>首先根据图可以看到起点和重点，看坐标知道起点是-240度，这个正负还是要区分的，每一弧度的计算公式<br />将角度转换为弧度：<br />var radians = degrees * (Math.PI/180);</p>
<p><span style="background-color: #ffcc99;">这样就可以进行改版了</span></p>
<p><span style="background-color: #ffcc99;">改版之后的代码</span><br /><span style="background-color: #ffcc99;">`drawMain(drawing_elem, percent, forecolor, bgcolor,fillColor) {</span><br /><span style="background-color: #ffcc99;">				/*</span><br /><span style="background-color: #ffcc99;">					@drawing_elem: 绘制对象</span><br /><span style="background-color: #ffcc99;">					@percent：绘制圆环百分比, 范围[0, 100]</span><br /><span style="background-color: #ffcc99;">					@forecolor: 绘制圆环的前景色，颜色代码</span><br /><span style="background-color: #ffcc99;">					@bgcolor: 绘制圆环的背景色，颜色代码</span><br /><span style="background-color: #ffcc99;">				*/</span><br /><span style="background-color: #ffcc99;">				var context = drawing_elem.getContext('2d')</span><br /><span style="background-color: #ffcc99;">				var center_x = drawing_elem.width / 2;</span><br /><span style="background-color: #ffcc99;">				var center_y = drawing_elem.height / 2;</span><br /><span style="background-color: #ffcc99;">				var rad = Math.PI/3*5/100;  //绘制的为300度的圆</span><br /><span style="background-color: #ffcc99;">				// 65 * Math.PI / 180, 115 * Math.PI / 180</span><br /><span style="background-color: #ffcc99;">				// var speed = 0;</span><br />				<br /><span style="background-color: #ffcc99;">				// 绘制背景圆圈</span><br /><span style="background-color: #ffcc99;">				function backgroundCircle(){</span><br /><span style="background-color: #ffcc99;">					context.save();</span><br /><span style="background-color: #ffcc99;">					context.beginPath();</span><br /><span style="background-color: #ffcc99;">					context.lineWidth = 8; //设置线宽</span><br /><span style="background-color: #ffcc99;">					var radius = center_x - context.lineWidth;</span><br /><span style="background-color: #ffcc99;">					context.lineCap = "round";</span><br /><span style="background-color: #ffcc99;">					context.strokeStyle = bgcolor;</span><br /><span style="background-color: #ffcc99;">			context.arc(center_x, center_y, radius,-Math.PI/180*240, Math.PI/180*60, false);</span><br /><span style="background-color: #ffcc99;">			**起点，终点，半径，开始点，结束点，是否顺/逆时针**</span><br /><span style="background-color: #ffcc99;">					context.stroke();</span><br /><span style="background-color: #ffcc99;">					context.closePath();</span><br /><span style="background-color: #ffcc99;">					context.restore();</span><br /><span style="background-color: #ffcc99;">				}</span><br />	<br /><span style="background-color: #ffcc99;">				//绘制运动圆环</span><br /><span style="background-color: #ffcc99;">				function foregroundCircle(n){</span><br /><span style="background-color: #ffcc99;">					context.save();</span><br /><span style="background-color: #ffcc99;">					context.strokeStyle = forecolor;</span><br /><span style="background-color: #ffcc99;">					context.lineWidth = 8;</span><br /><span style="background-color: #ffcc99;">					context.lineCap = "round";</span><br /><span style="background-color: #ffcc99;">					var radius = center_x - context.lineWidth;</span><br /><span style="background-color: #ffcc99;">					// console.log(endAngle)</span><br /><span style="background-color: #ffcc99;">					context.beginPath();</span><br /><span style="background-color: #ffcc99;">					context.arc(center_x, center_y, radius ,-Math.PI/180*240 ,-Math.PI/180*240+n*rad , false); //用于绘制圆弧context.arc(x坐标，y坐标，半径，起始角度，终止角度，顺时针/逆时针)</span><br /><span style="background-color: #ffcc99;">					context.stroke();</span><br /><span style="background-color: #ffcc99;">					context.closePath();</span><br /><span style="background-color: #ffcc99;">					context.restore();</span><br /><span style="background-color: #ffcc99;">				}</span><br />	<br /><span style="background-color: #ffcc99;">				//绘制文字</span><br /><span style="background-color: #ffcc99;">				function text(n){</span><br /><span style="background-color: #ffcc99;">					context.save(); //save和restore可以保证样式属性只运用于该段canvas元素</span><br /><span style="background-color: #ffcc99;">					context.fillStyle = fillColor;</span><br /><span style="background-color: #ffcc99;">					var font_size = 20;</span><br /><span style="background-color: #ffcc99;">					context.font = font_size + "px Helvetica";</span><br /><span style="background-color: #ffcc99;">					var text_width = context.measureText(n.toFixed(0)+"%").width;</span><br /><span style="background-color: #ffcc99;">			            context.fillText(n.toFixed(0)+"%", center_x-text_width/2, center_y + font_size/2);</span><br /><span style="background-color: #ffcc99;">					context.restore();</span><br /><span style="background-color: #ffcc99;">				}</span><br />	<br /><span style="background-color: #ffcc99;">				//执行动画</span><br /><span style="background-color: #ffcc99;">				(function drawFrame(){</span><br /><span style="background-color: #ffcc99;">					// 去掉动画加载效果</span><br /><span style="background-color: #ffcc99;">					// window.requestAnimationFrame(drawFrame);</span><br /><span style="background-color: #ffcc99;">					// context.clearRect(0, 0, drawing_elem.width, drawing_elem.height);</span><br /><span style="background-color: #ffcc99;">					backgroundCircle();</span><br /><span style="background-color: #ffcc99;">					text(percent);</span><br /><span style="background-color: #ffcc99;">					foregroundCircle(percent);</span><br /><span style="background-color: #ffcc99;">					**// 去掉动画加载效果，这两行代码，由于网速加载慢的时候绘制的比较慢，动态效果绘制的太缓慢，所以去掉了**</span><br /><span style="background-color: #ffcc99;">					// if(speed &gt;= percent) return;</span><br /><span style="background-color: #ffcc99;">					// speed += 1;</span><br /><span style="background-color: #ffcc99;">				}());</span><br /><span style="background-color: #ffcc99;">			},</span><br /><span style="background-color: #ffcc99;">&nbsp;接下来就是调用该方法了，调用的时候放到了nextTick中，当时遇到的问题就是加载只能加载第一个，下面的加载不出来，自我感觉加载顺序的问题，绘制了但是没渲染出来</span><br /><br /></p>
<p><br /><span style="background-color: #ffcc99;">this.$nextTick(()=&gt;{</span><br /><span style="background-color: #ffcc99;">	for(var i =0;i&lt;this.couponCenterLists.length;i++) {</span><br /><span style="background-color: #ffcc99;">		this.childrenTag = document.getElementById("time-graph-canvas"+i);</span><br /><span style="background-color: #ffcc99;">		let score = this.couponCenterLists[i].couponPercentage * 100;</span><br /><span style="background-color: #ffcc99;">		this.drawMain(this.childrenTag, score, "#fff", "rgba(255,255,255,0.4)","#fff");</span><br /><span style="background-color: #ffcc99;">		**score变量是我从接口取出来的数据存到了score变量中**</span><br /><span style="background-color: #ffcc99;">	}</span><br /><span style="background-color: #ffcc99;">})</span><br /><br />基本就那么多，理解绘制的起点终点和计算方法感觉就不难了<br />&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;<br /><br /></p>
<p>转自：CSDN博主「weixin_43877575」的原创文章 原文链接：https://blog.csdn.net/weixin_43877575/article/details/84652961</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>