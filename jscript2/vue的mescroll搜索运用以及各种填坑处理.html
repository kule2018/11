<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修vue的mescroll搜索运用以及各种填坑处理' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>vue的mescroll搜索运用以及各种填坑处理</center></div><div class='banquan'>原文出处:本文由博客园博主huanghuamei206023提供。<br/>
原文连接:https://www.cnblogs.com/huanghuamei206023/p/11760999.html</div><br>
    <div class="cnblogs_code">
<pre><code>父组件处理：</pre>
<div class="cnblogs_code" onclick="cnblogs_code_show('3228fe98-274e-4142-b4e0-4c071cf531d5')"><img id="code_img_closed_3228fe98-274e-4142-b4e0-4c071cf531d5" class="code_img_closed" src="./images/vue的mescroll搜索运用以及各种填坑处理0.png" alt="" /><img id="code_img_opened_3228fe98-274e-4142-b4e0-4c071cf531d5" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('3228fe98-274e-4142-b4e0-4c071cf531d5',event)" src="./images/vue的mescroll搜索运用以及各种填坑处理1.png" alt="" />
<div id="cnblogs_code_open_3228fe98-274e-4142-b4e0-4c071cf531d5" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;">  1</span> &lt;template&gt;
<span style="color: #008080;">  2</span>        &lt;div class="wrap"&gt;
<span style="color: #008080;">  3</span>             &lt;!-- 搜索框 --&gt;
<span style="color: #008080;">  4</span>             &lt;div class="searchInputArea"&gt;
<span style="color: #008080;">  5</span>                 &lt;div class="searchBarBox"&gt;
<span style="color: #008080;">  6</span>                     &lt;div class="inputWrap" &gt;
<span style="color: #008080;">  7</span>                         &lt;form onsubmit="javascript:return false" action&gt;
<span style="color: #008080;">  8</span>                             &lt;input :placeholder = "placeholderStr" type="search" ref = "input" v-model="keyword"  /&gt;
<span style="color: #008080;">  9</span>                             &lt;span class="clearBtn" v-show="keyword" @click="clear"&gt;&lt;/span&gt;      
<span style="color: #008080;"> 10</span>                         &lt;/form&gt;   
<span style="color: #008080;"> 11</span>                     &lt;/div&gt; 
<span style="color: #008080;"> 12</span>                 &lt;/div&gt;
<span style="color: #008080;"> 13</span>             &lt;/div&gt;  
<span style="color: #008080;"> 14</span>             &lt;div class="myFastChoiceBlock" v-show="!keyword"&gt;      
<span style="color: #008080;"> 15</span>                 &lt;!-- 最近伙伴和我的关注 --&gt;
<span style="color: #008080;"> 16</span>                 &lt;fast-choice :successInvite="successInvite" @invite="inviteClick"&gt;&lt;/fast-choice&gt;
<span style="color: #008080;"> 17</span>             &lt;/div&gt;   
<span style="color: #008080;"> 18</span>             &lt;div class="searchContainer"&gt;           
<span style="color: #008080;"> 19</span>                 &lt;search-content :searchName="keyword" :successInvite="successInvite" @inviteClick="inviteClick" v-<span style="color: #0000ff;">if</span>="keyword !== ''"&gt;&lt;/search-content&gt;
<span style="color: #008080;"> 20</span>             &lt;/div&gt;
<span style="color: #008080;"> 21</span>              &lt;!-- 协议弹出层 --&gt;
<span style="color: #008080;"> 22</span>             &lt;pop-up @change="closeLayer" v-<span style="color: #0000ff;">if</span>="popuShow"&gt;
<span style="color: #008080;"> 23</span>                 &lt;h2 class="title"&gt;{{protocolTitle}}&lt;/h2&gt;
<span style="color: #008080;"> 24</span>                 &lt;div class="content" v-html="protocolCon"&gt;&lt;/div&gt;
<span style="color: #008080;"> 25</span>                 &lt;div class="confirmBtn" :class="{active:isActive}"  @click="confirmProtocol"&gt;{{btntxt}}&lt;/div&gt;
<span style="color: #008080;"> 26</span>                 &lt;div class="popCloseCon" @click="closeActionClick"&gt;&lt;/div&gt;
<span style="color: #008080;"> 27</span>             &lt;/pop-up&gt;
<span style="color: #008080;"> 28</span>             &lt;!-- 比例弹出层 --&gt;
<span style="color: #008080;"> 29</span>             &lt;scale @change="closeScale" @send="sendAjaxClick" :number="scaleCount" :scaleBtn="scaleBtn"  :scaleDesc="scaleDesc"  v-show="isScale" :userId="userId"&gt;&lt;/scale&gt;
<span style="color: #008080;"> 30</span>        &lt;/div&gt;
<span style="color: #008080;"> 31</span> &lt;/template&gt;
<span style="color: #008080;"> 32</span> 
<span style="color: #008080;"> 33</span> &lt;script&gt;
<span style="color: #008080;"> 34</span>     import FastChoice from './components/fastChoice'<span style="color: #000000;">;
</span><span style="color: #008080;"> 35</span>     import PopUp from './components/PopUp'<span style="color: #000000;">;
</span><span style="color: #008080;"> 36</span>     import scale from './components/scale'<span style="color: #000000;">;
</span><span style="color: #008080;"> 37</span>     import SearchContent from './components/searchContent'<span style="color: #000000;">;
</span><span style="color: #008080;"> 38</span>     const pageSize=10<span style="color: #000000;">;
</span><span style="color: #008080;"> 39</span>     let t=''<span style="color: #000000;">;
</span><span style="color: #008080;"> 40</span>     export <span style="color: #0000ff;">default</span><span style="color: #000000;"> {
</span><span style="color: #008080;"> 41</span>         name: "Search"<span style="color: #000000;">,
</span><span style="color: #008080;"> 42</span> <span style="color: #000000;">        data() {
</span><span style="color: #008080;"> 43</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> {
</span><span style="color: #008080;"> 44</span>                  placeholderStr: '搜一搜你想找的TA'<span style="color: #000000;">,
</span><span style="color: #008080;"> 45</span>                  keyword: ''<span style="color: #000000;">,
</span><span style="color: #008080;"> 46</span> <span style="color: #000000;">                 list: [],
</span><span style="color: #008080;"> 47</span>                  timerKey: <span style="color: #0000ff;">null</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 48</span>                  dataList:[],<span style="color: #008000;">//</span><span style="color: #008000;">列表数据</span>
<span style="color: #008080;"> 49</span>                  totalPage:1<span style="color: #000000;">,
</span><span style="color: #008080;"> 50</span>                  popuShow:<span style="color: #0000ff;">false</span>,<span style="color: #008000;">//</span><span style="color: #008000;">协议弹出层</span>
<span style="color: #008080;"> 51</span>                  isScale:<span style="color: #0000ff;">false</span>,<span style="color: #008000;">//</span><span style="color: #008000;">比例弹出层</span>
<span style="color: #008080;"> 52</span>                  scaleValue:'',<span style="color: #008000;">//</span><span style="color: #008000;">分成比例</span>
<span style="color: #008080;"> 53</span>                  userId:''<span style="color: #000000;">,
</span><span style="color: #008080;"> 54</span>                  isActive:<span style="color: #0000ff;">true</span>,<span style="color: #008000;">//</span><span style="color: #008000;">操作协议按钮灰色显示</span>
<span style="color: #008080;"> 55</span>                  sencond:5,<span style="color: #008000;">//</span><span style="color: #008000;">秒数</span>
<span style="color: #008080;"> 56</span>                  btntxt:'',  <span style="color: #008000;">//</span><span style="color: #008000;">操作协议层按钮文字显示</span>
<span style="color: #008080;"> 57</span>                  scaleValue:'',<span style="color: #008000;">//</span><span style="color: #008000;">分成比例</span>
<span style="color: #008080;"> 58</span>                  scaleDesc:'',<span style="color: #008000;">//</span><span style="color: #008000;">比例弹窗描述</span>
<span style="color: #008080;"> 59</span>                  scaleBtn:''<span style="color: #000000;">,
</span><span style="color: #008080;"> 60</span>                  scaleCount:'50%',<span style="color: #008000;">//</span><span style="color: #008000;">默认分成比例</span>
<span style="color: #008080;"> 61</span>                  successInvite: [],<span style="color: #008000;">//</span><span style="color: #008000;">默认未邀请</span>
<span style="color: #008080;"> 62</span>                  protocolTitle:'',<span style="color: #008000;">//</span><span style="color: #008000;">协议标题</span>
<span style="color: #008080;"> 63</span>                  protocolCon:'' <span style="color: #008000;">//</span><span style="color: #008000;">协议内容</span>
<span style="color: #008080;"> 64</span> <span style="color: #000000;">            };
</span><span style="color: #008080;"> 65</span> <span style="color: #000000;">        },
</span><span style="color: #008080;"> 66</span> <span style="color: #000000;">        components:{FastChoice,PopUp,scale, SearchContent},
</span><span style="color: #008080;"> 67</span> <span style="color: #000000;">        watch: {
</span><span style="color: #008080;"> 68</span> <span style="color: #000000;">            keyword () {
</span><span style="color: #008080;"> 69</span>                 <span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">this</span><span style="color: #000000;">.keyword){
</span><span style="color: #008080;"> 70</span>                     <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 71</span> <span style="color: #000000;">                }
</span><span style="color: #008080;"> 72</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 73</span> <span style="color: #000000;">        },
</span><span style="color: #008080;"> 74</span> <span style="color: #000000;">        mounted() {
</span><span style="color: #008080;"> 75</span>            <span style="color: #0000ff;">this</span><span style="color: #000000;">.protocolAjax(); 
</span><span style="color: #008080;"> 76</span> <span style="color: #000000;">        },
</span><span style="color: #008080;"> 77</span> <span style="color: #000000;">        methods: {
</span><span style="color: #008080;"> 78</span>             <span style="color: #008000;">//</span><span style="color: #008000;">邀请</span>
<span style="color: #008080;"> 79</span> <span style="color: #000000;">            inviteClick (item) {
</span><span style="color: #008080;"> 80</span>               <span style="color: #008000;">//</span><span style="color: #008000;">点击邀请过的不予操作</span>
<span style="color: #008080;"> 81</span>               <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span>.successInvite.indexOf(item.hwUserId) &gt; -1 ||<span style="color: #000000;"> item.inviteStatus){
</span><span style="color: #008080;"> 82</span>                  <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 83</span> <span style="color: #000000;">              }
</span><span style="color: #008080;"> 84</span>               <span style="color: #0000ff;">this</span>.isScale = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 85</span>               <span style="color: #0000ff;">this</span>.userId =<span style="color: #000000;"> item.hwUserId;
</span><span style="color: #008080;"> 86</span>               <span style="color: #0000ff;">this</span>.scaleDesc = '邀请成功后你可获取该用户部分收益，选择双方都认可的分成比例可以提高邀请成功率哦~'<span style="color: #000000;">;
</span><span style="color: #008080;"> 87</span>               <span style="color: #0000ff;">this</span>.scaleBtn = '发送邀请'<span style="color: #000000;">;
</span><span style="color: #008080;"> 88</span>               <span style="color: #0000ff;">this</span>.scaleCount = '50%';<span style="color: #008000;">//</span><span style="color: #008000;">邀请比例统一为50%</span>
<span style="color: #008080;"> 89</span> <span style="color: #000000;">            },
</span><span style="color: #008080;"> 90</span>             <span style="color: #008000;">//</span><span style="color: #008000;">点击发送邀请</span>
<span style="color: #008080;"> 91</span> <span style="color: #000000;">            sendAjaxClick (value){
</span><span style="color: #008080;"> 92</span>                 <span style="color: #0000ff;">this</span>.scaleValue =<span style="color: #000000;"> value;
</span><span style="color: #008080;"> 93</span>                 <span style="color: #0000ff;">this</span>.popuShow = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 94</span>                 <span style="color: #0000ff;">this</span>.isScale = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 95</span>                 <span style="color: #0000ff;">this</span>.isActive = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 96</span>                 <span style="color: #0000ff;">this</span>.sencond = 5<span style="color: #000000;"> ;
</span><span style="color: #008080;"> 97</span>                 <span style="color: #0000ff;">this</span><span style="color: #000000;">.timer();
</span><span style="color: #008080;"> 98</span> <span style="color: #000000;">            },
</span><span style="color: #008080;"> 99</span>             <span style="color: #008000;">//</span><span style="color: #008000;">5s时间倒计时</span>
<span style="color: #008080;">100</span> <span style="color: #000000;">            timer() {
</span><span style="color: #008080;">101</span>                 <span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.sencond &gt; 0<span style="color: #000000;">) {
</span><span style="color: #008080;">102</span>                     <span style="color: #0000ff;">this</span>.btntxt="已阅读同意并确认邀请("+<span style="color: #0000ff;">this</span>.sencond+"s)"<span style="color: #000000;">;
</span><span style="color: #008080;">103</span>                     <span style="color: #0000ff;">this</span>.sencond--<span style="color: #000000;">;
</span><span style="color: #008080;">104</span>                     t=setTimeout(<span style="color: #0000ff;">this</span>.timer, 1000<span style="color: #000000;">);          
</span><span style="color: #008080;">105</span>                 } <span style="color: #0000ff;">else</span><span style="color: #000000;">{
</span><span style="color: #008080;">106</span>                     <span style="color: #0000ff;">this</span>.isActive = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">107</span>                     <span style="color: #0000ff;">this</span>.sencond = 5<span style="color: #000000;">;
</span><span style="color: #008080;">108</span>                     <span style="color: #0000ff;">this</span>.btntxt="已阅读同意并确认邀请"<span style="color: #000000;">;    
</span><span style="color: #008080;">109</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">110</span> <span style="color: #000000;">            },
</span><span style="color: #008080;">111</span>             <span style="color: #008000;">//</span><span style="color: #008000;">已阅读同意并确认</span>
<span style="color: #008080;">112</span> <span style="color: #000000;">            confirmProtocol () {
</span><span style="color: #008080;">113</span>                 <span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">this</span><span style="color: #000000;">.isActive){
</span><span style="color: #008080;">114</span>                     <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">115</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">116</span>                 <span style="color: #0000ff;">this</span><span style="color: #000000;">.sendAjax();
</span><span style="color: #008080;">117</span> <span style="color: #000000;">            },
</span><span style="color: #008080;">118</span>             <span style="color: #008000;">//</span><span style="color: #008000;">发送邀请请求</span>
<span style="color: #008080;">119</span> <span style="color: #000000;">            sendAjax () {
</span><span style="color: #008080;">120</span>                 console.log(<span style="color: #0000ff;">this</span><span style="color: #000000;">.scaleValue);
</span><span style="color: #008080;">121</span>                 let dd = <span style="color: #0000ff;">this</span><span style="color: #000000;">.scaleValue.toString();
</span><span style="color: #008080;">122</span>                 <span style="color: #0000ff;">this</span>.$request.post(_basePath + '/activity/page20191018/inviteArtist.html',{userId: <span style="color: #0000ff;">this</span>.userId,shareRate:<span style="color: #0000ff;">this</span>.scaleValue}).then((res) =&gt;<span style="color: #000000;"> {
</span><span style="color: #008080;">123</span>                     <span style="color: #0000ff;">this</span>.successInvite.push(<span style="color: #0000ff;">this</span><span style="color: #000000;">.userId) ;
</span><span style="color: #008080;">124</span>                     mui.toast("已发送邀请，对方接受后会通知你哦",2000<span style="color: #000000;">);
</span><span style="color: #008080;">125</span>                     <span style="color: #0000ff;">this</span><span style="color: #000000;">.closeActionClick();
</span><span style="color: #008080;">126</span>                 }).<span style="color: #0000ff;">catch</span>(() =&gt;<span style="color: #000000;"> {})
</span><span style="color: #008080;">127</span> <span style="color: #000000;">            },   
</span><span style="color: #008080;">128</span>             <span style="color: #008000;">//</span><span style="color: #008000;">关闭操作协议弹窗</span>
<span style="color: #008080;">129</span> <span style="color: #000000;">            closeActionClick() {
</span><span style="color: #008080;">130</span>                 <span style="color: #0000ff;">this</span>.popuShow = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">131</span>                 clearTimeout(t);<span style="color: #008000;">//</span><span style="color: #008000;">清除倒计时</span>
<span style="color: #008080;">132</span> <span style="color: #000000;">            },
</span><span style="color: #008080;">133</span>              <span style="color: #008000;">//</span><span style="color: #008000;">关闭分成比例弹窗</span>
<span style="color: #008080;">134</span> <span style="color: #000000;">            closeScale () {
</span><span style="color: #008080;">135</span>                <span style="color: #0000ff;">this</span>.isScale = <span style="color: #0000ff;">false</span><span style="color: #000000;">; 
</span><span style="color: #008080;">136</span> <span style="color: #000000;">            },
</span><span style="color: #008080;">137</span> <span style="color: #000000;">            clear () {
</span><span style="color: #008080;">138</span>                 <span style="color: #0000ff;">this</span>.keyword = ""<span style="color: #000000;">;
</span><span style="color: #008080;">139</span>                 <span style="color: #0000ff;">this</span>.$refs["input"<span style="color: #000000;">].focus();
</span><span style="color: #008080;">140</span> <span style="color: #000000;">            },
</span><span style="color: #008080;">141</span> <span style="color: #000000;">            protocolAjax () {
</span><span style="color: #008080;">142</span>                  <span style="color: #0000ff;">this</span>.$request.post(_basePath + '/activity/page20191018/queryProtocol.html',{type:0}).then((res) =&gt;<span style="color: #000000;"> {
</span><span style="color: #008080;">143</span>                  <span style="color: #0000ff;">this</span>.protocolTitle =<span style="color: #000000;"> res.title;
</span><span style="color: #008080;">144</span>                  <span style="color: #0000ff;">this</span>.protocolCon =<span style="color: #000000;"> res.content;
</span><span style="color: #008080;">145</span>                 }).<span style="color: #0000ff;">catch</span>(() =&gt;<span style="color: #000000;"> {})
</span><span style="color: #008080;">146</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">147</span> <span style="color: #000000;">        },
</span><span style="color: #008080;">148</span> <span style="color: #000000;">    };
</span><span style="color: #008080;">149</span> &lt;/script&gt;
<span style="color: #008080;">150</span> 
<span style="color: #008080;">151</span> &lt;style lang="scss" scoped&gt;
<span style="color: #008080;">152</span>  @import "search"<span style="color: #000000;">;
</span><span style="color: #008080;">153</span> &lt;/style&gt;</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<pre><code>子组件处理：</pre>
<div class="cnblogs_code" onclick="cnblogs_code_show('f361925c-7bcb-4546-95d6-df7d33f58215')"><img id="code_img_closed_f361925c-7bcb-4546-95d6-df7d33f58215" class="code_img_closed" src="./images/vue的mescroll搜索运用以及各种填坑处理0.png" alt="" /><img id="code_img_opened_f361925c-7bcb-4546-95d6-df7d33f58215" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('f361925c-7bcb-4546-95d6-df7d33f58215',event)" src="./images/vue的mescroll搜索运用以及各种填坑处理1.png" alt="" />
<div id="cnblogs_code_open_f361925c-7bcb-4546-95d6-df7d33f58215" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;">  1</span> &lt;template&gt;
<span style="color: #008080;">  2</span>     &lt;div&gt;
<span style="color: #008080;">  3</span>         &lt;div ref="mescroll" class="mescroll"&gt;
<span style="color: #008080;">  4</span>             &lt;div class="search-content wrapper" ref="scroller" &gt;  
<span style="color: #008080;">  5</span>                 &lt;ul&gt;
<span style="color: #008080;">  6</span>                     &lt;li class="item"  v-<span style="color: #0000ff;">for</span>="(item,index) in dataList" :key="index"&gt;
<span style="color: #008080;">  7</span>                         &lt;div class="personBlock" @click="openUserClick(item.userDetail.userId)"&gt;
<span style="color: #008080;">  8</span>                             &lt;div class="showImg"&gt;
<span style="color: #008080;">  9</span>                                 &lt;img :src="item.userDetail.userThumUrl" /&gt;
<span style="color: #008080;"> 10</span>                                 &lt;template  v-<span style="color: #0000ff;">if</span>="item.userDetail.kolFlag"&gt;
<span style="color: #008080;"> 11</span>                                     &lt;em v-<span style="color: #0000ff;">if</span>="item.userDetail.kolFlag" class="icon c_kol"&gt;&lt;/em&gt;
<span style="color: #008080;"> 12</span>                                 &lt;/template&gt;
<span style="color: #008080;"> 13</span>                                 &lt;template  v-<span style="color: #0000ff;">else</span>&gt;
<span style="color: #008080;"> 14</span>                                     &lt;em class="icon c_company" v-<span style="color: #0000ff;">if</span>="item.userDetail.upSignType == '1'"&gt;&lt;/em&gt;
<span style="color: #008080;"> 15</span>                                     &lt;em class="icon c_person" v-<span style="color: #0000ff;">if</span>="item.userDetail.upSignType == '0'"&gt;&lt;/em&gt;
<span style="color: #008080;"> 16</span>                                 &lt;/template&gt;
<span style="color: #008080;"> 17</span>                                 
<span style="color: #008080;"> 18</span>                             &lt;/div&gt;
<span style="color: #008080;"> 19</span>                             &lt;div class="showInfo"&gt;
<span style="color: #008080;"> 20</span>                                 &lt;div class="name"&gt;{{item.userDetail.nickName}}&lt;/div&gt;
<span style="color: #008080;"> 21</span>                                 &lt;div class="attentionCount"&gt;
<span style="color: #008080;"> 22</span>                                     {{item.userDetail.fansCount || 0<span style="color: #000000;">}}人关注TA
</span><span style="color: #008080;"> 23</span>                                 &lt;/div&gt;
<span style="color: #008080;"> 24</span>                             &lt;/div&gt;
<span style="color: #008080;"> 25</span>                         &lt;/div&gt;
<span style="color: #008080;"> 26</span>                         &lt;div class="sendBtn" :class="{active:item.userDetail.inviteStatus || (successInvite.indexOf(item.userDetail.hwUserId) &gt; -1 ) }"  @click="inviteClick(item.userDetail)"&gt;
<span style="color: #008080;"> 27</span>                             &lt;span v-<span style="color: #0000ff;">if</span>="item.userDetail.inviteStatus || successInvite.indexOf(item.userDetail.hwUserId) &gt; -1"&gt;已邀请&lt;/span&gt;
<span style="color: #008080;"> 28</span>                             &lt;span v-<span style="color: #0000ff;">else</span>&gt;邀请&lt;/span&gt;
<span style="color: #008080;"> 29</span>                         &lt;/div&gt;
<span style="color: #008080;"> 30</span>                     &lt;/li&gt;  
<span style="color: #008080;"> 31</span>                 &lt;/ul&gt; 
<span style="color: #008080;"> 32</span>                 
<span style="color: #008080;"> 33</span>             &lt;/div&gt;
<span style="color: #008080;"> 34</span>         &lt;/div&gt;
<span style="color: #008080;"> 35</span>         &lt;empty v-show="isEmpty"&gt;
<span style="color: #008080;"> 36</span>             &lt;p class="note"&gt;纳尼，竟然找不到这个人&hellip;&lt;/p&gt;
<span style="color: #008080;"> 37</span>         &lt;/empty&gt;
<span style="color: #008080;"> 38</span>     &lt;/div&gt;    
<span style="color: #008080;"> 39</span> &lt;/template&gt;
<span style="color: #008080;"> 40</span> 
<span style="color: #008080;"> 41</span> &lt;script&gt;
<span style="color: #008080;"> 42</span> import MeScroll from 'mescroll.js'<span style="color: #000000;">;
</span><span style="color: #008080;"> 43</span> import 'mescroll.js/mescroll.min.css'<span style="color: #000000;">;
</span><span style="color: #008080;"> 44</span> import Empty from './empty'<span style="color: #000000;">;
</span><span style="color: #008080;"> 45</span>  const pageSize=10<span style="color: #000000;">;
</span><span style="color: #008080;"> 46</span> export <span style="color: #0000ff;">default</span><span style="color: #000000;"> {
</span><span style="color: #008080;"> 47</span>     name: 'SearchContent'<span style="color: #000000;">,
</span><span style="color: #008080;"> 48</span> <span style="color: #000000;">    props: {
</span><span style="color: #008080;"> 49</span> <span style="color: #000000;">        searchName: {
</span><span style="color: #008080;"> 50</span> <span style="color: #000000;">            type: String,
</span><span style="color: #008080;"> 51</span>             <span style="color: #0000ff;">default</span>: ''
<span style="color: #008080;"> 52</span> <span style="color: #000000;">        },
</span><span style="color: #008080;"> 53</span> <span style="color: #000000;">        successInvite: {
</span><span style="color: #008080;"> 54</span> <span style="color: #000000;">            type: Array,
</span><span style="color: #008080;"> 55</span>             <span style="color: #0000ff;">default</span><span style="color: #000000;">: []
</span><span style="color: #008080;"> 56</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 57</span> <span style="color: #000000;">    },
</span><span style="color: #008080;"> 58</span> <span style="color: #000000;">    data() {
</span><span style="color: #008080;"> 59</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> {
</span><span style="color: #008080;"> 60</span> <span style="color: #000000;">            dataList: [],
</span><span style="color: #008080;"> 61</span>             mescroll: <span style="color: #0000ff;">null</span>, <span style="color: #008000;">//</span><span style="color: #008000;">mescroll实例对象</span>
<span style="color: #008080;"> 62</span>             totalPage:1<span style="color: #000000;">,
</span><span style="color: #008080;"> 63</span>             isEmpty:<span style="color: #0000ff;">false</span>
<span style="color: #008080;"> 64</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 65</span> <span style="color: #000000;">    },
</span><span style="color: #008080;"> 66</span> <span style="color: #000000;">    components:{
</span><span style="color: #008080;"> 67</span> <span style="color: #000000;">       Empty 
</span><span style="color: #008080;"> 68</span> <span style="color: #000000;">    },
</span><span style="color: #008080;"> 69</span> <span style="color: #000000;">    watch: {
</span><span style="color: #008080;"> 70</span>         'searchName'<span style="color: #000000;"> () {
</span><span style="color: #008080;"> 71</span>             <span style="color: #0000ff;">this</span>.dataList = [];<span style="color: #008000;">//</span><span style="color: #008000;">要清空，不然有时候会出现上拉加载不了</span>
<span style="color: #008080;"> 72</span>             <span style="color: #0000ff;">this</span>.searchName !== '' &amp;&amp; <span style="color: #0000ff;">this</span><span style="color: #000000;">.mescroll.resetUpScroll();
</span><span style="color: #008080;"> 73</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 74</span> <span style="color: #000000;">    },
</span><span style="color: #008080;"> 75</span> <span style="color: #000000;">    mounted () {
</span><span style="color: #008080;"> 76</span>         console.log(<span style="color: #0000ff;">this</span><span style="color: #000000;">.searchName)
</span><span style="color: #008080;"> 77</span>         <span style="color: #0000ff;">this</span>.mescroll = <span style="color: #0000ff;">new</span> MeScroll(<span style="color: #0000ff;">this</span>.$refs.mescroll, { <span style="color: #008000;">//</span><span style="color: #008000;">在mounted初始化mescroll,确保此处配置的ref有值</span>
<span style="color: #008080;"> 78</span>             down:{isLock: <span style="color: #0000ff;">true</span>}, <span style="color: #008000;">//</span><span style="color: #008000;">下拉刷新的配置. (如果下拉刷新和上拉加载处理的逻辑是一样的,则down可不用写了)                       </span>
<span style="color: #008080;"> 79</span> <span style="color: #000000;">            up: {
</span><span style="color: #008080;"> 80</span>                     callback: <span style="color: #0000ff;">this</span><span style="color: #000000;">.upCallback,
</span><span style="color: #008080;"> 81</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> 以下是一些常用的配置,当然不写也可以的.</span>
<span style="color: #008080;"> 82</span> <span style="color: #000000;">                    page: {
</span><span style="color: #008080;"> 83</span>                         num: 0, <span style="color: #008000;">//</span><span style="color: #008000;">当前页 默认0,回调之前会加1; 即callback(page)会从1开始</span>
<span style="color: #008080;"> 84</span>                         size: 10, <span style="color: #008000;">//</span><span style="color: #008000;">每页数据条数,默认10</span>
<span style="color: #008080;"> 85</span> <span style="color: #000000;">                    },
</span><span style="color: #008080;"> 86</span>                     htmlLoading: '&lt;p class="upwarp-progress mescroll-rotate"&gt;&lt;/p&gt;&lt;p class="upwarp-tip"&gt;正在加载中..&lt;/p&gt;'<span style="color: #000000;">,
</span><span style="color: #008080;"> 87</span>                     htmlNodata: '&lt;p class="upwarp-nodata" style="height:.4rem"&gt;当当当~已经到底啦~&lt;/p&gt;'<span style="color: #000000;">,
</span><span style="color: #008080;"> 88</span>                     noMoreSize: 1, <span style="color: #008000;">//</span><span style="color: #008000;">如果列表已无数据,可设置列表的总数量要大于5才显示无更多数据;</span>
<span style="color: #008080;"> 89</span>                     isBounce: <span style="color: #0000ff;">true</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 90</span> <span style="color: #000000;">            },
</span><span style="color: #008080;"> 91</span> <span style="color: #000000;">            down:{
</span><span style="color: #008080;"> 92</span>                 use:<span style="color: #0000ff;">false</span>
<span style="color: #008080;"> 93</span> <span style="color: #000000;">            },
</span><span style="color: #008080;"> 94</span> <span style="color: #000000;">        });
</span><span style="color: #008080;"> 95</span> <span style="color: #000000;">    },
</span><span style="color: #008080;"> 96</span> <span style="color: #000000;">    methods: {
</span><span style="color: #008080;"> 97</span>          <span style="color: #008000;">//</span><span style="color: #008000;">点击调起个人主页</span>
<span style="color: #008080;"> 98</span> <span style="color: #000000;">        openUserClick (item) {
</span><span style="color: #008080;"> 99</span> <span style="color: #000000;">            console.log(item)
</span><span style="color: #008080;">100</span>             <span style="color: #0000ff;">var</span> userId =<span style="color: #000000;"> item;
</span><span style="color: #008080;">101</span>              mui.openClient({"pageType": "userHome","userId"<span style="color: #000000;">:item});
</span><span style="color: #008080;">102</span> <span style="color: #000000;">        },
</span><span style="color: #008080;">103</span>          <span style="color: #008000;">//</span><span style="color: #008000;">上拉回调 page = {num:1, size:10}; num:当前页 ,默认从1开始; size:每页数据条数,默认10</span>
<span style="color: #008080;">104</span> <span style="color: #000000;">        upCallback(page) {
</span><span style="color: #008080;">105</span>             <span style="color: #008000;">//</span><span style="color: #008000;">联网请求</span>
<span style="color: #008080;">106</span>             <span style="color: #0000ff;">this</span>.$request.post(_basePath + '/activity/page20191018/searchAll.html', {hintKey:<span style="color: #0000ff;">this</span>.searchName,searchType:91,pageNo:page.num,pageSize:page.size,actionSource:'07'}).then((response) =&gt;<span style="color: #000000;"> {
</span><span style="color: #008080;">107</span>                     <span style="color: #0000ff;">if</span>(response &amp;&amp;<span style="color: #000000;"> response.resultList){
</span><span style="color: #008080;">108</span>                       <span style="color: #008000;">//</span><span style="color: #008000;"> 请求的列表数据</span>
<span style="color: #008080;">109</span>                         let result = response.resultList[0<span style="color: #000000;">];
</span><span style="color: #008080;">110</span>                         let arr =<span style="color: #000000;"> result.list;
</span><span style="color: #008080;">111</span>                         <span style="color: #008000;">//</span><span style="color: #008000;"> 如果是第一页需手动置空列表</span>
<span style="color: #008080;">112</span>                         <span style="color: #0000ff;">if</span> (page.num === 1) <span style="color: #0000ff;">this</span>.dataList =<span style="color: #000000;"> []
</span><span style="color: #008080;">113</span>                         <span style="color: #008000;">//</span><span style="color: #008000;"> 把请求到的数据添加到列表</span>
<span style="color: #008080;">114</span>                         <span style="color: #0000ff;">this</span>.dataList = <span style="color: #0000ff;">this</span><span style="color: #000000;">.dataList.concat(arr)
</span><span style="color: #008080;">115</span>                         <span style="color: #008000;">//</span><span style="color: #008000;"> 数据渲染成功后,隐藏下拉刷新的状态</span>
<span style="color: #008080;">116</span>                         <span style="color: #0000ff;">this</span>.totalPage = result.total % pageSize &gt; 0 ? Math.floor(result.total / 10 + 1) : result.total / 10;<span style="color: #008000;">//</span><span style="color: #008000;">计算总页数超过就不loadMore</span>
<span style="color: #008080;">117</span>                         <span style="color: #0000ff;">this</span>.$nextTick(() =&gt;<span style="color: #000000;"> {
</span><span style="color: #008080;">118</span>                                 <span style="color: #0000ff;">this</span><span style="color: #000000;">.mescroll.endSuccess(arr.length);
</span><span style="color: #008080;">119</span>                                 <span style="color: #0000ff;">this</span>.mescroll.endByPage(arr.length, <span style="color: #0000ff;">this</span><span style="color: #000000;">.totalPage)
</span><span style="color: #008080;">120</span> <span style="color: #000000;">                        }) 
</span><span style="color: #008080;">121</span>                     }<span style="color: #0000ff;">else</span><span style="color: #000000;">{
</span><span style="color: #008080;">122</span>                         <span style="color: #0000ff;">this</span>.isEmpty = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">123</span>                         <span style="color: #0000ff;">this</span><span style="color: #000000;">.mescroll.endErr();
</span><span style="color: #008080;">124</span> <span style="color: #000000;">                    }                    
</span><span style="color: #008080;">125</span>             }).<span style="color: #0000ff;">catch</span>(() =&gt;<span style="color: #000000;"> {
</span><span style="color: #008080;">126</span>                     <span style="color: #0000ff;">this</span><span style="color: #000000;">.mescroll.endErr();
</span><span style="color: #008080;">127</span> <span style="color: #000000;">            })
</span><span style="color: #008080;">128</span> <span style="color: #000000;">        },
</span><span style="color: #008080;">129</span> <span style="color: #000000;">        inviteClick(item) {
</span><span style="color: #008080;">130</span>             <span style="color: #0000ff;">this</span>.$emit('inviteClick'<span style="color: #000000;">,item);
</span><span style="color: #008080;">131</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">132</span> <span style="color: #000000;">}
</span><span style="color: #008080;">133</span> 
<span style="color: #008080;">134</span> <span style="color: #000000;">}
</span><span style="color: #008080;">135</span> &lt;/script&gt;
<span style="color: #008080;">136</span> 
<span style="color: #008080;">137</span> &lt;style lang="scss" scoped&gt;
<span style="color: #008080;">138</span> <span style="color: #000000;">.mescroll {
</span><span style="color: #008080;">139</span> <span style="color: #000000;">    position: fixed;
</span><span style="color: #008080;">140</span> <span style="color: #000000;">    top: .9rem;
</span><span style="color: #008080;">141</span>     bottom: 0<span style="color: #000000;">;
</span><span style="color: #008080;">142</span>     left:0<span style="color: #000000;">;
</span><span style="color: #008080;">143</span> <span style="color: #000000;">    height: auto;
</span><span style="color: #008080;">144</span> <span style="color: #000000;">}
</span><span style="color: #008080;">145</span> .search-<span style="color: #000000;">content{
</span><span style="color: #008080;">146</span>     padding:0<span style="color: #000000;"> .24rem; 
</span><span style="color: #008080;">147</span>     background: #121223<span style="color: #000000;">;
</span><span style="color: #008080;">148</span> <span style="color: #000000;">    ul{
</span><span style="color: #008080;">149</span> <span style="color: #000000;">        height:auto;
</span><span style="color: #008080;">150</span> <span style="color: #000000;">        .item{
</span><span style="color: #008080;">151</span> <span style="color: #000000;">            display:flex;
</span><span style="color: #008080;">152</span>             justify-content:space-<span style="color: #000000;">between;
</span><span style="color: #008080;">153</span>             align-<span style="color: #000000;">items:center;
</span><span style="color: #008080;">154</span>             width:100%<span style="color: #000000;">;
</span><span style="color: #008080;">155</span>             height:1<span style="color: #000000;">.56rem;
</span><span style="color: #008080;">156</span> <span style="color: #000000;">            .personBlock{
</span><span style="color: #008080;">157</span> <span style="color: #000000;">                display:flex;
</span><span style="color: #008080;">158</span>                 justify-content: flex-<span style="color: #000000;">start;
</span><span style="color: #008080;">159</span>                 align-<span style="color: #000000;">items: center;
</span><span style="color: #008080;">160</span> <span style="color: #000000;">                .showImg{
</span><span style="color: #008080;">161</span> <span style="color: #000000;">                    position:relative;
</span><span style="color: #008080;">162</span> <span style="color: #000000;">                    width:1rem;
</span><span style="color: #008080;">163</span> <span style="color: #000000;">                    height:1rem;
</span><span style="color: #008080;">164</span>                     margin-<span style="color: #000000;">right:.16rem;
</span><span style="color: #008080;">165</span> <span style="color: #000000;">                    border:.02rem solid #51516D;
</span><span style="color: #008080;">166</span>                     border-radius:50%<span style="color: #000000;">;
</span><span style="color: #008080;">167</span>                     box-sizing: border-<span style="color: #000000;">box;
</span><span style="color: #008080;">168</span>                     img{width:100%;height:100%;border-radius:50%<span style="color: #000000;">}
</span><span style="color: #008080;">169</span> <span style="color: #000000;">                    .icon{
</span><span style="color: #008080;">170</span> <span style="color: #000000;">                        position: absolute;
</span><span style="color: #008080;">171</span>                         bottom:0<span style="color: #000000;">;
</span><span style="color: #008080;">172</span>                         right:0<span style="color: #000000;">;
</span><span style="color: #008080;">173</span> <span style="color: #000000;">                        width:.28rem;
</span><span style="color: #008080;">174</span> <span style="color: #000000;">                        height:.28rem;
</span><span style="color: #008080;">175</span>                         background-<span style="color: #000000;">image:url();
</span><span style="color: #008080;">176</span>                         background-repeat:no-<span style="color: #000000;">repeat;
</span><span style="color: #008080;">177</span>                         background-<span style="color: #000000;">size:contain;
</span><span style="color: #008080;">178</span>                         &amp;.c_company{background-image:url(../../images/c_company.png);}
<span style="color: #008080;">179</span>                         &amp;.c_person{background-image:url(../../images/c_person.png);}
<span style="color: #008080;">180</span>                         &amp;.c_kol{background-image:url(../../images/kol.png);}
<span style="color: #008080;">181</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">182</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">183</span> <span style="color: #000000;">                .showInfo{
</span><span style="color: #008080;">184</span>                     .name{font-size:.3rem;color:#fff;font-weight:500;line-height:.42rem;text-<span style="color: #000000;">align:left;}
</span><span style="color: #008080;">185</span>                     .attentionCount{font-size:.26rem;font-weight:400;color:#716D80;text-<span style="color: #000000;">align:left;}
</span><span style="color: #008080;">186</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">187</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">188</span>             
<span style="color: #008080;">189</span> <span style="color: #000000;">            .sendBtn{
</span><span style="color: #008080;">190</span>                 width:1<span style="color: #000000;">.44rem;
</span><span style="color: #008080;">191</span> <span style="color: #000000;">                height:.56rem;
</span><span style="color: #008080;">192</span>                 line-<span style="color: #000000;">height:.56rem;
</span><span style="color: #008080;">193</span> <span style="color: #000000;">                background:#FF005E;
</span><span style="color: #008080;">194</span>                 border-<span style="color: #000000;">radius:.28rem;
</span><span style="color: #008080;">195</span> <span style="color: #000000;">                color:#fff;
</span><span style="color: #008080;">196</span>                 text-<span style="color: #000000;">align:center;
</span><span style="color: #008080;">197</span>                 &amp;<span style="color: #000000;">.active{background:#2C2B41;color:#fff}
</span><span style="color: #008080;">198</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">199</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">200</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">201</span> <span style="color: #000000;">}    
</span><span style="color: #008080;">202</span> 
<span style="color: #008080;">203</span> &lt;/style&gt;</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<pre><code>填坑处理：<br />1、用户未输入搜索关键词时，mescroll不能就直接初始话，要在用户输入的时候才能初始化，所以子组件就接受了父组件的keyword，并用</pre>
<div>v-if="keyword !== ''"来判断加载子组件的条件，然后子组件通过监听keyword的变化，重置mescroll：如下：</div>
<div>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">watch: {
        'searchName' () {
            this.dataList = [];//要清空，不然有时候会出现上拉加载不了
            this.searchName !== '' &amp;&amp; this.mescroll.resetUpScroll();
        }
    },
</pre>
</div>
<p>　　2、搜索完以后点击搜索输入框右边里的关闭按钮，发现其他列表不能滑动。解决方法：要加：isBounce: true,</p>
</div>
<pre><code>  <br /><br /><br /></pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>