<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修使用Ant Design写一个仿微软ToDo' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>使用Ant Design写一个仿微软ToDo</center></div><div class='banquan'>原文出处:本文由博客园博主亮亮亮亮锦。提供。<br/>
原文连接:https://www.cnblogs.com/lighter-jh/p/10938087.html</div><br>
    <p style="text-align: left;"><span style="font-size: 14pt;">实习期的第一份活，自己看Ant Design的官网学习，然后用Ant Design写一个仿微软ToDo。</span></p>
<p style="text-align: left;"><span style="font-size: 14pt; color: #ff0000;">不做教学目的，只是记录一下。</span></p>
<p style="text-align: left;"><span style="font-size: 18px;"><strong>1、学习</strong></span></p>
<p style="text-align: left;">Ant Design 是个组件库，想要会用，至少要知道React和ES6。</p>
<p style="text-align: left;">Ant Design 官网：<a href="https://ant.design/index-cn">https://ant.design/index-cn</a></p>
<p style="text-align: left;">可以看看官网的实战教学：<a href="https://www.yuque.com/ant-design/course">https://www.yuque.com/ant-design/course</a></p>
<p style="text-align: left;">Ant Design Pro 一个比较完整的开源项目，看里面的东西可以学习挺多的：<a href="https://pro.ant.design/index-cn">https://pro.ant.design/index-cn</a></p>
<p style="text-align: left;">说实话，第一次接触 Ant Design 真的是一脸懵逼。</p>
<p style="text-align: left;">那时候我才知道原来前端已经不再是学习学的 html+css+javascript。</p>
<p style="text-align: left;">第一次见到 NodeJS、React...（啊，原来我菜的这么真实嘛）</p>
<p style="text-align: left;">自己的学习过程其实就是看实战教学，照着把教学里的东西写一遍，理解里面几个比较关键的点。</p>
<p style="text-align: left;">布局与路由，model，props和states。</p>
<p style="text-align: left;">&nbsp;</p>
<p style="text-align: left;"><span style="font-size: 18px;"><strong>2、任务</strong></span></p>
<p style="text-align: left;"><span style="font-size: 14px;">仿写微软ToDo：<a href="http://www.gxtodo.com/web/">http://www.gxtodo.com/web/</a></span></p>
<p style="text-align: left;"><span style="font-size: 14px;">理想是这个样子的：</span></p>
<p style="text-align: left;"><span style="font-size: 18px;"><strong><img src="./images/使用Ant Design写一个仿微软ToDo0.png" alt="" width="724" height="354" /></strong></span></p>
<p style="text-align: left;">&nbsp;</p>
<p style="text-align: left;">　　　　　　　　　　　　　　　　　　　　<span style="font-size: 12px;">2.1 微软ToDo任务界面&nbsp;</span></p>
<p style="text-align: left;">现实是这个样子的：</p>
<p style="text-align: left;"><img src="./images/使用Ant Design写一个仿微软ToDo1.png" alt="" width="708" height="344" /></p>
<p style="text-align: left;">　　　　　　　　　　　　　　　　　　　　<span style="font-size: 12px;">2.2 自己写的仿微软ToDo任务界面&nbsp;</span></p>
<p style="text-align: left;">有些功能并没有实现，例如登录，还有超时，地图接口。其实挺多(cai)的。</p>
<p style="text-align: left;">&nbsp;</p>
<p style="text-align: left;"><strong><span style="font-size: 18px;">3、分析</span></strong></p>
<p style="text-align: left;"><span style="font-size: 16px; color: #000000;">思路：</span></p>
<p style="text-align: left;"><span style="font-size: 16px; color: #000000;">　　主要先把布局和路由写了，然后就可以实现具体内容。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; color: #000000;">　　整个项目需要用到的数据都是用mock的。</span></p>
<p style="text-align: left;">1）布局</p>
<p style="text-align: left;">　　左边是窄窄的导航栏，主要就是头像、任务、便签、项目、地点、标签、搜索（邮件和...并没有写）</p>
<p style="text-align: left;">　　右边就是内容。内容的分布格式是，上面标题或时间，下面内容。</p>
<p style="text-align: left;">2）功能</p>
<p style="text-align: left;">　　任务功能：</p>
<p style="text-align: left;">　　①上部分是任务时间（根据时间展示任务）、任务展示方式（四象限或时间轴）、任务完成（已完成、未完成、全部）、添加新任务（就是那个 +）</p>
<p style="text-align: left;">　　②下部分默认四象限展示4种不同紧急程度的任务、点击任务前面的圆圈可以完成任务、单击任务名右边弹出任务详细，可修改删除。</p>
<p style="text-align: left;">　　③新增表单中项目、标签、位置提供已有的。</p>
<p style="text-align: justify;"><img src="./images/使用Ant Design写一个仿微软ToDo2.png" alt="" width="713" height="351" /></p>
<p style="text-align: left;"><span style="font-size: 12px;">　　　　　　　　　　　　　　　　　　　　　　3.1 任务界面新增功能</span></p>
<p style="text-align: left;">　　便签功能：</p>
<p style="text-align: left;">　　①上部分标题</p>
<p style="text-align: left;">　　②下部分输入内容然后组合键生成右边的小便签</p>
<p style="text-align: left;">　　③小便签提供一个删除按钮</p>
<p style="text-align: left;">&nbsp;<img src="./images/使用Ant Design写一个仿微软ToDo3.png" alt="" width="686" height="334" /></p>
<p style="text-align: left;">　　　　　　　　　　　　　　　　　<span style="font-size: 12px;">　3.2 便签界面</span></p>
<p style="text-align: left;">　　项目功能：</p>
<p style="text-align: left;">　　①上部分一个tab和添加项目功能</p>
<p style="text-align: left;">　　②下部分列出已有项目（项目里的任务数和完成数），点击项目会从右边弹出项目中的任务。</p>
<p style="text-align: left;"><img src="./images/使用Ant Design写一个仿微软ToDo4.png" alt="" width="624" height="305" /></p>
<p style="text-align: left;">　　　　　　　　　　　　　　　　　<span style="font-size: 12px;">　3.3 项目界面</span></p>
<p style="text-align: left;"><span style="font-size: 14px;">　　地点、标签功能与项目类似，但是比项目简单一些。</span></p>
<p style="text-align: left;"><span style="font-size: 14px;">　　搜索功能只做了简单的根据任务名搜索。</span></p>
<p style="text-align: left;">&nbsp;</p>
<p style="text-align: left;"><span style="font-size: 18px;"><strong>4、实现</strong></span></p>
<p style="text-align: left;"><span style="font-size: 18px;"><span style="font-size: 14px;">由于代码比较多，而且我写的挺乱的，所以取部分功能的代码贴出来。</span></span></p>
<p style="text-align: left;"><span style="font-size: 18px;"><span style="font-size: 14px;">贴的代码中，主要是组件的使用方式，方法没有贴上去。</span></span></p>
<p style="text-align: left;">1）配置布局和路由</p>
<div class="cnblogs_Highlighter">
<pre><code>const plugins = [
    ['umi-plugin-react', {
        antd: true,
        dva: true,
    }],
];

export default {
    plugins,
    routes: [
        {
            path: '/',
            component: '../layouts/BaseLayout',
            routes: [
                { path: '/', component: './task/Task' },
                { path: '/task', component: './task/Task' },
                { path: '/note', component: './note/Note' },
                { path: '/project', component: './project/Project' },
                { path: '/tag', component: './tag/Tag' },
                { path: '/position', component: './position/Position' },
                { path: '/search', component: './search/SearchText' },
            ]
        }
    ],
};</pre>
</div>
<p style="text-align: left;">布局方面：</p>
<p style="text-align: left;">SiderMenu是自己写的侧边栏组件，这里children会默认加载路由里component中的内容。</p>
<div class="cnblogs_Highlighter">
<pre><code>render() {
        const { children } = this.props;

        return (
            &lt;div&gt;
                &lt;Layout&gt;
                    &lt;SiderMenu /&gt;
                    &lt;Layout&gt;
                        &lt;Content&gt;{children}&lt;/Content&gt;
                    &lt;/Layout&gt;
                &lt;/Layout&gt;
            &lt;/div&gt;
        );
    };</pre>
</div>
<p>2）任务功能</p>
<p>这个功能，本来是写在一个js文件中的，但是参考了 Ant Design Pro 后，把一个js拆开了，写了几个组件。</p>
<div class="cnblogs_Highlighter">
<pre><code>render() {
        const { cardWidth, visible, buttonType, showType, radioChecked, showDate, } = this.state;
        const { taskAll, position, tag, project, form } = this.props;
        const { level1, level2, level3, level4, task, taskChoice } = taskAll;
        const task_level = [level1, level2, level3, level4];
        const otherField = {
            project: project,
            tag: tag,
            position: position,
            radioChecked: radioChecked,
        };
        // 头部标题
        const cardTitle = (
            &lt;Suspense fallback={null}&gt;
                &lt;CardTitle
                    showDate={showDate}
                    buttonType={buttonType}
                    handleChangeButton={this.handleChangeButton}
                /&gt;
            &lt;/Suspense&gt;
        );
        // 陈列方式菜单
        const Menu_how = (
            &lt;Menu&gt;
                &lt;Menu.Item key='四象限' onClick={this.handleShow}&gt;四象限{showType === '四象限' ? &lt;Icon type='check' /&gt; : null}&lt;/Menu.Item&gt;
                &lt;Menu.Item key='时间轴' onClick={this.handleShow}&gt;时间轴{showType === '时间轴' ? &lt;Icon type='check' /&gt; : null}&lt;/Menu.Item&gt;
            &lt;/Menu&gt;
        );
        // 陈列类型菜单
        const Menu_show = (
            &lt;Menu&gt;
                &lt;Menu.Item key='全部'&gt;全部&lt;Icon type='check' /&gt;&lt;/Menu.Item&gt;
                &lt;Menu.Item key='已完成'&gt;已完成&lt;Icon type='null' /&gt;&lt;/Menu.Item&gt;
                &lt;Menu.Item key='未完成'&gt;未完成&lt;Icon type='null' /&gt;&lt;/Menu.Item&gt;
            &lt;/Menu&gt;
        );
        // 右侧按钮组件
        const cardExtra = (
            &lt;Fragment&gt;
                &lt;Dropdown overlay={Menu_how} trigger={['click']} style={{ padding: '0' }}&gt;
                    &lt;Button&gt;{showType}&lt;Icon type='caret-down' /&gt;&lt;/Button&gt;
                &lt;/Dropdown&gt;
                &lt;Space&gt;&lt;/Space&gt;
                &lt;Dropdown overlay={Menu_show} trigger={['click']}&gt;
                    &lt;Button&gt;全部&lt;Icon type='caret-down' /&gt;&lt;/Button&gt;
                &lt;/Dropdown&gt;
                &lt;Space&gt;&lt;/Space&gt;
                &lt;Button style={buttonBorderStyle}
                    type='primary' ghost size='large'
                    onClick={() =&gt; this.showDrawer()}&gt;&lt;Icon type='plus' /&gt;&lt;/Button&gt;
            &lt;/Fragment&gt;
        );
        //抽屉按钮
        const DrawerButton = ({ button1_Click, button1_text, button2_Click, button2_text }) =&gt; (
            &lt;Fragment&gt;
                &lt;Avatar icon='user'&gt;&lt;/Avatar&gt;
                &lt;Button.Group&gt;
                    &lt;Button style={buttonBorderStyle}&gt;&lt;Icon type='file' /&gt;&lt;/Button&gt;
                    &lt;Button style={buttonBorderStyle}&gt;&lt;Icon type='bars' /&gt;&lt;/Button&gt;
                    &lt;Button style={buttonBorderStyle}&gt;&lt;Icon type='retweet' /&gt;&lt;/Button&gt;
                &lt;/Button.Group&gt;
                &lt;Space /&gt;&lt;Space /&gt;
                &lt;Button style={buttonBorderStyle} onClick={button1_Click}&gt;{button1_text}&lt;/Button&gt;
                &lt;Button style={buttonBorderStyle} ghost type='primary' onClick={button2_Click}&gt;{button2_text}&lt;/Button&gt;
            &lt;/Fragment&gt;
        );
        // 抽屉标题按钮
        const drawerTitle = taskChoice &amp;&amp; (taskChoice.taskId === null) ?
            (
                &lt;DrawerButton
                    button1_Click={this.onClose}
                    button1_text={'取消'}
                    button2_Click={this.handleSave}
                    button2_text={'保存'}
                &gt;&lt;/DrawerButton&gt;
            ) : (
                &lt;DrawerButton
                    button1_Click={this.handleRemove}
                    button1_text={'删除'}
                    button2_Click={this.onClose}
                    button2_text={'关闭'}
                &gt;&lt;/DrawerButton&gt;
            );
        return (
            &lt;div&gt;
                &lt;Card
                    headStyle={{ height: '65px' }}
                    title={cardTitle}
                    extra={cardExtra}
                    style={cardWidth}
                &gt;
                    &lt;Suspense fallback={null}&gt;
                        {showType === '四象限' ?
                            &lt;CardList
                                dataSource={task_level}
                                showDrawer={this.showDrawer}
                                finished={this.handleFinished} /&gt;
                            :
                            &lt;TimelineList
                                dataSource={task}
                                showDrawer={this.showDrawer}
                                finished={this.handleFinished} /&gt;
                        }
                    &lt;/Suspense&gt;
                &lt;/Card&gt;
                &lt;Drawer
                    title={drawerTitle}
                    placement='right'
                    mask={false}
                    width={400}
                    closable={false}
                    visible={visible}
                &gt;
                    &lt;Suspense fallback={null}&gt;
                        &lt;TaskForm
                            {...otherField}
                            onChange={this.onChangeRadio}
                            form={form}
                            taskC={taskChoice}
                            handleSubmit={this.handleSave}
                        &gt;&lt;/TaskForm&gt;
                    &lt;/Suspense&gt;
                &lt;/Drawer&gt;
            &lt;/div&gt;
        );
    }</pre>
</div>
<p style="text-align: left;">&nbsp;头部标题：</p>
<div class="cnblogs_Highlighter">
<pre><code>const CardTitle = ({ handleChangeButton, buttonType, showDate }) =&gt; (
    &lt;Fragment&gt;
        &lt;Row type='flex' align='middle' gutter={8} justify='start' style={{ width: '480px' }}&gt;
            &lt;Col span={6}&gt;
                {showDate}
            &lt;/Col&gt;
            &lt;Col span={3}&gt;
                &lt;Button.Group&gt;
                    &lt;Button icon='left' style={buttonBorderStyle} &gt;&lt;/Button&gt;
                    &lt;Button icon='right' style={buttonBorderStyle} &gt;&lt;/Button&gt;
                &lt;/Button.Group&gt;
            &lt;/Col&gt;
            &lt;Col span={4}&gt;
                &lt;Button value='day'
                    type={buttonType === 'day' ? 'primary' : 'default'}
                    onClick={handleChangeButton}&gt;今天&lt;/Button&gt;
            &lt;/Col&gt;
            &lt;Col span={11}&gt;
                &lt;Button.Group onClick={handleChangeButton}&gt;
                    &lt;Button value='day' type={buttonType === 'day' ? 'primary' : 'default'}&gt;日&lt;/Button&gt;
                    &lt;Button value='week' type={buttonType === 'week' ? 'primary' : 'default'}&gt;周&lt;/Button&gt;
                    &lt;Button value='month' type={buttonType === 'month' ? 'primary' : 'default'}&gt;月&lt;/Button&gt;
                &lt;/Button.Group&gt;
            &lt;/Col&gt;
        &lt;/Row&gt;
    &lt;/Fragment&gt;
);
</pre>
</div>
<p>&nbsp;</p>
<p><strong><span style="font-size: 18px;">5、总结</span></strong></p>
<p style="text-align: left;">哇，这人贼懒，写个东西都不好好写，代码也就贴一丢丢。</p>
<p style="text-align: left;">emmm。。</p>
<p style="text-align: left;">等我把项目代码传到github上后给个链接吧。</p>
<p style="text-align: left;">写完这个其实收获挺多的，但是要我说出来，又一时语塞。</p>
<p style="text-align: left;">有很多想要表达的东西，通篇写下来发现并没有表达到，自己第一次写博客，也是太菜了。。</p>
<p style="text-align: left;">嗯。。如果有人一不小心浪费时间翻到这里，给你说个抱歉，哈哈哈。</p>
<p style="text-align: left;">以后尽量提高自己的博客质量。</p>
<p style="text-align: left;">&nbsp;诺~链接：<a href="https://github.com/Lighter1187/todo">https://github.com/Lighter1187/todo</a></p>
<p style="text-align: left;">&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>