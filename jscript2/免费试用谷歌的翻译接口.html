<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='ç”µè„‘,ç”µè„‘è®²è§£,ç”µè„‘æŠ€æœ¯,ç¼–ç¨‹,ç”µè„‘æ•…éšœç»´ä¿®å…è´¹è¯•ç”¨è°·æ­Œçš„ç¿»è¯‘æ¥å£' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>é¦–é¡µ</a></li>
</div><div onclick='hidden1()' >åˆ†äº«</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>å…è´¹è¯•ç”¨è°·æ­Œçš„ç¿»è¯‘æ¥å£</center></div><div class='banquan'>åŸæ–‡å‡ºå¤„:æœ¬æ–‡ç”±åšå®¢å›­åšä¸»å¥”è·‘çš„Manæä¾›ã€‚<br/>
åŸæ–‡è¿æ¥:https://www.cnblogs.com/iforever/p/10852406.html</div><br>
    <h2 id="å¼•è¨€">å¼•è¨€</h2>
<p>æœ€è¿‘åšä¸ªä¸œè¥¿ï¼Œéœ€å°†å„ç§è¯­è¨€ç¿»è¯‘æˆä¸­æ–‡ï¼Œçœ‹äº†å„å®¶çš„ç¿»è¯‘æ•ˆæœï¼Œè¿˜æ˜¯è°·æ­Œçš„æœ€å¥½ã€‚</p>
<p>ä½†è°·æ­Œçš„æœªæä¾›å…è´¹æ¥å£ï¼Œç ”ç©¶äº†è°·æ­Œçš„<a href="https://translate.google.cn/">ç¿»è¯‘é¡µé¢</a>ï¼Œè¾“å…¥å†…å®¹åä¼šè§¦å‘ajaxè¯·æ±‚ï¼Œè¯·æ±‚å‚æ•°ä¸­é™¤äº†è¾“å…¥å†…å®¹ï¼Œè¿˜æœ‰ä¸ªåŠ å¯†å‚æ•°<code>tk</code>ï¼Œè¯¥åŠ å¯†ç®—æ³•åœ¨å‹ç¼©çš„jsä»£ç ä¸­ï¼Œæˆ‘ä¹Ÿåœ¨ç½‘ä¸Šæ‰¾åˆ°äº†ç½‘å‹æ‘˜å‡ºæ¥çš„ä»£ç ï¼Œjsæ ¼å¼ï¼Œä¸€å¤§æ®µï¼Œå‹ç¼©ä»£ç ç¿»è¯‘èµ·æ¥å¾ˆåƒåŠ›ï¼Œé‚æœªç¿»è¯‘ï¼Œè€Œå¦è¾Ÿè¹Šå¾„ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒçš„dockerä¸­æ‰“åŒ…äº†nodeç¯å¢ƒï¼Œä¸šåŠ¡ä»£ç é€šè¿‡shellè°ƒç”¨è¿™æ®µjsï¼Œå¾—åˆ°åŠ å¯†å‚æ•°åå†æ¨¡æ‹Ÿè¯·æ±‚ï¼Œè·å¾—ç¿»è¯‘ç»“æœï¼Œç”¨ç€è¿˜æŒºå¥½ã€‚</p>
<p>æ²¡è¿‡å¤šä¹…ï¼Œå‘ç°å¤±æ•ˆäº†ï¼Œè¯·æ±‚è¿”å›403 Forbiddenï¼Œç¦æ­¢è®¿é—® ğŸš«ï¼Œä¼°è®¡åŠ å¯†å‚æ•°ç®—æ³•åˆå‡çº§äº†ã€‚</p>
<p>æ¥å£ç¿»è¯‘å›ºç„¶å¥½ç”¨ï¼Œä½†éš”æ–­æ—¶é—´å°±è¦é‡æ–°æä¸€æ¬¡åŠ å¯†ç®—æ³•ï¼Œè¿™ä¸ªå°±æœ‰ç‚¹å„¿éš¾ä»¥æ¥å—äº†ï¼Œæ¯æ¬¡éƒ½è¦ä»å¤§é‡å‹ç¼©jsä»£ç ä¸­æ‰¾å‡ºåŠ å¯†ç®—æ³•ï¼Œè¿˜ä¸ä¸€å®šèƒ½å®Œå…¨æ‰¾å¯¹ã€‚</p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ä¸»è§’æ— å¤´æµè§ˆå™¨<a href="https://github.com/GoogleChrome/puppeteer">puppeteer</a>å°±è¦ç™»åœºäº†ï¼Œpuppeteerä¸€ä¸ªnodeç±»åº“ï¼Œæä¾›äº†ç®€æ´çš„APIï¼Œå¯ä»¥è®©ä½¿ç”¨è€…æ“ä½œchromeæµè§ˆå™¨ï¼ŒåŸºæœ¬å¯ä»¥å®Œå…¨æ¨¡æ‹Ÿäººçš„æ“ä½œï¼Œæ¯”å¦‚æ‰“å¼€é¡µé¢ã€è¾“å…¥ç½‘å€ã€ç­‰å¾…é¡µé¢æŒ‡å®šå†…å®¹åŠ è½½ã€ç‚¹å‡»æŒ‰é’®ã€ç”šè‡³æ»‘åŠ¨ä¹Ÿå¯ä»¥ï¼Œæœ‰äº†è¿™ä¸ªå·¥å…·æ¨¡æ‹Ÿç”¨æˆ·ç¿»è¯‘ç„¶åè·å–ç»“æœå®Œå…¨æ²¡é—®é¢˜ã€‚</p>
<h2 id="è·å–ç¿»è¯‘ç»“æœ">è·å–ç¿»è¯‘ç»“æœ</h2>
<h3 id="é€šè¿‡jsè·å–">é€šè¿‡jsè·å–</h3>
<p>åˆ†æäº†è°·æ­Œç¿»è¯‘é¡µé¢çš„å…ƒç´ ï¼Œå‘ç°ç”¨æˆ·è¾“å…¥å†…å®¹çš„æ—¶å€™ä¼šè§¦å‘æŸäº›æŒ‰é’®å˜ç°ï¼Œç­‰åˆ°ç¿»è¯‘å®Œæˆï¼ŒæŒ‰é’®ä¼šå†æ¬¡å˜äº®ï¼Œè¿™å…¶å®æ˜¯é€šè¿‡æ·»åŠ å»é™¤<code>*-disabled</code>ç±»æ¥å®ç°çš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æ¨¡æ‹Ÿè¾“å…¥ä¹‹åç­‰å¾…è¯¥ç±»æ¶ˆå¤±å³å¯</p>
<pre><code><code>await page.waitForSelector(&#39;selector-ele-disabled&#39;, {hidden: true});</code></pre>
<p>å¾…å…ƒç´ å˜äº®ï¼ˆå»é™¤äº†<code>*-disabled</code>ç±»ï¼‰ï¼Œå°±å¯ä»¥ä»ç»“æœè¾“å…¥æ¡†ä¸­è·å–åˆ°ç»“æœäº†ã€‚</p>
<p>ä½†è¿™æ ·å®ç°èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œä¹Ÿä¸å¤Ÿç›´æ¥ï¼Œè¿˜éœ€è¦puppeteerè°ƒç”¨chromeçš„jsæ‰§è¡Œç¯å¢ƒå»è·å–ï¼Œè·å–çš„ä¹Ÿä¸æ˜¯åŸå§‹çš„æ¥å£è¿”å›æ•°æ®ã€‚å› æ­¤é€šè¿‡æŸ¥é˜…æ–‡æ¡£æ‰¾åˆ°äº†ä¸‹é¢æ›´å¥½çš„æ–¹æ³•ğŸ‘‡ã€‚</p>
<h3 id="é€šè¿‡æ‹¦æˆªè¯·æ±‚è¿”å›è·å–">é€šè¿‡æ‹¦æˆªè¯·æ±‚è¿”å›è·å–</h3>
<p>å‰æ®µæ—¶é—´ç ”ç©¶äº†å¦‚ä½•çˆ¬å–æ‰‹æœºappä¸­çš„æ•°æ®ï¼Œé‡Œé¢ç”¨åˆ°äº†ä¸­é—´äººä»£ç†æ”»å‡»ï¼Œä¸­é—´äººä»£ç†è½¬å‘è¯·æ±‚ã€è¿”å›ï¼Œè½¬å‘çš„æ—¶å€™å°±å¯ä»¥å¯¹è¯·æ±‚è¿›è¡Œæ‹¦æˆªå¤„ç†ï¼Œæˆ‘å°±æƒ³puppeteeråº”è¯¥ä¹Ÿæœ‰ï¼Œæœç„¶æŸ¥åˆ°äº†<a href="https://github.com/GoogleChrome/puppeteer/blob/v1.15.0/docs/api.md#event-response">event-response</a>ï¼Œä»–æ˜¯<a href="https://github.com/GoogleChrome/puppeteer/blob/v1.15.0/docs/api.md#class-page">Page</a>å®ä¾‹çš„ä¸€ä¸ªé’©å­ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®äº†<code>&quot;response&quot;: function callback(response){}</code>ï¼Œå½“chromeå‘å‡ºçš„ä»»ä½•ä¸€ä¸ªè¯·æ±‚è¿”å›çš„æ—¶å€™ï¼Œéƒ½ä¼šè§¦å‘ä»–ï¼Œå¹¶å°†ç±»<a href="https://github.com/GoogleChrome/puppeteer/blob/v1.15.0/docs/api.md#class-response">Response</a>çš„ä¸€ä¸ªå®ä¾‹ä¼ ç»™å›è°ƒå‡½æ•°ï¼Œé‡Œé¢åŒ…å«è¯·æ±‚urlã€è¯·æ±‚ç»“æœã€è¯·æ±‚ç»“æœçŠ¶æ€ç­‰ä¿¡æ¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ£€æµ‹æˆ‘ä»¬çš„ç¿»è¯‘æ¥å£äº†</p>
<pre><code><code>let browser = await puppeteer.launch()

let page = await browser.newPage()
page.on(&#39;response&#39;, async response =&gt; {
    const url = response.url()

    if (url.indexOf(&quot;æ£€æµ‹çš„æ¥å£åœ°å€&quot;) != -1) {
        let text = await response.text()
        // textå°±æ˜¯æ¥å£è¿”å›çš„ç»“æœï¼Œæ‹¿åˆ°æ¥å£åŸå§‹æ•°æ®ï¼Œæ¥ä¸‹æ¥å°±ä»»ä½ å¤„ç†äº†
    }
})</code></pre>
<h2 id="è®¾è®¡">è®¾è®¡</h2>
<p>å¤§ä½“æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåˆå§‹åŒ–å®ä¾‹ï¼Œç­‰å¾…è¯·æ±‚ï¼Œè¯·æ±‚åˆ°è¾¾ä¹‹åæ¨¡æ‹Ÿè¾“å…¥ï¼Œç„¶åè¿”å›ç»“æœï¼Œå†æ¬¡è¿›å…¥ç­‰å¾…è¯·æ±‚çŠ¶æ€ã€‚<br />
<img src="./images/å…è´¹è¯•ç”¨è°·æ­Œçš„ç¿»è¯‘æ¥å£0.png" /></p>
<p>æ­¤æ–‡çš„æœ€ç»ˆç›®çš„æ˜¯å¯ä»¥ä¸ºè°ƒç”¨è€…æä¾›ä¸€ä¸ªç®€æ´çš„æ¥å£ï¼Œè¯·æ±‚è¯¥æ¥å£è¿”å›ï¼Œè¿”å›ä¸ºä¸­æ–‡çš„ç»“æœï¼Œæ¥å£çš„å“åº”æ—¶é—´å°½å¯èƒ½çš„çŸ­ï¼Œå¯æ”¯æŒå¹¶å‘ã€‚</p>
<p>å“åº”æ—¶é—´æ²¡å¤šå°‘å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œä¸»è¦ä¾èµ–ç½‘ç»œç¯å¢ƒï¼Œä»¥åŠè°·æ­Œçš„æ¥å£å“åº”æ—¶é—´ï¼Œæˆ‘ä»¬åªèƒ½åšåˆ°å½“è°·æ­Œæ¥å£è¿”å›çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿç¬¬ä¸€æ—¶é—´è¿”å›ç»™è°ƒç”¨è€…ã€‚</p>
<p>å¹¶å‘è¿™é‡Œå¯ä»¥åšä¼˜åŒ–ï¼Œä¸€ä¸ªpuppeteeråŒä¸€æ—¶é—´åªèƒ½å¤„ç†ä¸€ä¸ªç¿»è¯‘è¯·æ±‚ï¼Œå¦‚æœåšä¸ªå®ä¾‹æ± ï¼Œç»´æŠ¤å¤šä¸ªpuppeteerå®ä¾‹ï¼Œè¿™æ ·å°±å¯ä»¥æå‡ç¿»è¯‘æ¥å£çš„å¹¶å‘èƒ½åŠ›äº†ã€‚</p>
<h3 id="å®ä¾‹æ± ">å®ä¾‹æ± </h3>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè™šçº¿æ¡†å†…è¡¨ç¤ºä¸€ä¸ªå®ä¾‹æ± ï¼Œå®ä¾‹æ± ä¸­æœ‰å¤šä¸ªpuppeteerå®ä¾‹ï¼Œä»–ä»¬ä¹‹é—´äº’ç›¸ç‹¬ç«‹ï¼Œå½“è¯·æ±‚æ¥çš„æ—¶å€™ï¼Œéšæœºä»æ± å­ä¸­æ‹¿å‡ºä¸€ä¸ªå®ä¾‹ï¼Œå¤„ç†è¯·æ±‚ï¼Œç­‰å¾…è¯·æ±‚å¤„ç†å®Œæ¯•ä¹‹åï¼Œå†æ¬¡å°†æ”¹å®ä¾‹æ”¾å›æ± å­ä¸­ã€‚</p>
<p>ä¸ºäº†å‡å°‘æ„å¤–æƒ…å†µï¼Œæ± å­ä¸­çš„æ¯ä¸ªå®ä¾‹å¤„ç†100ä¸ªç¿»è¯‘ä¹‹åæ¨å‡ºï¼Œé‡æ–°å¯åŠ¨ä¸€ä¸ªæ–°çš„é¢å®ä¾‹è¡¥å……è¿›æ¥ï¼Œæ± å­ä¸­çš„å®ä¾‹æ€»é‡ä¿æŒä¸å˜ï¼Œå¦‚æœéœ€è¦ç”šè‡³å¯ä»¥ææˆåŠ¨æ€çš„ï¼Œåƒphp-fpmä¸€æ ·ï¼Œè¯·æ±‚å¤šçš„æ—¶å€™åŠ¨æ€å¢åŠ å®ä¾‹æ± ä¸­çš„å®ä¾‹ï¼Œç©ºé—²çš„æ—¶å€™ï¼Œæ¸…ç†æ¨å‡ºä¸€äº›å®ä¾‹ã€‚<br />
<img src="./images/å…è´¹è¯•ç”¨è°·æ­Œçš„ç¿»è¯‘æ¥å£1.png" /></p>
<h3 id="å¦‚ä½•å°†è¯·æ±‚å’Œç»“æœè”ç³»èµ·æ¥">å¦‚ä½•å°†è¯·æ±‚å’Œç»“æœè”ç³»èµ·æ¥</h3>
<p>ä¸€ä¸ªè¯·æ±‚å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªæµç¨‹ï¼Œä¸€ä¸ª<code>è¯·æ±‚æµç¨‹</code>ï¼Œä¸€ä¸ª<code>ajaxæˆåŠŸå›è°ƒæµç¨‹</code>ï¼Œè¯·æ±‚æ—¶å€™è¾“å…¥ç¿»è¯‘åŸå§‹å†…å®¹ï¼Œå®ä¾‹å†…éƒ¨åœ¨è¯·æ±‚è°·æ­Œajaxæ¥å£æˆåŠŸçš„æ—¶å€™è°ƒç”¨é¢„å…ˆæ³¨å†Œå¥½çš„å›è°ƒå‡½æ•°ï¼Œè¿™ä¸¤ä¸ªæµç¨‹æ²¡æœ‰åŠæ³•ç›´æ¥è”ç³»èµ·æ¥ï¼Œä½†ä»–ä»¬éƒ½ä¼šæ¥è§¦åˆ°åŒä¸€ä¸ªå®ä¾‹ï¼Œæ‰€ä»¥ç”¨è¿™ä¸ªå®ä¾‹å°†ä»–ä»¬ä¿©è”ç³»èµ·æ¥ï¼Œajaxæµç¨‹æˆåŠŸä¹‹åå†™å…¥ä¸€ä¸ªå˜é‡åˆ°å®ä¾‹å¯¹è±¡ä¸Šï¼Œè¯·æ±‚æµç¨‹ä¸­ç›‘æµ‹è¯¥å®ä¾‹ä¸Šçš„å˜é‡ï¼Œæœ‰æ•°æ®è¯´æ˜è¯·æ±‚æˆåŠŸï¼Œè¿”å›æ•°æ®ï¼Œæ¸…ç©ºè¯¥å˜é‡ï¼ŒåŸç†å¯ä»¥çœ‹ä¸‹é¢çš„ç®€åŒ–ä»£ç </p>
<pre><code><code>let obj = {}
setTimeout(() =&gt; {
    obj.result = &quot;this is async result&quot;
}, 2000)

async function sleep(duration) {
    return new Promise(resolve =&gt; {
        setTimeout(() =&gt; {
            resolve()
        }, duration)
    })
}

async function getRet() {
    let times = 1
    while(times &lt;= 100) {
        if (obj.result) {
            return Promise.resolve(obj.result)
        } else {
            await sleep(200)
        }
        times++
    }
}

(async () =&gt; {
    let ret = await getRet()
    console.log(ret)
    console.log(&quot;now i can do something&quot;)
})()</code></pre>
<h2 id="å®ç°">å®ç°</h2>
<p>æˆ‘å°†è¿™ä¸ªåŠŸèƒ½åŒ…è£…æˆäº†ä¸€ä¸ªç±»åº“ï¼Œä¸Šä¼ åˆ°äº†npmï¼Œ<a href="https://www.npmjs.com/package/google-trans-api">google-trans-api</a>ï¼Œé¡ºä¾¿ä¹Ÿç†Ÿæ‚‰äº†æ•´ä¸ªæ‰“åŒ…æµç¨‹ä»¥åŠtypescriptçš„ä½¿ç”¨ï¼Œä¸å¾—ä¸è¯´typescriptçœŸæ˜¯ä¸é”™ï¼Œå¯ä»¥é˜²æ­¢å¾ˆå¤šè¯¯å†™çš„é”™è¯¯ï¼Œè¿˜æœ‰è‡ªåŠ¨æç¤ºçš„åŠŸèƒ½ï¼Œç”¨èµ·æ¥ä¸è¦å¤ªçˆ½ã€‚è¿™é‡Œæ˜¯æºç åœ°å€<a href="https://github.com/aizuyan/google-trans-api">aizuyan/google-trans-api</a>ã€‚</p>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<h3 id="ä¸‹è½½chromium">ä¸‹è½½Chromium</h3>
<p>linuxã€macä¸‹é¢çš„Chromiumæ˜¯ä¸¤ä¸ªä¸åŒçš„åŒ…ï¼Œå¦‚æœç½‘ç»œå¯ä»¥ç¿»å¢™ï¼Œç›´æ¥éƒ¨ç½²å®‰è£…å³å¯ï¼Œå¦åˆ™éœ€è¦æ‰‹åŠ¨ä¸‹è½½ï¼Œ<a href="https://download-chromium.appspot.com/">ä¼ é€é—¨</a>ï¼Œæˆ‘çš„ç½‘ç»œå°±ä¸å¥½ï¼Œå› æ­¤æå‰å°†ä¸¤ä¸ªç‰ˆæœ¬çš„åŒ…æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„<code>Chromium</code>ç›®å½•ä¸‹ï¼Œå¼€å‘ç¯å¢ƒä½¿ç”¨<code>darwin</code>ç›®å½•ä¸‹çš„åŒ…ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨linuxä¸‹çš„åŒ…</p>
<pre><code><code>.
â”œâ”€â”€ Chromium
â”‚Â Â  â”œâ”€â”€ darwin
â”‚Â Â  â””â”€â”€ linux</code></pre>
<p>é…åˆä¸‹é¢çš„ä»£ç ï¼Œå¯ä»¥è‡ªåŠ¨æ ¹æ®ç¯å¢ƒé€‰æ‹©ä½¿ç”¨çš„åŒ…è·¯å¾„ï¼Œå¹¶ä¼ å…¥å®ä¾‹çš„<code>executablePath</code>å‚æ•°ä¸­</p>
<pre><code><code>&quot;use strict&quot;
const path = require(&quot;path&quot;)
const os = require(&quot;os&quot;)

const platform = os.platform()

let ret = path.join(__dirname, &quot;..&quot;, &quot;Chromium&quot;, platform)

switch (platform) {
  case &quot;linux&quot;:
    ret = path.join(ret, &quot;chrome&quot;)
    break
  case &quot;darwin&quot;:
    ret = path.join(ret, &quot;Chromium.app/Contents/MacOS/Chromium&quot;)
    break
}

module.exports = ret</code></pre>
<h3 id="ä»£ç†">ä»£ç†</h3>
<p>å¦‚æœç½‘è·¯ä¸å¥½ï¼Œå¯èƒ½éœ€è¦å®‰è£…ä»£ç†ï¼Œå¯ä»¥ä½¿ç”¨shadowsocksï¼Œæ”¯æŒæ‰€æœ‰ç¯å¢ƒï¼Œé»˜è®¤æ²¡æœ‰ä»£ç†ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼ å…¥<code>proxyServer: '--proxy-server=socks5://127.0.0.1:1080'</code>å‚æ•°ã€‚</p>
<h3 id="å®Œæ•´çš„è¯•ç”¨ç‰ˆæœ¬">å®Œæ•´çš„è¯•ç”¨ç‰ˆæœ¬</h3>
<pre><code><code>const koa = require(&#39;koa&#39;)
const app = new koa()
const router = require(&#39;koa-router&#39;)();
const GoogleTrans = require(&#39;google-trans-api&#39;).default
// è°ƒç”¨çš„æ—¶å€™æ”¹ä¸ºä½ è‡ªå·±çš„
const chromePath = &#39;/path/to/puppeteer Chromium&#39;;

(async () =&gt; {
  let instance = new GoogleTrans({
    handles: false,
    worker:3,
    executablePath: chromePath,
    initPageTimeout: 0,
    //proxyServer: &#39;--proxy-server=socks5://127.0.0.1:1080&#39;,
    regExpIncludeUrl: url =&gt; {
      const reg = new RegExp(&quot;translate.google.cn/translate_a/single.*?q=.*&quot;)
      return reg.test(url)
    },
    responseCb: async response =&gt; {
      const url = response.url()
      console.log(url)
      try {
        const text = await response.text()
        const status = response.status()

        let ret = JSON.parse(text)
        ret = ret[0]
        let data = &quot;&quot;
        for (let i = 0; i &lt; ret.length; i++) {
          if (ret[i][0]) {
            data += ret[i][0]
          }
        }
        return Promise.resolve(data)
      } catch (err) {
        console.error(`Failed getting data from: ${url}`)
        console.error(err);
      }
    }
  })

  let flag = await instance.init()

  router.get(&#39;/trans-auto&#39;, async ctx =&gt; {
    try {
      let msg = decodeURIComponent(ctx.query.msg)
      let ret = await instance.trans(msg)
      ctx.response.body = ret
    } catch (e) {
      console.log(`[error] when trans ${e.message}`)
      ctx.response.body = &quot;&quot;
    }
  })

  app
    .use(router.routes())
    .use(router.allowedMethods())

  app.listen(3000, () =&gt; {
    console.log(&#39;server is running at http://localhost:3000&#39;)
  })
})()
</code></pre>
<p>ä¸‹é¢æ˜¯æˆ‘æ‰“å¼€GUIæ¨¡å¼ï¼Œçœ‹æ•ˆæœçš„å›¾ç‰‡<br />
<img src="./images/å…è´¹è¯•ç”¨è°·æ­Œçš„ç¿»è¯‘æ¥å£2.png" /></p>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>