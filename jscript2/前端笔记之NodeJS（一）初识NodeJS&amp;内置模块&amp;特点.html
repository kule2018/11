<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点</center></div><div class='banquan'>原文出处:本文由博客园博主RopeHuo提供。<br/>
原文连接:https://www.cnblogs.com/rope/p/10724604.html</div><br>
    <h1><strong><span style="font-family: 宋体;">一、</span>NodeJS<span style="font-family: 宋体;">简介</span></strong></h1>
<p>NodeJS<span style="font-family: 宋体;">是开发服务器后台的东西，和</span><span style="font-family: Consolas;">PHP</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">JavaEE</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">python</span><span style="font-family: 宋体;">类似，和传统的浏览器的关注</span><span style="font-family: Consolas;">DOM</span><span style="font-family: 宋体;">的</span><span style="font-family: Consolas;">JS</span><span style="font-family: 宋体;">完全不同，将</span><span style="font-family: Consolas;">JavaScript</span><span style="font-family: 宋体;">触角伸到了服务器端。内核是</span><span style="font-family: Consolas;">Chrome</span><span style="font-family: 宋体;">浏览器的</span><span style="font-family: Consolas;">V8</span><span style="font-family: 宋体;">引擎，解析</span><span style="font-family: Consolas;">JavaScript</span><span style="font-family: 宋体;">的效率是非常快的。</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点0.png" alt="" />创始人。</p>
<p><span style="font-family: 宋体;">在不升级服务器配置的情况下，如何用软件手段来提升服务器性能：</span>Ryan Dahl<span style="font-family: 宋体;">大致的感觉到了解决问题的关键是要通过</span><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">事件驱动和异步</span>I/O</strong></span>来达成目的。</p>
<p><strong><span style="font-family: 宋体;">传统的服务器模型：当我们做</span>I/O<span style="font-family: 宋体;">操作的时候（</span><span style="font-family: Consolas;">I</span><span style="font-family: 宋体;">表示读，</span><span style="font-family: Consolas;">O</span><span style="font-family: 宋体;">表示写），</span><span style="font-family: Consolas;">CPU</span><span style="font-family: 宋体;">被磁盘操作阻塞了，此时我们称这叫做&ldquo;同步</span><span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">（</span><span style="font-family: Consolas;">synchronous I/O</span><span style="font-family: 宋体;">），阻塞</span><span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">（</span><span style="font-family: Consolas;">blocking I/O</span><span style="font-family: 宋体;">）&rdquo;。</span></strong></p>
<p><img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点1.png" alt="" />CPU<span style="font-family: 宋体;">会经常对磁盘驱动发出</span><span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">命令</span></p>
<p><img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点2.png" alt="" />此时磁盘特别忙，CPU<span style="font-family: 宋体;">就歇着了。造成了资源浪费。上图这种模式叫做&ldquo;同步</span><span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">&rdquo;。</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">同步（synchronous）：当系统遇见了一个需要耗费大量时间的事情的时候，选择死等。
异步（Asynchronous）：当系统遇见了一个需要耗费大量时间的事情的时候，不死等，先做后面的事情，耗时事情做完之后，执行回调函数。</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">用</span>PHP<span style="font-family: 宋体;">做一个例子：下面程序中红色部分是</span><span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">操作，此时</span><span style="font-family: Consolas;">CPU</span><span style="font-family: 宋体;">被阻塞，此时为什么不限做蓝色计算部分？等红色部分做完了用&ldquo;回调函数&rdquo;来显示文件内容多好。</span></p>
<div class="cnblogs_code">
<pre><code>&lt;?<span style="color: #000000;">php
    </span><span style="color: #ff0000;">//读取文件
    $myfile = fopen("txt.txt", "r");
    //打印文件内存
    echo fread($myfile, filesize("txt.txt"));

    </span><span style="color: #0000ff;">for($i = 2; $i &lt; 100; $i++){
        $count = 0;
        for($j = 1; $j &lt;= $i; $j++){
            if($i % $j == 0){
                $count++;
            }
        }
        if($count == 2){
            echo $i."&lt;br/&gt;";
        }
    }

    </span><span style="color: #008080;">fclose</span>(<span style="color: #800080;">$myfile</span><span style="color: #000000;">);
</span>?&gt;</pre>
</div>
<p>V8<span style="font-family: 宋体;">引擎来了。</span><span style="font-family: Consolas;">V8</span><span style="font-family: 宋体;">满足他关于高性能</span><span style="font-family: Consolas;">Web</span><span style="font-family: 宋体;">服务器的想象：</span></p>
<p>● 没有历史包袱，没有同步<span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">。不会出现一个同步</span><span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">导致事件循环性能急剧降低的情况。</span></p>
<p>● <span style="font-family: Consolas;">V8</span><span style="font-family: 宋体;">性能足够好，远远比</span><span style="font-family: Consolas;">Python</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">Ruby</span><span style="font-family: 宋体;">等其他脚本语言的引擎快。</span></p>
<p>● <span style="font-family: Consolas;">JavaScript</span><span style="font-family: 宋体;">语言的闭包特性非常方便，比</span><span style="font-family: Consolas;">C</span><span style="font-family: 宋体;">中的回调函数好用。</span></p>
<p>&nbsp;<span style="font-family: 宋体;">创始人</span>Ryan Dahl<span style="font-family: 宋体;">想到了用</span><span style="font-family: Consolas;">V8</span><span style="font-family: 宋体;">引擎内核，用</span><span style="font-family: Consolas;">JS</span><span style="font-family: 宋体;">当做语言去开发服务端程序。</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点3.png" alt="" /></p>
<p>&nbsp;</p>
<p>下面是Nodejs<span style="font-family: 宋体;">的画风，</span><span style="font-family: Consolas;">Nodejs</span><span style="font-family: 宋体;">不是语言，语言是</span><span style="font-family: Consolas;">JavaScript</span><span style="font-family: 宋体;">，</span><span style="font-family: Consolas;">Nodejs</span><span style="font-family: 宋体;">是一个平台，让我们的</span><span style="font-family: Consolas;">JS</span><span style="font-family: 宋体;">可以运行在服务端的平台。</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #ff0000;">var fs = require("fs");
fs.readFile("./txt.txt" ,<span style="color: #800080;"><strong>function(err, data){
    console.log(data.toString());
}</strong></span>)

</span><span style="color: #0000ff;">for(var i = 2; i &lt; 100; i++){
    count = 0;
    for(var j = 1; j &lt;= i;j++){
        if(i % j == 0){
            count++;
        }
    }
    if(count == 2){
        console.log(i)
    }
}</span></pre>
</div>
<p><span style="font-family: 宋体;">红色的</span>I/O<span style="font-family: 宋体;">操作没有将蓝色计算操作阻塞，称为&ldquo;</span><span style="font-family: Consolas;">Non-Blocking I/O</span><span style="font-family: 宋体;">&rdquo;非阻塞</span><span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">。紫色语句是回调函数。</span></p>
<p>&nbsp;</p>
<p>官网：<a href="https://nodejs.org/en/"><span style="text-decoration: underline;">https://nodejs.org/en/</span></a></p>
<p>中文：<a href="http://nodejs.cn/"><span style="text-decoration: underline;">http://nodejs.cn/</span></a></p>
<p>NodeJS<span style="font-family: 宋体;">是一个</span><span style="font-family: Consolas;">JS</span><span style="font-family: 宋体;">运行环境，它构建在</span><span style="font-family: Consolas;">chrome</span><span style="font-family: 宋体;">的</span><span style="font-family: Consolas;">V8</span><span style="font-family: 宋体;">引擎上。使用了事件驱动、非阻塞</span><span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">模型，使它轻量并且方便。</span><span style="font-family: Consolas;">NodeJS</span><span style="font-family: 宋体;">有一个全球最大的包生态系统</span><span style="font-family: Consolas;">npm</span><span style="font-family: 宋体;">。</span></p>
<p>&nbsp;</p>
<p>Node.js<span style="font-family: 宋体;">使</span><span style="font-family: Consolas;">JavaScript</span><span style="font-family: 宋体;">的触角伸到了服务器开发中，在</span><span style="font-family: Consolas;">Node</span><span style="font-family: 宋体;">的世界中，我们关心的不再是用</span><span style="font-family: Consolas;">JS</span><span style="font-family: 宋体;">操作网页上的</span><span style="font-family: Consolas;">DOM</span><span style="font-family: 宋体;">、制作交互动画、表单验证&hellip;&hellip;而是服务器端的事情：</span><span style="font-family: Consolas;">HTTP</span><span style="font-family: 宋体;">请求的处理、</span><span style="font-family: Consolas;">GET</span><span style="font-family: 宋体;">请求和</span><span style="font-family: Consolas;">POST</span><span style="font-family: 宋体;">请求、数据库增删改查、</span><span style="font-family: Consolas;">cookie</span><span style="font-family: 宋体;">和</span><span style="font-family: Consolas;">session</span><span style="font-family: 宋体;">等等。</span></p>
<p><span style="color: #ff0000;">&nbsp;</span></p>
<p><span style="color: #ff0000;"><strong>Node.js<span style="font-family: 宋体;">的特点：单线程、非阻塞异步</span><span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">、事件驱动。</span></strong></span></p>
<p>Nodejs<span style="font-family: 宋体;">是</span><span style="font-family: Consolas;">JS</span><span style="font-family: 宋体;">的运行环境，它构建在</span><span style="font-family: Consolas;">Chrome</span><span style="font-family: 宋体;">的</span><span style="font-family: Consolas;">V8</span><span style="font-family: 宋体;">引擎上。</span></p>
<p>Nodejs<span style="font-family: 宋体;">是一个小极客，追求极致的服务器性能，剑走偏锋的产物。</span></p>
<p><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">与其很多服务员闲着，还不如一个服务员</span>100%<span style="font-family: 宋体;">的工作。</span></strong></span></p>
<p><strong>&nbsp;</strong></p>
<hr />
<h1><strong><span style="font-family: 宋体;">二、</span>NodeJS<span style="font-family: 宋体;">的安装</span></strong></h1>
<p>&nbsp;</p>
<p>NodeJS<span style="font-family: 宋体;">和</span><span style="font-family: Consolas;">Java</span><span style="font-family: 宋体;">虚拟机一样，是跨平台的，也就是说只要写一份代码，可以运行在任何平台上。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">去</span>NodeJS<span style="font-family: 宋体;">官网下载：</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点4.png" alt="" /></p>
<table border="1" cellspacing="0">
<tbody>
<tr>
<td valign="top" width="347">
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点5.png" alt="" /></p>
<p>&nbsp;</p>
</td>
<td valign="top" width="347">
<p>安装的欢迎界面</p>
</td>
</tr>
<tr>
<td valign="top" width="347">
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点6.png" alt="" /></p>
<p>&nbsp;</p>
</td>
<td valign="top" width="347">
<p>同意协议</p>
</td>
</tr>
<tr>
<td valign="top" width="347">
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点7.png" alt="" /></p>
<p>&nbsp;</p>
</td>
<td valign="top" width="347">
<p>安装路径全程不能有中文。</p>
<p>事实上很多软件公司已经去中文化，文档都是英语的文件名，文件夹都是英语的。</p>
</td>
</tr>
<tr>
<td valign="top" width="347">
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点8.png" alt="" /></p>
<p>&nbsp;</p>
</td>
<td valign="top" width="347">
<p>这个界面不需要改变任何的配置，但是要知道：这里安装了<span style="font-family: Consolas;">4</span><span style="font-family: 宋体;">个东西。</span></p>
<p>&nbsp;</p>
</td>
</tr>
<tr>
<td valign="top" width="347">
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点9.png" alt="" /></p>
<p>&nbsp;</p>
</td>
<td valign="top" width="347">
<p>点击下一步就开始安装了</p>
</td>
</tr>
<tr>
<td valign="top" width="347">
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点10.png" alt="" /></p>
<p>&nbsp;</p>
</td>
<td valign="top" width="347">
<p>系统的防火墙，选择是</p>
</td>
</tr>
<tr>
<td valign="top" width="347">
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点11.png" alt="" /></p>
<p>&nbsp;</p>
</td>
<td valign="top" width="347">
<p>nodejs<span style="font-family: 宋体;">已经被成功的安装。</span></p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p align="justify">安装完毕之后，按windows<span style="font-family: 宋体;">键加</span><span style="font-family: Consolas;">R</span><span style="font-family: 宋体;">键（</span><span style="font-family: Consolas;">run</span><span style="font-family: 宋体;">），</span>输入cmd<span style="font-family: 宋体;">（表示</span><span style="font-family: Consolas;">commond</span><span style="font-family: 宋体;">命令）按回车：</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点12.png" alt="" /></p>
<p>&nbsp;</p>
<p>这是系统的密令提示符，可以输入类似DOS<span style="font-family: 宋体;">的命令。但是现在要输入</span></p>
<div class="cnblogs_code">
<pre><code>node -v</pre>
</div>
<p><img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点13.png" alt="" /></p>
<p>追求以下真理，安装过程，到底发生了什么？发现了一个Nodejs<span style="font-family: 宋体;">程序：</span></p>
<p><span style="font-family: 宋体;"><img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点14.png" alt="" /></span></p>
<p>我们发现系统的环境变量中，已经添加了这个路径：</p>
<p><img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点15.png" alt="" /></p>
<p><span style="color: #ff0000;"><strong>系统的环境变量可以保证我们的</strong><strong>node<span style="font-family: 宋体;">在任意</span><span style="font-family: Consolas;">CMD</span><span style="font-family: 宋体;">盘符下可以被运行</span></strong>。</span></p>
<p>nodejs<span style="font-family: 宋体;">在</span><span style="font-family: Consolas;">windows</span><span style="font-family: 宋体;">中是一个</span><span style="font-family: Consolas;">exe</span><span style="font-family: 宋体;">程序。</span></p>
<hr />
<p>&nbsp;</p>
<h1>三、<strong><span style="font-family: 宋体;">运行</span>Nodejs<span style="font-family: 宋体;">程序</span></strong></h1>
<p><span style="font-family: 宋体;">在</span>c<span style="font-family: 宋体;">盘创建一个</span><span style="font-family: Consolas;">nodejs_study</span><span style="font-family: 宋体;">文件，然后写</span><span style="font-family: Consolas;">01.js</span><span style="font-family: 宋体;">文件</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点16.png" alt="" /></p>
<p>将文件拖拽到浏览器中不能执行的。</p>
<p>因为js<span style="font-family: 宋体;">的执行需要宿主环境（</span><span style="font-family: Consolas;">runtime</span><span style="font-family: 宋体;">），目前我们只知道一个环境：浏览器</span><span style="font-family: Consolas;">+HTML</span><span style="font-family: 宋体;">环境。</span></p>
<p><span style="font-family: 宋体;">想要运行</span>01.js<span style="font-family: 宋体;">程序：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">meta </span><span style="color: #ff0000;">charset</span><span style="color: #0000ff;">="UTF-8"</span> <span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>Document<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #ff0000;">&lt;script type="text/javascript" src="01.js"&gt;&lt;/script&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p><span style="font-family: 宋体;">浏览器会渲染</span>html<span style="font-family: 宋体;">就能执行</span><span style="font-family: Consolas;">js</span><span style="font-family: 宋体;">。</span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>NodeJS<span style="font-family: 宋体;">是一个全新的</span><span style="font-family: Consolas;">JS</span><span style="font-family: 宋体;">宿主环境</span><span style="font-family: Consolas;">runtime</span><span style="font-family: 宋体;">。也就是说可以用</span><span style="font-family: Consolas;">node</span><span style="font-family: 宋体;">运行</span><span style="font-family: Consolas;">js</span><span style="font-family: 宋体;">程序，而不需要</span><span style="font-family: Consolas;">html</span><span style="font-family: 宋体;">和浏览器。</span></strong></span></p>
<p><span style="font-family: 宋体;">打开</span>CMD<span style="font-family: 宋体;">，首先注意光标所在盘符位置：</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点17.png" alt="" /></p>
<p>01.js<span style="font-family: 宋体;">文件不在</span><span style="font-family: Consolas;">C:\Users\admin&gt;</span><span style="font-family: 宋体;">中，而是在</span><span style="font-family: Consolas;">C:\nodejs_study</span><span style="font-family: 宋体;">，所以要用</span><span style="color: #0000ff;">cd</span>命令来切换光标所在盘符位置：</p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点18.png" alt="" /></p>
<p>当用<span style="color: #0000ff;">cd</span><span style="font-family: 宋体;">切换到</span>01.js<span style="font-family: 宋体;">所在目录时，此时可以用</span><span style="color: #0000ff;">node</span><span style="font-family: 宋体;">命令执行</span>js<span style="font-family: 宋体;">文件：</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点19.png" alt="" /></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">也就是说，运行</span>js<span style="font-family: 宋体;">文件的时候：</span></p>
<p>① 要保证光标所在位置正确</p>
<p>② 运行谁，就<span style="font-family: Consolas;">node</span><span style="font-family: 宋体;">谁。</span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>为了快速打开正确光标所在位置，此时有奇淫技巧：</strong></span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点20.png" alt="" /></p>
<p><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">要求大家，在运行</span>node<span style="font-family: 宋体;">程序的时候，必须进入准确的盘符，不能使用绝对路径</span></strong>：</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点21.png" alt="" /></p>
<p><span style="color: #ff0000;"><strong>最快的运行</strong><strong>node<span style="font-family: 宋体;">程序的方法就是使用</span><span style="font-family: Consolas;">visual studio code</span><span style="font-family: 宋体;">，或者</span><span style="font-family: Consolas;">webstrom</span></strong></span><span style="font-family: 宋体;"><span style="color: #ff0000;">。</span>直接按</span>F5<span style="font-family: 宋体;">，</span><span style="font-family: Consolas;">IDE</span><span style="font-family: 宋体;">（编程工具）内置的控制台会输出结果。</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点22.png" alt="" /></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">CMD的命令：
<span style="color: #0000ff;">cls</span>
清屏。

<span style="color: #0000ff;">cd ..</span>
回退到上一级文件夹

<span style="color: #0000ff;">cd 文件夹名字</span>
进入这个文件夹

<span style="color: #0000ff;">dir</span>
列出当前目录中所有的文件

<span style="color: #0000ff;">&uarr;上箭头</span>
重复上一条指令。</span></pre>
</div>
<hr />
<h1><strong><span style="font-family: 宋体;">四、</span>NodeJS<span style="font-family: 宋体;">内置模块</span></strong></h1>
<h2><strong>4.1 fs<span style="font-family: 宋体;">模块</span></strong></h2>
<p>NodeJS<span style="font-family: 宋体;">没有自己的语法，</span><span style="font-family: Consolas;">JS</span><span style="font-family: 宋体;">能写什么，</span><span style="font-family: Consolas;">node</span><span style="font-family: 宋体;">就能运行什么</span></p>
<p>但是要注意，<span style="color: #ff0000;"><strong><span style="font-family: 宋体;">仅限于</span>JS<span style="font-family: 宋体;">语言核心部分。</span><span style="font-family: Consolas;">DOM</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">BOM</span><span style="font-family: 宋体;">不能用，</span><span style="font-family: Consolas;">node</span><span style="font-family: 宋体;">没有浏览器的那些东西</span></strong>。</span></p>
<div class="cnblogs_code">
<pre><code><span style="text-decoration: line-through;"><span style="color: #000000; text-decoration: line-through;">document.getElementById("box");
window
alert()</span></span></pre>
</div>
<p>&nbsp;</p>
<p>但是可以用定时器</p>
<div class="cnblogs_code">
<pre><code>setInterval(<span style="color: #0000ff;">function</span><span style="color: #000000;">(){
    console.log(Math.random());
},</span>100)</pre>
</div>
<p><img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点23.png" alt="" /></p>
<p><span style="color: #ff0000;"><strong>按</strong><strong>ctrl+c<span style="font-family: 宋体;">可以打断</span><span style="font-family: Consolas;">Nodejs</span><span style="font-family: 宋体;">程序的执行。</span></strong></span></p>
<p>&nbsp;</p>
<p>Nodejs<span style="font-family: 宋体;">中提供了很多内置模块，帮助我们开发，可以提供浏览器所不具备的功能，模块是内置的，不需要额外安装。从</span><span style="font-family: Consolas;">fs</span><span style="font-family: 宋体;">内置模块学起，</span><span style="font-family: Consolas;">fs</span><span style="font-family: 宋体;">是</span><span style="font-family: Consolas;">file system</span><span style="font-family: 宋体;">文件系统的意思，提供了对文件的所有操作</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;"> require表示得到，引入fs内置模块，file system文件系统模块</span>
<span style="color: #ff0000;">var fs = require("fs");

</span><span style="color: #008000;">//</span><span style="color: #008000;">fs模块有个方法叫readFile，可以异步读文件内容</span><span style="color: #008000;">
//</span><span style="color: #008000;">这个函数是异步函数，也就是说读取文件不会阻塞CPU执行，所以读取到的内容通过回调函数返回</span><span style="color: #008000;">
//</span><span style="color: #008000;">err参数：错误信息，没有错误将返回null</span><span style="color: #008000;">
//</span><span style="color: #008000;">data参数：返回文件的内容</span>
<span style="color: #ff0000;">fs.readFile("./test1.txt",function(err,data){
    if(err){
        console.log("文件读取错误！");
        return;
    }
    //读取的是信息流，是Buffer是缓冲的二进制，用toString()转为字符串
    console.log(data.toString());
});</span></pre>
</div>
<p><span style="font-family: 宋体;">利用</span>fs.readFile()<span style="font-family: 宋体;">这个</span><span style="font-family: Consolas;">API</span><span style="font-family: 宋体;">来读取文件，并且是异步读取文件，这里注意两个事情：</span></p>
<p>1<span style="font-family: 宋体;">） 第一个参数是路径，必须以</span><span style="font-family: Consolas;">"./"</span><span style="font-family: 宋体;">开头，表示从相对于当前的</span><span style="font-family: Consolas;">cmd</span><span style="font-family: 宋体;">盘符位置去读取文件。</span></p>
<p>2<span style="font-family: 宋体;">） 第二个参数是回调函数，注意回调函数中提供了两个参数，分别是</span><span style="font-family: Consolas;">err</span><span style="font-family: 宋体;">和</span><span style="font-family: Consolas;">data</span><span style="font-family: 宋体;">。注意，</span><span style="font-family: Consolas;">nodejs</span><span style="font-family: 宋体;">中的所有回调函数的第一个参数都是</span><span style="font-family: Consolas;">err</span><span style="font-family: 宋体;">对象，表示错误。如果没有错误，这个对象是</span><span style="font-family: Consolas;">null</span><span style="font-family: 宋体;">。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">要会看</span>API<span style="font-family: 宋体;">：</span><a href="https://nodejs.org/dist/latest-v6.x/docs/api/"><span style="text-decoration: underline;">https://nodejs.org/dist/latest-v6.x/docs/api/</span></a></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点24.png" alt="" /></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> fs = require("fs"<span style="color: #000000;">);

fs.readFile(</span>"./test1.txt",<span style="color: #0000ff;">function</span><span style="color: #000000;">(err,data){
    console.log(data.toString());
});

fs.readFile(</span>"./test2.txt",<span style="color: #0000ff;">function</span><span style="color: #000000;">(err,data){
    console.log(data.toString());
});

fs.readFile(</span>"./test3.txt",<span style="color: #0000ff;">function</span><span style="color: #000000;">(err,data){
    console.log(data.toString());
});</span></pre>
</div>
<p><img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点25.png" alt="" /></p>
<p>&nbsp;</p>
<p>在Nodejs<span style="font-family: 宋体;">中要适应回调套回调函数的写法：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> fs = require("fs"<span style="color: #000000;">);

fs.readFile(</span>"./test1.txt",<span style="color: #0000ff;">function</span><span style="color: #000000;">(err,data){
    console.log(data.toString());

    fs.readFile(</span>"./test2.txt",<span style="color: #0000ff;">function</span><span style="color: #000000;">(err,data){
        console.log(data.toString());

        fs.readFile(</span>"./test3.txt",<span style="color: #0000ff;">function</span><span style="color: #000000;">(err,data){
            console.log(data.toString());
        });
    });
});</span></pre>
</div>
<hr />
<h2><strong>4.2 http<span style="font-family: 宋体;">模块</span></strong></h2>
<p><span style="font-family: 宋体;">用</span>http<span style="font-family: 宋体;">模块，</span><span style="font-family: Consolas;">Nodejs</span><span style="font-family: 宋体;">可以开发服务器。创建服务器的</span><span style="font-family: Consolas;">API</span><span style="font-family: 宋体;">要自己背诵记忆一下，不过，后面讲解</span><span style="font-family: Consolas;">Express</span><span style="font-family: 宋体;">，极大简化服务器的创建：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #ff0000;">var http = require('http');</span> <span style="color: #008000;">//</span><span style="color: #008000;">读取内置http模块，这个模块提供了http服务</span>

<span style="color: #008000;">//</span><span style="color: #008000;">创建一个服务器，是异步函数，事实上node中基本所有函数都是异步的</span>
<span style="color: #ff0000;">var server = http.createServer(function(req,res){
    </span><span style="color: #008000;">//</span><span style="color: #008000;">req表示request用户的请求</span>
    <span style="color: #008000;">//</span><span style="color: #008000;">res表示response服务器的响应</span>

    <span style="color: #008000;">//</span><span style="color: #008000;">设置响应报文头，让类型变为html并且是utf8编码</span>
   <span style="color: #ff0000;"> res.setHeader("Content-type", "text/html;charset=UTF8");
    </span><span style="color: #008000;">//</span><span style="color: #008000;">页面上输出内容，输出内容用write，end表示结束！</span>
    <span style="color: #ff0000;">res.end("&lt;h1&gt;你好，我是nodejs开发的服务器！&lt;/h1&gt;");
});

</span><span style="color: #008000;">//</span><span style="color: #008000;">监听3000端口，默认是80端口，但80被Apache占用了，所以改用3000</span>
<span style="color: #ff0000;">server.listen(3000,function(err){
    if(err){
        console.log("服务器开启失败！");
        return;
    }
    console.log("服务器开启成功，在3000端口，快打开浏览器看看吧！");
});</span></pre>
</div>
<p><img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点26.png" alt="" /></p>
<p>&nbsp;</p>
<p>此时CMD<span style="font-family: 宋体;">会被挂起，按</span><span style="font-family: Consolas;">ctrl+c</span><span style="font-family: 宋体;">打断（打断之后，服务器也打不开了）</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点27.png" alt="" /></p>
<p>我们来验证程序确实在服务器上运行的：　</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> http = require('http'<span style="color: #000000;">);

</span><span style="color: #0000ff;">var</span> server = http.createServer(<span style="color: #0000ff;">function</span><span style="color: #000000;">(req,res){
    res.setHeader(</span>"Content-type", "text/html;charset=UTF8"<span style="color: #000000;">);
    res.end(</span>"&lt;h1&gt;你好，我是nodejs开发的服务器！已经诞生了"+ (3 + 3) +"年了&lt;/h1&gt;"<span style="color: #000000;">);
});

server.listen(</span>3000);</pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">在浏览器中，看不到后端</span>node<span style="font-family: 宋体;">的源代码：</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点28.png" alt="" /></p>
<p>原因是Nodejs<span style="font-family: 宋体;">执行在服务器端，语句在服务器被执行、编译，此时发给浏览器的就是执行之后、编译后的纯文本了，不含有计算的。</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点29.png" alt="" /></p>
<p>两个问题：</p>
<p>1、<span style="font-family: 宋体;">我用</span>Nodejs<span style="font-family: 宋体;">搭建的服务器，访问者也必须安装</span><span style="font-family: Consolas;">nodejs</span><span style="font-family: 宋体;">吗。</span></p>
<p><span style="font-family: 宋体;">不需要的，因为</span>nodejs<span style="font-family: 宋体;">是服务器程序，生成的内容仅需要浏览器就能访问</span></p>
<p>&nbsp;</p>
<p>2、<span style="font-family: 宋体;">我们用高级</span>ES6<span style="font-family: 宋体;">语法书写</span><span style="font-family: Consolas;">Nodejs</span><span style="font-family: 宋体;">程序，必须用高级浏览器访问吗。</span></p>
<p><span style="font-family: 宋体;">不需要的，因为</span>Nodejs<span style="font-family: 宋体;">程序不在浏览器执行。</span></p>
<p>&nbsp;</p>
<p><strong>req<span style="font-family: 宋体;">表示</span><span style="font-family: Consolas;">request</span><span style="font-family: 宋体;">用户的请求，访问者的所有必要信息在</span><span style="font-family: Consolas;">req</span><span style="font-family: 宋体;">中存储，比如</span></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">req.url
表示访问路径</span></pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">req.connection.remoteAddress
表示访问者的ip地址</span></pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">res表示response服务器的响应，服务器应该给与的反馈。
res.setHeader(</span>"Content-type", "text/html;charset=UTF8");<br />设置HTTP下行报文体</pre>
</div>
<p><img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点30.png" alt="" /></p>
<p>l&nbsp;<strong>res.end() <span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">res.write()</span><span style="font-family: 宋体;">负责写下行报文体（就是网页）。</span></strong></p>
<p>res.end()<span style="font-family: 宋体;">结束响应，告诉客户端所有消息已经发送完毕，当所有要返回的内容发送完毕时，该函数必须被调用一次，如果不调用该函数，客户端将永远处于等待状态。</span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> http = require('http'<span style="color: #000000;">);

</span><span style="color: #0000ff;">var</span> server = http.createServer((req,res)=&gt;<span style="color: #000000;">{
    res.setHeader(</span>"Content-type", "text/html;charset=UTF8"<span style="color: #000000;">);

    </span><span style="color: #008000;">//</span><span style="color: #008000;">页面显示的内容</span>
<span style="color: #0000ff;">res.write("&lt;h1&gt;hello world！&lt;/h1&gt;"</span><span style="color: #000000;"><span style="color: #0000ff;">);</span>
   <span style="color: #0000ff;"> res.write(</span></span><span style="color: #0000ff;">"&lt;ul&gt;");
    res.write("&lt;li&gt;Nodejs&lt;/li&gt;");
    res.write("&lt;li&gt;npm&lt;/li&gt;");
    res.write("&lt;li&gt;Express&lt;/li&gt;");
    res.write("&lt;li&gt;Mongodb&lt;/li&gt;");
    res.write("&lt;/ul&gt;"</span><span style="color: #000000;"><span style="color: #0000ff;">);</span>
  <span style="color: #ff0000;">  res.end(); </span></span><span style="color: #008000;">//</span><span style="color: #008000;">必须结束，否则本次操作不结束，浏览器显示为载入中</span>
<span style="color: #000000;">});

server.listen(</span>3000);</pre>
</div>
<hr />
<h1>五、<strong>NodeJS<span style="font-family: 宋体;">特点</span></strong></h1>
<h2><strong>5.1<span style="font-family: 宋体;">单线程</span></strong></h2>
<p><span style="font-family: 宋体;">写一段程序，证明</span>NodeJS<span style="font-family: 宋体;">是单线程的：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> http = require("http"<span style="color: #000000;">);

</span><span style="color: #008000;">//</span><span style="color: #008000;">在服务器外面定义一个变量a</span>
<span style="color: #0000ff;">var</span> a = 0<span style="color: #000000;">;

</span><span style="color: #0000ff;">var</span> server = http.createServer(<span style="color: #0000ff;">function</span><span style="color: #000000;">(req,res){
a</span>++<span style="color: #000000;">;
    res.end(a.toString());
});

server.listen(</span>3000)</pre>
</div>
<p><span style="font-family: 宋体;">我们发现不是每个访问者来了都有新的</span>a<span style="font-family: 宋体;">值，而是全班共用一个</span><span style="font-family: Consolas;">a</span><span style="font-family: 宋体;">，每个人访问的时候看到的都是已经被刷过的</span><span style="font-family: Consolas;">a</span><span style="font-family: 宋体;">值。</span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> http = require("http"<span style="color: #000000;">);

</span><span style="color: #0000ff;">var</span> server = http.createServer(<span style="color: #0000ff;">function</span><span style="color: #000000;">(req,res){
    </span><span style="color: #0000ff;">var</span> a = ~~(Math.random() * 1000<span style="color: #000000;">);

    </span><span style="color: #0000ff;">if</span>(a == 38<span style="color: #000000;">){
        </span><span style="color: #0000ff;">throw</span> <span style="color: #0000ff;">new</span> Error("有人踩地雷了，此人IP：" +<span style="color: #000000;"> req.connection.remoteAddress);
    }

    res.end(</span>"&lt;h1&gt;"+ a +"&lt;/h1&gt;"<span style="color: #000000;">);
});

server.listen(</span>3000)</pre>
</div>
<p><span style="font-family: 宋体;">在</span>Java<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">PHP</span><span style="font-family: 宋体;">或者</span><span style="font-family: Consolas;">.net</span><span style="font-family: 宋体;">等服务器端语言中，会为每一个客户端连接创建一个新的进程。而每个进程需要耗费大约</span><span style="font-family: Consolas;">2MB</span><span style="font-family: 宋体;">内存。也就是说，理论上一个</span><span style="font-family: Consolas;">8GB</span><span style="font-family: 宋体;">内存的服务器可以同时连接的最大用户数为</span><span style="font-family: Consolas;">4000</span><span style="font-family: 宋体;">个左右。要让</span><span style="font-family: Consolas;">Web</span><span style="font-family: 宋体;">应用程序支持更多的用户，就需要增加服务器的数量，而</span><span style="font-family: Consolas;">Web</span><span style="font-family: 宋体;">应用程序的硬件成本当然就上升了。</span></p>
<p><span style="color: #ff0000;"><span style="font-family: 宋体;">打个比喻，</span>PHP<span style="font-family: 宋体;">假如是一个餐馆，那么就是一个这样的餐馆：来一个用户，它就给你新招聘一个服务员，专门伺候你。你点菜的时候，这个服务员帮你点菜，你开始吃了，你这个服务员就闲置。这就造成了大量的浪费，凭什么闲置服务员，为什么不去服务别人？</span></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;">Node.js<span style="font-family: 宋体;">不为每个客户连接创建一个新的线程，而仅仅使用一个线程</span></span><span style="font-family: 宋体;"><span style="color: #ff0000;">。</span>当有用户连接了，就触发一个内部事件，通过非阻塞</span>I/O<span style="font-family: 宋体;">、事件驱动机制，让</span><span style="font-family: Consolas;">Node.js</span><span style="font-family: 宋体;">程序宏观上也是并行的。使用</span><span style="font-family: Consolas;">Node.js</span><span style="font-family: 宋体;">，一个</span><span style="font-family: Consolas;">8GB</span><span style="font-family: 宋体;">内存的服务器，可以同时处理超过</span><span style="font-family: Consolas;">4</span><span style="font-family: 宋体;">万用户的连接。</span></p>
<p>&nbsp;<span style="color: #ff0000;"><span style="font-family: 宋体;">打个比喻，</span>Node.js<span style="font-family: 宋体;">假如是一个餐馆，那么就是一个这样的餐馆：总共就一个服务员，</span><span style="font-family: Consolas;">A</span><span style="font-family: 宋体;">用户来了，帮</span><span style="font-family: Consolas;">A</span><span style="font-family: 宋体;">用户点菜，</span><span style="font-family: Consolas;">B</span><span style="font-family: 宋体;">用户来了，</span><span style="font-family: Consolas;">B</span><span style="font-family: 宋体;">用户稍微被阻塞一下，</span><span style="font-family: Consolas;">A</span><span style="font-family: 宋体;">点完菜之后，厨师开始做，服务</span><span style="font-family: Consolas;">B</span><span style="font-family: 宋体;">，</span><span style="font-family: Consolas;">B</span><span style="font-family: 宋体;">开始点菜，点菜的时候</span><span style="font-family: Consolas;">A</span><span style="font-family: 宋体;">的菜做好了，给</span><span style="font-family: Consolas;">B</span><span style="font-family: 宋体;">点完菜之后再去给</span><span style="font-family: Consolas;">A</span><span style="font-family: 宋体;">端菜，</span><span style="font-family: Consolas;">A</span><span style="font-family: 宋体;">开始吃，此时</span><span style="font-family: Consolas;">C</span><span style="font-family: 宋体;">来了，说了句欢迎光临之后，&ldquo;您看看菜单先&rdquo;，就去给</span><span style="font-family: Consolas;">B</span><span style="font-family: 宋体;">端菜去了，</span><span style="font-family: Consolas;">B</span><span style="font-family: 宋体;">开始吃上了，此时</span><span style="font-family: Consolas;">C</span><span style="font-family: 宋体;">开始点菜&hellip;&hellip;。</span></span></p>
<p><span style="color: #ff0000;">&nbsp;</span></p>
<p><span style="color: #ff0000;">&nbsp;<span style="font-family: 宋体;">微观上，</span>A<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">B</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">C</span><span style="font-family: 宋体;">不是并行的，但是宏观上他们是并行的！</span></span></p>
<p><span style="color: #ff0000;">&nbsp;另外，<strong>单线程的带来的好处，还有操作系统完全不再有线程创建、销毁的时间开销。</strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点31.png" alt="" /></p>
<hr />
<h2><strong>5.2<span style="font-family: 宋体;">异步</span><span style="font-family: 华文中宋;">I/O</span><span style="font-family: 宋体;">特性</span></strong></h2>
<p><span style="font-family: 宋体;">再来一个案例，用户访问页面的时候，服务器要读取两个文件，此时用</span>console<span style="font-family: 宋体;">查看唯一的服务员如何工作：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> server = http.createServer((req,res) =&gt;<span style="color: #000000;"> {
     </span><span style="color: #008000;">//</span><span style="color: #008000;">用户访问的时候执行的语句。</span><span style="color: #ff0000;">
    console.log(req.connection.remoteAddress + "进门了！我招呼他去！"</span><span style="color: #000000;"><span style="color: #ff0000;">);</span>
    res.setHeader(</span>"Content-Type","text/html;charset=UTF8"<span style="color: #000000;">);

<span style="color: #ff0000;">    console.log(req.connection.remoteAddress </span></span><span style="color: #ff0000;">+ "用户开始读1号文件"</span><span style="color: #000000;"><span style="color: #ff0000;">);</span>
     fs.readFile(</span>"./test1.txt",(err,data1) =&gt;<span style="color: #000000;"> {
         <span style="color: #ff0000;">console.log(req.connection.remoteAddress </span></span><span style="color: #ff0000;">+ "用户读完毕1号文件，开始读2号文件"</span><span style="color: #000000;"><span style="color: #ff0000;">);</span>
         fs.readFile(</span>"./test2.txt",(err,data2) =&gt;<span style="color: #000000;"> {
             <span style="color: #ff0000;">console.log(req.connection.remoteAddress</span></span><span style="color: #ff0000;">+"用户读完2号文件，开始发送response"</span><span style="color: #000000;"><span style="color: #ff0000;">);</span>
             
             res.write(</span>"&lt;h1&gt;" + data1.toString() +"&lt;/h1&gt;"<span style="color: #000000;">);
             res.write(</span>"&lt;h1&gt;" + data2.toString() +"&lt;/h1&gt;"<span style="color: #000000;">);
             res.end(</span>""<span style="color: #000000;">);
         });
     });
});</span></pre>
</div>
<p><img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点32.png" alt="" /></p>
<p>你I/O<span style="font-family: 宋体;">的时候</span><span style="font-family: Consolas;">CPU</span><span style="font-family: 宋体;">并没有被阻塞，去伺候别人，当别人也</span><span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">了此时执行你的回调函数。</span></p>
<p><span style="font-family: 宋体;">综上所述，</span>nodejs<span style="font-family: 宋体;">是一个服务员在伺候所有人，所以擅长</span><span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">越多的业务。</span><span style="font-family: Consolas;">I/O</span><span style="font-family: 宋体;">越多，效率越高，</span><span style="font-family: Consolas;">nodejs</span><span style="font-family: 宋体;">不会错乱，采用就是事件环机制，也叫事件驱动机制，</span><span style="font-family: Consolas;">nodejs</span><span style="font-family: 宋体;">不擅长计算多的业务，因为给一个用户计算去了，此时唯一的线程就被阻塞了，其他用户进来就等待。</span></p>
<p>&nbsp;</p>
<p>比如下面的程序，红色的部分是计算水仙花数，计算很复杂，但是是同步的，所以小服务员就被阻塞了：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> server = http.createServer((req,res) =&gt;<span style="color: #000000;"> {
     </span><span style="color: #008000;">//</span><span style="color: #008000;">用户访问的时候执行的语句。</span>
    console.log(req.connection.remoteAddress + "进门了！我招呼他去！"<span style="color: #000000;">);
    console.log(req.connection.remoteAddress </span>+ "开始计算水仙花数了！"<span style="color: #000000;">);

    </span><span style="color: #ff0000;">for(var i = 100 ; i &lt;= 999 ; i++){
        // 给三位数拆分成三个单独的数
        var ge = i % 10;
        var shi = parseInt(i / 10) % 10;
        var bai = parseInt(i / 100);
        // 计算三次方的和
        var sum = Math.pow(ge,3) + Math.pow(shi,3) + Math.pow(bai,3);
        // 判断输出
        if(sum == i){
            console.log(req.connection.remoteAddress + "计算出了水仙花数" +</span><span style="color: #000000;"><span style="color: #ff0000;"> i);
        }
    }</span>
    res.setHeader(</span>"Content-Type","text/html;charset=UTF8"<span style="color: #000000;">);

    console.log(req.connection.remoteAddress </span>+ "开始读取文件"<span style="color: #000000;">);
     fs.readFile(</span>"./test1.txt",(err,data1) =&gt;<span style="color: #000000;"> {
         console.log(req.connection.remoteAddress </span>+ "读取文件完毕，开始输出响应流"<span style="color: #000000;">);
        res.write(</span>"&lt;h1&gt;" + data1.toString() +"&lt;/h1&gt;"<span style="color: #000000;">);
        res.end(</span>""<span style="color: #000000;">);
     });
});</span></pre>
</div>
<hr />
<h2><strong>5.3<span style="font-family: 宋体;">事件驱动</span></strong></h2>
<p><span style="font-family: 宋体;">事件驱动是</span>nodejs<span style="font-family: 宋体;">的底层机制，我们只需了解</span><span style="font-family: Consolas;">nodejs</span><span style="font-family: 宋体;">不会&ldquo;上错菜&rdquo;，原因就是事件驱动，有一个事件环。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">在</span>Node<span style="font-family: 宋体;">中，客户端请求建立连接，提交数据等行为，会触发相应的事件。在</span><span style="font-family: Consolas;">Node</span><span style="font-family: 宋体;">中，在一个时刻，只能执行一个事件回调函数，但是在执行一个事件回调函数的中途，可以转而处理其他事件（比如，又有新用户连接了），然后返回继续执行原事件的回调函数，这种处理机制，称为&ldquo;事件环&rdquo;机制。</span></p>
<p>Node.js<span style="font-family: 宋体;">底层是</span><span style="font-family: Consolas;">C++</span><span style="font-family: 宋体;">（</span><span style="font-family: Consolas;">V8</span><span style="font-family: 宋体;">也是</span><span style="font-family: Consolas;">C++</span><span style="font-family: 宋体;">写的）。底层代码中，近半数都用于事件队列、回调函数队列的构建。用事件驱动来完成服务器的任务调度，这是鬼才才能想到的。</span></p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点33.png" alt="" /><img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点34.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;<img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点35.png" alt="" /></p>
<p><img src="./images/前端笔记之NodeJS（一）初识NodeJS&amp;内置模块&amp;特点36.png" alt="" /></p>
<p><span style="color: #ff0000;"><strong><span style="text-decoration: underline;">2013<span style="font-family: 宋体;">年开始，</span><span style="font-family: Consolas;">Nodejs</span><span style="font-family: 宋体;">突然间火爆，因为</span><span style="font-family: Consolas;">Nodejs</span><span style="font-family: 宋体;">的工作流工具火了！</span></span></strong></span></p>
<p><strong><span style="font-family: 宋体;">我们现在学习</span>nodejs<span style="font-family: 宋体;">的意义，已经从学习</span><span style="font-family: Consolas;">HTTP</span><span style="font-family: 宋体;">服务器的构建，变为学习它的工作流工具。</span></strong></p>
<p><span style="font-family: 宋体;">公司的服务器都是</span>PHP<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">JSP</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">Python</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">.net</span><span style="font-family: 宋体;">制作的，</span><span style="font-family: Consolas;">nodejs</span><span style="font-family: 宋体;">做</span><span style="font-family: Consolas;">http</span><span style="font-family: 宋体;">服务是很少的。但是，每一个前端必须会</span><span style="font-family: Consolas;">Nodejs</span><span style="font-family: 宋体;">，因为之后用的所有的东西</span><span style="font-family: Consolas;">webpack</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">babel</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">gulp</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">grunt</span><span style="font-family: 宋体;">等等都是基于</span><span style="font-family: Consolas;">nodejs</span><span style="font-family: 宋体;">的。</span></p>
<p>&nbsp;</p>
<hr />
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>