<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修前端笔记之React（三）使用动态样式表&amp;antd&amp;React脚手架&amp;props实战' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>前端笔记之React（三）使用动态样式表&amp;antd&amp;React脚手架&amp;props实战</center></div><div class='banquan'>原文出处:本文由博客园博主RopeHuo提供。<br/>
原文连接:https://www.cnblogs.com/rope/p/10740951.html</div><br>
    <h1><strong>一、使用动态样式表</strong></h1>
<h2><strong>1.1 LESS<span style="font-family: 宋体;">使用</span></strong></h2>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">全局安装Less
npm install -g less

创建1.less文件，然后可以用lessc命令来编译这个文件：
lessc 1.less 1.css</span></pre>
</div>
<hr />
<h2><strong>1.2 LESS<span style="font-family: 宋体;">和</span><span style="font-family: 华文中宋;">webpack</span><span style="font-family: 宋体;">结合</span></strong></h2>
<p><span style="font-family: 宋体;">希望在</span>React<span style="font-family: 宋体;">项目中使用</span><span style="font-family: Consolas;">less</span><span style="font-family: 宋体;">，此时就需要</span><span style="font-family: Consolas;">webpack</span><span style="font-family: 宋体;">打包的时候顺便进行</span><span style="font-family: Consolas;">less</span><span style="font-family: 宋体;">翻译</span></p>
<p>安装依赖：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">npm install --save-dev less-loader
npm install --save-dev css-loader
npm install --save-dev style-loader
npm install --save-dev less</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">修改</span>webpack.config.js<span style="font-family: 宋体;">配置：</span></p>
<div class="cnblogs_code">
<pre><code>const path = require('path'<span style="color: #000000;">);

module.exports </span>=<span style="color: #000000;"> {
    entry: </span>"./www/app/main", <span style="color: #008000;">//</span><span style="color: #008000;">程序的主入口文件</span>
    <span style="color: #008000;">//</span><span style="color: #008000;">程序出口文件配置</span>
<span style="color: #000000;">    output : {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">打包文件的输出地址</span>
        path: path.resolve(__dirname, "www/dist"<span style="color: #000000;">),
        </span><span style="color: #008000;">//</span><span style="color: #008000;">打包的文件名称</span>
        filename : "bundle.js"<span style="color: #000000;">,
    },
    watch:</span><span style="color: #0000ff;">true</span>, <span style="color: #008000;">//</span><span style="color: #008000;">让webpack监听变化，自动打包</span>
    mode : "development"<span style="color: #000000;">,
    </span><span style="color: #008000;">//</span><span style="color: #008000;">关于模块规则的配置</span>
<span style="color: #000000;">    module: {
        rules: [
            {
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 模块规则（配置loader，解析器等选项）</span>
                test: /\.js?$/, <span style="color: #008000;">//</span><span style="color: #008000;">解析的时候匹配到的都是js文件</span>
                include: [path.resolve(__dirname, "./www/app")],<span style="color: #008000;">//</span><span style="color: #008000;">翻译什么文件夹</span>
                exclude: [path.resolve(__dirname, "node_modules")], <span style="color: #008000;">//</span><span style="color: #008000;">不翻译什么文件夹</span>
                loader : "babel-loader"<span style="color: #000000;">,
                options: {
                    presets: [</span>"env","react"], <span style="color: #008000;">//</span><span style="color: #008000;">要翻译的ES语法</span>
                    plugins: ["transform-object-rest-spread","transform-runtime"<span style="color: #000000;">]
                },
            },
            <span style="color: #ff0000;">{
                test: </span></span><span style="color: #ff0000;">/\.less?$/,
                include: [path.resolve(__dirname, "./www/app")],//翻译什么文件夹
                exclude: [path.resolve(__dirname, "node_modules")], //不翻译什么文件夹
                use : [
                    {loader : 'style-loader'},
                    {loader : 'css-loader'},
                    {loader :'less-loader',
                        options : {
                            strictMath: true,
                            noIeCompat: true</span><span style="color: #000000;"><span style="color: #ff0000;">
                        }
                    }
                ]
            }</span>
        ]
    }
}</span></pre>
</div>
<p><span style="font-family: 宋体;">样式会被</span>webpack<span style="font-family: 宋体;">编译后出现在</span><span style="font-family: Consolas;">head</span><span style="font-family: 宋体;">标签中</span></p>
<p><img src="./images/前端笔记之React（三）使用动态样式表&amp;antd&amp;React脚手架&amp;props实战0.png" alt="" /></p>
<hr />
<h2><strong>1.3<span style="font-family: 宋体;">提炼样式表</span></strong></h2>
<p>extract-text-webpack-plugin<span style="font-family: 宋体;">这个插件主要是为了抽离</span><span style="font-family: Consolas;">css</span><span style="font-family: 宋体;">样式，将样式文件单独打包（打包输出的文件位置由</span><span style="font-family: Consolas;">webpack</span><span style="font-family: 宋体;">配置文件的</span><span style="font-family: Consolas;">output</span><span style="font-family: 宋体;">属性指定）。防止将样式打包在</span><span style="font-family: Consolas;">js</span><span style="font-family: 宋体;">中引起页面样式加载错乱，然后在入口</span><span style="font-family: Consolas;">HTML</span><span style="font-family: 宋体;">页面</span><span style="font-family: Consolas;">link</span><span style="font-family: 宋体;">标签引入这个打包后的样式文件即可。</span></p>
<p>&nbsp;</p>
<p>下面是插件的安装方法：</p>
<p><a href="https://www.npmjs.com/package/extract-text-webpack-plugin"><span style="text-decoration: underline;">https://www.npmjs.com/package/extract-text-webpack-plugin</span></a></p>
<div class="cnblogs_code">
<pre><code>npm install --save-dev extract-text-webpack-<span style="color: #000000;">plugin

如果用的webpack 4代版本，请下载新版的：
npm install </span>--save-dev extract-text-webpack-plugin<span style="color: #ff0000;">@next</span> </pre>
</div>
<p>&nbsp;</p>
<p>webpack.config.js<span style="font-family: 宋体;">配置：</span></p>
<div class="cnblogs_code">
<pre><code>const path = require('path'<span style="color: #000000;">);<span style="color: #ff0000;">
const ExtractTextPlugin </span></span><span style="color: #ff0000;">= require("extract-text-webpack-plugin"</span><span style="color: #000000;"><span style="color: #ff0000;">);
</span>
module.exports </span>=<span style="color: #000000;"> {
    entry: </span>"./www/app/main"<span style="color: #000000;">,
    output : {
        path: path.resolve(__dirname, </span>"www/dist"<span style="color: #000000;">),
        filename : </span>"bundle.js"<span style="color: #000000;">,
    },
    watch:</span><span style="color: #0000ff;">true</span><span style="color: #000000;">,
    mode : </span>"development"<span style="color: #000000;">,
    module: {
        rules: [
            {
                test: </span>/\.js?$/<span style="color: #000000;">,
                include: [path.resolve(__dirname, </span>"./www/app"<span style="color: #000000;">)],
                exclude: [path.resolve(__dirname, </span>"node_modules"<span style="color: #000000;">)],
                loader : </span>"babel-loader"<span style="color: #000000;">,
                options: {
                    presets: [</span>"env","react"], <span style="color: #008000;">//</span><span style="color: #008000;">要翻译的语法</span>
                    plugins: ["transform-object-rest-spread","transform-runtime"<span style="color: #000000;">]
                },
            },
            <span style="color: #ff0000;">{
                test: </span></span><span style="color: #ff0000;">/\.less?$/,
                include: [path.resolve(__dirname, "./www/app")],//翻译什么文件夹
                exclude: [path.resolve(__dirname, "node_modules")], //不翻译什么文件夹
                use: ExtractTextPlugin.extract({
                    fallback: "style-loader", //编译后用什么loader来提取css文件
                    //指定什么loader翻译文件，这里由于源文件时.less所以选择less-loader
                    use: ["css-loader","less-loader"</span><span style="color: #000000;"><span style="color: #ff0000;">]   
                })
            }</span>
        ]
    },
   <span style="color: #ff0000;"> plugins: [
        </span></span><span style="color: #ff0000;">new ExtractTextPlugin("styles.css"</span><span style="color: #000000;"><span style="color: #ff0000;">),
    ]</span>
}</span></pre>
</div>
<p><span style="font-family: 宋体;">如果遇见报错，重新在项目依赖中安装一下</span>webpack 4<span style="font-family: 宋体;">代的版本即可</span></p>
<p>index.html<span style="font-family: 宋体;">引入打包后的</span><span style="font-family: Consolas;">css</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">link </span><span style="color: #ff0000;">rel</span><span style="color: #0000ff;">="stylesheet"</span><span style="color: #ff0000;"> href</span><span style="color: #0000ff;">="dist/styles.css"</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<hr />
<h1><strong><span style="font-family: 宋体;">二、</span>antd<span style="font-family: 宋体;">组件库</span></strong></h1>
<p>官网：<a href="https://ant.design/index-cn"><span style="text-decoration: underline;">https://ant.design/index-cn</span></a></p>
<p>文档：<a href="https://ant.design/docs/react/introduce-cn"><span style="text-decoration: underline;">https://ant.design/docs/react/introduce-cn</span></a></p>
<p>安装依赖：</p>
<div class="cnblogs_code">
<pre><code>npm install --save antd</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">方法</span>1<span style="font-family: 宋体;">：</span><span style="font-family: Consolas;">import</span><span style="font-family: 宋体;">引入样式表</span></strong></span></p>
<div class="cnblogs_code">
<pre><code>import 'antd/dist/antd.css';</pre>
</div>
<p><img src="./images/前端笔记之React（三）使用动态样式表&amp;antd&amp;React脚手架&amp;props实战1.png" alt="" /></p>
<p>缺点就是将antd<span style="font-family: 宋体;">的样式表打包到</span><span style="font-family: Consolas;">dist/bundle.js</span><span style="font-family: 宋体;">目录，合并到</span><span style="font-family: Consolas;">dist/style.css</span><span style="font-family: 宋体;">中，</span><span style="font-family: Consolas;">webpack</span><span style="font-family: 宋体;">会效率低。</span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong><span style="font-family: 宋体;">方法</span>2<span style="font-family: 宋体;">：去</span><span style="font-family: Consolas;">node_modules\antd\dist\antd.min.css</span><span style="font-family: 宋体;">找到文件，复制到</span><span style="font-family: Consolas;">www</span><span style="font-family: 宋体;">文件夹中的</span><span style="font-family: Consolas;">css</span><span style="font-family: 宋体;">文件夹中，在</span><span style="font-family: Consolas;">index.html</span><span style="font-family: 宋体;">引入即可。</span></strong></span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('e6067891-ee65-4178-8f0e-da20553704bd')"><img id="code_img_closed_e6067891-ee65-4178-8f0e-da20553704bd" class="code_img_closed" src="./images/前端笔记之React（三）使用动态样式表&amp;antd&amp;React脚手架&amp;props实战2.png" alt="" /><img id="code_img_opened_e6067891-ee65-4178-8f0e-da20553704bd" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e6067891-ee65-4178-8f0e-da20553704bd',event)" src="./images/前端笔记之React（三）使用动态样式表&amp;antd&amp;React脚手架&amp;props实战3.png" alt="" />
<div id="cnblogs_code_open_e6067891-ee65-4178-8f0e-da20553704bd" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">&lt;!</span><span style="color: #ff00ff;">DOCTYPE html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html </span><span style="color: #ff0000;">lang</span><span style="color: #0000ff;">="en"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">meta </span><span style="color: #ff0000;">charset</span><span style="color: #0000ff;">="UTF-8"</span> <span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>Document<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> &lt;link rel="stylesheet" href="dist/styles.css"&gt; </span><span style="color: #008000;">--&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">link </span><span style="color: #ff0000;">rel</span><span style="color: #0000ff;">="stylesheet"</span><span style="color: #ff0000;"> href</span><span style="color: #0000ff;">="css/antd.min.css"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="app"</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #ff0000;"> src</span><span style="color: #0000ff;">="dist/bundle.js"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p><span style="font-family: 宋体;">在使用</span>antd<span style="font-family: 宋体;">的时候，所有的组件都是大写字母开头，比如按钮</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">import {Button} from "antd"
</span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Button</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">Button</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p><span style="font-family: 宋体;">在</span>App<span style="font-family: 宋体;">组件中小测：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">import React from 'react';
import {connect} from "dva";
import "./App.less";
import PicShow from "../components/picshow/index.js";
import { <span style="color: #ff0000;">Button ,DatePicker</span>} from 'antd';
class App extends React.Component {
    constructor(props) {
        super(props);
    }
    onChange(date, dateString) {
      console.log(date, dateString);
    }
    render() {
        return (
           </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">className</span><span style="color: #0000ff;">="app"</span><span style="color: #0000ff;">&gt;</span>
                <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Button </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="primary"</span><span style="color: #0000ff;">&gt;</span>Primary<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Button</span><span style="color: #0000ff;">&gt;</span>
                <span style="color: #ff0000;">&lt;DatePicker onChange={this.onChange.bind(this)} /&gt;</span>
           <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
        );
    }
}
export default connect()(App);</span></pre>
</div>
<hr />
<h1><strong><span style="font-family: 宋体;">三、</span>React<span style="font-family: 宋体;">脚手架</span></strong></h1>
<p><span style="font-family: 宋体;">在开发</span>Reat<span style="font-family: 宋体;">应用时，大家都是</span><span style="font-family: Consolas;">webpack + es6</span><span style="font-family: 宋体;">结合</span><span style="font-family: Consolas;">React</span><span style="font-family: 宋体;">开发，手动用</span><span style="font-family: Consolas;">npm</span><span style="font-family: 宋体;">安装各种插件，从头到尾自己搭建环境，虽然搭建环境过程也是很好的学习过程，但有时难免遇到各种问题，而且每次开发新应用，都是要从头搭建，未免太繁琐。</span></p>
<p>于是，出现了脚手架，避免开发过程中重复造轮子和做无用功，节省开发时间。</p>
<p><span style="font-family: 宋体;">以前还要</span>npm init<span style="font-family: 宋体;">一路撸到配置</span><span style="font-family: Consolas;">package.json</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">webpack.config.js</span><span style="font-family: 宋体;">文件，现在脚手架一行撸穿，懒人的世界如此美好。</span></p>
<p>&nbsp;</p>
<p><strong>React<span style="font-family: 宋体;">脚手架有很多，网上比较多人用和关注的，它们分别是：</span></strong></p>
<p><strong>create-react-app</strong></p>
<p><strong>react-boilerplate</strong></p>
<p><strong>react-redux-starter-kit</strong></p>
<p><strong><span style="font-family: 宋体;">使用这三个脚手架的人都相当多，最突出的是</span>create-react-app<span style="font-family: 宋体;">。</span></strong></p>
<p><strong><span style="font-family: 宋体;">它是后来居上，他的开发时间都晚于后两个，但关注量却比他们还大，因为是</span>facebook<span style="font-family: 宋体;">官方开发的。</span></strong></p>
<p><span style="font-family: 宋体;">当然，用得比较顺手的脚手架是</span>create-react-app<span style="font-family: 宋体;">和阿里的</span><span style="font-family: Consolas;">Antd Design of React</span></p>
<hr />
<h2><strong>3.1 create-react-app</strong></h2>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">安装：
npm install -g create-react-app

安装完成后，生成一个新的项目，使用下面的命令：
create-react-app my-app

创建my-app目录，然后噼里啪啦就OK啦！
npm start</span></pre>
</div>
<p><span style="font-family: 宋体;">默认情况下，会在开发环境启动服务器，监听</span>3000<span style="font-family: 宋体;">端口，会主动给你打开浏览器，可以立刻看到</span><span style="font-family: Consolas;">app</span><span style="font-family: 宋体;">的效果。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">它会创建一个很纯粹的</span>React<span style="font-family: 宋体;">项目，安装引用了以下依赖：</span></p>
<div class="cnblogs_code">
<pre><code>"dependencies"<span style="color: #000000;">: {
    </span>"react": "^16.2.0"<span style="color: #000000;">,
    </span>"react-dom": "^16.2.0"<span style="color: #000000;">,
    </span>"react-scripts": "1.1.1"<span style="color: #000000;">
}</span></pre>
</div>
<p><span style="font-family: 宋体;">没有其他依赖，所以如果要自己加一些库（</span>UI<span style="font-family: 宋体;">组件什么的），就要自己安装配置了。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">真的很清爽，所有的源码你将放到</span>src<span style="font-family: 宋体;">目录下，什么配置文件，各种乱七八糟都不用管，你只需要专注开发就好了，</span><span style="font-family: Consolas;">create-react-app</span><span style="font-family: 宋体;">都给你处理好了。</span></p>
<p><span style="font-family: 宋体;">如果你使用过</span>webpack-dev-server<span style="font-family: 宋体;">或</span><span style="font-family: Consolas;">webpack</span><span style="font-family: 宋体;">搭建过开发环境，你就会发现</span><span style="font-family: Consolas;">create-react-app</span><span style="font-family: 宋体;">的开发环境也有类似</span><span style="font-family: Consolas;">webpack-dev-server</span><span style="font-family: 宋体;">的</span><span style="font-family: Consolas;">--inline --hot</span><span style="font-family: 宋体;">自动刷新的功能。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">我们探究一下是怎么回事，难道</span>create-react-app<span style="font-family: 宋体;">也用上了</span><span style="font-family: Consolas;">webpack-dev-server</span><span style="font-family: 宋体;">？</span></p>
<p><span style="font-family: 宋体;">翻看了一下源码，没有找到</span>webpack.config.js<span style="font-family: 宋体;">文件，如果有使用</span><span style="font-family: Consolas;">webpack</span><span style="font-family: 宋体;">就应该有这个文件，好奇怪。</span></p>
<p><span style="font-family: 宋体;">看了一下</span>node_modules<span style="font-family: 宋体;">目录，也没找到</span><span style="font-family: Consolas;">webpack</span><span style="font-family: 宋体;">相关的东西。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">先源头入手，我是用</span>npm start<span style="font-family: 宋体;">命令来运行项目的。就从</span><span style="font-family: Consolas;">package.json</span><span style="font-family: 宋体;">文件入手，它的内容是这样的：</span></p>
<div class="cnblogs_code">
<pre><code>"start": "react-scripts start"</pre>
</div>
<p>react-scripts<span style="font-family: 宋体;">又是什么？</span></p>
<p><span style="font-family: 宋体;">在</span>node_modules<span style="font-family: 宋体;">目录中能找到它，它果然依赖了好多工具，其中就包括</span><span style="font-family: Consolas;">'webpack'</span><span style="font-family: 宋体;">。</span></p>
<p>&nbsp;<img src="./images/前端笔记之React（三）使用动态样式表&amp;antd&amp;React脚手架&amp;props实战4.png" alt="" /></p>
<p><span style="font-family: 宋体;">里面果然也有</span>webpack的配置文件，也有好多脚本文件。</p>
<p><span style="font-family: 宋体;">原来它是</span>facebook开发的一个管理create-react-app服务的工具。</p>
<p>原来也是它让整个源码变得很整洁的。</p>
<p>因为它隐藏了没必要的文件，大多数人的配置都是差不多的。</p>
<p><span style="font-family: 宋体;">除此之外，它还加入了</span>eslint的功能。让你在开发过程中，更关注于代码，很不错。</p>
<p>&nbsp;</p>
<h3><strong>3.2线上编译命令</strong></h3>
<p><span style="font-family: 宋体;">这个是</span>create-react-app的一个大亮点，它能让你的应用编译<span style="font-family: 宋体;">出在线上生产环境运行的代码，编译出来的文件很小，且文件名还带</span>hash值，方便我们做cache，而且它还提供一个服务器，让我们在本地也能看到线上生产环境类似的效果，真的超级方便。</p>
<p>只需一行命令：</p>
<div class="cnblogs_code">
<pre><code>npm run build</pre>
</div>
<hr />
<h1><strong><span style="font-family: 宋体;">四、父子组件之间数据传递（</span>props<span style="font-family: 宋体;">）</span></strong></h1>
<p><strong><span style="text-decoration: underline;">多组件的世界</span></strong>。</p>
<p><span style="font-family: 宋体;">如果</span>App<span style="font-family: 宋体;">组件内引入了</span><span style="font-family: Consolas;">&lt;Child&gt;</span><span style="font-family: 宋体;">子组件，此时</span><span style="font-family: Consolas;">App</span><span style="font-family: 宋体;">组件叫</span><span style="font-family: Consolas;">Child</span><span style="font-family: 宋体;">组件的</span><strong><span style="text-decoration: underline;">父组件</span></strong><span style="font-family: 宋体;">，</span>Child<span style="font-family: 宋体;">是</span><span style="font-family: Consolas;">App</span><span style="font-family: 宋体;">组件的</span><strong><span style="text-decoration: underline;">子组件</span></strong>。</p>
<p>现在要研究的是：</p>
<p>父组件的数据，怎么传给子组件？</p>
<p>子组件能不能直接更改父组件的数据值？</p>
<hr />
<p>&nbsp;</p>
<h2><strong>4.1<span style="font-family: 宋体;">父亲通过自定义属性传给子组件值，子组件通过</span><span style="font-family: 华文中宋;">this.props</span><span style="font-family: 宋体;">得到父亲传的值</span></strong></h2>
<p>App<span style="font-family: 宋体;">父组件中，可以给自定义标签加自定义属性，比如</span><span style="font-family: Consolas;">a={this.state.a}</span><span style="font-family: 宋体;">，表示将</span><span style="font-family: Consolas;">a</span><span style="font-family: 宋体;">属性传给儿子。</span></p>
<p>&nbsp;</p>
<p><strong>App.js<span style="font-family: 宋体;">父组件</span></strong></p>
<div class="cnblogs_code">
<pre><code>import React from "react"<span style="color: #000000;">;
<span style="color: #ff0000;">import Child from </span></span><span style="color: #ff0000;">"./components/Child"</span><span style="color: #000000;"><span style="color: #ff0000;">;</span>

export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class App extends React.Component {
    constructor() {
        super();
        </span><span style="color: #ff0000;">this.state = {
            a : 100</span><span style="color: #000000;"><span style="color: #ff0000;">
        }</span>
    }

    render() {
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;
            &lt;h1&gt;我是父组件：{<span style="color: #0000ff;">this</span>.state.a}&lt;/h1&gt;
            &lt;Child <span style="color: #ff0000;">a={this.state.a}</span> &gt;&lt;/Child&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
}</span></pre>
</div>
<p>&nbsp;</p>
<p>Child.js<span style="font-family: 宋体;">子组件：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">import 
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class <span style="color: #ff0000;">Child</span> extends React.Component {
    constructor() {
        super();
    }

    render() {
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;
            &lt;h1&gt;我是子组件：<span style="color: #ff0000;">{this.props.a}</span>&lt;/h1&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
}</span></pre>
</div>
<hr />
<h2><strong><span style="font-family: 宋体; font-size: 14pt;">4.2<span style="font-family: 宋体;">父组件中改变</span><span style="font-family: 华文中宋;">state</span><span style="font-family: 宋体;">的值，会引发子组件视图更新</span></span></strong></h2>
<p class="MsoNormal"><span style="mso-spacerun: 'yes'; font-family: 宋体; mso-ascii-font-family: Consolas; mso-hansi-font-family: Consolas; mso-bidi-font-family: 'Times New Roman'; font-size: 10.5000pt; mso-font-kerning: 1.0000pt;"><span style="font-family: 宋体;">如果父组件将</span>a<span style="font-family: 宋体;">属性传给子组件，此时父组件中对</span><span style="font-family: Consolas;">a</span><span style="font-family: 宋体;">的改变，会影响子组件接收的</span><span style="font-family: Consolas;">a</span><span style="font-family: 宋体;">值</span></span></p>
<div class="cnblogs_code">
<pre><code>import React from "react"<span style="color: #000000;">;
import Child from </span>"./components/Child"<span style="color: #000000;">;

export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class App extends React.Component {
    constructor() {
        super();
        </span><span style="color: #0000ff;">this</span>.state =<span style="color: #000000;"> {
            a : </span>100<span style="color: #000000;">
        }
    }

    render() {
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;
            &lt;h1&gt;我是父组件：{<span style="color: #0000ff;">this</span>.state.a}&lt;/h1&gt;
           <span style="color: #ff0000;"> &lt;button onClick={()=&gt;{this.setState({a:this.state.a+1})}}&gt;改变a的值&lt;/button&gt;</span>
            &lt;Child a={<span style="color: #0000ff;">this</span>.state.a} &gt;&lt;/Child&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
}</span></pre>
</div>
<p><img src="./images/前端笔记之React（三）使用动态样式表&amp;antd&amp;React脚手架&amp;props实战5.png" alt="" /></p>
<hr />
<h2><strong>4.3 props<span style="font-family: 宋体;">是只读的</span></strong></h2>
<p><span style="font-family: 宋体;">不能在子组件中直接改变父组件传过来的</span>state<span style="font-family: 宋体;">值：</span></p>
<div class="cnblogs_code">
<pre><code>import React from "react"<span style="color: #000000;">;
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class Child extends React.Component {
    constructor() {
        super();
    }

    render() {
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;
            &lt;h1&gt;我是子组件：{<span style="color: #0000ff;">this</span>.props.a}&lt;/h1&gt;
            &lt;button <span style="color: #ff0000;">onClick={() =&gt; { this.props.a++ }}</span>&gt;改变a的值&lt;/button&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
}</span></pre>
</div>
<p>props是<span style="font-family: 宋体;">只读的，会报错：</span></p>
<p><img src="./images/前端笔记之React（三）使用动态样式表&amp;antd&amp;React脚手架&amp;props实战6.png" alt="" /></p>
<hr />
<h2><strong>4.4<span style="font-family: 宋体;">父亲传入函数，让子组件改变父亲的值</span></strong></h2>
<p>App<span style="font-family: 宋体;">父组件中必须提供一个向子组件暴露的函数：</span></p>
<div class="cnblogs_code">
<pre><code>import React from "react"<span style="color: #000000;">;
import Child from </span>"./components/Child"<span style="color: #000000;">;

export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class App extends React.Component {
    constructor() {
        super();
        </span><span style="color: #0000ff;">this</span>.state =<span style="color: #000000;"> {
            a : </span>100<span style="color: #000000;">
        }
    }
   <span style="color: #ff0000;"> setA(a){
        </span></span><span style="color: #ff0000;">this</span><span style="color: #000000;"><span style="color: #ff0000;">.setState({a})
    }</span>
    render() {
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;
            &lt;h1&gt;我是父组件：{<span style="color: #0000ff;">this</span>.state.a}&lt;/h1&gt;
            &lt;button onClick={()=&gt;{<span style="color: #0000ff;">this</span>.setState({a:<span style="color: #0000ff;">this</span>.state.a+1})}}&gt;改变a的值&lt;/button&gt;
            &lt;Child a={<span style="color: #0000ff;">this</span>.state.a} <span style="color: #ff0000;">setA={this.setA.bind(this)}</span>&gt;&lt;/Child&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
}</span></pre>
</div>
<div class="cnblogs_code">
<pre><code>import React from "react"<span style="color: #000000;">;
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class Child extends React.Component {
    constructor() {
        super();
    }

    render() {
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;
            &lt;h1&gt;我是子组件：{<span style="color: #0000ff;">this</span>.props.a}&lt;/h1&gt;
            &lt;button <span style="color: #ff0000;">onClick={() =&gt; { this.props.setA(this.props.a+1)}}</span>&gt;改变a的值&lt;/button&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
}</span></pre>
</div>
<p><span style="font-family: 宋体;">通过</span>state<span style="font-family: 宋体;">来管理所有的数据。</span></p>
<p>&nbsp;</p>
<p class="16">总结：</p>
<p class="16">1<span style="font-family: 宋体;">）传</span><span style="font-family: Consolas;">&lt;Child a={this.state.a}&gt;&lt;/Child&gt; </span><span style="font-family: 宋体;">收</span><span style="font-family: Consolas;">{this.props.a}</span></p>
<p class="16">2<span style="font-family: 宋体;">）传输是单向的：父亲能传给儿子，父亲改变值，儿子会</span><span style="font-family: Consolas;">render</span><span style="font-family: 宋体;">；但儿子不能改变只读的</span><span style="font-family: Consolas;">props</span><span style="font-family: 宋体;">值；</span></p>
<p class="16">3<span style="font-family: 宋体;">）如果非要改父亲的值，父亲必须传一个函数</span><span style="font-family: Consolas;">&lt;Child setA={this.setA.bind(this)}&gt;&lt;/Child&gt;</span></p>
<p class="16"><span style="font-family: 宋体;">儿子就能调用这个函数改变父亲的</span>state<span style="font-family: 宋体;">。</span></p>
<p>React<span style="font-family: 宋体;">极大简化了组件之间的数据传递，也就是说，如果兄弟传给兄弟，也要通过父亲。</span></p>
<hr />
<h2><strong>4.5<span style="font-family: 宋体;">调色板</span><span style="font-family: 华文中宋;">-</span><span style="font-family: 宋体;">案例</span></strong></h2>
<p>App<span style="font-family: 宋体;">组件</span></p>
<div class="cnblogs_code">
<pre><code>import React from "react"<span style="color: #000000;">;
import Bar from </span>"./components/Bar"<span style="color: #000000;">;
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class App extends React.Component{
    constructor(){
        super();
        </span><span style="color: #ff0000;">this.state = {
            r:100,
            g:200,
            b:255</span><span style="color: #000000;"><span style="color: #ff0000;">
        }</span>
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">改变颜色的函数</span>
<span style="color: #000000;">    setColor(k,v){
        </span><span style="color: #ff0000;">this</span><span style="color: #000000;"><span style="color: #ff0000;">.setState({
            [k]:v
        })</span>
    }
    render(){
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;
            &lt;div style =<span style="color: #000000;"> {{
                </span>"width":"200px"<span style="color: #000000;">,
                </span>"height":"200px"<span style="color: #000000;">,
                </span>"backgroundColor":`rgb(${<span style="color: #0000ff;">this</span>.state.r},${<span style="color: #0000ff;">this</span>.state.g},${<span style="color: #0000ff;">this</span><span style="color: #000000;">.state.b})`
            }}</span>&gt;
            &lt;/div&gt;
             <span style="color: #ff0000;">&lt;Bar k="r" v={this.state.r} setColor={this.setColor.bind(this)}&gt;&lt;/Bar&gt;
             &lt;Bar k="g" v={this.state.g} setColor={this.setColor.bind(this)}&gt;&lt;/Bar&gt;
             &lt;Bar k="b" v={this.state.b} setColor={this.setColor.bind(this)}&gt;&lt;/Bar&gt;</span>
        &lt;/div&gt;
<span style="color: #000000;">    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>Bar<span style="font-family: 宋体;">组件：</span></p>
<div class="cnblogs_code">
<pre><code>import React from 'react'<span style="color: #000000;">;
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class Bar extends React.Component {
    constructor() {
        super();
    }
    render() {
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;
            &lt;<span style="color: #000000;">input
                type</span>="range"<span style="color: #000000;">
                max</span>="255"<span style="color: #ff0000;">
                value={this</span><span style="color: #000000;"><span style="color: #ff0000;">.props.v}</span>
                <span style="color: #0000ff;">onChange</span></span><span style="color: #ff0000;"><span style="color: #0000ff;">={(e)=&gt;{</span>this.props.setColor(this</span><span style="color: #000000;"><span style="color: #ff0000;">.props.k, e.target.value)</span><span style="color: #0000ff;">}}
            </span></span>/&gt;
            &lt;span&gt;<span style="color: #ff0000;">{this.props.v}</span>&lt;/span&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
}</span></pre>
</div>
<p>&nbsp;</p>
<hr />
<h2><strong>4.6<span style="font-family: 宋体;">购物车</span><span style="font-family: 华文中宋;">-</span><span style="font-family: 宋体;">案例</span></strong></h2>
<p>index.html</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('f1912f7c-9e94-4a5f-a9a8-b3fa54bc55e1')"><img id="code_img_closed_f1912f7c-9e94-4a5f-a9a8-b3fa54bc55e1" class="code_img_closed" src="./images/前端笔记之React（三）使用动态样式表&amp;antd&amp;React脚手架&amp;props实战2.png" alt="" /><img id="code_img_opened_f1912f7c-9e94-4a5f-a9a8-b3fa54bc55e1" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('f1912f7c-9e94-4a5f-a9a8-b3fa54bc55e1',event)" src="./images/前端笔记之React（三）使用动态样式表&amp;antd&amp;React脚手架&amp;props实战3.png" alt="" />
<div id="cnblogs_code_open_f1912f7c-9e94-4a5f-a9a8-b3fa54bc55e1" class="cnblogs_code_hide">
<pre><code>&lt;style type="text/css"&gt;<span style="color: #000000;">
    .grid{
        </span><span style="color: #0000ff;">float</span><span style="color: #000000;">: left;
        width:150px;
        border: 1px solid #</span>000<span style="color: #000000;">;
        line</span>-<span style="color: #000000;">height: 40px;
    }
    .bar{
        overflow: hidden;
    }
</span>&lt;/style&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>&nbsp;</p>
<p>App.js</p>
<div class="cnblogs_code">
<pre><code>import React from "react"<span style="color: #000000;">;
import Bar from </span>"./components/Bar.js"<span style="color: #000000;">;
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class App extends React.Component {
    constructor() {
        super();
        </span><span style="color: #0000ff;">this</span>.state =<span style="color: #000000;"> {
            </span>"arr"<span style="color: #000000;"> : [
                 {</span>"id":1,"name":"空调", "price":3000, "amount":1<span style="color: #000000;">},
                 {</span>"id":2,"name":"电脑", "price":5000, "amount":1<span style="color: #000000;">},
                 {</span>"id":3,"name":"手机", "price":6000, "amount":1<span style="color: #000000;">},
                 {</span>"id":4,"name":"电视", "price":9000, "amount":1<span style="color: #000000;">},
                 {</span>"id":5,"name":"冰箱", "price":2000, "amount":1<span style="color: #000000;">}
            ]
        }
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">更改数量，根据id改变amount</span>
<span style="color: #0000ff;">    setAmount(id , amount){
        //验收，如果amount是小于0的，那么什么都不做
        if(amount &lt; 0){return}
        this.setState({
            "arr" : this.state.arr.map(item=&gt;{
                //如果你遍历的这个项的id不是要改的那个id，此时返回原来的项
                //如果你遍历的这个项的id是你要改变的项，此时返回改变的amount
              <span style="color: #ff0000;">  return item.id == id ?</span></span><span style="color: #000000;"><span style="color: #0000ff;"><span style="color: #ff0000;"> { ...item, amount } : item</span>
            })
        });
    }</span>
 
    render(){
        </span><span style="color: #0000ff;">return</span> &lt;div&gt;<span style="color: #000000;">
            {
                </span>this.state.arr.map(item=&gt;<span style="color: #000000;">{
                   </span> <span style="color: #ff0000;"><span style="color: #000000;">return &lt;Bar </span>
                        key={item.id} 
                        item={item} 
                        setAmount={this.setAmount.bind(this)}
                    </span>&gt;&lt;/Bar&gt;
<span style="color: #000000;"><span style="color: #0000ff;">                })</span>
            }
            </span>&lt;h1&gt;<span style="color: #000000;">
                总价：
                {
                    </span><span style="color: #0000ff;">this.state.arr.reduce((a,b)=&gt;{
                        <span style="color: #ff0000;">return a + b.price * b.amount;   </span> 
                    },0</span><span style="color: #000000;"><span style="color: #0000ff;">)</span>
                }
            </span>&lt;/h1&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
}</span></pre>
</div>
<p>&nbsp;</p>
<p>Bar.js<span style="font-family: 宋体;">组件：</span></p>
<div class="cnblogs_code">
<pre><code>import React from "react"<span style="color: #000000;">;
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> class Bar extends React.Component {
    constructor() {
        super();
    }
    render() {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">先将接受到的props解构出来</span>
        <span style="color: #ff0000;">const {id, name, price, amount} = this.props.item;
        const setAmount = this.props.setAmount;

        </span><span style="color: #0000ff;">return</span> &lt;div className="bar"&gt;
            &lt;div className="grid"&gt;<span style="color: #ff0000;">{id}</span>&lt;/div&gt;
            &lt;div className="grid"&gt;<span style="color: #ff0000;">{name}</span>&lt;/div&gt;
            &lt;div className="grid"&gt;<span style="color: #ff0000;">{price}</span>&lt;/div&gt;
            &lt;div className="grid"&gt;
                &lt;button <span style="color: #0000ff;">onClick={<span style="color: #ff0000;">()=&gt;{setAmount(id, amount - 1)}</span>}</span>&gt;-&lt;/button&gt;
<span style="color: #ff0000;">                {amount}
                </span>&lt;button <span style="color: #0000ff;">onClick={<span style="color: #ff0000;">()=&gt;{setAmount(id, amount + 1)}</span>}</span>&gt;+&lt;/button&gt;
            &lt;/div&gt;
            &lt;div className="grid"&gt;小计：<span style="color: #ff0000;">{amount * price}</span>&lt;/div&gt;
        &lt;/div&gt;
<span style="color: #000000;">    }
}</span></pre>
</div>
<p>每一个组件仅掌握了自己需要的数据，这样的话每一个组件只需要专注于处理自己的这条数据即可。</p>
<hr />
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>