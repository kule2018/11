<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令</center></div><div class='banquan'>原文出处:本文由博客园博主RopeHuo提供。<br/>
原文连接:https://www.cnblogs.com/rope/p/10736580.html</div><br>
    <h1>一、<strong>Vue<span style="font-family: 宋体;">的生命周期</span></strong></h1>
<p><strong>生命周期就是指一个对象的生老病死的过程。</strong></p>
<p><strong><span style="font-family: 宋体;">用</span>Vue<span style="font-family: 宋体;">框架，熟悉它的生命周期可以让开发更好的进行。</span></strong></p>
<p><strong><span style="font-family: 宋体;"><img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令0.png" alt="" /></span></strong></p>
<p><span style="font-family: 宋体;">所有的生命周期钩子自动绑定</span> this <span style="font-family: 宋体;">上下文到实例中，因此你可以访问数据，对属性和方法进行运算。这意味着，你不能使用箭头函数来定义一个生命周期方法 </span><span style="font-family: Consolas;">(</span><span style="font-family: 宋体;">例如 </span><span style="font-family: Consolas;">created: () =&gt; this.fetchTodos())</span><span style="font-family: 宋体;">。这是因为箭头函数绑定了父上下文，因此 </span><span style="font-family: Consolas;">this </span><span style="font-family: 宋体;">与你期待的 </span><span style="font-family: Consolas;">Vue </span><span style="font-family: 宋体;">实例不同，</span><span style="font-family: Consolas;">this.fetchTodos </span><span style="font-family: 宋体;">的行为未定义。</span></p>
<p>&nbsp;<img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令1.png" alt="" /></p>
<p><span style="font-family: 宋体;">生命周期的钩子函数，就是</span>vue<span style="font-family: 宋体;">实例在和一定的时间点去执行的函数</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">生命周期总共有</span>11<span style="font-family: 宋体;">个函数，首先看看官网的图，详细的给出了</span><span style="font-family: Consolas;">vue</span><span style="font-family: 宋体;">的生命周期，其中这八个是比较常见的</span><span style="font-family: Consolas;">:</span></p>
<p><span style="font-family: 宋体;">它可以总共分为</span>8<span style="font-family: 宋体;">个阶段：</span></p>
<p>l&nbsp;beforeCreate<span style="font-family: 宋体;">（创建前）</span></p>
<p>l&nbsp;created<span style="font-family: 宋体;">（创建后）</span></p>
<p>l&nbsp;beforeMount(<span style="font-family: 宋体;">载入前</span><span style="font-family: Consolas;">)</span></p>
<p>l&nbsp;mounted<span style="font-family: 宋体;">（载入后）</span></p>
<p>l&nbsp;beforeUpdate<span style="font-family: 宋体;">（更新前）</span></p>
<p>l&nbsp;updated<span style="font-family: 宋体;">（更新后）</span></p>
<p>l&nbsp;beforeDestroy<span style="font-family: 宋体;">（销毁前）</span></p>
<p>l&nbsp;destroyed<span style="font-family: 宋体;">（销毁后）</span></p>
<p>l&nbsp;<span style="font-family: 宋体;">还有三个是：</span>activated()<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">deactivated()</span><span style="font-family: 宋体;">、 </span><span style="font-family: Consolas;">errorCaptured()</span></p>
<p>&nbsp;<img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令2.png" alt="" /></p>
<hr />
<h2><strong>1.1 beforeCreate()</strong></h2>
<p><span style="font-family: 宋体;">在实例初始化之后，数据观测</span> (data observer) <span style="font-family: 宋体;">和 </span><span style="font-family: Consolas;">event/watcher </span><span style="font-family: 宋体;">事件配置之前被调用。</span></p>
<p><span style="font-family: 宋体;">此时</span>data<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">dom</span><span style="font-family: 宋体;">也不可见！</span></p>
<hr />
<h2><strong>1.2 created() ***</strong></h2>
<p><span style="font-family: 宋体;">在实例创建完成后被立即调用。在这一步，实例已完成以下的配置：数据观测</span> (data observer)<span style="font-family: 宋体;">，属性和方法的运算，</span><span style="font-family: Consolas;">watch/event </span><span style="font-family: 宋体;">事件回调。然而，挂载阶段还没开始，</span><span style="font-family: Consolas;">$el </span><span style="font-family: 宋体;">属性目前不可见。</span></p>
<p><span style="font-family: 宋体;">此时</span>data<span style="font-family: 宋体;">可见，可以在这个生命周期发送</span><span style="font-family: Consolas;">ajax</span><span style="font-family: 宋体;">，等回调成功后</span><span style="font-family: Consolas;">,</span><span style="font-family: 宋体;">将数据放进</span><span style="font-family: Consolas;">data</span><span style="font-family: 宋体;">中！</span><span style="font-family: Consolas;">dom</span><span style="font-family: 宋体;">还是不可见</span><span style="font-family: Consolas;">.</span></p>
<hr />
<h2><strong>1.3 beforeMount()</strong></h2>
<p><span style="font-family: 宋体;">在挂载开始之前被调用：相关的</span> render <span style="font-family: 宋体;">函数首次被调用。</span></p>
<p><span style="font-family: 宋体;">此时</span>data<span style="font-family: 宋体;">可见 </span><span style="font-family: Consolas;">$el DOM</span><span style="font-family: 宋体;">依然不可见，没什么用，</span><span style="font-family: Consolas;">created </span><span style="font-family: 宋体;">完全可以代替。</span></p>
<hr />
<h2><strong>1.4 mounted() *** </strong></h2>
<p>el <span style="font-family: 宋体;">被新创建的 </span><span style="font-family: Consolas;">vm.$el </span><span style="font-family: 宋体;">替换，并挂载到实例上去之后调用该钩子。如果 </span><span style="font-family: Consolas;">root </span><span style="font-family: 宋体;">实例挂载了一个文档内元素，当 </span><span style="font-family: Consolas;">mounted </span><span style="font-family: 宋体;">被调用时 </span><span style="font-family: Consolas;">vm.$el </span><span style="font-family: 宋体;">也在文档内。</span></p>
<p><span style="font-family: 宋体;">此时</span>data <span style="font-family: 宋体;">和 </span><span style="font-family: Consolas;">dom</span><span style="font-family: 宋体;">都可见，生命周期执行完毕，工作中会在这个生命周期里面调用</span><span style="font-family: Consolas;">methods</span><span style="font-family: 宋体;">里面发送</span><span style="font-family: Consolas;">ajax</span><span style="font-family: 宋体;">的函数，意思是等</span><span style="font-family: Consolas;">dom</span><span style="font-family: 宋体;">加载完毕之后操作一些方法或发送</span><span style="font-family: Consolas;">ajax</span><span style="font-family: 宋体;">，跟写在</span><span style="font-family: Consolas;">created </span><span style="font-family: 宋体;">没什么区别。</span></p>
<hr />
<h2><strong>1.5 beforeUpdate() <span style="font-family: 宋体;">和 </span><span style="font-family: 华文中宋;">updated() ***</span></strong></h2>
<p>l&nbsp;beforeUpdate<span style="font-family: 宋体;">： 数据更新时调用，发生在虚拟 </span><span style="font-family: Consolas;">DOM </span><span style="font-family: 宋体;">重新渲染和打补丁之前。适合在更新之前访问现有的 </span><span style="font-family: Consolas;">DOM</span><span style="font-family: 宋体;">，比如手动移除已添加的事件监听器。</span></p>
<p>&nbsp;</p>
<p>l&nbsp;updated<span style="font-family: 宋体;">：由于数据更改导致的虚拟 </span><span style="font-family: Consolas;">DOM </span><span style="font-family: 宋体;">重新渲染和打补丁，在这之后会调用该钩子。当这个钩子被调用时，组件 </span><span style="font-family: Consolas;">DOM </span><span style="font-family: 宋体;">已经更新，所以你现在可以执行依赖于 </span><span style="font-family: Consolas;">DOM </span><span style="font-family: 宋体;">的操作。然而在大多数情况下，你应该避免在此期间更改状态。如果要相应状态改变，通常最好使用计算属性或 </span><span style="font-family: Consolas;">watcher </span><span style="font-family: 宋体;">取而代之。</span></p>
<hr />
<h2><strong>1.6 activated <span style="font-family: 宋体;">和 </span><span style="font-family: 华文中宋;">deactivated</span></strong></h2>
<p>这两个生命周期写在子组件里面，控制子组件的上下树，能激活两个生命周期。</p>
<p>activated &nbsp;<span style="font-family: 宋体;">：</span><span style="font-family: Consolas;">keep-alive </span><span style="font-family: 宋体;">组件激活时调用</span></p>
<p>deactivated &nbsp;<span style="font-family: 宋体;">：</span><span style="font-family: Consolas;">keep-alive &nbsp;</span><span style="font-family: 宋体;">组件停用时调用</span></p>
<hr />
<h2><strong>1.7 beforeDestroy() <span style="font-family: 宋体;">和 </span><span style="font-family: 华文中宋;">destroyed()</span></strong></h2>
<p>beforeDestroy &nbsp;<span style="font-family: 宋体;">：实例销毁之前调用。在这一步，实例仍然完全可用</span></p>
<p>destroyed <span style="font-family: 宋体;">： </span><span style="font-family: Consolas;">Vue </span><span style="font-family: 宋体;">实例销毁后调用。调用后，</span><span style="font-family: Consolas;">Vue </span><span style="font-family: 宋体;">实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。</span></p>
<p>如何：触发这两个生命周期钩子。</p>
<p>&nbsp;<img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令3.png" alt="" /></p>
<p>没用。</p>
<hr />
<h2><strong>1.8 errorCaptured()</strong></h2>
<p>没用。</p>
<p>&nbsp;<img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令4.png" alt="" /></p>
<hr />
<p align="justify">App.vue<span style="font-family: 宋体;">父组件：</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('d0468f56-3f35-4ca4-8ccd-1d01d48a10b2')"><img id="code_img_closed_d0468f56-3f35-4ca4-8ccd-1d01d48a10b2" class="code_img_closed" src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令5.png" alt="" /><img id="code_img_opened_d0468f56-3f35-4ca4-8ccd-1d01d48a10b2" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d0468f56-3f35-4ca4-8ccd-1d01d48a10b2',event)" src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令6.png" alt="" />
<div id="cnblogs_code_open_d0468f56-3f35-4ca4-8ccd-1d01d48a10b2" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;h1&gt;{{a}}&lt;/h1&gt;
        &lt;button @click="add"&gt;+&lt;/button&gt;
    &lt;!--父组件使用v-<span style="color: #0000ff;">if</span> 控制组件上下树，触发组件的生命周期函数--&gt;
        &lt;keep-alive v-<span style="color: #0000ff;">if</span>="isShow"&gt;
            &lt;Child&gt;&lt;/Child&gt;
        &lt;/keep-alive&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    import Child from </span>"./components/Child.vue"<span style="color: #000000;">
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;">{
        data(){
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> {
                a:</span>100<span style="color: #000000;">,
                isShow:</span><span style="color: #0000ff;">true</span><span style="color: #000000;">
            }
        },
        methods:{
            add(){
                </span><span style="color: #0000ff;">this</span>.a++<span style="color: #000000;">;
                </span><span style="color: #0000ff;">this</span>.isShow = !<span style="color: #0000ff;">this</span><span style="color: #000000;">.isShow;
            }
        },
        components:{
            Child
        }
        beforeCreate(){
            console.log(</span>"初始化之后，el和data并未初始化" + <span style="color: #0000ff;">this</span><span style="color: #000000;">.a);
        },
        created(){
            console.log(</span>"组件创建完成，完成了data 数据的初始化，el没有" + <span style="color: #0000ff;">this</span><span style="color: #000000;">.a);
        console.log(</span>"组件创建完成，完成了data 数据的初始化，el没有" + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
        },
        beforeMount(){
            console.log(</span>"挂载之前，完成了data 数据的初始化，el没有 " + <span style="color: #0000ff;">this</span><span style="color: #000000;">.a);
            console.log(</span>"挂载之前，完成了data 数据的初始化，el没有" + <span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
        },
        mounted(){
            console.log(</span>"挂载之后，完成了el的绑定" +<span style="color: #0000ff;">this</span><span style="color: #000000;">.a);
            console.log(</span>"挂载之后，完成了el的绑定" +<span style="color: #0000ff;">this</span><span style="color: #000000;">.$el);
        }
        beforeUpdate(){
            console.log(</span>"数据更新前状态："+ $(<span style="color: #0000ff;">this</span>.$el).find("h1"<span style="color: #000000;">).text());
        },
        updated(){
            console.log(</span>"数据更新后状态（完成了渲染）：" + <span style="color: #0000ff;">this</span><span style="color: #000000;">.a);
        }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">声明周期</span></div>
<p align="justify">&nbsp;</p>
<p>&nbsp;</p>
<p align="justify">&nbsp;</p>
<p>Child.vue<span style="font-family: 宋体;">子组件：</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('e4acd593-b7a3-49db-998b-3de0ef7067e4')"><img id="code_img_closed_e4acd593-b7a3-49db-998b-3de0ef7067e4" class="code_img_closed" src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令5.png" alt="" /><img id="code_img_opened_e4acd593-b7a3-49db-998b-3de0ef7067e4" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e4acd593-b7a3-49db-998b-3de0ef7067e4',event)" src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令6.png" alt="" />
<div id="cnblogs_code_open_e4acd593-b7a3-49db-998b-3de0ef7067e4" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">template</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>我是子组件<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">zisun</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">zisun</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">template</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span><span style="background-color: #f5f5f5; color: #000000;">
    import zisun from </span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">./zisun.vue</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">;
    export </span><span style="background-color: #f5f5f5; color: #0000ff;">default</span><span style="background-color: #f5f5f5; color: #000000;">{
        components:{
            zisun
        },
        activated(){
            console.log(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">组件激活了</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">);
        },
        deactivated(){
            console.log(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">组件停用了</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">);
        },
        beforeDestroy(){
            console.log(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">组件销毁前</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">);
        },
        destroyed(){
            console.log(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">组件销毁后</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">);
        },
        errorCaptured(){
            console.log(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">子组件报错了</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">);
        }
    }
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<span class="cnblogs_code_collapse">生命周期</span></div>
<p>孙子组件：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">template</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>我是孙子组件<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">template</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<hr />
<h1><strong><span style="font-family: 宋体;">二、</span>CSS<span style="font-family: 宋体;">预处理（动态样式表）</span></strong></h1>
<h2><strong>2.1 CSS<span style="font-family: 宋体;">预处理器简介</span></strong></h2>
<p><span style="font-family: 宋体;">做前端，处理</span>CSS<span style="font-family: 宋体;">是你的特长，随着工程的增大，</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">的预处理越来越重要，或者要维护我们的</span><span style="font-family: Consolas;">css</span><span style="font-family: 宋体;">，工作会越来越困难，造成这些困难的很大原因源于</span><span style="font-family: Consolas;">CSS </span><span style="font-family: 宋体;">是一门非程序式语言，没有变量、函数、</span><span style="font-family: Consolas;">SCOPE</span><span style="font-family: 宋体;">（作用域）、嵌套等概念。</span></p>
<p>&nbsp;</p>
<p><strong><span style="font-family: 宋体;">什么是</span>CSS<span style="font-family: 宋体;">预处理？</span></strong></p>
<p>CSS<span style="font-family: 宋体;">预处理器定义了一种新的语言，其基本思想是，用一种专门的编程语言，为</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">增加了一些编程的特性，将</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">作为目标生成文件，然后开发者就只要使用这种语言进行编码工作。通俗的说，</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">预处理器用一种专门的编程语言，进行</span><span style="font-family: Consolas;">Web</span><span style="font-family: 宋体;">页面样式设计，然后再编译成正常的</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">文件，以供项目使用。</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">预处理器为</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">增加一些编程的特性，无需考虑浏览器的兼容性问题，例如你可以在</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">中使用变量、简单的逻辑程序、函数等等在编程语言中的一些基本特性，可以让你的</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">更加简洁、适应性更强、可读性更佳，更易于代码的维护等诸多好处。</span></p>
<p>CSS<span style="font-family: 宋体;">预处理器技术已经非常的成熟，而且也涌现出了很多种不同的</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">预处理器语言，比如说：</span><span style="font-family: Consolas;">Sass</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">LESS</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">Stylus</span><span style="font-family: 宋体;">，还有</span><span style="font-family: Consolas;">postCSS</span><span style="font-family: 宋体;">插件等。</span></p>
<hr />
<h2><strong>2.2 Less<span style="font-family: 宋体;">使用和安装</span></strong></h2>
<p>Less<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">stylus</span><span style="font-family: 宋体;">是</span><span style="font-family: Consolas;">Nodejs</span><span style="font-family: 宋体;">工作流工具，</span><span style="font-family: Consolas;">SASS</span><span style="font-family: 宋体;">需要安装</span><span style="font-family: Consolas;">ruby</span><span style="font-family: 宋体;">。</span></p>
<p><span style="font-family: 宋体;">以</span>Less<span style="font-family: 宋体;">举例，</span><span style="font-family: Consolas;">sass</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">stylus</span><span style="font-family: 宋体;">自学即可。</span></p>
<p>Less <span style="font-family: 宋体;">是一种动态样式语言，它使用类似</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">的语法，为</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">赋予了动态语言的特性，如变量、继承、数学运算、函数等，更方便</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">的编写和维护。</span></p>
<p>LESS<span style="font-family: 宋体;">可以在多种语言、环境中使用，包括浏览器、桌面客户端、服务端。</span></p>
<p>API<span style="font-family: 宋体;">手册：</span></p>
<p><a href="http://www.bootcss.com/p/lesscss/"><span>http://www.bootcss.com/p/lesscss/</span></a></p>
<p><a href="http://less.bootcss.com/"><span style="text-decoration: underline;">http://less.bootcss.com/</span></a></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">在全局安装</span>less<span style="font-family: 宋体;">，这是一个</span><span style="font-family: Consolas;">CLI</span><span style="font-family: 宋体;">工具。其实，你并不需要安装，因为后面直接用</span><span style="font-family: Consolas;">webpack</span><span style="font-family: 宋体;">结合</span><span style="font-family: Consolas;">less</span><span style="font-family: 宋体;">即可。</span></p>
<div class="cnblogs_code">
<pre><code>npm install -g less</pre>
</div>
<p>&nbsp;</p>
<p>或者安装在项目中：</p>
<div class="cnblogs_code">
<pre><code>npm install --save-dev less</pre>
</div>
<p>&nbsp;</p>
<p>查看版本：</p>
<div class="cnblogs_code">
<pre><code>lessc -v</pre>
</div>
<hr />
<h2><strong>2.3 Less<span style="font-family: 宋体;">变量和嵌套</span></strong></h2>
<p>Less<span style="font-family: 宋体;">可以让我们以嵌套的方式写</span><span style="font-family: Consolas;">CSS</span><span style="font-family: 宋体;">，直接在父元素选择器中嵌套子元素选择器，它会自动编译成后代选择器。</span></p>
<p><span style="font-family: 宋体;">定义变量：</span>@<span style="font-family: 宋体;">变量名</span><span style="font-family: Consolas;">:</span><span style="font-family: 宋体;">变量值</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #800000;">示例：@yanse:red;
调用：div</span>{<span style="color: #ff0000;">color</span>:<span style="color: #0000ff;">@yanse</span>;}<span style="color: #800000;">
编译：div</span>{<span style="color: #ff0000;">color</span>:<span style="color: #0000ff;">red</span>;}</pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">第一步：创建</span>.less<span style="font-family: 宋体;">文件，开始写</span><span style="font-family: Consolas;">less</span><span style="font-family: 宋体;">语法：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #800000;">@a:200px;
div</span>{<span style="color: #ff0000;">
    width</span>:<span style="color: #0000ff;"> 200px</span>;<span style="color: #ff0000;">
    height</span>:<span style="color: #0000ff;"> @a</span>;<span style="color: #ff0000;">
    ul{
        width</span>:<span style="color: #0000ff;"> @a</span>;<span style="color: #ff0000;">
        height</span>:<span style="color: #0000ff;"> @a</span>;<span style="color: #ff0000;">
        li{
            float</span>:<span style="color: #0000ff;"> left</span>;<span style="color: #ff0000;">
            width</span>:<span style="color: #0000ff;"> 30px</span>;<span style="color: #ff0000;">
            height</span>:<span style="color: #0000ff;"> 30px</span>;<span style="color: #ff0000;">
            background</span>:<span style="color: #0000ff;"> orange</span>;<span style="color: #ff0000;">
            &amp;.cur{background</span>:<span style="color: #0000ff;"> red</span>;}<span style="color: #800000;">
            &amp;:hover</span>{<span style="color: #ff0000;">background</span>:<span style="color: #0000ff;"> green</span>;}<span style="color: #800000;">
            &amp;:before</span>{<span style="color: #ff0000;">content</span>:<span style="color: #0000ff;"> ""</span>;}<span style="color: #800000;">
        }
    }
}</span></pre>
</div>
<p>&amp;<span style="font-family: 宋体;">表示它自己</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">第二步：用</span>lessc<span style="font-family: 宋体;">命令编译这个文件，生成</span><span style="font-family: Consolas;">css</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #800000;">lessc 01.less 01.css</span></pre>
</div>
<p>编译后的结果：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('75a3c28a-79df-40e4-98ef-eca7df496948')"><img id="code_img_closed_75a3c28a-79df-40e4-98ef-eca7df496948" class="code_img_closed" src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令5.png" alt="" /><img id="code_img_opened_75a3c28a-79df-40e4-98ef-eca7df496948" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('75a3c28a-79df-40e4-98ef-eca7df496948',event)" src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令6.png" alt="" />
<div id="cnblogs_code_open_75a3c28a-79df-40e4-98ef-eca7df496948" class="cnblogs_code_hide">
<pre><code><span style="color: #800000;">div </span>{<span style="color: #ff0000;">
  width</span>:<span style="color: #0000ff;"> 200px</span>;<span style="color: #ff0000;">
  height</span>:<span style="color: #0000ff;"> 200px</span>;
}<span style="color: #800000;">
div ul </span>{<span style="color: #ff0000;">
  width</span>:<span style="color: #0000ff;"> 200px</span>;<span style="color: #ff0000;">
  height</span>:<span style="color: #0000ff;"> 200px</span>;
}<span style="color: #800000;">
div ul li </span>{<span style="color: #ff0000;">
  float</span>:<span style="color: #0000ff;"> left</span>;<span style="color: #ff0000;">
  width</span>:<span style="color: #0000ff;"> 30px</span>;<span style="color: #ff0000;">
  height</span>:<span style="color: #0000ff;"> 30px</span>;<span style="color: #ff0000;">
  background</span>:<span style="color: #0000ff;"> orange</span>;
}<span style="color: #800000;">
div ul li.cur </span>{<span style="color: #ff0000;">
  background</span>:<span style="color: #0000ff;"> red</span>;
}<span style="color: #800000;">
div ul li:hover </span>{<span style="color: #ff0000;">
  background</span>:<span style="color: #0000ff;"> green</span>;
}<span style="color: #800000;">
div ul li:before </span>{<span style="color: #ff0000;">
  content</span>:<span style="color: #0000ff;"> ""</span>;
}</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<hr />
<h2><strong>2.4 Less<span style="font-family: 宋体;">数学运算</span></strong></h2>
<p><span style="font-family: 宋体;">在</span>less<span style="font-family: 宋体;">中任何数字、颜色或变量都可以参与数学运算，运算建议包裹在括号</span><span style="font-family: Consolas;">()</span><span style="font-family: 宋体;">中。</span></p>
<p>&nbsp;<img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令11.png" alt="" /></p>
<hr />
<h2><strong>2.5 Less<span style="font-family: 宋体;">混合（包含）</span></strong></h2>
<p><span style="font-family: 宋体;">在</span>less<span style="font-family: 宋体;">中可以定义一些通过的属性集为一个</span><span style="font-family: Consolas;">class</span><span style="font-family: 宋体;">，然后在另一</span><span style="font-family: Consolas;">class</span><span style="font-family: 宋体;">调用这些属性</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #800000;">.border</span>{<span style="color: #ff0000;">border</span>:<span style="color: #0000ff;">1px solid #f40</span>;}</pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">如果需要在其他</span>css<span style="font-family: 宋体;">中引入通过的属性集，只要在任意</span><span style="font-family: Consolas;">class</span><span style="font-family: 宋体;">中像这样调用即可：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #800000;">div</span>{<span style="color: #ff0000;">.border</span>}</pre>
</div>
<p><img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令12.png" alt="" /></p>
<p><span style="font-family: 宋体;">注意：任何</span>class<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">id</span><span style="font-family: 宋体;">或元素属性都可以以同样的方式引入。</span></p>
<hr />
<h2><strong>2.6 Less<span style="font-family: 宋体;">带参数的混合（包含）</span></strong></h2>
<p><span style="font-family: 宋体;">在</span>less<span style="font-family: 宋体;">中，还可以像函数一样定义一个带参数的属性集：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #800000;">.border(@radius)</span>{<span style="color: #ff0000;">
    -webkit-border-radius</span>:<span style="color: #0000ff;">@radius</span>;<span style="color: #ff0000;">
    -moz-border-radius</span>:<span style="color: #0000ff;">@radius</span>;<span style="color: #ff0000;">
    -ms-border-radius</span>:<span style="color: #0000ff;">@radius</span>;<span style="color: #ff0000;">
    -o-border-radius</span>:<span style="color: #0000ff;">@radius</span>;<span style="color: #ff0000;">
    border-radius</span>:<span style="color: #0000ff;">@radius</span>;
}</pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">在其他</span>class<span style="font-family: 宋体;">中这样调用：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #800000;">div</span>{<span style="color: #ff0000;"> .border(5px); </span>}</pre>
</div>
<p><img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令13.png" alt="" /></p>
<hr />
<h2><strong>2.7 Less<span style="font-family: 宋体;">带默认参数的混合（包含）</span></strong></h2>
<p>&nbsp;<img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令14.png" alt="" /></p>
<hr />
<h2><strong>2.8 Less<span style="font-family: 宋体;">的循环</span></strong></h2>
<p>&nbsp;<img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令15.png" alt="" /><img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令16.png" alt="" /></p>
<hr />
<h2><strong>2.9 Less<span style="font-family: 宋体;">和</span><span style="font-family: 华文中宋;">webpack</span><span style="font-family: 宋体;">结合</span></strong></h2>
<p><span style="font-family: 宋体;">我们希望在</span>Vue<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">React</span><span style="font-family: 宋体;">项目中使用</span><span style="font-family: Consolas;">less</span><span style="font-family: 宋体;">，此时就需要</span><span style="font-family: Consolas;">webpack</span><span style="font-family: 宋体;">在打包的时候顺便进行</span><span style="font-family: Consolas;">less</span><span style="font-family: 宋体;">编译。</span></p>
<p><span style="font-family: 宋体;">必须要装</span>less<span style="font-family: 宋体;">依赖和</span><span style="font-family: Consolas;">3</span><span style="font-family: 宋体;">个</span><span style="font-family: Consolas;">loader</span><span style="font-family: 宋体;">依赖，分别是</span><span style="font-family: Consolas;">css-loader</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">style-loader</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">less-loader</span><span style="font-family: 宋体;">。</span></p>
<p>&nbsp;</p>
<p>安装loader依赖：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800000;">npm install --save-dev less
npm install --save-dev less-loader
npm install --save-dev css-loader
npm install --save-dev style-loader</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">安装完依赖，要配置</span>webpack.config.js<span style="font-family: 宋体;">文件：</span></p>
<p>参照：<span style="text-decoration: underline;"><a href="https://www.npmjs.com/package/less-loader">https://www.npmjs.com/package/less-loader</a></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> path = require('path'<span style="color: #000000;">);
const {VueLoaderPlugin} </span>=  require("vue-loader"); <span style="color: #008000;">//</span><span style="color: #008000;">最新版webpack需要引入此插件</span>
<span style="color: #000000;">
module.exports </span>=<span style="color: #000000;"> {
    ...
    </span><span style="color: #008000;">//</span><span style="color: #008000;">配置webpack的模块插件</span>
<span style="color: #000000;">    module:{
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 关于模块配置</span>
<span style="color: #000000;">        rules: [
            ...
           <span style="color: #ff0000;"> {
                test: </span></span><span style="color: #ff0000;">/\.less$/,
                use: [
                    {loader: "style-loader"},//翻译行内CSS
                    {loader: "css-loader"},  //翻译外链CSS
                    {loader: "less-loader"}  //将Less编译为CSS
</span><span style="color: #000000;"><span style="color: #ff0000;">                ]
            }</span>
        ]
    },
    resolve: {
        alias: { </span><span style="color: #008000;">//</span><span style="color: #008000;">配置别名</span>
          'vue$': 'vue/dist/vue.esm.js' <span style="color: #008000;">//</span><span style="color: #008000;"> 用 webpack 1 时需用 'vue/dist/vue.common.js'</span>
<span style="color: #000000;">        }
    },
    </span><span style="color: #008000;">//</span><span style="color: #008000;">最新版webpack需要引入此插件</span>
<span style="color: #000000;">    plugins:[
       </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> VueLoaderPlugin()
    ]
};</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">如果遇见</span>webpack<span style="font-family: 宋体;">报错，在项目中安装一下</span><span style="font-family: Consolas;">webpack</span><span style="font-family: 宋体;">的项目依赖即可：</span></p>
<div class="cnblogs_code">
<pre><code>npm install --save-dev webpack</pre>
</div>
<p><span style="font-family: 宋体;">配置完成后，使用时在</span>style<span style="font-family: 宋体;">标签里加上</span><span style="font-family: Consolas;">lang="less"</span><span style="font-family: 宋体;">就可以写</span><span style="font-family: Consolas;">less</span><span style="font-family: 宋体;">的代码了</span><span style="font-family: Consolas;">(style</span><span style="font-family: 宋体;">标签里加上</span><span style="font-family: Consolas;">scoped</span><span style="font-family: 宋体;">为只在此作用域有效</span><span style="font-family: Consolas;">)</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">组件中使用</span>less<span style="font-family: 宋体;">样式表</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">style </span><span style="color: #ff0000;">lang</span><span style="color: #0000ff;">="less"</span><span style="color: #ff0000;"> scoped</span><span style="color: #0000ff;">&gt;</span><span style="background-color: #f5f5f5; color: #800000;">
    @a:200px;
    div</span><span style="background-color: #f5f5f5; color: #000000;">{</span><span style="background-color: #f5f5f5; color: #ff0000;">
        width</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #0000ff;"> @a</span><span style="background-color: #f5f5f5; color: #000000;">;</span><span style="background-color: #f5f5f5; color: #ff0000;">
        height</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #0000ff;"> @a</span><span style="background-color: #f5f5f5; color: #000000;">;</span><span style="background-color: #f5f5f5; color: #ff0000;">
        background</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #0000ff;"> red</span><span style="background-color: #f5f5f5; color: #000000;">;</span>
    <span style="background-color: #f5f5f5; color: #000000;">}</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">style</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">或引入外链</span>.less<span style="font-family: 宋体;">文件：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">style </span><span style="color: #ff0000;">lang</span><span style="color: #0000ff;">="less"</span><span style="color: #ff0000;"> scoped</span><span style="color: #0000ff;">&gt;</span><span style="background-color: #f5f5f5; color: #800000;">
@import "./01.less";
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">style</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>或</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">style </span><span style="color: #ff0000;">lang</span><span style="color: #0000ff;">="less"</span><span style="color: #ff0000;"> scoped src</span><span style="color: #0000ff;">="./01.less"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">style</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p><img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令17.png" alt="" /></p>
<hr />
<h1><strong>三、全局组件</strong></h1>
<p>前面两天我们使用的都是局部组件，哪个页面要用，就在哪个页面引用，然后再使用。如果不想每次使用都要引用，想直接使用的情况下就需要用到全局组件。</p>
<p>语法：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #ff0000;">Vue.component("页面使用的名字", import引入时的名字);</span></pre>
</div>
<p><span style="font-family: 宋体;">第一步：在</span>app<span style="font-family: 宋体;">文件夹新建一个</span><span style="font-family: Consolas;">plugins</span><span style="font-family: 宋体;">文件夹（它表示插件的意思），在文件夹中新建一个</span><span style="font-family: Consolas;">components.js</span><span style="font-family: 宋体;">文件，这个文件中放的都是全局组件。把</span><span style="font-family: Consolas;">components</span><span style="font-family: 宋体;">文件夹中的</span><span style="font-family: Consolas;">.vue</span><span style="font-family: 宋体;">组件都引入到当前</span><span style="font-family: Consolas;">js</span><span style="font-family: 宋体;">文件向外暴露。</span></p>
<p>&nbsp;</p>
<p>components.js:</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('d3dbc424-2b81-4313-a5c1-6719156ea92e')"><img id="code_img_closed_d3dbc424-2b81-4313-a5c1-6719156ea92e" class="code_img_closed" src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令5.png" alt="" /><img id="code_img_opened_d3dbc424-2b81-4313-a5c1-6719156ea92e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d3dbc424-2b81-4313-a5c1-6719156ea92e',event)" src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令6.png" alt="" />
<div id="cnblogs_code_open_d3dbc424-2b81-4313-a5c1-6719156ea92e" class="cnblogs_code_hide">
<pre><code>import Hehe from "../components/Hehe.vue"<span style="color: #000000;">;
import Haha from </span>"../components/Haha.vue"<span style="color: #000000;">;

export </span><span style="color: #0000ff;">default</span> <span style="color: #0000ff;">function</span><span style="color: #000000;">(Vue){
    Vue.component(</span>"MyHehe"<span style="color: #000000;">, Hehe);
    Vue.component(</span>"MyHaha"<span style="color: #000000;">, Haha);
}</span></pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">第二步：在</span>app.js<span style="font-family: 宋体;">中</span><span style="font-family: Consolas;">import</span><span style="font-family: 宋体;">引入这个</span><span style="font-family: Consolas;">js</span><span style="font-family: 宋体;">文件，同时使用</span><span style="font-family: Consolas;">Vue.use(</span><span style="font-family: 宋体;">插件名</span><span style="font-family: Consolas;">) </span><span style="font-family: 宋体;">&rarr; 安装插件的意思</span></p>
<div class="cnblogs_code">
<pre><code>import Vue from 'vue'<span style="color: #000000;">;
import App from </span>'./App.vue'<span style="color: #000000;">;
<span style="color: #ff0000;">import components from </span></span><span style="color: #ff0000;">'./plugins/components.js';
Vue.use(components); //注册全局组件</span>

<span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
    el : </span>"#app"<span style="color: #000000;">,
    render : (h)</span>=&gt;<span style="color: #000000;"> h(App)
})</span></pre>
</div>
<p>&nbsp;</p>
<p>然后就可以在任何页面中，直接使用全局组件，全局组件中的代码改真名就怎么写。</p>
<p>App.vue</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('233d0eb3-1f66-40cd-8263-2893945debb9')"><img id="code_img_closed_233d0eb3-1f66-40cd-8263-2893945debb9" class="code_img_closed" src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令5.png" alt="" /><img id="code_img_opened_233d0eb3-1f66-40cd-8263-2893945debb9" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('233d0eb3-1f66-40cd-8263-2893945debb9',event)" src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令6.png" alt="" />
<div id="cnblogs_code_open_233d0eb3-1f66-40cd-8263-2893945debb9" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;h1&gt;{{a}}&lt;/h1&gt;
        &lt;MyHehe&gt;&lt;/MyHehe&gt;
        &lt;MyHaha&gt;&lt;/MyHaha&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
        data(){
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> {
                a : </span>100<span style="color: #000000;">
            }
        }
    }
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">示例代码</span></div>
<hr />
<h1>四、<strong><span style="font-family: 宋体;">自定义指令（</span>directive<span style="font-family: 宋体;">）</span></strong></h1>
<h2><strong>4.1<span style="font-family: 宋体;">自定义局部指令</span></strong></h2>
<p><span style="font-family: 宋体;">除了核心功能默认内置的指令（</span>v-model<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">v-if</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">v-show</span><span style="font-family: 宋体;">等），如果不够用，</span><span style="font-family: Consolas;">Vue</span><span style="font-family: 宋体;">允许注册自定义指令。</span></p>
<p><span style="font-family: 宋体;">如果想封装局部指令，组件中接受一个</span>directives<span style="font-family: 宋体;">的选项：</span></p>
<p>&nbsp;</p>
<p>App.vue</p>
<div class="cnblogs_code">
<pre><code>&lt;template&gt;
    &lt;div&gt;
        &lt;h1 <span style="color: #ff0000;">v-color="'red'" v-height="100"</span> &gt;我是App页面&lt;/h1&gt;
        &lt;h2<span style="color: #ff0000;"> v-color:aa.bb.cc</span>&gt;我是App页面&lt;/h2&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
        directives : {
           <span style="color: #ff0000;"> color : {
                inserted(el,binding){
                    console.log(binding)
                    el.style.color </span></span><span style="color: #ff0000;">= binding.value
                    //$(el).css(binding.name, binding.value);
                }
            },
            height : {
                inserted(el,binding){
                    if(binding.value){
                        el.style.height = binding.value + "px";
                    }else{
                        el.style.height = 200 + "px"</span><span style="color: #000000;"><span style="color: #ff0000;">;
                    }
                }
            }</span>
        }
    }
</span>&lt;/script&gt;</pre>
</div>
<p>&nbsp;</p>
<p>需求：给页面写一个不固定的高，根据手机屏幕的高度，去计算内容区域的高度</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">template</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ul</span><span style="color: #0000ff;">&gt;</span>
                <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>新闻<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>
                <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>军事<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ul</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="content"</span> <span style="color: #ff0000;">v-height="50" v-style="{color:'green',fontSize:'50'}" v-color.red</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>爱上对方就哭了<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>爱上对方就哭了<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
            ...
            </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>爱上对方就哭了<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>爱上对方就哭了11<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">template</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span><span style="background-color: #f5f5f5; color: #000000;">
    export </span><span style="background-color: #f5f5f5; color: #0000ff;">default</span><span style="background-color: #f5f5f5; color: #000000;"> {
        directives : {
            <span style="color: #ff0000;">color</span> : {
                inserted(el,binding){
                    el.style.color </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Object.keys(binding.modifiers)[</span><span style="background-color: #f5f5f5; color: #000000;">0</span><span style="background-color: #f5f5f5; color: #000000;">];
                }
            },
            <span style="color: #ff0000;">height</span> : {
                inserted(el,binding){
                    </span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> height </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> document.documentElement.clientHeight </span><span style="background-color: #f5f5f5; color: #000000;">-</span><span style="background-color: #f5f5f5; color: #000000;"> binding.value;
                    el.style.height </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> height </span><span style="background-color: #f5f5f5; color: #000000;">+</span> <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">px</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">;
                }
            },
            <span style="color: #ff0000;">style</span> : {
                inserted(el,binding){
                    </span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> a </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Object.keys(binding.value)[</span><span style="background-color: #f5f5f5; color: #000000;">0</span><span style="background-color: #f5f5f5; color: #000000;">];
                    </span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> b </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> Object.keys(binding.value)[</span><span style="background-color: #f5f5f5; color: #000000;">1</span><span style="background-color: #f5f5f5; color: #000000;">];

                    $(el).css({
                        [a]:binding.value[a],
                        [b]:binding.value[b] </span><span style="background-color: #f5f5f5; color: #000000;">+</span> <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">px</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">
                    })
                }
            }
        }
    }
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">style </span><span style="color: #ff0000;">lang</span><span style="color: #0000ff;">="less"</span><span style="color: #0000ff;">&gt;</span><span style="background-color: #f5f5f5; color: #800000;">
    header</span><span style="background-color: #f5f5f5; color: #000000;">{</span><span style="background-color: #f5f5f5; color: #ff0000;">ul{overflow</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #0000ff;"> hidden</span><span style="background-color: #f5f5f5; color: #000000;">;</span><span style="background-color: #f5f5f5; color: #ff0000;">list-style</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #0000ff;">none</span><span style="background-color: #f5f5f5; color: #000000;">;</span><span style="background-color: #f5f5f5; color: #ff0000;">li{float</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #0000ff;"> left</span><span style="background-color: #f5f5f5; color: #000000;">;</span><span style="background-color: #f5f5f5; color: #ff0000;">width</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #0000ff;"> 50%</span><span style="background-color: #f5f5f5; color: #000000;">;</span><span style="background-color: #f5f5f5; color: #ff0000;">height</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #0000ff;"> 50px</span><span style="background-color: #f5f5f5; color: #000000;">;</span><span style="background-color: #f5f5f5; color: #ff0000;">border-right</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #0000ff;"> 1px solid #000</span><span style="background-color: #f5f5f5; color: #000000;">;</span><span style="background-color: #f5f5f5; color: #ff0000;">background</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #0000ff;"> orange</span><span style="background-color: #f5f5f5; color: #000000;">;</span><span style="background-color: #f5f5f5; color: #ff0000;">box-sizing</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #0000ff;"> border-box</span><span style="background-color: #f5f5f5; color: #000000;">;</span><span style="background-color: #f5f5f5; color: #000000;">}</span><span style="background-color: #f5f5f5; color: #800000;">}}.content</span><span style="background-color: #f5f5f5; color: #000000;">{</span><span style="background-color: #f5f5f5; color: #ff0000;">overflow-y</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #0000ff;">scroll</span><span style="background-color: #f5f5f5; color: #000000;">;</span><span style="background-color: #f5f5f5; color: #000000;">}</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">style</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p><span style="font-family: 宋体;">然后就可以在模板中任何元素身上使用自定义的</span>v-color<span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">v-height</span><span style="font-family: 宋体;">、</span><span style="font-family: Consolas;">v-style</span><span style="font-family: 宋体;">指令属性。</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">如果指令需要多个值，可以传入一个</span>JavaScript<span style="font-family: 宋体;">对象字面量。记住，指令函数能够接受所有合法的 </span><span style="font-family: Consolas;">JavaScript </span><span style="font-family: 宋体;">表达式。</span></p>
<p>&nbsp;<img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令22.png" alt="" width="478" height="336" /></p>
<p>&nbsp;</p>
<p><img src="./images/前端笔记之Vue（三）生命周期&amp;CSS预处理&amp;全局组件&amp;自定义指令23.png" alt="" /></p>
<hr />
<h2><strong>4.2<span style="font-family: 宋体;">全局自定义指令</span></strong></h2>
<p><span style="font-family: 宋体;">全局指令</span> <span style="font-family: 宋体;">和</span> <span style="font-family: 宋体;">全局组件的封装方式一样，也是在</span>plugins<span style="font-family: 宋体;">文件夹中新建</span><span style="font-family: Consolas;">directives.js</span><span style="font-family: 宋体;">文件。</span></p>
<p>自定义全局指令想在哪用就在哪用。</p>
<p>&nbsp;</p>
<p>main.js</p>
<div class="cnblogs_code">
<pre><code>import Vue from 'vue'<span style="color: #000000;">;
import App from </span>'./App.vue'<span style="color: #000000;">;

<span style="color: #ff0000;">import directives from </span></span><span style="color: #ff0000;">'./plugins/directives.js';
Vue.use(directives); //注册全局指令</span>

<span style="color: #0000ff;">new</span><span style="color: #000000;"> Vue({
    el : </span>"#app"<span style="color: #000000;">,
    render : (h)</span>=&gt;<span style="color: #000000;"> h(App)
})</span></pre>
</div>
<p>&nbsp;</p>
<p>directives.js</p>
<div class="cnblogs_code">
<pre><code>export <span style="color: #0000ff;">default</span> <span style="color: #0000ff;">function</span><span style="color: #000000;">(Vue){
  <span style="color: #ff0000;">  Vue.directive(</span></span><span style="color: #ff0000;">'style'</span><span style="color: #000000;"><span style="color: #ff0000;">, {</span>
        inserted(el,binding){
            </span><span style="color: #0000ff;">var</span> a = Object.keys(binding.value)[0<span style="color: #000000;">];
            </span><span style="color: #0000ff;">var</span> b = Object.keys(binding.value)[1<span style="color: #000000;">];
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> $(el).css({color:'green', fontSize:50})</span>
<span style="color: #000000;">            $(el).css({[a]:binding.value[a], [b]:binding.value[b]})
        }
 <span style="color: #ff0000;">   })</span>

<span style="color: #ff0000;">    Vue.directive(</span></span><span style="color: #ff0000;">'color'</span><span style="color: #000000;"><span style="color: #ff0000;">, {</span>
        inserted(el,binding){
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> el.style.color = binding.value</span>
            el.style.color = Object.keys(binding.modifiers)[0<span style="color: #000000;">]
        }
  <span style="color: #ff0000;">  })</span>

   <span style="color: #ff0000;"> Vue.directive(</span></span><span style="color: #ff0000;">'height'</span><span style="color: #000000;"><span style="color: #ff0000;">, {</span>
        inserted(el,binding){
            </span><span style="color: #0000ff;">var</span> height = document.documentElement.clientHeight -<span style="color: #000000;"> binding.value;
            el.style.height </span>= height + "px"<span style="color: #000000;">;
        }
<span style="color: #ff0000;">    })</span>
}</span></pre>
</div>
<hr />
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>