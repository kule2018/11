<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修封装一个简单的动画函数' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>封装一个简单的动画函数</center></div><div class='banquan'>原文出处:本文由博客园博主路宝的link提供。<br/>
原文连接:https://www.cnblogs.com/myan/p/11551576.html</div><br>
    <div>
<div>/**</div>
<div>&nbsp;*&nbsp;</div>
<div>&nbsp;*&nbsp;动画函数多个目标值之间移动</div>
<div>&nbsp;*&nbsp;1、如果是正值，则向大取整&nbsp;2、如果是负值，则向小取整</div>
<div>&nbsp;*&nbsp;</div>
<div>&nbsp;*&nbsp;</div>
<div>&nbsp;*&nbsp;</div>
<div>&nbsp;*&nbsp;@param&nbsp;{元素}&nbsp;obj&nbsp;</div>
<div>&nbsp;*&nbsp;@param&nbsp;{距离}&nbsp;target&nbsp;</div>
<div>&nbsp;*&nbsp;@param&nbsp;{回调函数}&nbsp;callback</div>
<div>&nbsp;*/</div>
<br /><br /><br />
<div>function&nbsp;ainmate&nbsp;(obj,target,callback){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清除定时器，是指清除谁的定时器，这里是轮播图，所以清除元素的定时器</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;clearInterval(obj.timer);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;创建定时器，清除定时器，页面中就没有定时器，每轮播一次创建一个定时器，</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;使其页面中只保留一个定时器,同理元素的定时器</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;obj.timer&nbsp;=&nbsp;setInterval(function(){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//定义步长值变量，用来接收走的步数</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;步长值&nbsp;=&nbsp;（距离&nbsp;-&nbsp;元素距离左边的距离）&nbsp;除&nbsp;10;&nbsp;&nbsp;&nbsp;//10代表分成几份，可以更多，可以更少，看个人审美</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;step&nbsp;=&nbsp;(target&nbsp;-&nbsp;obj.offsetLeft)&nbsp;/&nbsp;10;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;三元表达式,&nbsp;当step的距离是向右移动是整数，会有一点误差，所以天花板函数取大，取整&nbsp;&nbsp;&nbsp;相反往左移动会出现小数，则地板函数取小，取整</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;step&nbsp;=&nbsp;step&nbsp;&gt;&nbsp;0&nbsp;?&nbsp;Math.ceil(step)&nbsp;:&nbsp;Math.floor(step)&nbsp;;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;轮播一周后，清除定时器</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(obj.offsetLeft&nbsp;==&nbsp;target)&nbsp;{</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearInterval(obj.timer);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;回调函数，判断是否有回调函数,如果有调用,如果没有不调用</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(callback){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback();</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;简写方法</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;callback&nbsp;&amp;&amp;&nbsp;callback();</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//轮播的元素需要有css里定位</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;轮播的运算&nbsp;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.style.left&nbsp;=&nbsp;obj.offsetLeft&nbsp;+&nbsp;step&nbsp;+'px';</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;},30)</div>
<div>}</div>

</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>