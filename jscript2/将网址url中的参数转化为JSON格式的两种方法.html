<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修将网址url中的参数转化为JSON格式的两种方法' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>将网址url中的参数转化为JSON格式的两种方法</center></div><div class='banquan'>原文出处:本文由博客园博主王小端提供。<br/>
原文连接:https://www.cnblogs.com/wangshucheng/p/11203097.html</div><br>
    <p>在我们进入主题前，我先先看下获取网址URL的方法：</p>
<p>window.location.href // 设置或获取整个URL为字符串&nbsp;</p>
<p>window.location.hash // 设置或获取href属性中在井号#后面的部分参数&nbsp;</p>
<p>window.location.search // 设置或获取href属性中跟在问号？后面，井号#前面的部分参数</p>
<p>例如我们这里有一个url，例如：<a href="https://link.juejin.im/?target=http%3A%2F%2F127.0.0.1%3A8080%2Fhtml%2Furltojson.html%3Fid%3D1%26name%3Dgood%23%26price%3D1003" rel="nofollow noopener noreferrer" target="_blank">http://127.0.0.1:8080/html/urltojson.html?id=1&amp;name=good#&amp;price=1003</a></p>
<p>下面看下上面三个方法是如何使用的</p>
<div class="cnblogs_Highlighter">
<pre><code>console.log(window.location.href);
// http://127.0.0.1:8080/html/urltojson.html?id=1&amp;name=good#&amp;price=1003
console.log(window.location.hash);
// #&amp;price=1003
console.log(window.location.search);
// ?id=1&amp;name=good
</pre>
</div>
<p>&nbsp;</p>
<p>我们看到了上面三个方法的返回参数是不一样的，我们接下来看下如果将url转换为json格式的数据。</p>
<h3 data-id="heading-1">第一种： for 循环方式</h3>
<div class="cnblogs_Highlighter">
<pre><code>// 第一种： for循环
var GetQueryJson1 = function () {
  let url = location.href; // 获取当前浏览器的URL
  let arr = []; // 存储参数的数组
  let res = {}; // 存储最终JSON结果对象
  arr = url.split('?')[1].split('&amp;'); // 获取浏览器地址栏中的参数
  
  for (let i = 0; i &lt; arr.length; i++) { // 遍历参数
    if (arr[i].indexOf('=') != -1){ // 如果参数中有值
      let str = arr[i].split('=');
      res[str[0]] = str[1];
    } else { // 如果参数中无值
      res[arr[i]] = '';
    }
  }
  return res;
}
console.log(GetQueryJson1());
</pre>
</div>
<p>&nbsp;</p>
<h3 data-id="heading-2">第二种：正则表达式方式</h3>
<div class="cnblogs_Highlighter">
<pre><code>// 第二种：正则表达式
var GetQueryJson2 = function () {
  let url = location.href; // 获取当前浏览器的URL
  let param = {}; // 存储最终JSON结果对象
  url.replace(/([^?&amp;]+)=([^?&amp;]+)/g, function(s, v, k) {
    param[v] = decodeURIComponent(k);//解析字符为中文
    return k + '=' +  v;
  });
  return param;
}

console.log(GetQueryJson2());
</pre>
</div>
<p>&nbsp;</p>
<p>以上所述是小端给大家介绍的JS将网址url转化为JSON格式的方法，希望对大家有所帮助，如果大家有任何疑问请给我留言</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>