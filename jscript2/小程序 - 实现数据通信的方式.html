<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修小程序 - 实现数据通信的方式' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>小程序 - 实现数据通信的方式</center></div><div class='banquan'>原文出处:本文由博客园博主WahFung提供。<br/>
原文连接:https://www.cnblogs.com/chanwahfung/p/11749056.html</div><br>
    <h2>1. properties</h2>
<p><span style="font-size: 16px;">父组件向子组件通信，类似于 vue 的 props。</span></p>
<p><span style="font-size: 16px;"><strong>父组件向子组件传参：</strong></span></p>
<p><img src="./images/小程序 - 实现数据通信的方式0.png" alt="" /></p>
<p><span style="font-size: 16px;"><span><strong>子组件接收参数：</strong></span><strong><img src="./images/小程序 - 实现数据通信的方式1.png" alt="" /></strong></span></p>
<p><img src="./images/小程序 - 实现数据通信的方式2.png" alt="" /></p>
<p>&nbsp;</p>
<h2>&nbsp;2.triggerEvent</h2>
<p><span style="font-size: 16px;">子组件向父组件通信，类似于 vue 的 this.$emit</span></p>
<p><strong><span style="font-size: 16px;">子组件触发自定义事件：</span></strong></p>
<p>&nbsp;<img src="./images/小程序 - 实现数据通信的方式3.png" alt="" /></p>
<p><span style="font-size: 16px;"><strong>&nbsp;父组件绑定自定义事件：</strong></span></p>
<p><span style="font-size: 16px;"><strong><img src="./images/小程序 - 实现数据通信的方式4.png" alt="" /></strong></span></p>
<p>&nbsp;</p>
<h2>&nbsp;3.selectComponent()</h2>
<p><span style="font-size: 16px;">使用选择器选择组件实例节点，返回匹配到的第一个组件实例对象，类似于Vue的ref</span></p>
<p><span style="font-size: 16px;"><img src="./images/小程序 - 实现数据通信的方式5.png" alt="" /></span></p>
<p><img src="./images/小程序 - 实现数据通信的方式6.png" alt="" /></p>
<p>&nbsp;</p>
<h2>&nbsp;4.selectOwnerComponent()</h2>
<p><span style="font-size: 16px;">选取当前组件节点所在的组件实例（即组件的引用者），返回它的组件实例对象，类似于Vue的$parent</span></p>
<p>&nbsp;<img src="./images/小程序 - 实现数据通信的方式7.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>&nbsp;5.getCurrentpages()</h2>
<p><span style="font-size: 16px;">getCurrentPages() 获取当前页面栈，数组中第一个元素为首页，最后一个元素为当前页面。</span></p>
<p><span style="font-size: 16px;">元素为一个对象，里面存放着页面的信息，包括route（页面路径）、options（onLoad拿到的参数）、method、data等。</span></p>
<p><span style="font-size: 16px;">也可以通过 setData 方法或页面中的方法修改页面的数据。</span></p>
<p><img src="./images/小程序 - 实现数据通信的方式8.png" alt="" /></p>
<p>&nbsp;</p>
<h2>6.globalData</h2>
<p><span style="font-size: 16px;">全局数据，所有页面和组件都能够访问和修改</span></p>
<p><img src="./images/小程序 - 实现数据通信的方式9.png" alt="" /></p>
<p>&nbsp;</p>
<h2>7.本地存储</h2>
<p><strong><span style="font-size: 16px;">同步方法：</span></strong></p>
<p><img src="./images/小程序 - 实现数据通信的方式10.png" alt="" /></p>
<p><strong><span style="font-size: 16px;">异步方法：</span></strong></p>
<p><strong><span style="font-size: 16px;"><img src="./images/小程序 - 实现数据通信的方式11.png" alt="" /></span></strong></p>
<p>&nbsp;</p>
<h2>8.eventBus</h2>
<p>将eventBus挂载到全局，通过发布订阅模式注册事件和触发事件进行通信</p>
<p><img src="./images/小程序 - 实现数据通信的方式12.png" alt="" /></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('a4056668-36bd-48ab-938b-af0d34792106')"><img id="code_img_closed_a4056668-36bd-48ab-938b-af0d34792106" class="code_img_closed" src="./images/小程序 - 实现数据通信的方式13.png" alt="" /><img id="code_img_opened_a4056668-36bd-48ab-938b-af0d34792106" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('a4056668-36bd-48ab-938b-af0d34792106',event)" src="./images/小程序 - 实现数据通信的方式14.png" alt="" />
<div id="cnblogs_code_open_a4056668-36bd-48ab-938b-af0d34792106" class="cnblogs_code_hide">
<pre><code>let Dep =<span style="color: #000000;"> {
  eventList: {},
  on(key, fn) {
    </span><span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">this</span><span style="color: #000000;">.eventList[key]) {
      </span><span style="color: #0000ff;">this</span>.eventList[key] =<span style="color: #000000;"> []
    }
    </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.eventList[key].push(fn)
  },
  emit() {
    let key </span>=<span style="color: #000000;"> Array.prototype.shift.call(arguments)
    let events </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.eventList[key]
    </span><span style="color: #0000ff;">if</span> (!events || events.length === 0<span style="color: #000000;">) {
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">
    }
    events.forEach(fn </span>=&gt; fn.apply(<span style="color: #0000ff;">null</span><span style="color: #000000;">, arguments))
  },
  off(key, fn) {
    let events </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.eventList[key]
    </span><span style="color: #0000ff;">if</span> (!events || events.length === 0<span style="color: #000000;">) {
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">
    }
    events.forEach(item </span>=&gt;<span style="color: #000000;"> {
      </span><span style="color: #0000ff;">if</span> (item ===<span style="color: #000000;"> fn) {
        let idx </span>=<span style="color: #000000;"> events.indexOf(fn)
        events.splice(idx, </span>1<span style="color: #000000;">)
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">
      }
    })
  }
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p style="text-align: left;">如果还有其他的通信方式请告诉我~</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>