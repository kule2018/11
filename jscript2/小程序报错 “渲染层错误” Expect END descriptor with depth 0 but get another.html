<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修小程序报错 “渲染层错误” Expect END descriptor with depth 0 but get another' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>小程序报错 “渲染层错误” Expect END descriptor with depth 0 but get another</center></div><div class='banquan'>原文出处:本文由博客园博主TDX提供。<br/>
原文连接:https://www.cnblogs.com/tandaxia/p/10839290.html</div><br>
    <p>　项目中有几个页面在控制台出现这个&ldquo;渲染层错误&rdquo;，虽然不影响业务操作，怕存在潜在风险，今天抽时间找了下原因，解决这个问题。</p>
<p>控制台报错日志如下：</p>
<p>(中国标准时间) 渲染层错误</p>
<p>Error: Expect END descriptor with depth 0 but get another<br />    at i.value (:39360/__pageframe__/__dev__/WAWebview.js:1)<br />    at Function.G [as _startCb] (:39360/__pageframe__/__dev__/WAWebview.js:1)<br />    at n (:39360/__pageframe__/__dev__/WAWebview.js:1)<br />    at h (:39360/__pageframe__/__dev__/WAWebview.js:1)<br />    at :39360/__pageframe__/__dev__/WAWebview.js:1<br />    at t.(:39360/appservice/anonymous function) (http://127.0.0.1:39360/__pageframe__/__dev__/WAWebview.js:1:94975)<br />    at :39360/__pageframe__/pageframe.html:1<br />    at :39360/__pageframe__/pageframe.html:1<br />    at :39360/__pageframe__/pageframe.html:1<br />    at Array.forEach (&lt;anonymous&gt;)</p>
<p>截图：</p>
<p><img src="./images/小程序报错 “渲染层错误” Expect END descriptor with depth 0 but get another0.png" alt="" /></p>
<p>&nbsp;</p>
<p>主要找到了2个原因，记录分享一下：</p>
<p>1、在js中操作中，把undefined赋值给了一个数组变量，假设变量名为arr;</p>
<p>&nbsp; &nbsp; &nbsp; 在.wxml页面中使用了变量arr.&nbsp;&nbsp;</p>
<p>&nbsp; &nbsp; &nbsp;这个原因导致了报&ldquo;渲染层错误&rdquo;。处理了arr变量后，这个错误也就没有了</p>
<p>&nbsp;</p>
<p>2、子组件的.wxml页面中使用了if造成了这个报错，后面把if判断改成style来控制隐藏显示，</p>
<p>&nbsp; &nbsp; &nbsp;然后也消除了这个&ldquo;渲染层错误&rdquo;。</p>
<p>&nbsp; &nbsp;未改前代码截图：</p>
<p><img src="./images/小程序报错 “渲染层错误” Expect END descriptor with depth 0 but get another1.png" alt="" /></p>
<p>改后代码截图：</p>
<p><img src="./images/小程序报错 “渲染层错误” Expect END descriptor with depth 0 but get another2.png" alt="" /></p>
<p>奇怪的是其他地方使用if并没有报这个错，原理还不清楚！</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>================== 小程序其他问题记录 ================</p>
<p>1、时间字符串格式yyyy-MM-dd 转成时间在<strong><span style="color: #ff0000;">iOS设备</span></strong>上不被识别，需要把yyyy-MM-dd格式转成其他yyyy/MM/dd格式类型，然后才能将时间字符串转成时间。</p>
<p>测试列子（iOS手机）：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> str1 = "2018-08-18 08:18", str2 = str1.replace(/-/g, '/'<span style="color: #000000;">);
console.log(</span>"str1: ", str1, ", str2: "<span style="color: #000000;">, str2);

</span><span style="color: #0000ff;">var</span> date1 = <span style="color: #0000ff;">new</span> Date(str1), date2 = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(str2);
console.log(</span>"date1: "<span style="color: #000000;">, date1);
console.log(</span>"date2: ", date2);</pre>
</div>
<p><img src="./images/小程序报错 “渲染层错误” Expect END descriptor with depth 0 but get another3.png" alt="" /></p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>