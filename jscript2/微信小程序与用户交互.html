<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修微信小程序与用户交互' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>微信小程序与用户交互</center></div><div class='banquan'>原文出处:本文由博客园博主小小咸鱼YwY提供。<br/>
原文连接:https://www.cnblogs.com/pythonywy/p/11589922.html</div><br>
    <h1 id="微信小程序与用户交互">微信小程序与用户交互</h1>
<h2 id="一.显示消息提示框">一.显示消息提示框</h2>
<h3 id="wx.showtoast属性名属性值">wx.showToast({属性名:属性值})</h3>
<p><code>自定义一个提示框,时间到了会自动关闭</code></p>
<pre><code><code>wx.showToast({

    title:&quot;成功&quot;,  //必填

    icon: &#39;success&#39;,//图标只支持&quot;success&quot;、&quot;loading&quot; 

    image: &#39;/images/tan.png&#39;,//自定义图标的本地路径，image 的优先级高于 icon

    duration: 2000,//提示的延迟时间，单位毫秒，默认：1500 

    mask: false,//是否显示透明蒙层，防止触摸穿透，默认：false 

    success:function(){}, //接口调用成功的回调函数

    fail:function(){}, //接口调用失败的回调函数

    complete:function(){} //接口调用结束的回调函数（调用成功、失败都会执行）

})</code></pre>
<h3 id="wx.showloading属性名属性值">wx.showLoading({属性名:属性值})</h3>
<p><code>显示Loading提示框,不会自动关闭,需主动调用 wx.hideLoading 才能关闭提示框</code></p>
<pre class="python"><code>wx.showLoading({
  title: &#39;加载中&#39;,
})
setTimeout(function () {
  wx.hideLoading()
}, 2000)</code></pre>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">属性</th>
<th style="text-align: left;">类型</th>
<th style="text-align: left;">默认值</th>
<th style="text-align: left;">必填</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">title</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">是</td>
<td style="text-align: left;">提示的内容</td>
</tr>
<tr class="even">
<td style="text-align: left;">mask</td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;">false</td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">是否显示透明蒙层，防止触摸穿透</td>
</tr>
<tr class="odd">
<td style="text-align: left;">success</td>
<td style="text-align: left;">function</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">接口调用成功的回调函数</td>
</tr>
<tr class="even">
<td style="text-align: left;">fail</td>
<td style="text-align: left;">function</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">接口调用失败的回调函数</td>
</tr>
<tr class="odd">
<td style="text-align: left;">complete</td>
<td style="text-align: left;">function</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<h3 id="wx.hideloading属性名属性值">wx.hideLoading({属性名:属性值})</h3>
<p><code>隐藏 loading 提示框</code></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">属性</th>
<th style="text-align: left;">类型</th>
<th style="text-align: left;">默认值</th>
<th style="text-align: left;">必填</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">success</td>
<td style="text-align: left;">function</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">接口调用成功的回调函数</td>
</tr>
<tr class="even">
<td style="text-align: left;">fail</td>
<td style="text-align: left;">function</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">接口调用失败的回调函数</td>
</tr>
<tr class="odd">
<td style="text-align: left;">complete</td>
<td style="text-align: left;">function</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<h2 id="二.类似html中confirm">二.类似html中confirm</h2>
<h3 id="wx.showmodal属性名属性值">wx.showModal({属性名:属性值})</h3>
<pre class="python"><code>wx.showModal({
  title: &#39;提示&#39;,
  content: &#39;这是一个模态弹窗&#39;,
  success (res) {
    if (res.confirm) {
      console.log(&#39;用户点击确定&#39;)
    } else if (res.cancel) {
      console.log(&#39;用户点击取消&#39;)
    }
  }
})</code></pre>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">属性</th>
<th style="text-align: left;">类型</th>
<th style="text-align: left;">默认值</th>
<th style="text-align: left;">必填</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">title</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">提示的标题</td>
</tr>
<tr class="even">
<td style="text-align: left;">content</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">提示的内容</td>
</tr>
<tr class="odd">
<td style="text-align: left;">showCancel</td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;">true</td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">是否显示取消按钮</td>
</tr>
<tr class="even">
<td style="text-align: left;">cancelText</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">'取消'</td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">取消按钮的文字，最多 4 个字符</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cancelColor</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">#000000</td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">取消按钮的文字颜色，必须是 16 进制格式的颜色字符串</td>
</tr>
<tr class="even">
<td style="text-align: left;">confirmText</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">'确定'</td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">确认按钮的文字，最多 4 个字符</td>
</tr>
<tr class="odd">
<td style="text-align: left;">confirmColor</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">#576B95</td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">确认按钮的文字颜色，必须是 16 进制格式的颜色字符串</td>
</tr>
<tr class="even">
<td style="text-align: left;">success</td>
<td style="text-align: left;">function</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">接口调用成功的回调函数</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fail</td>
<td style="text-align: left;">function</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">接口调用失败的回调函数</td>
</tr>
<tr class="even">
<td style="text-align: left;">complete</td>
<td style="text-align: left;">function</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<p>object.success 回调函数</p>
<p>Object res</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">属性</th>
<th style="text-align: left;">类型</th>
<th style="text-align: left;">说明</th>
<th style="text-align: left;">最低版本</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">confirm</td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;">为 true 时，表示用户点击了确定按钮</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">cancel</td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;">为 true 时，表示用户点击了取消（用于 Android 系统区分点击蒙层关闭还是点击取消按钮关闭）</td>
<td style="text-align: left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.1.0</a></td>
</tr>
</tbody>
</table>
<h2 id="三.显示操作菜单">三.显示操作菜单</h2>
<h3 id="wx.showactionsheet属性名属性值">wx.showActionSheet({属性名:属性值})</h3>
<pre><code><code>wx.showActionSheet({
  itemList: [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;],
  success (res) {
    console.log(res.tapIndex)
  },
  fail (res) {
    console.log(res.errMsg)
  }
})</code></pre>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">属性</th>
<th style="text-align: left;">类型</th>
<th style="text-align: left;">默认值</th>
<th style="text-align: left;">必填</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">itemList</td>
<td style="text-align: left;">Array.<string></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">是</td>
<td style="text-align: left;">按钮的文字数组，数组长度最大为 6</td>
</tr>
<tr class="even">
<td style="text-align: left;">itemColor</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">#000000</td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">按钮的文字颜色</td>
</tr>
<tr class="odd">
<td style="text-align: left;">success</td>
<td style="text-align: left;">function</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">接口调用成功的回调函数</td>
</tr>
<tr class="even">
<td style="text-align: left;">fail</td>
<td style="text-align: left;">function</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">接口调用失败的回调函数</td>
</tr>
<tr class="odd">
<td style="text-align: left;">complete</td>
<td style="text-align: left;">function</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">否</td>
<td style="text-align: left;">接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<p>object.success 回调函数</p>
<p>参数</p>
<p>Object res</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">属性</th>
<th style="text-align: left;">类型</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">tapIndex</td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">用户点击的按钮序号，从上到下的顺序，从0开始</td>
</tr>
</tbody>
</table>
<h3 id="注意">注意</h3>
<ul>
<li>Android 6.7.2 以下版本，点击取消或蒙层时，回调 fail, errMsg 为 &quot;fail cancel&quot;；</li>
<li>Android 6.7.2 及以上版本 和 iOS 点击蒙层不会关闭模态弹窗，所以尽量避免使用「取消」分支中实现业务逻辑</li>
</ul>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>