<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修批量删除数据' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>批量删除数据</center></div><div class='banquan'>原文出处:本文由博客园博主小码日记园提供。<br/>
原文连接:https://www.cnblogs.com/fpflog/p/12047520.html</div><br>
    <p>JSP:</p>
<pre><code>&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;<br />&lt;%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;<br />&lt;html&gt;<br />&lt;head&gt;<br />    &lt;link href="css/bootstrap.min.css" rel="stylesheet"&gt;<br /><br />    &lt;!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 --&gt;<br />    &lt;!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 --&gt;<br />    &lt;!--[if lt IE 9]&gt;<br />    &lt;!--&lt;script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"&gt;&lt;/script&gt;<br />    &lt;script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"&gt;&lt;/script&gt;--&gt;<br />    &lt;![endif]--&gt;<br />    &lt;script src="js/jquery-3.2.1.min.js"&gt;&lt;/script&gt;<br />    &lt;!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 --&gt;<br />    &lt;script src="js/bootstrap.min.js"&gt;&lt;/script&gt;<br />    &lt;title&gt;index&lt;/title&gt;<br />    &lt;style&gt;<br />        .table {<br /><br />            float: left;<br /><br />        }<br /><br /><br />        .se{<br />float: left;<br />            margin-left: 170px;<br />            margin-top: 50px;<br />        }<br />        th,td{<br />            text-align:center;<br />        }<br />        .caozuo{<br />            float: right;<br />margin-top: 50px;<br />            margin-right: 150px;<br />        }<br />    &lt;/style&gt;<br />    &lt;script&gt;<br /><br />        function delecte(id) {<br />            if (confirm("您确定要删除吗？")){<br />                location.href="${pageContext.request.contextPath}/userDelServlet?id="+id;<br />            }<br /><br />        }<br />        function update(id) {<br />            location.href="${pageContext.request.contextPath}/userIdSelectServlet?id="+id;<br /><br />        }<br />     window.onload=function () {<br />            //获取按钮id<br />    document.getElementById("delSelected").onclick=function () {<br /><br />        if(confirm("您确定要删除选中数据吗？")){<br />            var flag=false;<br />            var uids = document.getElementsByName("uid");<br />            for(var i=1;i&lt;uids.length;i++){<br />                //判断是否选中数据，若数据有选中改变标识进行提交，若标识未改变不进行表单提交<br />                if(uids[i].checked){<br />                    flag=true;<br />                    break;<br />                }<br /><br />            }<br />            if(flag){<br />                //进行表单的提交，获取表单id<br />                var form = document.getElementById("form");<br />                //提交表单<br />                form.submit();<br />            }<br /><br />        }<br /><br />    }<br />    //给第一个选择框添加点击事件，设置全选全消功能<br />    document.getElementById("firstcb").onclick=function () {<br />        var uids = document.getElementsByName("uid");<br />        for(var i=0;i&lt;uids.length;i++){<br />            uids[i].checked=this.checked<br />        }<br />    }<br /><br />}<br /><br />    &lt;/script&gt;<br />&lt;/head&gt;<br />&lt;body&gt;<br />&lt;div  align="center" style="font-size: 30px;"&gt;&lt;center&gt;用户信息表&lt;/center&gt;&lt;/div&gt;<br />&lt;div align="center" class="sel"&gt;<br />    &lt;div class="se"&gt;<br />&lt;form class="form-inline" action="" method="post"&gt;<br />    &lt;div class="form-group"&gt;<br />        &lt;label for="exampleInputName2"&gt;姓名&lt;/label&gt;<br />        &lt;input type="text" class="form-control" name="name" id="exampleInputName2" &gt;<br />    &lt;/div&gt;<br />    &lt;div class="form-group"&gt;<br />        &lt;label for="exampleInputDept2"&gt;部门&lt;/label&gt;<br />        &lt;input type="text" class="form-control" name="deptid"  id="exampleInputDept2" &gt;<br />    &lt;/div&gt;<br />    &lt;button type="submit" class="btn btn-default"&gt;查询&lt;/button&gt;<br />&lt;/form&gt;<br />    &lt;/div&gt;<br />    &lt;div class="caozuo"&gt;<br />    &lt;a class="btn btn-default" href="${pageContext.request.contextPath}/UserAdd.jsp" role="button"&gt;添加信息&lt;/a&gt;<br />    &lt;a class="btn btn-default" href="javascript:void(0);" id="delSelected" role="button"&gt;删除选项&lt;/a&gt;<br />    &lt;/div&gt;<br /><br />&lt;/div&gt;<br />&lt;div class="container"&gt;<br />    &lt;form id="form" action="${pageContext.request.contextPath}/delUsersServlet"&gt;<br />&lt;table class="table table-hover table-condensed table-bordered" align="center"&gt;<br /><br />    &lt;tr style="background-color: #b2dba1;text: center" &gt;<br />        &lt;th&gt;&lt;label class="checkbox-inline"&gt;<br />            &lt;input type="checkbox" name="uid" id="firstcb"&gt;<br />        &lt;/label&gt;&lt;/th&gt;<br />        &lt;th&gt;序号&lt;/th&gt;<br />        &lt;th&gt;姓名&lt;/th&gt;<br />        &lt;th&gt;组织序号&lt;/th&gt;<br />        &lt;th&gt;部门序号&lt;/th&gt;<br />        &lt;th&gt;日期&lt;/th&gt;<br />        &lt;th&gt;操作&lt;/th&gt;<br />    &lt;/tr&gt;<br />    &lt;c:forEach items="${users}" varStatus="list" var="lis"&gt;<br />        &lt;tr&gt;<br />            &lt;td&gt;&lt;label class="checkbox-inline"&gt;<br />                &lt;input type="checkbox" name="uid" value="${lis.id}"&gt;<br />            &lt;/label&gt;&lt;/td&gt;<br />            &lt;td&gt;${list.count}&lt;/td&gt;<br />            &lt;td&gt;${lis.name}&lt;/td&gt;<br />            &lt;td&gt;${lis.orgid}&lt;/td&gt;<br />            &lt;td&gt;${lis.deptid}&lt;/td&gt;<br />            &lt;td&gt;${lis.createdate}&lt;/td&gt;<br />            &lt;td&gt;&lt;a class="btn btn-default" href="javascript:update(${lis.id});" role="button"&gt;修改&lt;/a&gt;<br />                &lt;a class="btn btn-default" href="javascript:delecte(${lis.id});" role="button"&gt;删除&lt;/a&gt;&lt;/td&gt;<br />        &lt;/tr&gt;<br />    &lt;/c:forEach&gt;<br />&lt;/table&gt;<br />    &lt;/form&gt;<br />&lt;/div&gt;<br /><br />&lt;/body&gt;<br />&lt;/html&gt;<br /><br /><br />UsersDelServlet:</pre>
<pre><code>package com.fpf.Servlet1;<br /><br />import com.fpf.bean.User;<br />import com.fpf.service.UsersDelServiceImp;<br /><br />import javax.servlet.ServletException;<br />import javax.servlet.annotation.WebServlet;<br />import javax.servlet.http.HttpServlet;<br />import javax.servlet.http.HttpServletRequest;<br />import javax.servlet.http.HttpServletResponse;<br />import java.io.IOException;<br />import java.util.List;<br /><br />@WebServlet("/delUsersServlet")<br />public class DelUsersServlet extends HttpServlet {<br />    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {<br />       request.setCharacterEncoding("utf-8");<br />       //获取选择框的id<br />        String[] uids = request.getParameterValues("uid");<br />        for (String uid : uids) {<br />            System.out.println(uid);<br />        }<br />        UsersDelServiceImp usersDelServiceImp=new UsersDelServiceImp();<br />        usersDelServiceImp.usersDel(uids);<br />        List&lt;User&gt; users = usersDelServiceImp.list();<br />        request.setAttribute("users",users);<br />        request.getRequestDispatcher("/index1.jsp").forward(request,response);<br /><br />    }<br /><br />    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {<br />        this.doPost(request, response);<br />    }<br />}<br /><br /></pre>
<pre><code><br /><br /></pre>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>