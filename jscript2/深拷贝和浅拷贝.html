<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修深拷贝和浅拷贝' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>深拷贝和浅拷贝</center></div><div class='banquan'>原文出处:本文由博客园博主姜先Sir提供。<br/>
原文连接:https://www.cnblogs.com/jiangzinuo/p/11210946.html</div><br>
    <h3><span style="font-size: 18px; font-family: 'Microsoft YaHei';"><strong>首先，我们来了解下数据类型。</strong></span></h3>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';">JavaScritp的数据类型大致分为2种：<strong>基本数据类型和引用数据类型。</strong></span></p>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';">其中：</span></p>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';">（1）基本数据类型：<strong>Number、String、Boolean<strong>、Null<strong>、Undefined<strong>、Symbol以及未来ES10新增的BigInt(任意精度整数)<strong><br /></strong></strong></strong></strong></strong></span></p>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';">（2）对象 (引用类型)：<strong>Object、Array<strong>、Function<strong>、Date<strong>、RegExp</strong></strong></strong></strong></span></p>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';"><strong>其次，我们再来简单了解下&nbsp;堆和栈</strong></span></p>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';">堆是动态分配内存，内存大小不一，也不会自动释放。堆内存存放的是<strong>引用类型数据</strong>，存放的是指向该对象指针。其缺点是存取速度较慢。</span></p>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';">栈是自动分配相对固定大小的内存空间，并由系统自动释放。栈内存主要存放的是<strong>基本数据类型和对象的引用</strong>，如果存放的是引用类型，则存储的是对象的内存地址引用。其优势是存取速度比堆要快，并且栈内的数据可以共享，但缺点是存在栈中的数据大小与生存期必须是确定的，缺乏灵活性。<br /></span></p>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';"><strong>当我们访问引用数据时，先从栈内存中获取指针，通过指针在堆内存中找到数据</strong></span></p>
<p><span style="font-family: 'Microsoft YaHei';">&nbsp;<img src="./images/深拷贝和浅拷贝0.png" alt="" /></span></p>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';">好了，步入正题，深拷贝与浅拷贝。</span></p>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';">浅拷贝：复制了第一层属性，</span><span style="font-size: 18px; font-family: 'Microsoft YaHei';">在复制基本类型时，直接使用等号完成；<strong>（基本类型数据不受浅拷贝影响）</strong></span></p>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';">　　　　在复制引用类型时，循环遍历对象，对每个属性或值使用等号完成。</span></p>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';">　　　　（浅拷贝只是复制了对象的引用地址，两个对象指向同一个内存地址，所以修改其中任意的值，另一个对象的值都会随之改变）</span></p>
<p><span style="font-size: 18px; font-family: 'Microsoft YaHei';">深拷贝：</span><span style="font-size: 18px; font-family: 'Microsoft YaHei';">将对象及值复制过来，两个对象修改其中任意的值另一个值不会改变。</span></p>
<p><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">&nbsp;&lt;-------------------&nbsp; &nbsp; &nbsp; 浅拷贝&nbsp; &nbsp; &nbsp; -------------------&gt;</span></strong></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">浅拷贝可以使用<strong>&nbsp; for in&nbsp;<strong>、Object.assign<strong>、扩展运算符&nbsp; ...&nbsp; 、Array.prototype.slice()、Array.prototype.concat() 等</strong></strong></strong></span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 18px;"><strong>for in、<strong><strong>Object.assign<strong>、<strong><strong><strong>扩展运算符&nbsp; ...&nbsp; ：</strong></strong></strong></strong></strong></strong></strong></span></p>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let obj = {name:'Jack', age:18, hobbies:['reading','motion']};</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let obj1 = {};</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let obj2 = Object.assign({},obj);</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let obj3 = {...obj};</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　for(let key in obj){</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　obj1[key] = obj[key]</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　obj.name = 'Amy';</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　obj.hobbies.push('singing');</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj);      // {name:'Amy', age:18, hobbies:['reading','motion','singing']}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj1);    // {name:'Jack', age:18, hobbies:['reading','motion','singing']}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj2);   // {name:'Jack', age:18, hobbies:['reading','motion','singing']}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj3);  // {name:'Jack', age:18, hobbies:['reading','motion','singing']}</span></pre>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">&nbsp;<strong><strong><strong>Array.prototype.slice()、<strong><strong><strong>Array.prototype.concat()</strong></strong></strong>：</strong></strong></strong></span></p>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let arr = [['西瓜','甘蔗','樱桃'], 'Orange', 'Banana', 'Apple', 'Mango'];</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let arr1 = arr.slice();</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let arr2 = [].concat(arr);</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　arr[1] = '橙子';</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　arr[0][1] = 'grape';</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(arr);      //[['西瓜','grape','樱桃'], '橙子', 'Banana', 'Apple', 'Mango']</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(arr1);    //[['西瓜','grape','樱桃'], 'Orange', 'Banana', 'Apple', 'Mango']</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(arr2);   //[['西瓜','grape','樱桃'], 'Orange', 'Banana', 'Apple', 'Mango']<br /><br />　　　　可以看出浅拷贝只最第一层属性进行了拷贝，当第一层的属性值是基本数据类型时，新的对象和原对象互不影响，<br />　　　　但是如果第一层的属性值是复杂数据类型，那么新对象和原对象的属性值其指向的是同一块内存地址。<br /><br /><strong>&lt;-------------------&nbsp; &nbsp; &nbsp; 深拷贝&nbsp; &nbsp; &nbsp; -------------------&gt;<br /></strong></span></pre>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">&nbsp;深拷贝最简单的实现是: JSON.parse(JSON.stringify(obj))</span></p>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let obj1 = [0,1,[2,3],4];</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let obj2 = JSON.parse(JSON.stringify(obj1));</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　obj2[2][0] = 10;</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj1);  　　//[0,1,[2,3],4];</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj2); 　　 //[0,1,[10,3],4];<br /><br /></span></pre>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let obj3 = {name:'Jack',sex:'男',age:29,child:{'name':'Amy',age:5}};</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let obj4 = JSON.parse(JSON.stringify(obj3));</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　obj4.child.name = 'Lily';</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj3);  　　//{name:'Jack',sex:'男',age:29,child:{'name':'Amy',age:5}}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj4);  　　//{name:'Jack',sex:'男',age:29,child:{'name':'Lily',age:5}}</span></pre>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">但是有一些缺陷： </span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">1.对象的属性值是函数时，无法拷贝。&nbsp;</span></p>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let fun1 = function(){</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　console.log(1);</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　};</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(fun1);　　　</span><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">//&fnof;(){console.log(1);}</span></pre>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let fun2 = JSON.parse(JSON.stringify(fun1));</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(fun2);  　　// 报错：Uncaught SyntaxErro</span></pre>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 18px;"> 2.原型链上的属性无法拷贝</span></p>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　function Person(){</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　this.name = 'Jack';</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　Person.prototype.age = 27;</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let p1 = new Person();</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(p1);       　　　   // Person&nbsp;{name: "Jack"},__proto__:{age: 27}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(p1.age);    　    // 27</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let p2 = JSON.parse(JSON.stringify(p1));</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(p2);        　　 // {name: "Jack"}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(p2.age);   　 // undefined</span></pre>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">3.不能正确的处理 Date 类型的数据</span></p>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let date1 = new Date();</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(date1);  　　// Tue Jul 23 2019 23:19:36 GMT+0800 (中国标准时间)</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let date2 = JSON.parse(JSON.stringify(date1));</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(date2); 　　// 2019-07-23T15:19:36.362Z</span></pre>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">4.不能处理 RegExp&nbsp;</span></p>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let reg1 = new RegExp('test', 'g');</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(reg1);  　　// /test/g</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let reg2 = JSON.parse(JSON.stringify(reg1));</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(reg2); 　　//  {}</span></pre>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 18px;"> 5.会忽略 symbol</span></p>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　const symbol1 = Symbol('Json');</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(symbol1);　　 // Symbol(Json)</span></pre>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　const symbol2 = JSON.parse(JSON.stringify(symbol1));</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(symbol2);　　//报错：Uncaught SyntaxErro</span></pre>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">6.会忽略 undefined</span></p>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let un1 = {name:'jason',age:27,sex:undefined};</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(un1);  　　//{name: "jason", age: 27, sex: undefined}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let un2 = JSON.parse(JSON.stringify(un1));</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(un2); 　　//{name: "jason", age: 27}<br /></span></pre>
<pre><code><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px; color: #ff0000;">实现一个 deepClone 函数<span style="color: #000000;"><br /></span></span></strong></pre>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">//  1.如果是基本数据类型，直接返回</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">//  2.如果是 RegExp 或者 Date 类型，返回对应类型</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">//  3.如果是复杂数据类型，递归。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">//  4.考虑循环引用的问题<br /></span></pre>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　<strong>function deepClone(obj,hash = new WeakMap()){</strong></span><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　if(obj instanceof RegExp){</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">        　　　　return new RegExp(obj);</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　}</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　if(obj instanceof Date){</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">        　　　　return new Date(obj);</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　}</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　//如果不是复杂数据类型，直接返回</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　if(obj === null || typeof obj !== 'object'){</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">       　　　　 return obj;</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">   　　　　 }</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　// 缓存,如果hash WeakMap()实例关联了obj</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　// 直接返回key关联对象的值。避免重复循环;</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　if(hash.has(obj)){</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">        　　　　return hash.get(obj);</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">   　　　　 }</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　// 如果obj是数组,那obj.constructor 是 &fnof; Array() { [native code] }</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　// 如果obj是对象,那obj.constructor 是 &fnof; Object() { [native code] }</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　let t = new obj.constructor();</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　//在WeakMap中设置一组key关联对象，返回这个 WeakMap对象。</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">   　　　　 hash.set(obj,t);</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　for(let key in obj){</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">        　　　　// 递归</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">        　　　　// 是否是自身属性</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">        　　　　if(obj.hasOwnProperty(key)){</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">           　　　　 // obj = [0,1,[2,3],4];</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">            　　　　// 索引不为2时，obj[key]值为基本类型,直接返回obj[key]值</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">            　　　　// 索引为2时，obj[key]=[2,3]，是复杂数据类型，</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">            　　　　// 递归执行deepClone(obj,hash = new WeakMap());</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">            　　　　t[key] = deepClone(obj[key],hash);</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">       　　　　 }</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">  　　　　  }</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">   　　　　 return t;</span></strong><br /><strong><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　}</span></strong></pre>
<pre><code></pre>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px; color: #ff0000;">　　　　// Function</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let fun3 = function(){</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">    　　　　console.log(1);</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　};</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(fun3); 　　 //&fnof;(){console.log(1);}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let fun4 = deepClone(fun3,hash = new WeakMap());</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(fun4);  　　//&fnof;(){console.log(1);}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px; color: #ff0000;">　　　　// 原型链</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　function Person(){</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">   　　　　 this.name = 'Jack';</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　Person.prototype.age = 27;</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let p3 = new Person();</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(p3);        　　　　　　// Person&nbsp;{name: "Jack"},__proto__:{age: 27}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(p3.age);   　　　　    // 27</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let p4 = deepClone(p3,hash = new WeakMap());</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(p4);        　　    　　// Person&nbsp;{name: "Jack"},__proto__:{age: 27}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(p4.age);    　　　　// 27</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(p3 === p4); 　　 //false</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px; color: #ff0000;">　　　　// Date</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let date3 = new Date();</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(date3);  　　</span><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">//Tue Jul 23 2019 23:19:36 GMT+0800 (中国标准时间)</span></pre>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let date4 = deepClone(date3,hash = new WeakMap());</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(date4);  　</span><span style="font-size: 18px; font-family: 'Microsoft YaHei';">　//Tue Jul 23 2019 23:19:36 GMT+0800 (中国标准时间)</span></pre>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(date3 === date4); </span><span style="font-family: 'Microsoft YaHei';">  　　</span><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">//false</span></pre>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px; color: #ff0000;">　　　　// RegExp</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let reg3 = new RegExp('test', 'g');</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(reg3);  　　//   /test/g</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let reg4 = deepClone(reg3,hash = new WeakMap());</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(reg4);  　　//   /test/g</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(reg3 === reg4);  　　//false;</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px; color: #ff0000;">　　　　// Symbol</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　const symbol3 = Symbol('Json');</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(symbol3);   　　// Symbol(Json)</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　const symbol4 = deepClone(symbol3,hash = new WeakMap());</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(symbol4);  　　// Symbol(Json)</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(symbol3 === symbol4); 　　//true  Symbol是基本数据类型</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px; color: #ff0000;">　　　　// undefined</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let un3 = {name:'jason',age:27,sex:undefined};</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(un3);  　　//{name: "jason", age: 27, sex: undefined}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let un4 = deepClone(un3,hash = new WeakMap());</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(un4);  　　// {name: "jason", age: 27, sex: undefined}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(un3 === un4);　　 //false<br />　　　　<span style="color: #ff0000;">// Object  Array<br /></span></span></pre>
<pre><code><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let obj5 = { a: 1, b: 2 };</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　// 递归 遍历y时，直接走if语句 直接返回key关联对象的值,或者 undefined(没有key关联对象时)。</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let obj6 = { x: obj5, y: obj5 };</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　let obj7 = deepClone(obj6,hash = new WeakMap());</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　obj7.x.a = 1000;</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj6.x);　　//{a: 1, b: 2}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj6.y);　　//{a: 1, b: 2}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj7.x === obj7.y);　　//true;</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj7.x);　　//{a: 1000, b: 2}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj7.y);　　//{a: 1000, b: 2}</span><br /><span style="font-family: 'Microsoft YaHei'; font-size: 18px;">　　　　console.log(obj6 === obj7);　　//false</span></pre>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 18px; color: #ff0000;"><strong>如有错误或者不足还望指正，谢谢！！！<br /></strong></span></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>