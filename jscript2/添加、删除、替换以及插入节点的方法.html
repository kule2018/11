<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修添加、删除、替换以及插入节点的方法' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>添加、删除、替换以及插入节点的方法</center></div><div class='banquan'>原文出处:本文由博客园博主若水一方提供。<br/>
原文连接:https://www.cnblogs.com/ruo-shui-yi-fang/p/11413850.html</div><br>
    <p>先简单说下每个方法对应的语句和用法</p>
<p>obj.appendChild(node)　　把新的子节点添加到指定节点（插入新的子节点（元素）），这么说可能不是很明白，代码可能更清晰哈！node表示的就是要添加的节点。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 获取元素</span>
<span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">var</span> div=document.getElementById("div1"<span style="color: #000000;">);
</span><span style="color: #008080;"> 3</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 创造元素，给元素添加些文字</span>
<span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">var</span> p=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 5</span>     p.innerHTML="添加1"<span style="color: #000000;">;
</span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">var</span> p1=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 7</span>     p1.innerHTML="添加2"<span style="color: #000000;">;
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">var</span> p2=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 9</span>     p2.innerHTML="添加3"<span style="color: #000000;">;
</span><span style="color: #008080;">10</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 添加到div中</span>
<span style="color: #008080;">11</span> <span style="color: #000000;">    div.appendChild(p);
</span><span style="color: #008080;">12</span> <span style="color: #000000;">    div.appendChild(p1);
</span><span style="color: #008080;">13</span>     div.appendChild(p2);</pre>
</div>
<p>但是这个方法只能在父节点的末尾添加元素。那如果我们要在父元素的中间添加怎么办呢。w3c又提供了一个方法，就是obj.insertBefore(node,existingnode)。</p>
<p>obj.insertBefore(node,existingnode)　　表示的是在指定的已有子节点之前插入新的子节点。node表示要添加的节点，existingnode表示在其之前插入新节点的子节点。如果未规定，则 insertBefore 方法会在结尾插入。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span>      <span style="color: #008000;">//</span><span style="color: #008000;"> 获取元素</span>
<span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">var</span> div=document.getElementById("div1"<span style="color: #000000;">);
</span><span style="color: #008080;"> 3</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 创造元素，给元素添加些文字</span>
<span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">var</span> p=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 5</span>     p.innerHTML="添加1"<span style="color: #000000;">;
</span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">var</span> p1=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 7</span>     p1.innerHTML="添加2"<span style="color: #000000;">;
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">var</span> p2=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 9</span>     p2.innerHTML="添加3"<span style="color: #000000;">;
</span><span style="color: #008080;">10</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 添加到div中</span>
<span style="color: #008080;">11</span> <span style="color: #000000;">    div.appendChild(p);
</span><span style="color: #008080;">12</span> <span style="color: #000000;">    div.insertBefore(p1,p);
</span><span style="color: #008080;">13</span>     div.insertBefore(p2,p1);</pre>
</div>
<p>insetBefore()也可以说是插入以节点哈！</p>
<p>obj.replaceChild(newnode,oldnode)　　用新节点替换某个子节点。oldnode节点必须是obj元素子节点，他的返回值是一个指向已经被替换的那个子节点的引用指针。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span>     <span style="color: #0000ff;">var</span> div=document.getElementById("div1"<span style="color: #000000;">);
</span><span style="color: #008080;"> 2</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 创建元素，给元素添加些文字</span>
<span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">var</span> p=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 4</span>     p.innerHTML="添加1"<span style="color: #000000;">;
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">var</span> p1=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 6</span>     p1.innerHTML="添加2"<span style="color: #000000;">;
</span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">var</span> p2=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 8</span>     p2.innerHTML="添加3"<span style="color: #000000;">;
</span><span style="color: #008080;"> 9</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 添加到div中</span>
<span style="color: #008080;">10</span> <span style="color: #000000;">    div.appendChild(p);
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    div.insertBefore(p1,p);
</span><span style="color: #008080;">12</span> <span style="color: #000000;">    div.insertBefore(p2,p1);
</span><span style="color: #008080;">13</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 新创建一个元素</span>
<span style="color: #008080;">14</span>     <span style="color: #0000ff;">var</span> span=document.createElement("span"<span style="color: #000000;">);
</span><span style="color: #008080;">15</span>     span.innerHTML="span"<span style="color: #000000;">;
</span><span style="color: #008080;">16</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 替换第一个p</span>
<span style="color: #008080;">17</span>     div.replaceChild(span,p);</pre>
</div>
<p>如果被插入的元素本身还有子节点，则那些子节点也被插入到目标节点前。</p>
<p>replaceChild()方法也可以用文档树上的现有节点去替换另一个现有节点。代码更能清晰表现出！</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span>      <span style="color: #008000;">//</span><span style="color: #008000;"> 获取元素</span>
<span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">var</span> div=document.getElementById("div1"<span style="color: #000000;">);
</span><span style="color: #008080;"> 3</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 创建元素，给元素添加些文字</span>
<span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">var</span> p=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 5</span>     p.innerHTML="添加1"<span style="color: #000000;">;
</span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">var</span> p1=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 7</span>     p1.innerHTML="添加2"<span style="color: #000000;">;
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">var</span> p2=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 9</span>     p2.innerHTML="添加3"<span style="color: #000000;">;
</span><span style="color: #008080;">10</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 添加到div中</span>
<span style="color: #008080;">11</span> <span style="color: #000000;">    div.appendChild(p);
</span><span style="color: #008080;">12</span> <span style="color: #000000;">    div.insertBefore(p1,p);
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    div.insertBefore(p2,p1);
</span><span style="color: #008080;">14</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 将p2替换为p</span>
<span style="color: #008080;">15</span>     div.replaceChild(p,p2);</pre>
</div>
<p>使用replaceChild()方法的tips：</p>
<ol>
<li>当 oldnode 被替换时，所有与之相关的属性内容都将被移除。&nbsp;</li>
<li>newnode 必须先被建立。&nbsp;</li>
</ol>
<p>removeChild(node)&nbsp;　　 删除子节点（元素），这个就直接上代码吧！</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span>      <span style="color: #008000;">//</span><span style="color: #008000;"> 获取元素</span>
<span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">var</span> div=document.getElementById("div1"<span style="color: #000000;">);
</span><span style="color: #008080;"> 3</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 创建元素，给元素添加些文字</span>
<span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">var</span> p=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 5</span>     p.innerHTML="添加1"<span style="color: #000000;">;
</span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">var</span> p1=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 7</span>     p1.innerHTML="添加2"<span style="color: #000000;">;
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">var</span> p2=document.createElement("p"<span style="color: #000000;">);
</span><span style="color: #008080;"> 9</span>     p2.innerHTML="添加3"<span style="color: #000000;">;
</span><span style="color: #008080;">10</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 添加到div中</span>
<span style="color: #008080;">11</span> <span style="color: #000000;">    div.appendChild(p);
</span><span style="color: #008080;">12</span> <span style="color: #000000;">    div.insertBefore(p1,p);
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    div.insertBefore(p2,p1);
</span><span style="color: #008080;">14</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 删除p1</span>
<span style="color: #008080;">15</span>     div.removeChild(p1);</pre>
</div>
<p>知识点大概就是这样。没什么难点。不过我在做案例的时候，也碰到了一些问题。就是父元素的问题，之前做添加信息的案例时，发现如果在table中直接写tr时，然后用table当作父元素，给里面添加行，会报如下错误。</p>
<p><img src="./images/添加、删除、替换以及插入节点的方法0.png" alt="" /></p>
<p>这是因为table里面直接写tr，虽然不会报错，但浏览器会给你生成一个tbody，这样就会导致tr不是table的孩子，就会出现这样的错误，所以要注意父元素是否写对，其实也可通过子选父，这样保证了不会出现这样的错误。</p>
<p>在添加元素时也会有这样的问题。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span>     <span style="color: #0000ff;">var</span> odiv=document.getElementsByTagName("div"<span style="color: #000000;">);
</span><span style="color: #008080;">2</span> <span style="color: #000000;">    console.log(odiv);
</span><span style="color: #008080;">3</span>     <span style="color: #0000ff;">var</span> span =document.createElement("span"<span style="color: #000000;">);
</span><span style="color: #008080;">4</span>     odiv.appendChild(span);</pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span>     <span style="color: #0000ff;">var</span> odiv=document.getElementsByClassName("bx"<span style="color: #000000;">);
</span><span style="color: #008080;">2</span> <span style="color: #000000;">    console.log(odiv);
</span><span style="color: #008080;">3</span>     <span style="color: #0000ff;">var</span> span =document.createElement("span"<span style="color: #000000;">);
</span><span style="color: #008080;">4</span>     odiv.appendChild(span);</pre>
</div>
<p>这两种都会出现下列情况。</p>
<p><img src="./images/添加、删除、替换以及插入节点的方法1.png" alt="" /></p>
<p>但是用getElementById和querySelector可以添加成功。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span>     <span style="color: #0000ff;">var</span> odiv=document.querySelector("div"<span style="color: #000000;">);
</span><span style="color: #008080;">2</span>     <span style="color: #0000ff;">var</span> odiv=document.getElementById("main"<span style="color: #000000;">);
</span><span style="color: #008080;">3</span> <span style="color: #000000;">    console.log(odiv);
</span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">var</span> span =document.createElement("span"<span style="color: #000000;">);
</span><span style="color: #008080;">5</span>     odiv.appendChild(span);</pre>
</div>
<p>&nbsp;是因为getElementsByClassName等返回的数组，要解析才行。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span>     <span style="color: #0000ff;">var</span> odiv=document.getElementsByClassName("bx")[0<span style="color: #000000;">];
</span><span style="color: #008080;">2</span> <span style="color: #000000;">    console.log(odiv);
</span><span style="color: #008080;">3</span>     <span style="color: #0000ff;">var</span> span =document.createElement("span"<span style="color: #000000;">);
</span><span style="color: #008080;">4</span>     odiv.appendChild(span);</pre>
</div>
<p><img src="./images/添加、删除、替换以及插入节点的方法2.png" alt="" /></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>