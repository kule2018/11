<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修重读《学习JavaScript数据结构与算法-第三版》- 第3章 数组（二）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>重读《学习JavaScript数据结构与算法-第三版》- 第3章 数组（二）</center></div><div class='banquan'>原文出处:本文由博客园博主胡哥有话说提供。<br/>
原文连接:https://www.cnblogs.com/justbecoder/p/11364218.html</div><br>
    <h2 id="定场诗">定场诗</h2>
<pre><code><code>守法朝朝忧闷，强梁夜夜欢歌；
损人利己骑马骡，正值公平挨饿；
修桥补路瞎眼，杀人放火儿多；
我到西天问我佛，佛说：我也没辙！</code></pre>
<h2 id="前言">前言</h2>
<p>读《学习JavaScript数据结构与算法》- 第3章 数组，本小节将继续为各位小伙伴分享数组的相关知识：ES6数组的新功能。</p>
<h2 id="一es6数组新功能">一、ES6数组新功能</h2>
<h3 id="es5和es6数组新方法">ES5和ES6数组新方法</h3>
<table>
<thead>
<tr class="header">
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>@@iterator</td>
<td>返回一个包含数组键值对的迭代器对象，可以通过同步调用得到数组元素的键值对</td>
</tr>
<tr class="even">
<td>copyWithin</td>
<td>复制数组中一系列元素到同一数组指定的起始位置</td>
</tr>
<tr class="odd">
<td>entries</td>
<td>返回包含数组所有键值对的@@iterator</td>
</tr>
<tr class="even">
<td>includes</td>
<td>如果数组中存在某个元素则返回true，否则返回false</td>
</tr>
<tr class="odd">
<td>find</td>
<td>根据回调函数给定的条件从数组中查找元素，如果找到返回该元素</td>
</tr>
<tr class="even">
<td>findIndex</td>
<td>根据回调函数给定的条件从数组中查找元素，如果找到则返回该元素在数组中的索引</td>
</tr>
<tr class="odd">
<td>fill</td>
<td>用静态值填充数组</td>
</tr>
<tr class="even">
<td>from</td>
<td>根据已有数组创建一个新数组</td>
</tr>
<tr class="odd">
<td>keys</td>
<td>返回包含数组所有索引的@@iterator</td>
</tr>
<tr class="even">
<td>of</td>
<td>根据传入的参数创建新数组</td>
</tr>
<tr class="odd">
<td>value</td>
<td>返回包含数组所有值得@@iterator</td>
</tr>
</tbody>
</table>
<blockquote>
<p>除了以上新方法外，增加了for...of循环迭代数组以及从数组实例得到迭代器对象</p>
</blockquote>
<p><strong>for...of</strong></p>
<blockquote>
<p>迭代数组</p>
</blockquote>
<pre><code><code>let roles = [&#39;宋江&#39;, &#39;吴用&#39;, &#39;卢俊义&#39;]
for (let v of roles) {
  console.log(v)
}</code></pre>
<p><strong>@@iterator</strong></p>
<blockquote>
<p>需要通过Symbol.iterator来访问</p>
</blockquote>
<pre><code><code>let iterator = roles[Symbol.iterator]()
// .next()读取一次，依次迭代即可; 当迭代结束时，iterator.next().value返回undefined
console.log(iterator.next().value)

// 迭代
for (let v of iterator) {
    console.log(v)
}</code></pre>
<p><strong>entries</strong></p>
<blockquote>
<p>返回包含键值对的@@iterator</p>
</blockquote>
<pre><code><code>let rolesEntries = roles.entries()
console.log(rolesEntries.next().value) // [ 0, &#39;宋江&#39; ]

for (v of rolesEntries) {
    console.log(v)
}</code></pre>
<p><strong>keys</strong></p>
<blockquote>
<p>返回包含数组索引的@@iterator</p>
</blockquote>
<pre><code><code>let rolesKeys = roles.keys()
console.log(rolesKeys)

for (v of rolesKeys) {
    console.log(v)
}</code></pre>
<p><strong>values</strong></p>
<blockquote>
<p>返回包含数组值的@@iterator</p>
</blockquote>
<pre><code><code>let rolesValues = roles.values()
console.log(rolesValues)

for (v of rolesValues) {
    console.log(v)
}</code></pre>
<p><strong>Array.from</strong></p>
<blockquote>
<p>根据已有数组创建新数组</p>
</blockquote>
<pre><code><code>let newRoles = Array.from(roles)
console.log(newRoles) // [&#39;宋江&#39;, &#39;吴用&#39;, &#39;卢俊义&#39;]</code></pre>
<p><strong>Array.of</strong></p>
<blockquote>
<p>根据传入的参数创建一个新数组</p>
</blockquote>
<pre><code><code>let roles = Array.of(&#39;宋江&#39;, &#39;李顺&#39;, &#39;阮小七&#39;)
console.log(roles) // [ &#39;宋江&#39;, &#39;李顺&#39;, &#39;阮小七&#39; ]</code></pre>
<p><strong>Array.fill</strong></p>
<blockquote>
<p>使用静态值填充</p>
</blockquote>
<pre><code><code>let numbers = new Array(6)
numbers = Array.fill(1)
console.log(numbers) // [ 1, 1, 1, 1, 1, 1 ]</code></pre>
<p><strong>copyWithin</strong></p>
<blockquote>
<p>复制数组的一系列元素到同一数组指定的起始位置</p>
</blockquote>
<pre><code><code>let numbers = [1, 2, 3, 4, 5, 6]
// 将索引3到索引5位置之间的数据，复制到索引1位置
numbers.copyWithin(1, 3, 5)
console.log(numbers) // [ 1, 4, 5, 4, 5, 6 ]</code></pre>
<h3 id="数组排序">数组排序</h3>
<p><strong>rerverse</strong></p>
<blockquote>
<p>反转数组元素</p>
</blockquote>
<pre><code><code>let numbers = [1, 2, 3]
numbers.reverse()
console.log(numbers) // [ 3, 2, 1 ]</code></pre>
<p><strong>sort</strong></p>
<blockquote>
<p>按照字母顺序对数组进行排序，支持传入指定排序算法的函数作为参数</p>
</blockquote>
<pre><code><code>let arr = [&#39;a&#39;, &#39;b&#39;, &#39;d&#39;, &#39;c&#39;, &#39;f&#39;, &#39;e&#39;]
arr.sort()
console.log(arr) // [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39; ]</code></pre>
<p>那么问题来了！下面的代码console.log()输出什么?</p>
<pre><code><code>let numbers = [1, 2, 3, 10, 11, 12, 13]
numbers.sort()
console.log(numbers) // ??? 思考10秒钟.....</code></pre>
<blockquote>
<p>答案：[ 1, 10, 11, 12, 13, 2, 3 ] 手动疑问.gif</p>
<p>解析：sort()方法在进行数组元素排序时，把元素默认成字符串进行相互比较。</p>
</blockquote>
<p>那如何解决实际问题，得到我们想要的结果呢？</p>
<pre><code><code>let numbers = [1, 2, 3, 10, 11, 12, 13]
numbers.sort((a, b) =&gt; a - b)
console.log(numbers) // [ 1, 2, 3, 10, 11, 12, 13 ]</code></pre>
<p><strong>思考升级：</strong>字符串比较-大小写比较</p>
<pre><code><code>let users = [&#39;Ana&#39;, &#39;ana&#39;, &#39;John&#39;, &#39;john&#39;]
users.sort()
console.log(users) // ???</code></pre>
<blockquote>
<p>答案：[ 'Ana', 'John', 'ana', 'john' ] 手动疑问.gif</p>
<p>解析：JS中做字符串比较时，根据字符对应的ASCII码值来进行比较。A、J、a、j的ASCII码对应的是：65、74、97、106</p>
</blockquote>
<p><strong>解决问题</strong></p>
<pre><code><code>let users = [&#39;Ana&#39;, &#39;ana&#39;, &#39;John&#39;, &#39;john&#39;]
users.sort((a, b) =&gt; {
  if (a.toLocaleLowerCase() &gt; b.toLocaleLowerCase()) {
    return 1
  }
  if (a.toLocaleLowerCase() &lt; b.toLocaleLowerCase()) {
    return -1
  }
  return 0
})
console.log(users) // [ &#39;Ana&#39;, &#39;ana&#39;, &#39;John&#39;, &#39;john&#39; ]</code></pre>
<blockquote>
<p>如果想要实现小写字母排序在前，可使用localCompare方法<br />
users.sort((a, b) =&gt; a.localeCompare(b))</p>
</blockquote>
<p><strong>实际业务场景：</strong>一系列数据排序：如按年龄、级别等</p>
<pre><code><code>let users = [
  {
    name: &#39;王二狗&#39;,
      age: 20
  },
  {
    name: &#39;张三炮&#39;,
    age: 30
  },
  {
    name: &#39;李四&#39;,
    age: 15
  }
]
users.sort((a, b) =&gt; a.age &gt; b.age)
console.log(users) // [ { name: &#39;李四&#39;, age: 15 }, { name: &#39;王二狗&#39;, age: 20 }, { name: &#39;张三炮&#39;, age: 30 } ]</code></pre>
<h3 id="数组搜索">数组搜索</h3>
<p>ES5中为我们提供了indexOf()和lastIndexOf()方法查找元素，但是该二者方法只能查询字符串数据，如查询对象数组中的某个元素就力有不逮了。</p>
<p><strong>业务场景：</strong> 购物车添加商品操作</p>
<blockquote>
<p>当我们向购物车中添加一件商品时，要考虑该商品是否已经在购物车中存在了。</p>
<p>已存在，则购买数量+1；否则为新增购物车操作。</p>
</blockquote>
<p>原先处理方式：遍历购物车数组myCart，判断待添加购物车商品tmpGoods的id和已有商品的id进行比对，若相同，则获取当前元素索引，执行操作</p>
<p><strong>拥抱ES6的新变化吧！- findIndex</strong></p>
<pre><code><code>// 已有购物车商品信息
let myCart = [
  {
    id: 1001,
    name: &#39;xxx-范冰冰版&#39;,
    num: 1
  },
  {
    id: 1002,
    name: &#39;xxx-志玲姐姐版&#39;,
    num: 2
  },
  {
    id: 1003,
    name: &#39;xxx-小岳岳版&#39;,
    num: 1
  }
]

// 待加入购物车的商品
let tmpGoods = {
  id: 1003,
  name: &#39;xxx-小岳岳版&#39;,
  num: 1
}

// 检测该商品是否已经存在于购物车 
let index = myCart.findIndex(item =&gt; item.id === tmpGoods.id)
console.log(index)
if (index !== -1) {
  myCart[index].num += tmpGoods.num
} else {
  myCart.push(tmpGoods)
}
console.log(myCart)</code></pre>
<blockquote>
<p>findIndex 支持传入指定的函数作为筛选条件，返回第一个匹配元素的索引位置，如果不存在则返回-1</p>
<p>find 支持传入指定的函数作为条件，返回第一个匹配元素的值</p>
</blockquote>
<p><strong>ES7 - includes</strong></p>
<blockquote>
<p>includes 方法会根据条件查询数组中是否有匹配元素，如果存在则返回true；否则返回false</p>
</blockquote>
<pre><code><code>let roles = [&#39;诸葛亮&#39;, &#39;荆轲&#39;, &#39;虞姬&#39;, &#39;亚瑟&#39;]
console.log(roles.includes(&#39;荆轲&#39;)) // true
console.log(roles.includes(&#39;哪吒&#39;)) // false</code></pre>
<h3 id="输出数组为字符串">输出数组为字符串</h3>
<blockquote>
<p>toString()和join()方法</p>
</blockquote>
<p><strong>toString</strong></p>
<blockquote>
<p>将数组所有元素输出为字符串</p>
</blockquote>
<pre><code><code>let numbers = [1, 2, 3, 4]
console.log(numbers.toString()) // 1,2,3,4</code></pre>
<p><strong>join</strong></p>
<blockquote>
<p>将数组元素使用指定的字符进行拼接，默认使用,</p>
</blockquote>
<pre><code><code>let numbers = [1, 2, 3, 4]
console.log(numbers.join(&#39;-&#39;)) // 1-2-3-4</code></pre>
<h2 id="后记">后记</h2>
<p>以上就是胡哥今天给大家分享的内容，喜欢的小伙伴记得<strong><code>收藏</code></strong>、<strong><code>转发</code></strong>、点击右下角按钮<strong><code>在看</code></strong>，推荐给更多小伙伴呦，欢迎多多留言交流...</p>
<blockquote>
<p>胡哥有话说，一个有技术，有情怀的胡哥！京东开放平台首席前端攻城狮。与你一起聊聊大前端，分享前端系统架构，框架实现原理，最新最高效的技术实践！</p>
</blockquote>
<p>长按扫码关注，更帅更漂亮呦！关注胡哥有话说公众号，可与胡哥继续深入交流呦！</p>
<p><img src="./images/重读《学习JavaScript数据结构与算法-第三版》- 第3章 数组（二）0.png" alt="胡哥有话说" /></p>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>